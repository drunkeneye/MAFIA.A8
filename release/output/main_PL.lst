mads 2.1.7
  1497 					opt l+
   115 = 0000				?EXTDETECT = 0
   116 = 0000				?VBXDETECT = 0
   117
   118 0C75				RCASM 'dlists/dlist_console.asm' DL_CONSOLE_ADR 0 0 0 0 0 0 0 0
Macro: RESOURCE.RCASM [Source: resource.asm]
     2 0C75				org RESORIGIN
     4 = 0020			len = .sizeof(_DL_CONSOLE_ADR)
     6 				mcpy	ift main.DL_CONSOLE_ADR+len >= $bc20
     7 0C75 A9 00 8D 2F 02		mva #0 sdmctl
     8 0C7A 8D 00 D4			sta dmactl
    11 0C7D 20 41 0C			jsr sys.off
    13 0C80 A9 9E 85 88 A9 0C +  MWA #DATA EDX
    13 0C88 A9 70 85 8C A9 FF +  MWA #MAIN.DL_CONSOLE_ADR ECX
    13 0C90 A9 20 85 84 A9 00 +  MWA #LEN EAX
    13 0C98 20 00 0C		 JSR RESOURCE.MEMCPY
    15 0C9B 4C 65 0C			jmp sys.on
    16 0C9E			data
Source: dlist_console.asm
     1 = 0000			DL_BLANK1 = 0; // 1 blank line
     2 = 0010			DL_BLANK2 = %00010000; // 2 blank lines
     3 = 0020			DL_BLANK3 = %00100000; // 3 blank lines
     4 = 0030			DL_BLANK4 = %00110000; // 4 blank lines
     5 = 0040			DL_BLANK5 = %01000000; // 5 blank lines
     6 = 0050			DL_BLANK6 = %01010000; // 6 blank lines
     7 = 0060			DL_BLANK7 = %01100000; // 7 blank lines
     8 = 0070			DL_BLANK8 = %01110000; // 8 blank lines
    10 = 0080			DL_DLI = %10000000; // Order to run DLI
    11 = 0040			DL_LMS = %01000000; // Order to set new memory address
    12 = 0020			DL_VSCROLL = %00100000; // Turn on vertical scroll on this line
    13 = 0010			DL_HSCROLL = %00010000; // Turn on horizontal scroll on this line
    15 = 0002			DL_MODE_40x24T2 = 2; // Antic Modes
    16 = 0004			DL_MODE_40x24T5 = 4;
    17 = 0005			DL_MODE_40x12T5 = 5;
    18 = 0006			DL_MODE_20x24T5 = 6;
    19 = 0007			DL_MODE_20x12T5 = 7;
    20 = 0008			DL_MODE_40x24G4 = 8;
    21 = 0009			DL_MODE_80x48G2 = 9;
    22 = 000A			DL_MODE_80x48G4 = $A;
    23 = 000B			DL_MODE_160x96G2 = $B;
    24 = 000C			DL_MODE_160x192G2 = $C;
    25 = 000D			DL_MODE_160x96G4 = $D;
    26 = 000E			DL_MODE_160x192G4 = $E;
    27 = 000F			DL_MODE_320x192G2 = $F;
    29 = 0001			DL_JMP = %00000001; // Order to jump
    30 = 0041			DL_JVB = %01000001; // Jump to begining
    10 = B000			TXT_ADDRESS = $b000;
    11 = B400			MAINFONT_ADR = $b400;
    12 = B800			PMG_BASE_ADR = $b800;
    15 = C000			LOCATION_ADR = $c000; // $c000-c91c
    20 = C920			VARBLOCK2 = $c920; // $c920-c9b0 or so
    21 = CA00			VARBLOCK1 = $ca00; // $c920-ce80
    29 = D800			MAP_FNT_ADDRESS = $d800;
    30 = DC00			MAP_SCR_ADDRESS = $dc00;
    31 = E000			LOC_MAP_ADR = $e000; // could be used as second font, but we dont.
    35 = E400			VARFIGHT = $e400; // around $300, end is less then $e700
    36 = E700			E7_ADR = $e700;
    40 = F000			RMT_PLAYER = $f000;
    41 = F700			RMT_MODUL = $f700;
    43 = FF70			DL_CONSOLE_ADR = $ff70; // $1f bytes as is
    44 = FF90			DL_MAP_ADR = $ff90; // $1f bytes as is
    45 = FFB0			DL_BLACK_CONSOLE_ADR = $ffb0; //$7 bytes as is
    46 = FFB8			DL_BITMAP_ADR = $ffb8; //$7 bytes as is
    49 = 1FFA			XEX_ADDRESS = $2000-6; //?
    53 = B000			SAP_PLAYER = $b000;
    54 = B003			SAP_PLAYER_3 = $b003;
    55 = B006			SAP_PLAYER_6 = $b006;
    41 FF70			dl_start
    42 FF70 F0			    dta DL_DLI + DL_BLANK8                                        ; // 8 blank line
    43 FF71 70			    dta DL_BLANK8
    44 FF72 70			    dta DL_BLANK8
    45 FF73 70			    dta DL_BLANK8
    46 FF74 42 00 B0		    dta DL_MODE_40x24T2 + DL_LMS, a(TXT_ADDRESS)                  ; // mode 0 line + text memory start
    47 FF77 02 02 02 02 02 02 +     :22 dta DL_MODE_40x24T2                                       ; // x mode 0 line
    48 FF8D 41 70 FF		    dta DL_JVB, a(dl_start)                                       ; // jump to beginning
    23 02E2-02E3> 75 0C			ini mcpy
    25 					.print '$R RCASM   ',main.DL_CONSOLE_ADR,'..',main.DL_CONSOLE_ADR+len-1," 'dlists/dlist_console.asm'"
    25 				$R RCASM   $FF70..$FF8F 'dlists/dlist_console.asm'
Source: main_PL.a65
   119 0CBE				RCASM 'dlists/dlist_black_console.asm' DL_BLACK_CONSOLE_ADR 0 0 0 0 0 0 0 0
Macro: RESOURCE.RCASM [Source: resource.asm]
     2 0CBE				org RESORIGIN
     4 = 0007			len = .sizeof(_DL_BLACK_CONSOLE_ADR)
     6 				mcpy	ift main.DL_BLACK_CONSOLE_ADR+len >= $bc20
     7 0C75-0CA4> A9 00 8D 2F + 	mva #0 sdmctl
     8 0C7A 8D 00 D4			sta dmactl
    11 0C7D 20 41 0C			jsr sys.off
    13 0C80 A9 9E 85 88 A9 0C +  MWA #DATA EDX
    13 0C88 A9 B0 85 8C A9 FF +  MWA #MAIN.DL_BLACK_CONSOLE_ADR ECX
    13 0C90 A9 07 85 84 A9 00 +  MWA #LEN EAX
    13 0C98 20 00 0C		 JSR RESOURCE.MEMCPY
    15 0C9B 4C 65 0C			jmp sys.on
    16 0C9E			data
Source: dlist_black_console.asm
     1 = 0000			DL_BLANK1 = 0; // 1 blank line
     2 = 0010			DL_BLANK2 = %00010000; // 2 blank lines
     3 = 0020			DL_BLANK3 = %00100000; // 3 blank lines
     4 = 0030			DL_BLANK4 = %00110000; // 4 blank lines
     5 = 0040			DL_BLANK5 = %01000000; // 5 blank lines
     6 = 0050			DL_BLANK6 = %01010000; // 6 blank lines
     7 = 0060			DL_BLANK7 = %01100000; // 7 blank lines
     8 = 0070			DL_BLANK8 = %01110000; // 8 blank lines
    10 = 0080			DL_DLI = %10000000; // Order to run DLI
    11 = 0040			DL_LMS = %01000000; // Order to set new memory address
    12 = 0020			DL_VSCROLL = %00100000; // Turn on vertical scroll on this line
    13 = 0010			DL_HSCROLL = %00010000; // Turn on horizontal scroll on this line
    15 = 0002			DL_MODE_40x24T2 = 2; // Antic Modes
    16 = 0004			DL_MODE_40x24T5 = 4;
    17 = 0005			DL_MODE_40x12T5 = 5;
    18 = 0006			DL_MODE_20x24T5 = 6;
    19 = 0007			DL_MODE_20x12T5 = 7;
    20 = 0008			DL_MODE_40x24G4 = 8;
    21 = 0009			DL_MODE_80x48G2 = 9;
    22 = 000A			DL_MODE_80x48G4 = $A;
    23 = 000B			DL_MODE_160x96G2 = $B;
    24 = 000C			DL_MODE_160x192G2 = $C;
    25 = 000D			DL_MODE_160x96G4 = $D;
    26 = 000E			DL_MODE_160x192G4 = $E;
    27 = 000F			DL_MODE_320x192G2 = $F;
    29 = 0001			DL_JMP = %00000001; // Order to jump
    30 = 0041			DL_JVB = %01000001; // Jump to begining
    34 FFB0			dl_start
    35 FFB0 F0			    dta DL_DLI + DL_BLANK8                                        ; // 8 blank line
    36 FFB1 70 70 70		    :3 dta DL_BLANK8
    37 FFB4 41 B0 FF		    dta DL_JVB, a(dl_start)                                       ; // jump to beginning
    23 02E2-02E3> 75 0C			ini mcpy
    25 					.print '$R RCASM   ',main.DL_BLACK_CONSOLE_ADR,'..',main.DL_BLACK_CONSOLE_ADR+len-1," 'dlists/dlist_black_console.asm'"
    25 				$R RCASM   $FFB0..$FFB6 'dlists/dlist_black_console.asm'
Source: main_PL.a65
   120 0CA5				RCASM 'dlists/dlist_map.asm' DL_MAP_ADR 0 0 0 0 0 0 0 0
Macro: RESOURCE.RCASM [Source: resource.asm]
     2 0CA5				org RESORIGIN
     4 = 0020			len = .sizeof(_DL_MAP_ADR)
     6 				mcpy	ift main.DL_MAP_ADR+len >= $bc20
     7 0C75-0CBD> A9 00 8D 2F + 	mva #0 sdmctl
     8 0C7A 8D 00 D4			sta dmactl
    11 0C7D 20 41 0C			jsr sys.off
    13 0C80 A9 9E 85 88 A9 0C +  MWA #DATA EDX
    13 0C88 A9 90 85 8C A9 FF +  MWA #MAIN.DL_MAP_ADR ECX
    13 0C90 A9 20 85 84 A9 00 +  MWA #LEN EAX
    13 0C98 20 00 0C		 JSR RESOURCE.MEMCPY
    15 0C9B 4C 65 0C			jmp sys.on
    16 0C9E			data
Source: dlist_map.asm
     1 = 0070			DL_BLANK8 = %01110000;
     2 = 0080			DL_DLI = %10000000;
     3 = 0040			DL_LMS = %01000000;
     4 = 0002			DL_MODE_40x24T2 = 2; // Antic Modes
     5 = 0004			DL_MODE_40x24T5 = 4;
     6 = 0005			DL_MODE_40x12T5 = 5;
     7 = 0041			DL_JVB = %01000001;
    10 = B000			TXT_ADDRESS = $b000;
    11 = B400			MAINFONT_ADR = $b400;
    12 = B800			PMG_BASE_ADR = $b800;
    15 = C000			LOCATION_ADR = $c000; // $c000-c91c
    20 = C920			VARBLOCK2 = $c920; // $c920-c9b0 or so
    21 = CA00			VARBLOCK1 = $ca00; // $c920-ce80
    29 = D800			MAP_FNT_ADDRESS = $d800;
    30 = DC00			MAP_SCR_ADDRESS = $dc00;
    31 = E000			LOC_MAP_ADR = $e000; // could be used as second font, but we dont.
    35 = E400			VARFIGHT = $e400; // around $300, end is less then $e700
    36 = E700			E7_ADR = $e700;
    40 = F000			RMT_PLAYER = $f000;
    41 = F700			RMT_MODUL = $f700;
    43 = FF70			DL_CONSOLE_ADR = $ff70; // $1f bytes as is
    44 = FF90			DL_MAP_ADR = $ff90; // $1f bytes as is
    45 = FFB0			DL_BLACK_CONSOLE_ADR = $ffb0; //$7 bytes as is
    46 = FFB8			DL_BITMAP_ADR = $ffb8; //$7 bytes as is
    49 = 1FFA			XEX_ADDRESS = $2000-6; //?
    53 = B000			SAP_PLAYER = $b000;
    54 = B003			SAP_PLAYER_3 = $b003;
    55 = B006			SAP_PLAYER_6 = $b006;
    17 FF90			dl_start
    18 FF90 70			    dta DL_BLANK8
    19 FF91 70			    dta DL_BLANK8
    20 FF92 F0			    dta DL_DLI + DL_BLANK8
    21 FF93 44 00 DC		    dta DL_MODE_40x24T5 + DL_LMS, a(MAP_SCR_ADDRESS)
    22 FF96 04 04 04 04 04 04 +     :23-6 dta DL_MODE_40x24T5
    23 FFA7 84			    dta DL_MODE_40x24T5 + DL_DLI
    24 FFA8 02			    dta DL_MODE_40x24T2
    25 FFA9 82			    dta DL_MODE_40x24T2 + DL_DLI
    26 FFAA 02			    dta DL_MODE_40x24T2
    27 FFAB 02			    dta DL_MODE_40x24T2
    28 FFAC 82			    dta DL_MODE_40x24T2 + DL_DLI
    29 FFAD 41 90 FF		    dta DL_JVB, a(dl_start)
    23 02E2-02E3> 75 0C			ini mcpy
    25 					.print '$R RCASM   ',main.DL_MAP_ADR,'..',main.DL_MAP_ADR+len-1," 'dlists/dlist_map.asm'"
    25 				$R RCASM   $FF90..$FFAF 'dlists/dlist_map.asm'
Source: main_PL.a65
   121 0CBE				RCASM 'dlists/dlist_bitmap.asm' DL_BITMAP_ADR 0 0 0 0 0 0 0 0
Macro: RESOURCE.RCASM [Source: resource.asm]
     2 0CBE				org RESORIGIN
     4 = 001C			len = .sizeof(_DL_BITMAP_ADR)
     6 				mcpy	ift main.DL_BITMAP_ADR+len >= $bc20
     7 0C75-0CB9> A9 00 8D 2F + 	mva #0 sdmctl
     8 0C7A 8D 00 D4			sta dmactl
    11 0C7D 20 41 0C			jsr sys.off
    13 0C80 A9 9E 85 88 A9 0C +  MWA #DATA EDX
    13 0C88 A9 B8 85 8C A9 FF +  MWA #MAIN.DL_BITMAP_ADR ECX
    13 0C90 A9 1C 85 84 A9 00 +  MWA #LEN EAX
    13 0C98 20 00 0C		 JSR RESOURCE.MEMCPY
    15 0C9B 4C 65 0C			jmp sys.on
    16 0C9E			data
Source: dlist_bitmap.asm
     1 = 0070			DL_BLANK8 = %01110000;
     2 = 0080			DL_DLI = %10000000;
     3 = 0040			DL_LMS = %01000000;
     4 = 0002			DL_MODE_40x24T2 = 2; // Antic Modes
     5 = 0004			DL_MODE_40x24T5 = 4;
     6 = 0005			DL_MODE_40x12T5 = 5;
     7 = 0041			DL_JVB = %01000001;
    10 = B000			TXT_ADDRESS = $b000;
    11 = B400			MAINFONT_ADR = $b400;
    12 = B800			PMG_BASE_ADR = $b800;
    15 = C000			LOCATION_ADR = $c000; // $c000-c91c
    20 = C920			VARBLOCK2 = $c920; // $c920-c9b0 or so
    21 = CA00			VARBLOCK1 = $ca00; // $c920-ce80
    29 = D800			MAP_FNT_ADDRESS = $d800;
    30 = DC00			MAP_SCR_ADDRESS = $dc00;
    31 = E000			LOC_MAP_ADR = $e000; // could be used as second font, but we dont.
    35 = E400			VARFIGHT = $e400; // around $300, end is less then $e700
    36 = E700			E7_ADR = $e700;
    40 = F000			RMT_PLAYER = $f000;
    41 = F700			RMT_MODUL = $f700;
    43 = FF70			DL_CONSOLE_ADR = $ff70; // $1f bytes as is
    44 = FF90			DL_MAP_ADR = $ff90; // $1f bytes as is
    45 = FFB0			DL_BLACK_CONSOLE_ADR = $ffb0; //$7 bytes as is
    46 = FFB8			DL_BITMAP_ADR = $ffb8; //$7 bytes as is
    49 = 1FFA			XEX_ADDRESS = $2000-6; //?
    53 = B000			SAP_PLAYER = $b000;
    54 = B003			SAP_PLAYER_3 = $b003;
    55 = B006			SAP_PLAYER_6 = $b006;
    17 FFB8			dl_start
    18 FFB8 70			    dta DL_BLANK8
    19 FFB9 70			    dta DL_BLANK8
    20 FFBA F0			    dta DL_DLI + DL_BLANK8
    21 FFBB 44 00 DC		    dta DL_MODE_40x24T5 + DL_LMS, a(MAP_SCR_ADDRESS)
    22 FFBE 04 04 04 04 04 04 +     :8 dta DL_MODE_40x24T5
    23 FFC6 84			    dta DL_MODE_40x24T5 + DL_DLI
    24 FFC7 04 04 04 04 04 04 +     :10 dta DL_MODE_40x24T5
    25 FFD1 41 B8 FF		    dta DL_JVB, a(dl_start)
    23 02E2-02E3> 75 0C			ini mcpy
    25 					.print '$R RCASM   ',main.DL_BITMAP_ADR,'..',main.DL_BITMAP_ADR+len-1," 'dlists/dlist_bitmap.asm'"
    25 				$R RCASM   $FFB8..$FFD3 'dlists/dlist_bitmap.asm'
Source: main_PL.a65
   122 0CBA				RCDATA '../assets/player.pmg' PMG_BASE_ADR 0 0 0 0 0 0 0 0
Macro: RESOURCE.RCDATA [Source: resource.asm]
     2 = 0180			len = .filesize('../assets/player.pmg')-0
    28 0CBA				org main.PMG_BASE_ADR
    30 B800-B97F> 10 00 00 14 + 	ins '../assets/player.pmg',0
    32 					.print '$R RCDATA  ',main.PMG_BASE_ADR,'..',*-1," '../assets/player.pmg'"
    32 				$R RCDATA  $B800..$B97F '../assets/player.pmg'
Source: main_PL.a65
   123 B980				RCDATA '../assets/mafia.fnt' MAINFONT_ADR 0 0 0 0 0 0 0 0
Macro: RESOURCE.RCDATA [Source: resource.asm]
     2 = 0400			len = .filesize('../assets/mafia.fnt')-0
    28 B980				org main.MAINFONT_ADR
    30 B400-B7FF> 00 00 00 00 + 	ins '../assets/mafia.fnt',0
    32 					.print '$R RCDATA  ',main.MAINFONT_ADR,'..',*-1," '../assets/mafia.fnt'"
    32 				$R RCDATA  $B400..$B7FF '../assets/mafia.fnt'
Source: main_PL.a65
   124 B800				RCASM 'dlists/dlist_black_console.asm' TXT_ADDRESS 0 0 0 0 0 0 0 0
Macro: RESOURCE.RCASM [Source: resource.asm]
     2 B800				org RESORIGIN
     4 = 0007			len = .sizeof(_TXT_ADDRESS)
     6 				mcpy	ift main.TXT_ADDRESS+len >= $bc20
    11 0C75-0C9C> 20 41 0C		jsr sys.off
    13 0C78 A9 96 85 88 A9 0C +  MWA #DATA EDX
    13 0C80 A9 00 85 8C A9 B0 +  MWA #MAIN.TXT_ADDRESS ECX
    13 0C88 A9 07 85 84 A9 00 +  MWA #LEN EAX
    13 0C90 20 00 0C		 JSR RESOURCE.MEMCPY
    15 0C93 4C 65 0C			jmp sys.on
    16 0C96			data
Source: dlist_black_console.asm
     1 = 0000			DL_BLANK1 = 0; // 1 blank line
     2 = 0010			DL_BLANK2 = %00010000; // 2 blank lines
     3 = 0020			DL_BLANK3 = %00100000; // 3 blank lines
     4 = 0030			DL_BLANK4 = %00110000; // 4 blank lines
     5 = 0040			DL_BLANK5 = %01000000; // 5 blank lines
     6 = 0050			DL_BLANK6 = %01010000; // 6 blank lines
     7 = 0060			DL_BLANK7 = %01100000; // 7 blank lines
     8 = 0070			DL_BLANK8 = %01110000; // 8 blank lines
    10 = 0080			DL_DLI = %10000000; // Order to run DLI
    11 = 0040			DL_LMS = %01000000; // Order to set new memory address
    12 = 0020			DL_VSCROLL = %00100000; // Turn on vertical scroll on this line
    13 = 0010			DL_HSCROLL = %00010000; // Turn on horizontal scroll on this line
    15 = 0002			DL_MODE_40x24T2 = 2; // Antic Modes
    16 = 0004			DL_MODE_40x24T5 = 4;
    17 = 0005			DL_MODE_40x12T5 = 5;
    18 = 0006			DL_MODE_20x24T5 = 6;
    19 = 0007			DL_MODE_20x12T5 = 7;
    20 = 0008			DL_MODE_40x24G4 = 8;
    21 = 0009			DL_MODE_80x48G2 = 9;
    22 = 000A			DL_MODE_80x48G4 = $A;
    23 = 000B			DL_MODE_160x96G2 = $B;
    24 = 000C			DL_MODE_160x192G2 = $C;
    25 = 000D			DL_MODE_160x96G4 = $D;
    26 = 000E			DL_MODE_160x192G4 = $E;
    27 = 000F			DL_MODE_320x192G2 = $F;
    29 = 0001			DL_JMP = %00000001; // Order to jump
    30 = 0041			DL_JVB = %01000001; // Jump to begining
    34 B000			dl_start
    35 B000 F0			    dta DL_DLI + DL_BLANK8                                        ; // 8 blank line
    36 B001 70 70 70		    :3 dta DL_BLANK8
    37 B004 41 00 B0		    dta DL_JVB, a(dl_start)                                       ; // jump to beginning
    23 02E2-02E3> 75 0C			ini mcpy
    25 					.print '$R RCASM   ',main.TXT_ADDRESS,'..',main.TXT_ADDRESS+len-1," 'dlists/dlist_black_console.asm'"
    25 				$R RCASM   $B000..$B006 'dlists/dlist_black_console.asm'
Source: main_PL.a65
   125 0C9D				RMTPLAY2 '../music/sfx_s.feat' RMT_PLAYER 0 0 0 0 0 0 0 0
Macro: RESOURCE.RMTPLAY2 [Source: resource.asm]
     2 0C9D				org RESORIGIN
     4 = 0000			STEREOMODE	= 0
     5 = F000			PLAYER		= main.RMT_PLAYER
     7 = 061C			len	= .sizeof(_RMT_PLAYER)
    11 0C75-12B1> 20 41 0C	mcpy	jsr sys.off
    13 0C78 A9 96 85 88 A9 0C +  MWA #DATA EDX
    13 0C80 A9 00 85 8C A9 F0 +  MWA #PLAYER ECX
    13 0C88 A9 1C 85 84 A9 06 +  MWA #.SIZEOF(_RMT_PLAYER) EAX
    13 0C90 20 00 0C		 JSR RESOURCE.MEMCPY
    15 0C93 4C 65 0C			jmp sys.on
    22 0C96			data
Source: sfx_s.feat
     3 = 0001			FEAT_SFX		equ 1
     4 = 0000			FEAT_GLOBALVOLUMEFADE	equ 0		;RMTGLOBALVOLUMEFADE variable
     5 = 0000			FEAT_NOSTARTINGSONGLINE	equ 0
     6 = 0001			FEAT_INSTRSPEED		equ 1
     7 = 0000			FEAT_CONSTANTSPEED		equ 0		;(4 times)
     8 = 0001			FEAT_COMMAND1		equ 1		;(4 times)
     9 = 0000			FEAT_COMMAND2		equ 0		;(0 times)
    10 = 0000			FEAT_COMMAND3		equ 0		;(0 times)
    11 = 0000			FEAT_COMMAND4		equ 0		;(0 times)
    12 = 0000			FEAT_COMMAND5		equ 0		;(0 times)
    13 = 0000			FEAT_COMMAND6		equ 0		;(0 times)
    14 = 0000			FEAT_COMMAND7SETNOTE		equ 0		;(0 times)
    15 = 0000			FEAT_COMMAND7VOLUMEONLY		equ 0		;(0 times)
    16 = 0000			FEAT_PORTAMENTO		equ 0		;(0 times)
    17 = 0001			FEAT_FILTER		equ 1		;(22 times)
    18 = 0001			FEAT_FILTERG0L		equ 1		;(22 times)
    19 = 0000			FEAT_FILTERG1L		equ 0		;(0 times)
    20 = 0000			FEAT_FILTERG0R		equ 0		;(0 times)
    21 = 0000			FEAT_FILTERG1R		equ 0		;(0 times)
    22 = 0000			FEAT_BASS16		equ 0		;(0 times)
    23 = 0000			FEAT_BASS16G1L		equ 0		;(0 times)
    24 = 0000			FEAT_BASS16G3L		equ 0		;(0 times)
    25 = 0000			FEAT_BASS16G1R		equ 0		;(0 times)
    26 = 0000			FEAT_BASS16G3R		equ 0		;(0 times)
    27 = 0000			FEAT_VOLUMEONLYG0L		equ 0		;(0 times)
    28 = 0000			FEAT_VOLUMEONLYG2L		equ 0		;(0 times)
    29 = 0000			FEAT_VOLUMEONLYG3L		equ 0		;(0 times)
    30 = 0000			FEAT_VOLUMEONLYG0R		equ 0		;(0 times)
    31 = 0000			FEAT_VOLUMEONLYG2R		equ 0		;(0 times)
    32 = 0000			FEAT_VOLUMEONLYG3R		equ 0		;(0 times)
    33 = 0000			FEAT_TABLETYPE		equ 0		;(0 times)
    34 = 0000			FEAT_TABLEMODE		equ 0		;(0 times)
    35 = 0000			FEAT_TABLEGO		equ 0		;(0 times)
    36 = 0001			FEAT_AUDCTLMANUALSET		equ 1		;(3 times)
    37 = 0000			FEAT_VOLUMEMIN		equ 0		;(0 times)
    38 = 0001			FEAT_EFFECTVIBRATO		equ 1		;(1 times)
    39 = 0001			FEAT_EFFECTFSHIFT		equ 1		;(1 times)
Source: rmt_player_reloc.asm
    99 = 0004			TRACKS		equ 4
   101 = 000C			INSTRPAR	equ 12
   103 = 0001			FEAT_EFFECTS equ FEAT_EFFECTVIBRATO||FEAT_EFFECTFSHIFT
   105 = 0000			FEAT_RECALCADDR = 0
   106 = 0000			FEAT_PATCH = 0
   108 = 0000			RMT_STANDARD = 0	;standard RMT 1.28
   109 = 0001			RMT_PATCH0A = 1		;16-bit bass 0a patch
   113 = 00E0			p_tis = .ZPVAR
   128 F000 4C FC F1			jmp rmt_play			; rmt_play at first
   130 F003 4C 12 F0			jmp rmt_init
   131 F006 4C 18 F2			jmp rmt_p3
   132 F009 4C 6A F0			jmp rmt_silence
   133 F00C 4C 56 F3			jmp SetPokey
   136 F00F 4C 80 F1			jmp rmt_sfx			;* A=note(0,..,60),X=channel(0,..,3 or 0,..,7),Y=instrument*2(0,2,4,..,126)
   138 F012			rmt_init
   139 F012 86 E8			stx ns
   140 F014 84 E9			sty ns+1
   142 F016 48				pha
   152 F017 A0 00			ldy #track_endvariables-track_variables
   153 F019 A9 00			lda #0
   154 F01B 99 9A F5		ri0	sta track_variables-1,y
   155 F01E 88				dey
   156 F01F D0 FA			bne ri0
   177 F021 A0 03			ldy #3
   178 F023 B1 E8			lda (ns),y	;RMTx
   179 F025 29 0F			and #%00001111
   180 F027 8D 1A F6			sta v_channel_number
   181 F02A 8D 1B F6			sta v_channel_number_less1
   182 F02D CE 1B F6			dec v_channel_number_less1
   184 F030 C8				iny
   185 F031 B1 E8			lda (ns),y
   186 F033 8D 19 F6			sta v_maxtracklen
   187 F036 C8				iny
   189 F037 B1 E8			lda (ns),y
   190 F039 8D 14 F6			sta v_speed
   211 F03C A0 08			ldy #8
   212 F03E B1 E8		ri1	lda (ns),y
   221 F040 99 D8 00			sta p_tis-8,y
   222 F043 C8				iny
   223 F044 C0 10			cpy #8+8
   224 F046 D0 F6			bne ri1
   227 F048 A9 00			lda #0
   228 F04A 85 90			sta tmp
   229 F04C AD 1A F6			lda v_channel_number
   230 F04F C9 08			cmp #8
   231 F051 68				pla
   232 F052 90 03			bcc ?x4
   233 F054 0A				asl @
   234 F055 26 90			rol tmp
   235 F057 0A			?x4	asl @
   236 F058 26 90			rol tmp
   237 F05A 0A				asl @
   238 F05B 26 90			rol tmp
   240 F05D 65 E6			adc p_song
   241 F05F 85 E6			sta p_song
   242 F061 A5 90			lda tmp
   243 F063 65 E7			adc p_song+1
   244 F065 85 E7			sta p_song+1
   246 F067 20 7F F0			jsr GetSongLineTrackLineInitOfNewSetInstrumentsOnlyRmtp3
   247 F06A			rmt_silence
   261 F06A A9 00			lda #0
   262 F06C 8D 08 D2			sta $d208
   263 F06F A0 03			ldy #3
   264 F071 8C 0F D2			sty $d20f
   265 F074 A0 08			ldy #8
   266 F076 99 00 D2		si1	sta $d200,y
   267 F079 88				dey
   268 F07A 10 FA			bpl si1
   273 F07C A9 01			lda #FEAT_INSTRSPEED
   275 F07E 60				rts
   276 F07F			GetSongLineTrackLineInitOfNewSetInstrumentsOnlyRmtp3
   277 F07F			GetSongLine
   278 F07F A2 00			ldx #0
   279 F081 8E 18 F6			stx v_abeat
   280 F084			nn0
   281 F084 8A			nn1	txa
   282 F085 A8				tay
   283 F086 B1 E6			lda (p_song),y
   284 F088 C9 FE			cmp #$fe
   285 F08A B0 2E			bcs nn2
   286 F08C A8				tay
   287 F08D B1 E2			lda (p_trackslbstable),y
   292 F08F 9D 9B F5			sta trackn_db,x
   293 F092 B1 E4			lda (p_trackshbstable),y
   297 F094 9D 9F F5		nn1a sta trackn_hb,x
   298 F097 A9 00			lda #0
   299 F099 9D A3 F5			sta trackn_idx,x
   300 F09C A9 01			lda #1
   301 F09E 9D A7 F5		nn1a2 sta trackn_pause,x
   302 F0A1 A9 80			lda #$80
   303 F0A3 9D BB F5			sta trackn_instrx2,x
   304 F0A6 E8				inx
   305 F0A7			xtracks01
   309 F0A7 E0 04			cpx #TRACKS
   311 F0A9 D0 D9			bne nn1
   312 F0AB A5 E6			lda p_song
   313 F0AD 18				clc
   314 F0AE 6D 1A F6		xtracks02	adc v_channel_number	;#TRACKS
   315 F0B1 85 E6			sta p_song
   316 F0B3 90 1B			bcc GetTrackLine
   317 F0B5 E6 E7			inc p_song+1
   318 F0B7			nn1b
   319 F0B7 4C D0 F0			jmp GetTrackLine
   320 F0BA			nn2
   321 F0BA F0 04			beq nn3
   322 F0BC			nn2a
   323 F0BC A9 00			lda #0
   324 F0BE F0 DE			beq nn1a2
   325 F0C0			nn3
   326 F0C0 A0 02			ldy #2
   327 F0C2 B1 E6			lda (p_song),y
   332 F0C4 AA				tax
   333 F0C5 C8				iny
   334 F0C6 B1 E6			lda (p_song),y
   338 F0C8 85 E7			sta p_song+1
   339 F0CA 86 E6			stx p_song
   340 F0CC A2 00			ldx #0
   341 F0CE F0 B4			beq nn0
   342 F0D0			GetTrackLine
   343 F0D0			oo0
   344 F0D0			oo0a
   346 F0D0 AD 14 F6			lda v_speed
   347 F0D3 8D 15 F6			sta v_bspeed
   349 F0D6 A2 FF			ldx #-1
   350 F0D8			oo1
   351 F0D8 E8				inx
   352 F0D9 DE A7 F5			dec trackn_pause,x
   353 F0DC D0 42			bne oo1x
   354 F0DE			oo1b
   355 F0DE BD 9B F5			lda trackn_db,x
   356 F0E1 85 E8			sta ns
   357 F0E3 BD 9F F5			lda trackn_hb,x
   358 F0E6 85 E9			sta ns+1
   359 F0E8			oo1i
   360 F0E8 BC A3 F5			ldy trackn_idx,x
   361 F0EB FE A3 F5			inc trackn_idx,x
   362 F0EE B1 E8			lda (ns),y
   363 F0F0 85 EE			sta reg1
   364 F0F2 29 3F			and #$3f
   365 F0F4 C9 3D			cmp #61
   366 F0F6 F0 0E			beq oo1a
   367 F0F8 B0 36			bcs oo2
   368 F0FA 9D AB F5			sta trackn_note,x
   372 F0FD C8				iny
   373 F0FE B1 E8			lda (ns),y
   374 F100 4A				lsr @
   375 F101 29 7E			and #$3f*2
   376 F103 9D BB F5			sta trackn_instrx2,x
   377 F106			oo1a
   378 F106 A9 01			lda #1
   379 F108 9D A7 F5			sta trackn_pause,x
   380 F10B BC A3 F5			ldy trackn_idx,x
   381 F10E FE A3 F5			inc trackn_idx,x
   382 F111 B1 E8			lda (ns),y
   383 F113 4A				lsr @
   384 F114 66 EE			ror reg1
   385 F116 4A				lsr @
   386 F117 66 EE			ror reg1
   387 F119 A5 EE			lda reg1
   395 F11B 29 F0			and #$f0
   396 F11D 9D AF F5			sta trackn_volume,x
   397 F120			oo1x
   398 F120			xtracks03sub1
   402 F120 E0 03			cpx #TRACKS-1
   404 F122 D0 B4			bne oo1
   406 F124 AD 15 F6			lda v_bspeed
   407 F127 8D 14 F6			sta v_speed
   411 F12A 8D 13 F6			sta v_aspeed
   412 F12D 4C 75 F1			jmp InitOfNewSetInstrumentsOnly
   413 F130			oo2
   414 F130 C9 3F			cmp #63
   415 F132 F0 1B			beq oo63
   416 F134 A5 EE			lda reg1
   417 F136 29 C0			and #$c0
   418 F138 F0 09			beq oo62_b
   419 F13A 0A				asl @
   420 F13B 2A				rol @
   421 F13C 2A				rol @
   422 F13D 9D A7 F5			sta trackn_pause,x
   423 F140 4C 20 F1			jmp oo1x
   424 F143			oo62_b
   425 F143 C8				iny
   426 F144 B1 E8			lda (ns),y
   427 F146 9D A7 F5			sta trackn_pause,x
   428 F149 FE A3 F5			inc trackn_idx,x
   429 F14C 4C 20 F1			jmp oo1x
   430 F14F			oo63
   431 F14F A5 EE			lda reg1
   433 F151 30 0C			bmi oo63_1X
   434 F153 C8				iny
   435 F154 B1 E8			lda (ns),y
   436 F156 8D 15 F6			sta v_bspeed
   437 F159 FE A3 F5			inc trackn_idx,x
   438 F15C 4C E8 F0			jmp oo1i
   439 F15F			oo63_1X
   441 F15F C9 FF			cmp #255
   442 F161 F0 09			beq oo63_11
   443 F163 C8				iny
   444 F164 B1 E8			lda (ns),y
   445 F166 9D A3 F5			sta trackn_idx,x
   446 F169 4C E8 F0			jmp oo1i
   447 F16C			oo63_11
   448 F16C 4C 7F F0			jmp GetSongLine
   449 F16F 4C 18 F2		p2xrmtp3	jmp rmt_p3
   450 F172 CA			p2x0 dex
   451 F173 30 FA			 bmi p2xrmtp3
   452 F175			InitOfNewSetInstrumentsOnly
   453 F175 BC BB F5		p2x1 ldy trackn_instrx2,x
   454 F178 30 F8			bmi p2x0
   456 F17A 20 88 F1			jsr SetUpInstrumentY2
   457 F17D 4C 72 F1			jmp p2x0
   458 F180			rmt_sfx
   459 F180 9D AB F5			sta trackn_note,x
   463 F183 A9 00			lda RMTSFXVOLUME:: #$00
   466 F185 9D AF F5			sta trackn_volume,x
   468 F188			SetUpInstrumentY2
   469 F188 B1 E0			lda (p_instrstable),y
   474 F18A 9D BF F5			sta trackn_instrdb,x
   475 F18D 85 EC			sta nt
   476 F18F C8				iny
   477 F190 B1 E0			lda (p_instrstable),y
   481 F192 9D C3 F5			sta trackn_instrhb,x
   482 F195 85 ED			sta nt+1
   484 F197 A9 01			lda #1
   485 F199 9D 03 F6			sta trackn_filter,x
   497 F19C A0 02			ldy #2
   499 F19E B1 EC			lda (nt),y
   500 F1A0 9D CB F5			sta trackn_instrlen,x
   501 F1A3 C8				iny
   502 F1A4 B1 EC			lda (nt),y
   503 F1A6 9D CF F5			sta trackn_instrlop,x
   504 F1A9 C8				iny
   505 F1AA B1 EC			lda (nt),y
   506 F1AC 9D EB F5			sta trackn_tabletypespeed,x
   510 F1AF 9D FB F5			sta trackn_tablespeeda,x
   517 F1B2 C8				iny
   518 F1B3 B1 EC			lda (nt),y
   519 F1B5 9D 0F F6			sta trackn_audctl,x
   520 F1B8 C8				iny
   524 F1B9 B1 EC			lda (nt),y
   525 F1BB 9D D7 F5			sta trackn_volumeslidedepth,x
   535 F1BE A0 08			ldy #8
   539 F1C0 B1 EC			lda (nt),y
   540 F1C2 9D DF F5			sta trackn_effdelay,x
   542 F1C5 C8				iny
   543 F1C6 B1 EC			lda (nt),y
   544 F1C8 A8				tay
   545 F1C9 B9 C2 F3			lda vibtabbeg,y
   546 F1CC 9D E3 F5			sta trackn_effvibratoa,x
   549 F1CF A0 0A			ldy #10
   550 F1D1 B1 EC			lda (nt),y
   551 F1D3 9D E7 F5			sta trackn_effshift,x
   554 F1D6 A9 80			lda #128
   555 F1D8 9D DB F5			sta trackn_volumeslidevalue,x
   556 F1DB 9D BB F5			sta trackn_instrx2,x
   557 F1DE 0A				asl @
   558 F1DF 9D D3 F5			sta trackn_instrreachend,x
   559 F1E2 9D B7 F5			sta trackn_shiftfrq,x
   560 F1E5 A8				tay
   561 F1E6 B1 EC			lda (nt),y
   562 F1E8 9D F7 F5			sta trackn_tableend,x
   563 F1EB 69 00			adc #0
   564 F1ED 9D C7 F5			sta trackn_instridx,x
   565 F1F0 A9 0C			lda #INSTRPAR
   566 F1F2 9D F3 F5			sta trackn_tablea,x
   567 F1F5 A8				tay
   568 F1F6 B1 EC			lda (nt),y
   569 F1F8 9D EF F5			sta trackn_tablenote,x
   570 F1FB			xata_rtshere
   572 F1FB 60				rts
   576 F1FC			rmt_play
   577 F1FC			rmt_p0
   578 F1FC 20 56 F3			jsr SetPokey
   579 F1FF			rmt_p1
   591 F1FF			rmt_p2
   592 F1FF CE 13 F6			dec v_aspeed
   593 F202 D0 14			bne rmt_p3
   594 F204 EE 18 F6			inc v_abeat
   595 F207 AD 18 F6			lda v_abeat
   596 F20A CD 19 F6			cmp v_maxtracklen
   597 F20D F0 03			beq p2o3
   598 F20F 4C D0 F0			jmp GetTrackLine
   599 F212			p2o3
   600 F212 4C 7F F0			jmp GetSongLineTrackLineInitOfNewSetInstrumentsOnlyRmtp3
   601 F215 4C 16 F3		go_ppnext	jmp ppnext
   602 F218			rmt_p3
   606 F218			xtracks05sub1
   610 F218 A2 03			ldx #TRACKS-1
   612 F21A			pp1
   613 F21A BD C3 F5			lda trackn_instrhb,x
   614 F21D F0 F6			beq go_ppnext
   615 F21F 85 E9			sta ns+1
   616 F221 BD BF F5			lda trackn_instrdb,x
   617 F224 85 E8			sta ns
   618 F226 BC C7 F5			ldy trackn_instridx,x
   619 F229 B1 E8			lda (ns),y
   620 F22B 85 EE			sta reg1
   621 F22D C8				iny
   622 F22E B1 E8			lda (ns),y
   623 F230 85 EF			sta reg2
   624 F232 C8				iny
   625 F233 B1 E8			lda (ns),y
   626 F235 85 F0			sta reg3
   627 F237 C8				iny
   628 F238 98				tya
   629 F239 DD CB F5			cmp trackn_instrlen,x
   630 F23C 90 0A			bcc pp2
   631 F23E F0 08			beq pp2
   632 F240 A9 80			lda #$80
   633 F242 9D D3 F5			sta trackn_instrreachend,x
   634 F245			pp1b
   635 F245 BD CF F5			lda trackn_instrlop,x
   636 F248 9D C7 F5		pp2	sta trackn_instridx,x
   637 F24B A5 EE			lda reg1
   655 F24D 29 0F			and #$0f
   656 F24F 1D AF F5			ora trackn_volume,x
   657 F252 A8				tay
   658 F253 B9 9B F4			lda volumetab,y
   659 F256 85 90			sta tmp
   660 F258 A5 EF			lda reg2
   661 F25A 29 0E			and #$0e
   662 F25C A8				tay
   663 F25D B9 8D F3			lda tabbegad,y		;lda tabbeganddistor,y
   664 F260 85 EA			sta nr
   665 F262 B9 8E F3			lda tabbegad+1,y
   666 F265 85 EB			sta nr+1
   667 F267 A5 90			lda tmp
   671 F269 19 9D F3			ora tabdistor,y
   673 F26C 9D 0B F6			sta trackn_audc,x
   674 F26F			InstrumentsEffects
   676 F26F BD DF F5			lda trackn_effdelay,x
   677 F272 F0 21			beq ei2
   678 F274 C9 01			cmp #1
   679 F276 D0 1A			bne ei1
   680 F278 BD B7 F5			lda trackn_shiftfrq,x
   682 F27B 18				clc
   683 F27C 7D E7 F5			adc trackn_effshift,x
   686 F27F 18				clc
   687 F280 BC E3 F5			ldy trackn_effvibratoa,x
   688 F283 79 AD F3			adc vib0,y
   690 F286 9D B7 F5			sta trackn_shiftfrq,x
   692 F289 B9 C6 F3			lda vibtabnext,y
   693 F28C 9D E3 F5			sta trackn_effvibratoa,x
   695 F28F 4C 95 F2			jmp ei2
   696 F292			ei1
   697 F292 DE DF F5			dec trackn_effdelay,x
   698 F295			ei2
   700 F295 BC F7 F5			ldy trackn_tableend,x
   701 F298 C0 0D			cpy #INSTRPAR+1
   702 F29A 90 30			bcc ei3
   703 F29C BD FB F5			lda trackn_tablespeeda,x
   704 F29F 10 25			bpl ei2f
   705 F2A1			ei2c
   706 F2A1 98				tya
   707 F2A2 DD F3 F5			cmp trackn_tablea,x
   708 F2A5 D0 07			bne ei2c2
   712 F2A7 A9 0C			lda #INSTRPAR
   714 F2A9 9D F3 F5			sta trackn_tablea,x
   715 F2AC D0 03			bne ei2a
   716 F2AE			ei2c2
   717 F2AE FE F3 F5			inc trackn_tablea,x
   718 F2B1			ei2a
   719 F2B1 BD BF F5			lda trackn_instrdb,x
   720 F2B4 85 EC			sta nt
   721 F2B6 BD C3 F5			lda trackn_instrhb,x
   722 F2B9 85 ED			sta nt+1
   723 F2BB BC F3 F5			ldy trackn_tablea,x
   724 F2BE B1 EC			lda (nt),y
   732 F2C0 9D EF F5			sta trackn_tablenote,x
   733 F2C3 BD EB F5			lda trackn_tabletypespeed,x
   737 F2C6			ei2f
   738 F2C6 38				sec
   739 F2C7 E9 01			sbc #1
   740 F2C9 9D FB F5			sta trackn_tablespeeda,x
   741 F2CC			ei3
   742 F2CC BD D3 F5			lda trackn_instrreachend,x
   743 F2CF 10 18			bpl ei4
   744 F2D1 BD AF F5			lda trackn_volume,x
   745 F2D4 F0 13			beq ei4
   751 F2D6 A8				tay
   752 F2D7 BD DB F5			lda trackn_volumeslidevalue,x
   753 F2DA 18				clc
   754 F2DB 7D D7 F5			adc trackn_volumeslidedepth,x
   755 F2DE 9D DB F5			sta trackn_volumeslidevalue,x
   756 F2E1 90 06			bcc ei4
   757 F2E3 98				tya
   758 F2E4 E9 10			sbc #16
   759 F2E6 9D AF F5			sta trackn_volume,x
   760 F2E9			ei4
   766 F2E9 A5 EF			lda reg2
   768 F2EB 9D FF F5			sta trackn_command,x
   770 F2EE 29 70			and #$70
   772 F2F0 F0 05			beq cmd0
   809 F2F2			cmd1
   811 F2F2 A5 F0			lda reg3
   812 F2F4 4C 13 F3			jmp cmd0c
   814 F2F7			cmd2
   821 F2F7			cmd3
   829 F2F7			cmd4
   838 F2F7			cmd5
   881 F2F7			cmd6
   893 F2F7			cmd7
   913 F2F7			cmd0
   914 F2F7 BD AB F5			lda trackn_note,x
   915 F2FA 18				clc
   916 F2FB 65 F0			adc reg3
   917 F2FD			cmd0a
   922 F2FD 18				clc
   923 F2FE 7D EF F5			adc trackn_tablenote,x
   924 F301 C9 3D			cmp #61
   925 F303 90 07			bcc cmd0a1
   926 F305 A9 00			lda #0
   927 F307 9D 0B F6			sta trackn_audc,x
   928 F30A A9 3F			lda #63
   929 F30C			cmd0a1
   933 F30C A8				tay
   934 F30D B1 EA			lda (nr),y
   935 F30F 18				clc
   936 F310 7D B7 F5			adc trackn_shiftfrq,x
   961 F313			cmd0c
   962 F313 9D 07 F6			sta trackn_audf,x
   963 F316			pp9
   999 F316			ppnext
  1000 F316 CA				dex
  1001 F317 30 03			bmi rmt_p4
  1002 F319 4C 1A F2			jmp pp1
  1003 F31C			rmt_p4
  1005 F31C AD 0F F6			lda trackn_audctl+0
  1006 F31F 0D 10 F6			ora trackn_audctl+1
  1007 F322 0D 11 F6			ora trackn_audctl+2
  1008 F325 0D 12 F6			ora trackn_audctl+3
  1009 F328 AA				tax
  1013 F329			qq1
  1014 F329 8E 16 F6			stx v_audctl
  1017 F32C AD FF F5			lda trackn_command+0
  1018 F32F 10 1A			bpl qq2
  1019 F331 AD 0B F6			lda trackn_audc+0
  1020 F334 29 0F			and #$0f
  1021 F336 F0 13			beq qq2
  1022 F338 AD 07 F6			lda trackn_audf+0
  1023 F33B 18				clc
  1024 F33C 6D 03 F6			adc trackn_filter+0
  1025 F33F 8D 09 F6			sta trackn_audf+2
  1031 F342 A9 00			lda #0
  1033 F344 8D 0D F6			sta trackn_audc+2
  1034 F347			qq1a
  1035 F347 8A				txa
  1036 F348 09 04			ora #4
  1037 F34A AA				tax
  1039 F34B			qq2
  1063 F34B			qq3
  1065 F34B EC 16 F6			cpx v_audctl
  1066 F34E D0 00			bne qq5
  1138 F350			qq5
  1139 F350 8E 16 F6			stx v_audctl
  1284 F353			rmt_p5
  1288 F353 A9 01			lda #1
  1290 F355 60				rts
  1291 F356			SetPokey
  1371 F356 AC 16 F6			ldy v_audctl
  1372 F359 AD 07 F6			lda trackn_audf+0
  1373 F35C AE 0B F6			ldx trackn_audc+0
  1374 F35F 8D 00 D2			sta $d200
  1375 F362 8E 01 D2			stx $d201
  1376 F365 AD 08 F6			lda trackn_audf+1
  1377 F368 AE 0C F6			ldx trackn_audc+1
  1378 F36B 8D 02 D2			sta $d200+2
  1379 F36E 8E 03 D2			stx $d201+2
  1380 F371 AD 09 F6			lda trackn_audf+2
  1381 F374 AE 0D F6			ldx trackn_audc+2
  1382 F377 8D 04 D2			sta $d200+4
  1383 F37A 8E 05 D2			stx $d201+4
  1384 F37D AD 0A F6			lda trackn_audf+3
  1385 F380 AE 0E F6			ldx trackn_audc+3
  1386 F383 8D 06 D2			sta $d200+6
  1387 F386 8E 07 D2			stx $d201+6
  1388 F389 8C 08 D2			sty $d208
  1435 F38C 60				rts
  1436 F38D			RMTPLAYEREND
  1457 F38D			tabbegad:
  1458 F38D 5B F4			.word frqtabpure
  1459 F38F 5B F4			.word frqtabpure
  1460 F391 5B F4			.word frqtabpure
  1461 F393 DB F3			.word frqtabbass1
  1462 F395 5B F4			.word frqtabpure
  1463 F397 5B F4			.word frqtabpure
  1464 F399 DB F3			.word frqtabbass1
  1465 F39B 1B F4			.word frqtabbass2
  1467 F39D			tabdistor:
  1469 = F39E			miker_tabdistor = *+1
  1470 F39D 00 00			.byte $00,$00
  1471 F39F 20 20			.byte $20,$20
  1472 F3A1 40 40			.byte $40,$40
  1473 F3A3 C0 A0			.byte $c0,$a0	;!
  1474 F3A5 80 80			.byte $80,$80
  1475 F3A7 A0 A0			.byte $a0,$a0
  1476 F3A9 C0 C0			.byte $c0,$c0
  1477 F3AB C0 C0			.byte $c0,$c0
  1490 F3AD 00			vib0	.byte 0
  1491 F3AE 01 FF FF 01		vib1	.byte 1,-1,-1,1
  1492 F3B2 01 00 FF FF 00 01	vib2	.byte 1,0,-1,-1,0,1
  1493 F3B8 01 01 00 FF FF FF + vib3	.byte 1,1,0,-1,-1,-1,-1,0,1,1
  1503 F3C2			vibtabbeg:
  1504 F3C2 00 01 05 0B			.byte   $00,$01,$05,$0B
  1506 F3C6			vibtabnext:
  1507 F3C6 00				.byte   $00
  1508 F3C7 02 03 04 01			.byte	$02,$03,$04,$01
  1509 F3CB 06 07 08 09 0A 05		.byte	$06,$07,$08,$09,$0A,$05
  1510 F3D1 0C 0D 0E 0F 10 11 + 	.byte	$0C,$0D,$0E,$0F,$10,$11,$12,$13,$14,$0B
  1542 F3DB			frqtab
  1543 F3DB			frqtabbass1
  1544 F3DB BF B6 AA A1 98 8F + 	.byte $BF,$B6,$AA,$A1,$98,$8F,$89,$80,$F2,$E6,$DA,$CE,$BF,$B6,$AA,$A1
  1545 F3EB 98 8F 89 80 7A 71 + 	.byte $98,$8F,$89,$80,$7A,$71,$6B,$65,$5F,$5C,$56,$50,$4D,$47,$44,$3E
  1546 F3FB 3C 38 35 32 2F 2D + 	.byte $3C,$38,$35,$32,$2F,$2D,$2A,$28,$25,$23,$21,$1F,$1D,$1C,$1A,$18
  1547 F40B 17 16 14 13 12 11 + 	.byte $17,$16,$14,$13,$12,$11,$10,$0F,$0E,$0D,$0C,$0B,$0A,$09,$08,$07
  1548 F41B			frqtabbass2
  1549 F41B FF F1 E4 D8 CA C0 + 	.byte $FF,$F1,$E4,$D8,$CA,$C0,$B5,$AB,$A2,$99,$8E,$87,$7F,$79,$73,$70
  1550 F42B 66 61 5A 55 52 4B + 	.byte $66,$61,$5A,$55,$52,$4B,$48,$43,$3F,$3C,$39,$37,$33,$30,$2D,$2A
  1551 F43B 28 25 24 21 1F 1E + 	.byte $28,$25,$24,$21,$1F,$1E,$1C,$1B,$19,$17,$16,$15,$13,$12,$11,$10
  1552 F44B 0F 0E 0D 0C 0B 0A + 	.byte $0F,$0E,$0D,$0C,$0B,$0A,$09,$08,$07,$06,$05,$04,$03,$02,$01,$00
  1553 F45B			frqtabpure
  1554 F45B F3 E6 D9 CC C1 B5 + 	.byte $F3,$E6,$D9,$CC,$C1,$B5,$AD,$A2,$99,$90,$88,$80,$79,$72,$6C,$66
  1555 F46B 60 5B 55 51 4C 48 + 	.byte $60,$5B,$55,$51,$4C,$48,$44,$40,$3C,$39,$35,$32,$2F,$2D,$2A,$28
  1556 F47B 25 23 21 1F 1D 1C + 	.byte $25,$23,$21,$1F,$1D,$1C,$1A,$18,$17,$16,$14,$13,$12,$11,$10,$0F
  1557 F48B 0E 0D 0C 0B 0A 09 + 	.byte $0E,$0D,$0C,$0B,$0A,$09,$08,$07,$06,$05,$04,$03,$02,$01,$00,$00
  1560 F49B			volumetab
  1561 F49B 00 00 00 00 00 00 + 	.byte $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
  1562 F4AB 00 00 00 00 00 00 + 	.byte $00,$00,$00,$00,$00,$00,$00,$00,$01,$01,$01,$01,$01,$01,$01,$01
  1563 F4BB 00 00 00 00 01 01 + 	.byte $00,$00,$00,$00,$01,$01,$01,$01,$01,$01,$01,$01,$02,$02,$02,$02
  1564 F4CB 00 00 00 01 01 01 + 	.byte $00,$00,$00,$01,$01,$01,$01,$01,$02,$02,$02,$02,$02,$03,$03,$03
  1565 F4DB 00 00 01 01 01 01 + 	.byte $00,$00,$01,$01,$01,$01,$02,$02,$02,$02,$03,$03,$03,$03,$04,$04
  1566 F4EB 00 00 01 01 01 02 + 	.byte $00,$00,$01,$01,$01,$02,$02,$02,$03,$03,$03,$04,$04,$04,$05,$05
  1567 F4FB 00 00 01 01 02 02 + 	.byte $00,$00,$01,$01,$02,$02,$02,$03,$03,$04,$04,$04,$05,$05,$06,$06
  1568 F50B 00 00 01 01 02 02 + 	.byte $00,$00,$01,$01,$02,$02,$03,$03,$04,$04,$05,$05,$06,$06,$07,$07
  1569 F51B 00 01 01 02 02 03 + 	.byte $00,$01,$01,$02,$02,$03,$03,$04,$04,$05,$05,$06,$06,$07,$07,$08
  1570 F52B 00 01 01 02 02 03 + 	.byte $00,$01,$01,$02,$02,$03,$04,$04,$05,$05,$06,$07,$07,$08,$08,$09
  1571 F53B 00 01 01 02 03 03 + 	.byte $00,$01,$01,$02,$03,$03,$04,$05,$05,$06,$07,$07,$08,$09,$09,$0A
  1572 F54B 00 01 01 02 03 04 + 	.byte $00,$01,$01,$02,$03,$04,$04,$05,$06,$07,$07,$08,$09,$0A,$0A,$0B
  1573 F55B 00 01 02 02 03 04 + 	.byte $00,$01,$02,$02,$03,$04,$05,$06,$06,$07,$08,$09,$0A,$0A,$0B,$0C
  1574 F56B 00 01 02 03 03 04 + 	.byte $00,$01,$02,$03,$03,$04,$05,$06,$07,$08,$09,$0A,$0A,$0B,$0C,$0D
  1575 F57B 00 01 02 03 04 05 + 	.byte $00,$01,$02,$03,$04,$05,$06,$07,$07,$08,$09,$0A,$0B,$0C,$0D,$0E
  1576 F58B 00 01 02 03 04 05 + 	.byte $00,$01,$02,$03,$04,$05,$06,$07,$08,$09,$0A,$0B,$0C,$0D,$0E,$0F
  1579 F59B			track_variables
  1688 F59B			track_endvariables
  1704 = 00E0			P_INSTRSTABLE
  1704 = 00E2			P_TRACKSLBSTABLE
  1704 = 00E4			P_TRACKSHBSTABLE
  1704 = 00E6			P_SONG
  1704 = 00E8			NS
  1704 = 00EA			NR
  1704 = 00EC			NT
  1704 = 00EE			REG1
  1704 = 00EF			REG2
  1704 = 00F0			REG3
  1704 = 00F1			TMP
  1704 = F59B 00 00 00 00	TRACKN_DB
  1704 = F59F 00 00 00 00	TRACKN_HB
  1704 = F5A3 00 00 00 00	TRACKN_IDX
  1704 = F5A7 00 00 00 00	TRACKN_PAUSE
  1704 = F5AB 00 00 00 00	TRACKN_NOTE
  1704 = F5AF 00 00 00 00	TRACKN_VOLUME
  1704 = F5B3 00 00 00 00	TRACKN_DISTOR
  1704 = F5B7 00 00 00 00	TRACKN_SHIFTFRQ
  1704 = F5BB 00 00 00 00	TRACKN_INSTRX2
  1704 = F5BF 00 00 00 00	TRACKN_INSTRDB
  1704 = F5C3 00 00 00 00	TRACKN_INSTRHB
  1704 = F5C7 00 00 00 00	TRACKN_INSTRIDX
  1704 = F5CB 00 00 00 00	TRACKN_INSTRLEN
  1704 = F5CF 00 00 00 00	TRACKN_INSTRLOP
  1704 = F5D3 00 00 00 00	TRACKN_INSTRREACHEND
  1704 = F5D7 00 00 00 00	TRACKN_VOLUMESLIDEDEPTH
  1704 = F5DB 00 00 00 00	TRACKN_VOLUMESLIDEVALUE
  1704 = F5DF 00 00 00 00	TRACKN_EFFDELAY
  1704 = F5E3 00 00 00 00	TRACKN_EFFVIBRATOA
  1704 = F5E7 00 00 00 00	TRACKN_EFFSHIFT
  1704 = F5EB 00 00 00 00	TRACKN_TABLETYPESPEED
  1704 = F5EF 00 00 00 00	TRACKN_TABLENOTE
  1704 = F5F3 00 00 00 00	TRACKN_TABLEA
  1704 = F5F7 00 00 00 00	TRACKN_TABLEEND
  1704 = F5FB 00 00 00 00	TRACKN_TABLESPEEDA
  1704 = F5FF 00 00 00 00	TRACKN_COMMAND
  1704 = F603 00 00 00 00	TRACKN_FILTER
  1704 = F607 00 00 00 00	TRACKN_AUDF
  1704 = F60B 00 00 00 00	TRACKN_AUDC
  1704 = F60F 00 00 00 00	TRACKN_AUDCTL
  1704 = F613 00		V_ASPEED
  1704 = F614 00		V_SPEED
  1704 = F615 00		V_BSPEED
  1704 = F616 00		V_AUDCTL
  1704 = F617 00		V_AUDCTL2
  1704 = F618 00		V_ABEAT
  1704 = F619 00		V_MAXTRACKLEN
  1704 = F61A 00		V_CHANNEL_NUMBER
  1704 = F61B 00		V_CHANNEL_NUMBER_LESS1
    29 02E2-02E3> 75 0C			ini mcpy
    37 					.echo '$R RMTPLAY ',_RMT_PLAYER.p_tis,'..',.zpvar-1,', ',PLAYER,'..',_RMT_PLAYER+.sizeof(_RMT_PLAYER)-1," '../music/sfx_s.feat'"
    37 				$R RMTPLAY $00E0..$00F1, $F000..$F61B '../music/sfx_s.feat'
Source: main_PL.a65
   126 12B2				RMT '../music/sfx_s.rmt' RMT_MODUL 0 0 0 0 0 0 0 0
Macro: RESOURCE.RMT [Source: resource.asm]
     2 = 0290			len = .filesize('../music/sfx_s.rmt')
     5 12B2				org RESORIGIN
     7 0C75-0F1F> 20 41 0C	mcpy	jsr sys.off
     9 0C78 A9 96 85 88 A9 0C +  MWA #DATA EDX
     9 0C80 A9 00 85 8C A9 F7 +  MWA #MAIN.RMT_MODUL ECX
     9 0C88 A9 8A 85 84 A9 02 +  MWA #LEN-6 EAX
     9 0C90 20 00 0C		 JSR RESOURCE.MEMCPY
    11 0C93 4C 65 0C			jmp sys.on
    13 0C96			data	rmt_relocator '../music/sfx_s.rmt',main.RMT_MODUL
Macro: RESOURCE.RMT_RELOCATOR [Source: resource.asm]
     2 0C96				.get [$100] '../music/sfx_s.rmt',0,6				// wczytujemy plik do bufora MADS'a
     6 = F700			new_add = MAIN.RMT_MODUL						// nowy adres dla modulu RMT
     8 = B200			old_add	= .wget[$102]					// stary adres modulu RMT
    10 = 028A			length	= .wget[$104] - old_add + 1			// dlugosc pliku RMT bez naglowka DOS'u
    12 = 4500			ofset	= new_add-old_add
    14 0C96				.get [old_add-6] '../music/sfx_s.rmt'
    16  [B1FC] 00			.put[old_add-4] = .lo(new_add)			// poprawiamy nag³ówek DOS'a
    17  [B1FD] F7			.put[old_add-3] = .hi(new_add)			// tak aby zawieral informacje o nowym
    19  [B1FE] 89			.put[old_add-2] = .lo(new_add + length - 1)	// adresie modulu RMT
    20  [B1FF] F9			.put[old_add-1] = .hi(new_add + length - 1)
    22 = 0034			type	= .get[old_add+3]
    24 = B210			pinst	= .get[old_add+8] + .get[old_add+9]<<8
    25 = B222			pltrc	= .get[old_add+10] + .get[old_add+11]<<8
    26 = B232			phtrc	= .get[old_add+12] + .get[old_add+13]<<8
    27 = B442			ptlst	= .get[old_add+14] + .get[old_add+15]<<8
    29  [B208] 10			.put[old_add+8] = .lo(pinst+ofset)
    30  [B209] F7			.put[old_add+9] = .hi(pinst+ofset)
    32  [B20A] 22			.put[old_add+10] = .lo(pltrc+ofset)
    33  [B20B] F7			.put[old_add+11] = .hi(pltrc+ofset)
    35  [B20C] 32			.put[old_add+12] = .lo(phtrc+ofset)
    36  [B20D] F7			.put[old_add+13] = .hi(phtrc+ofset)
    38  [B20E] 42			.put[old_add+14] = .lo(ptlst+ofset)
    39  [B20F] F9			.put[old_add+15] = .hi(ptlst+ofset)
    43 = B242				?TMP = .GET[PINST+#*2] + .GET[PINST+#*2+1]<<8
    43  [B210] 42			.PUT[PINST+#*2] = .LO(?TMP+OFSET)
    43  [B211] F7			.PUT[PINST+#*2+1] = .HI(?TMP+OFSET)
    43 = B26A				?TMP = .GET[PINST+#*2] + .GET[PINST+#*2+1]<<8
    43  [B212] 6A			.PUT[PINST+#*2] = .LO(?TMP+OFSET)
    43  [B213] F7			.PUT[PINST+#*2+1] = .HI(?TMP+OFSET)
    43 = B2B0				?TMP = .GET[PINST+#*2] + .GET[PINST+#*2+1]<<8
    43  [B214] B0			.PUT[PINST+#*2] = .LO(?TMP+OFSET)
    43  [B215] F7			.PUT[PINST+#*2+1] = .HI(?TMP+OFSET)
    43 = B2D2				?TMP = .GET[PINST+#*2] + .GET[PINST+#*2+1]<<8
    43  [B216] D2			.PUT[PINST+#*2] = .LO(?TMP+OFSET)
    43  [B217] F7			.PUT[PINST+#*2+1] = .HI(?TMP+OFSET)
    43 = B324				?TMP = .GET[PINST+#*2] + .GET[PINST+#*2+1]<<8
    43  [B218] 24			.PUT[PINST+#*2] = .LO(?TMP+OFSET)
    43  [B219] F8			.PUT[PINST+#*2+1] = .HI(?TMP+OFSET)
    43 = B340				?TMP = .GET[PINST+#*2] + .GET[PINST+#*2+1]<<8
    43  [B21A] 40			.PUT[PINST+#*2] = .LO(?TMP+OFSET)
    43  [B21B] F8			.PUT[PINST+#*2+1] = .HI(?TMP+OFSET)
    43 = B35C				?TMP = .GET[PINST+#*2] + .GET[PINST+#*2+1]<<8
    43  [B21C] 5C			.PUT[PINST+#*2] = .LO(?TMP+OFSET)
    43  [B21D] F8			.PUT[PINST+#*2+1] = .HI(?TMP+OFSET)
    43 = B381				?TMP = .GET[PINST+#*2] + .GET[PINST+#*2+1]<<8
    43  [B21E] 81			.PUT[PINST+#*2] = .LO(?TMP+OFSET)
    43  [B21F] F8			.PUT[PINST+#*2+1] = .HI(?TMP+OFSET)
    43 = B3A3				?TMP = .GET[PINST+#*2] + .GET[PINST+#*2+1]<<8
    43  [B220] A3			.PUT[PINST+#*2] = .LO(?TMP+OFSET)
    43  [B221] F8			.PUT[PINST+#*2+1] = .HI(?TMP+OFSET)
    52 = B3D4				?TMP = .GET[PLTRC+#] + .GET[PHTRC+#]<<8
    52  [B222] D4			.PUT[PLTRC+#] = .LO(?TMP+OFSET)
    52  [B232] F8			.PUT[PHTRC+#] = .HI(?TMP+OFSET)
    52 = B3E4				?TMP = .GET[PLTRC+#] + .GET[PHTRC+#]<<8
    52  [B223] E4			.PUT[PLTRC+#] = .LO(?TMP+OFSET)
    52  [B233] F8			.PUT[PHTRC+#] = .HI(?TMP+OFSET)
    52 = B3E9				?TMP = .GET[PLTRC+#] + .GET[PHTRC+#]<<8
    52  [B224] E9			.PUT[PLTRC+#] = .LO(?TMP+OFSET)
    52  [B234] F8			.PUT[PHTRC+#] = .HI(?TMP+OFSET)
    52 = B3FA				?TMP = .GET[PLTRC+#] + .GET[PHTRC+#]<<8
    52  [B225] FA			.PUT[PLTRC+#] = .LO(?TMP+OFSET)
    52  [B235] F8			.PUT[PHTRC+#] = .HI(?TMP+OFSET)
    52 = B41D				?TMP = .GET[PLTRC+#] + .GET[PHTRC+#]<<8
    52  [B226] 1D			.PUT[PLTRC+#] = .LO(?TMP+OFSET)
    52  [B236] F9			.PUT[PHTRC+#] = .HI(?TMP+OFSET)
    52 = B42B				?TMP = .GET[PLTRC+#] + .GET[PHTRC+#]<<8
    52  [B227] 2B			.PUT[PLTRC+#] = .LO(?TMP+OFSET)
    52  [B237] F9			.PUT[PHTRC+#] = .HI(?TMP+OFSET)
    52 = B42F				?TMP = .GET[PLTRC+#] + .GET[PHTRC+#]<<8
    52  [B228] 2F			.PUT[PLTRC+#] = .LO(?TMP+OFSET)
    52  [B238] F9			.PUT[PHTRC+#] = .HI(?TMP+OFSET)
    52 = B433				?TMP = .GET[PLTRC+#] + .GET[PHTRC+#]<<8
    52  [B229] 33			.PUT[PLTRC+#] = .LO(?TMP+OFSET)
    52  [B239] F9			.PUT[PHTRC+#] = .HI(?TMP+OFSET)
    52 = B437				?TMP = .GET[PLTRC+#] + .GET[PHTRC+#]<<8
    52  [B22A] 37			.PUT[PLTRC+#] = .LO(?TMP+OFSET)
    52  [B23A] F9			.PUT[PHTRC+#] = .HI(?TMP+OFSET)
    52 = B43B				?TMP = .GET[PLTRC+#] + .GET[PHTRC+#]<<8
    52  [B22B] 3B			.PUT[PLTRC+#] = .LO(?TMP+OFSET)
    52  [B23B] F9			.PUT[PHTRC+#] = .HI(?TMP+OFSET)
    52 = 0000				?TMP = .GET[PLTRC+#] + .GET[PHTRC+#]<<8
    52 = 0000				?TMP = .GET[PLTRC+#] + .GET[PHTRC+#]<<8
    52 = 0000				?TMP = .GET[PLTRC+#] + .GET[PHTRC+#]<<8
    52 = 0000				?TMP = .GET[PLTRC+#] + .GET[PHTRC+#]<<8
    52 = 0000				?TMP = .GET[PLTRC+#] + .GET[PHTRC+#]<<8
    52 = B440				?TMP = .GET[PLTRC+#] + .GET[PHTRC+#]<<8
    52  [B231] 40			.PUT[PLTRC+#] = .LO(?TMP+OFSET)
    52  [B241] F9			.PUT[PHTRC+#] = .HI(?TMP+OFSET)
    66 = 0004				skip=4
    70 = B482				?TMP = .GET[PTLST+#*SKIP+2] + .GET[PTLST+#*SKIP+3]<<8
    70  [B448] 82			.PUT[PTLST+#*SKIP+2] = .LO(?TMP+OFSET)
    70  [B449] F9			.PUT[PTLST+#*SKIP+3] = .HI(?TMP+OFSET)
    70 = B482				?TMP = .GET[PTLST+#*SKIP+2] + .GET[PTLST+#*SKIP+3]<<8
    70  [B450] 82			.PUT[PTLST+#*SKIP+2] = .LO(?TMP+OFSET)
    70  [B451] F9			.PUT[PTLST+#*SKIP+3] = .HI(?TMP+OFSET)
    70 = B482				?TMP = .GET[PTLST+#*SKIP+2] + .GET[PTLST+#*SKIP+3]<<8
    70  [B458] 82			.PUT[PTLST+#*SKIP+2] = .LO(?TMP+OFSET)
    70  [B459] F9			.PUT[PTLST+#*SKIP+3] = .HI(?TMP+OFSET)
    70 = B482				?TMP = .GET[PTLST+#*SKIP+2] + .GET[PTLST+#*SKIP+3]<<8
    70  [B460] 82			.PUT[PTLST+#*SKIP+2] = .LO(?TMP+OFSET)
    70  [B461] F9			.PUT[PTLST+#*SKIP+3] = .HI(?TMP+OFSET)
    70 = B482				?TMP = .GET[PTLST+#*SKIP+2] + .GET[PTLST+#*SKIP+3]<<8
    70  [B468] 82			.PUT[PTLST+#*SKIP+2] = .LO(?TMP+OFSET)
    70  [B469] F9			.PUT[PTLST+#*SKIP+3] = .HI(?TMP+OFSET)
    70 = B482				?TMP = .GET[PTLST+#*SKIP+2] + .GET[PTLST+#*SKIP+3]<<8
    70  [B470] 82			.PUT[PTLST+#*SKIP+2] = .LO(?TMP+OFSET)
    70  [B471] F9			.PUT[PTLST+#*SKIP+3] = .HI(?TMP+OFSET)
    70 = B482				?TMP = .GET[PTLST+#*SKIP+2] + .GET[PTLST+#*SKIP+3]<<8
    70  [B478] 82			.PUT[PTLST+#*SKIP+2] = .LO(?TMP+OFSET)
    70  [B479] F9			.PUT[PTLST+#*SKIP+3] = .HI(?TMP+OFSET)
    70 = B482				?TMP = .GET[PTLST+#*SKIP+2] + .GET[PTLST+#*SKIP+3]<<8
    70  [B480] 82			.PUT[PTLST+#*SKIP+2] = .LO(?TMP+OFSET)
    70  [B481] F9			.PUT[PTLST+#*SKIP+3] = .HI(?TMP+OFSET)
    70 = B482				?TMP = .GET[PTLST+#*SKIP+2] + .GET[PTLST+#*SKIP+3]<<8
    70  [B488] 82			.PUT[PTLST+#*SKIP+2] = .LO(?TMP+OFSET)
    70  [B489] F9			.PUT[PTLST+#*SKIP+3] = .HI(?TMP+OFSET)
    19 02E2-02E3> 75 0C			ini mcpy
    36 				 	.print '$R RMT     ',main.RMT_MODUL,'..',main.RMT_MODUL+len-6," '../music/sfx_s.rmt'"
    36 				$R RMT     $F700..$F98A '../music/sfx_s.rmt'
Source: main_PL.a65
   127 				.endl
   128
   129 				; ------------------------------------------------------------
   130
   131 					org CODEORIGIN
   132
   133 0C00				STATICDATA
Macro: STATICDATA [Source: main_PL.a65]
     1 0C00-9C40> 40 41 42 43 + .by  $40 $41 $42 $43 $44 $45 $46 $47  $48 $49 $4A $4B $4C $4D $4E $4F  $50 $51 $52 $53 $54 $55 $56 $57
     2 0C18 58 59 5A 61 62 63 + .by  $58 $59 $5A $61 $62 $63 $64 $65  $66 $67 $68 $69 $6A $6B $6C $6D  $6E $6F $70 $71 $72 $73 $74 $75
     3 0C30 76 77 78 79 7A 30 + .by  $76 $77 $78 $79 $7A $30 $31 $32  $33 $34 $35 $36 $37 $38 $39 $2B  $2F $00 $04 $54 $52 $55 $45 $05
     4 0C48 46 41 4C 53 45 0B + .by  $46 $41 $4C $53 $45 $0B $45 $37  $30 $30 $50 $41 $47 $45 $41 $50  $4C $0B $53 $41 $56 $45 $47 $41
     5 0C60 4D 45 44 41 54 02 + .by  $4D $45 $44 $41 $54 $02 $25 $1A  $02 $22 $1A $02 $00 $00 $04 $00  $00 $00 $00 $02 $04 $01 $03 $00
     6 0C78 0D 00 02 33 1A 03 + .by  $0D $00 $02 $33 $1A $03 $00 $29  $1A $03 $00 $22 $1A $02 $0C $00  $02 $04 $00 $02 $09 $00 $0B $53
     7 0C90 41 46 45 43 42 4D + .by  $41 $46 $45 $43 $42 $4D $50 $41  $50 $4C $02 $00 $08 $02 $04 $09  $02 $04 $0E $02 $09 $1F $04 $04
     8 0CA8 09 1F 00 03 0E 0E + .by  $09 $1F $00 $03 $0E $0E $0E $03  $08 $10 $0D $02 $01 $01 $03 $00  $00 $00 $03 $00 $2D $09 $03 $09
     9 0CC0 1F 00 0B 46 49 4E + .by  $1F $00 $0B $46 $49 $4E $41 $47  $50 $49 $43 $41 $50 $4C $0B $46  $4D $55 $53 $42 $38 $30 $30 $41
    10 0CD8 50 4C 0B 50 4C 41 + .by  $50 $4C $0B $50 $4C $41 $59 $42  $30 $52 $5A $41 $50 $4C $6C $6A  $3B $FF $FF $6B $2B $2A $6F $FF
    11 0CF0 70 75 9B 69 2D 3D + .by  $70 $75 $9B $69 $2D $3D $76 $FF  $63 $FF $FF $62 $78 $7A $34 $FF  $33 $36 $1B $35 $32 $31 $2C $20
    12 0D08 2E 6E FF 6D 2F 81 + .by  $2E $6E $FF $6D $2F $81 $72 $FF  $65 $79 $7F $74 $77 $71 $39 $FF  $30 $37 $7E $38 $3E $FF $66 $68
    13 0D20 64 FF 82 67 73 61 + .by  $64 $FF $82 $67 $73 $61 $4C $4A  $3A $FF $FF $4B $5C $5E $4F $FF  $50 $55 $FF $49 $5F $7C $56 $FF
    14 0D38 43 FF FF 42 58 5A + .by  $43 $FF $FF $42 $58 $5A $24 $FF  $23 $26 $FF $25 $22 $21 $5B $3B  $5D $4E $FF $4D $3F $FF $52 $FF
    15 0D50 45 59 FF 54 57 51 + .by  $45 $59 $FF $54 $57 $51 $28 $FF  $29 $27 $FF $40 $FF $FF $46 $48  $44 $FF $FF $47 $53 $41 $FF $FF
    16 0D68 FF FF FF FF FF FF + .by  $FF $FF $FF $FF $FF $FF $FF $FF  $FF $FF $FF $FF $FF $FF $FF $FF  $FF $FF $FF $FF $FF $FF $FF $FF
    17 0D80 FF FF FF FF FF FF + .by  $FF $FF $FF $FF $FF $FF $FF $FF  $FF $FF $FF $FF $FF $FF $FF $FF  $FF $FF $FF $FF $FF $FF $FF $FF
    18 0D98 FF FF FF FF FF FF + .by  $FF $FF $FF $FF $FF $FF $FF $FF  $FF $FF $FF $FF $FF $FF $FF $FF  $FF $FF $FF $FF $FF $FF $FF $FF
    19 0DB0 FF FF FF FF FF FF + .by  $FF $FF $FF $FF $FF $FF $FF $FF  $FF $FF $FF $FF $FF $FF $FF $FF  $FF $FF $FF $FF $FF $FF $FF $FF
    20 0DC8 FF FF FF FF FF FF + .by  $FF $FF $FF $FF $FF $FF $FF $FF  $FF $FF $FF $FF $FF $FF $FF $FF  $FF $FF $FF $FF $FF $FF $FF $FF
    21 0DE0 FF FF FF FF FF FF	.by  $FF $FF $FF $FF $FF $FF
Source: main_PL.a65
   134
   135 				; ------------------------------------------------------------
   136
   137 0DE6			RTLIB
   138 0DE6				icl 'rtl6502_a8.asm'
Source: rtl6502_a8.asm
    64 					opt l+
   139
   140 				.print 'ZPAGE: ',zpage,'..',zpend-1
   140 				ZPAGE: $0080..$00D3
   141
   142 				.print 'RTBUF: ',@buf,'..',@buf+255
   142 				RTBUF: $0400..$04FF
   143
   144 				.print 'RTLIB: ',RTLIB,'..',*-1
   144 				RTLIB: $0DE6..$12A9
   145
   146 				; ------------------------------------------------------------
   147
   148 12AA			START
   149 12AA BA				tsx
   150 12AB 8E 15 9A			stx MAIN.@halt+1
   151
   152 					.ifdef MAIN.@DEFINES.ROMOFF
   153 12AE				icl 'atari\romoff.asm'
Source: romoff.asm
     1
     2 				// http://atariki.krap.pl/index.php/Programowanie:_U%C5%BCycie_OS-a_przy_wy%C5%82%C4%85czonym_ROM-ie
     3
     4 12AE			.local	rominit
     5
     6 12AE 78			        sei
     7 12AF A9 00		        lda #%00000000
     8 12B1 8D 0E D4		        sta NMIEN       ;$D40E
     9 12B4 A9 FE		        lda #%11111110
    10 12B6 8D 01 D3		        sta PORTB       ;$D301
    11
    12 				; Wprowadzona zmiana pozwala wyÅÄczyÄ z poziomu kodu Pascala, kopiowanie czcionek z pamiÄci ROM do RAM przy wyÅÄczonym ROMie
    13 				; Proces ten (niefortunnie) powoduje nadpisanie danych w obszarze $E000..$E3FF, gdy w zasobach umieÅcimi dane, ktÃ³re
    14 				; w ten obszar sÄ wczytywane. Za pomocÄ definicji '{$DEFINE NOROMFONT}` moÅ¼na wyÅÄczyÄ przerzut danych czcionek z ROM do RAMu,
    15 				; co pozwala zachowaÄ, wczytywane zasoby.
    16
    17 				.ifndef MAIN.@DEFINES.NOROMFONT
    18 					ldx #3
    19 					ldy #0
    20 				mv	inc portb
    21 				afnt0	lda $e000,y
    22 					dec portb
    23 				afnt1	sta $e000,y
    24 					iny
    25 					bne mv
    26 					inc afnt0+2
    27 					inc afnt1+2
    28 					dex
    29 					bpl mv
    30 				.endif
    31
    32 12B9 A2 D6		        ldx #<nmiint
    33 12BB A0 12		        ldy #>nmiint
    34 12BD 8E FA FF		        stx NMIVEC      ;$FFFA
    35 12C0 8C FB FF		        sty NMIVEC+1
    36
    37 12C3 A2 E0		        ldx #<irqint
    38 12C5 A0 12		        ldy #>irqint
    39 12C7 8E FE FF		        stx IRQVEC      ;$FFFE
    40 12CA 8C FF FF		        sty IRQVEC+1
    41
    42 12CD A9 40		        lda #%01000000
    43 12CF 8D 0E D4		        sta NMIEN       ;$D40E
    44 12D2 58			        cli
    45
    46 12D3 4C 01 13			jmp skp
    47
    48
    49
    50 12D6 2C 0F D4		nmiint  bit NMIST        ;$D40F
    51 12D9 10 03		        spl
    52 12DB 6C 00 02		        jmp (VDSLST)     ;$0200
    53
    54 12DE 38			        sec
    55 12DF 24			        .byte $24        ;BIT $18
    56
    57 12E0 18			irqint  clc
    58
    59 				        ;wlaczenie OS ROM
    60
    61 12E1 EE 01 D3		        inc PORTB       ;$D301
    62
    63 12E4 48			        pha
    64 12E5 8A			        txa
    65 12E6 48			        pha
    66 12E7 BA			        tsx
    67
    68 				        ;odlozenie na stos danych dla powrotu z przerwania (RTI)
    69
    70 12E8 A9 12		        lda #>iret      ;adres procedury iret
    71 12EA 48			        pha
    72 12EB A9 FA		        lda #<iret
    73 12ED 48			        pha
    74 12EE BD 03 01		        lda $103,x      ;skopiowanie wartosci rejestru stanu procesora
    75 12F1 48			        pha
    76
    77 				        ;skok przez odpowiedni wektor przerwania
    78
    79 12F2 90 03		        scc
    80 12F4 6C FA FF		        jmp (NMIVEC)    ;$FFFA
    81 12F7 6C FE FF		        jmp (IRQVEC)    ;$FFFE
    82
    83 12FA 68			iret	pla
    84 12FB AA				tax
    85 12FC 68				pla
    86
    87 				        ;wylaczenie OS ROM
    88
    89 12FD CE 01 D3		        dec PORTB       ;$D301
    90 1300 40			        rti
    91
    92 1301			skp
    93
    94 				.endl
    95
   154 					.fi
   155
   156 = 04A0			VLEN	= VARDATASIZE-VARINITSIZE
   157 = A489			VADR	= DATAORIGIN+VARINITSIZE
   158
   159 					ift (VADR > $BFFF) && .not(.def MAIN.@DEFINES.ROMOFF)
   160 					ert 'Invalid memory address range ',VADR
   161 					eif
   162
   163 					ift (VLEN > 0) && (VLEN <= 256)
   164 					ldx #256-VLEN
   165 					lda #$00
   166 					sta:rne VADR+VLEN-256,x+
   167 					eli VLEN>256
   168 1301				m@init
Macro: M@INIT [Source: macros.asm]
     2 1301 A0 89			ldy <VADR
     3 1303 A2 A4			ldx >VADR
     5 1305 A9 00			lda #$00
     6 1307 F0 07			beq skp_
     8 1309 99 00 10		clr	sta adr: $1000,y
    10 130C C8				iny
    11 130D D0 04			bne skp
    12 130F E8				inx
    13 1310 8E 0B 13		skp_	stx adr+1
    15 1313 E0 A9		skp	cpx >VADR+VLEN
    16 1315 D0 F2			bne clr
    17 1317 C0 29			cpy <VADR+VLEN
    18 1319 D0 EE			bne clr
   169 					eif
   170
   171 				.ifdef psptr
   172 					mwa #PROGRAMSTACK psptr
   173 				.fi
   174
   175 131B A2 00			ldx #$00					; X = 0
   176 131D 86 80			stx bp						; BP = 0
   177
   178 131F 8E 08 D2			stx audctl					; reset POKEY
   179 1322 8E 18 D2			stx audctl+$10
   180 1325 A9 03			lda #3
   181 1327 8D 0F D2			sta skctl
   182 132A 8D 1F D2			sta skctl+$10
   183
   184 132D CA				dex						; X = 255
   185
   186 132E				UNITINITIALIZATION
Macro: UNITINITIALIZATION [Source: main_PL.a65]
     3 132E 20 6D 14			jsr MAIN.SYSTEM.@UnitInit
    35 1331 20 B2 15			jsr MAIN.RMT.@UnitInit
   187
   188 1334			.local	MAIN						; PROCEDURE
   189
   190 1334 4C DD 93			jmp l_00EA
   191
   192 				; ------------------------------------------------------------
   193
   194 1337			.local	SYSTEM						; UNIT
   195
   196 1337			.local	PEEK						; FUNCTION | ASSEMBLER | REGISTER
   197
   198 				; ------------------------------------------------------------
   199
   200 				; Generate Assignment for WORD / SMALLINT / SHORTREAL / POINTER
   201 				; as Pointer
   202 1337 B5 94			lda :STACKORIGIN,x
   203 1339 85 88			sta A
   204 133B B5 A4			lda :STACKORIGIN+STACKWIDTH,x
   205 133D 85 89			sta A+1
   206 133F CA				dex
   207 1340			@main
   208
   209 				; -------------------  ASM Block 00000002  -------------------
   210
   211 1340 A0 00			ldy #0
   212 1342 B1 88 85 90			mva (:edx),y Result
   213
   214 1346			@exit
   215
   216 				; ------------------------------------------------------------
   217
   218 				; Push BYTE / CHAR / SHORTINT / BOOLEAN
   219 				; as Pointer
   220
   221 1346 E8				inx
   222 1347 A5 90 95 94			mva RESULT :STACKORIGIN,x
   223
   224 					.ifdef @new
   225 					lda <@VarData
   226 					sta :ztmp
   227 					lda >@VarData
   228 					ldy #@VarDataSize-1
   229 					jmp @FreeMem
   230 					eif
   231
   232 				; ------------------------------------------------------------
   233
   234 = 0088			A	= :EDX
   235 = 0090			RESULT	= :STACKORIGIN-4
   236
   237 134B 60				rts						; ret
   238 				.endl
   239
   240 134C			.local	DPEEK						; FUNCTION | ASSEMBLER | REGISTER
   241
   242 				; ------------------------------------------------------------
   243
   244 				; Generate Assignment for WORD / SMALLINT / SHORTREAL / POINTER
   245 				; as Pointer
   246 134C B5 94			lda :STACKORIGIN,x
   247 134E 85 88			sta A
   248 1350 B5 A4			lda :STACKORIGIN+STACKWIDTH,x
   249 1352 85 89			sta A+1
   250 1354 CA				dex
   251 1355			@main
   252
   253 				; -------------------  ASM Block 00000003  -------------------
   254
   255 1355 A0 00			ldy #0
   256 1357 B1 88 85 90			mva (:edx),y Result
   257 135B C8				iny
   258 135C B1 88 85 91			mva (:edx),y Result+1
   259
   260 1360			@exit
   261
   262 				; ------------------------------------------------------------
   263
   264 				; Push WORD / SMALLINT / SHORTREAL / POINTER
   265 				; as Pointer
   266
   267 1360 E8				inx
   268 1361 A5 90 95 94			mva RESULT :STACKORIGIN,x
   269 1365 A5 91 95 A4			mva RESULT+1 :STACKORIGIN+STACKWIDTH,x
   270
   271 					.ifdef @new
   272 					lda <@VarData
   273 					sta :ztmp
   274 					lda >@VarData
   275 					ldy #@VarDataSize-1
   276 					jmp @FreeMem
   277 					eif
   278
   279 				; ------------------------------------------------------------
   280
   281 = 0088			A	= :EDX
   282 = 0090			RESULT	= :STACKORIGIN-4
   283
   284 1369 60				rts						; ret
   285 				.endl
   286
   287 136A			.local	POKE						; PROCEDURE | ASSEMBLER | REGISTER
   288
   289 				; ------------------------------------------------------------
   290
   291 				; Generate Assignment for WORD / SMALLINT / SHORTREAL / POINTER
   292 				; as Pointer
   293 136A B5 94			lda :STACKORIGIN,x
   294 136C 85 88			sta A
   295 136E B5 A4			lda :STACKORIGIN+STACKWIDTH,x
   296 1370 85 89			sta A+1
   297 1372 CA				dex
   298 1373 30 05			jmi @main
   299
   300 				; ------------------------------------------------------------
   301
   302 				; Generate Assignment for BYTE / CHAR / SHORTINT / BOOLEAN
   303 				; as Pointer
   304 1375 B5 94			lda :STACKORIGIN,x
   305 1377 85 8C			sta VALUE
   306 1379 CA				dex
   307 137A			@main
   308
   309 				; -------------------  ASM Block 00000025  -------------------
   310
   311 137A A0 00			ldy #0
   312 137C A5 8C 91 88			mva value (:edx),y
   313
   314 				; ------------------------------------------------------------
   315
   316 = 0088			A	= :EDX
   317 = 008C			VALUE	= :ECX
   318
   319 1380			@exit
   320 					.ifdef @new
   321 					lda <@VarData
   322 					sta :ztmp
   323 					lda >@VarData
   324 					ldy #@VarDataSize-1
   325 					jmp @FreeMem
   326 					els
   327 1380 60				rts						; ret
   328 					eif
   329 				.endl
   330
   331 1381			.local	DPOKE						; PROCEDURE | ASSEMBLER | REGISTER
   332
   333 				; ------------------------------------------------------------
   334
   335 				; Generate Assignment for WORD / SMALLINT / SHORTREAL / POINTER
   336 				; as Pointer
   337 1381 B5 94			lda :STACKORIGIN,x
   338 1383 85 88			sta A
   339 1385 B5 A4			lda :STACKORIGIN+STACKWIDTH,x
   340 1387 85 89			sta A+1
   341 1389 CA				dex
   342 138A 30 09			jmi @main
   343
   344 				; ------------------------------------------------------------
   345
   346 				; Generate Assignment for WORD / SMALLINT / SHORTREAL / POINTER
   347 				; as Pointer
   348 138C B5 94			lda :STACKORIGIN,x
   349 138E 85 8C			sta VALUE
   350 1390 B5 A4			lda :STACKORIGIN+STACKWIDTH,x
   351 1392 85 8D			sta VALUE+1
   352 1394 CA				dex
   353 1395			@main
   354
   355 				; -------------------  ASM Block 00000026  -------------------
   356
   357 1395 A0 00			ldy #0
   358 1397 A5 8C 91 88			mva value (:edx),y
   359 139B C8				iny
   360 139C A5 8D 91 88			mva value+1 (:edx),y
   361
   362 				; ------------------------------------------------------------
   363
   364 = 0088			A	= :EDX
   365 = 008C			VALUE	= :ECX
   366
   367 13A0			@exit
   368 					.ifdef @new
   369 					lda <@VarData
   370 					sta :ztmp
   371 					lda >@VarData
   372 					ldy #@VarDataSize-1
   373 					jmp @FreeMem
   374 					els
   375 13A0 60				rts						; ret
   376 					eif
   377 				.endl
   378
   379 13A1			.local	FILLCHAR					; PROCEDURE | ASSEMBLER | OVERLOAD | REGISTER | INLINE
   380 13A1			.local	@03018600001810000188000
   381
   382 					.MACRO m@INLINE
   383 				
   384 				; -------------------  ASM Block 00000027  -------------------
   385 				
   386 					jsr @fill
   387 				
   388 					.ENDM
   389
   390 				; ------------------------------------------------------------
   391
   392 = 0088			A	= :EDX
   393 = 008C			COUNT	= :ECX
   394 = 0084			VALUE	= :EAX
   395
   396 13A1			@exit
   397 				.endl
   398 				.endl							; overload
   399
   400 13A1			.local	FILLCHAR					; PROCEDURE | ASSEMBLER | OVERLOAD | REGISTER | INLINE
   401 13A1			.local	@03018000001810000188000
   402
   403 					.MACRO m@INLINE
   404 				
   405 				; -------------------  ASM Block 00000028  -------------------
   406 				
   407 					jsr @fill
   408 				
   409 					.ENDM
   410
   411 				; ------------------------------------------------------------
   412
   413 = 0088			A	= :EDX
   414 = 008C			COUNT	= :ECX
   415 = 0084			VALUE	= :EAX
   416
   417 13A1			@exit
   418 				.endl
   419 				.endl							; overload
   420
   421 13A1			.local	FILLCHAR					; PROCEDURE | ASSEMBLER | OVERLOAD | REGISTER | INLINE
   422 13A1			.local	@03018000001810000300000
   423
   424 					.MACRO m@INLINE
   425 				
   426 				; -------------------  ASM Block 00000031  -------------------
   427 				
   428 					jsr @fill
   429 				
   430 					.ENDM
   431
   432 				; ------------------------------------------------------------
   433
   434 = 0088			A	= :EDX
   435 = 008C			COUNT	= :ECX
   436 = 0084			VALUE	= :EAX
   437
   438 13A1			@exit
   439 				.endl
   440 				.endl							; overload
   441
   442 13A1			.local	MOVE						; PROCEDURE | ASSEMBLER | OVERLOAD | REGISTER | INLINE
   443 13A1			.local	@03018100001880000188000
   444
   445 					.MACRO m@INLINE
   446 				
   447 				; -------------------  ASM Block 00000034  -------------------
   448 				
   449 					jsr @move
   450 				
   451 					.ENDM
   452
   453 				; ------------------------------------------------------------
   454
   455 = 0088			SOURCE	= :EDX
   456 = 008C			DEST	= :ECX
   457 = 0084			COUNT	= :EAX
   458
   459 13A1			@exit
   460 				.endl
   461 				.endl							; overload
   462
   463 13A1			.local	MOVE						; PROCEDURE | ASSEMBLER | OVERLOAD | REGISTER | INLINE
   464 13A1			.local	@03018100001880000300000
   465
   466 					.MACRO m@INLINE
   467 				
   468 				; -------------------  ASM Block 00000036  -------------------
   469 				
   470 					jsr @move
   471 				
   472 					.ENDM
   473
   474 				; ------------------------------------------------------------
   475
   476 = 0088			SOURCE	= :EDX
   477 = 008C			DEST	= :ECX
   478 = 0084			COUNT	= :EAX
   479
   480 13A1			@exit
   481 				.endl
   482 				.endl							; overload
   483
   484 13A1			.local	RANDOMIZE					; PROCEDURE | ASSEMBLER
   485
   486 				; -------------------  ASM Block 00000045  -------------------
   487
   488
   489 13A1 AD 0A D2 8D 5F 9C	  mva $d20a RndSeed
   490 13A7 A9 00 8D 60 9C	  mva #$00  RndSeed+1
   491
   492
   493 13AC			@exit
   494 					.ifdef @new
   495 					lda <@VarData
   496 					sta :ztmp
   497 					lda >@VarData
   498 					ldy #@VarDataSize-1
   499 					jmp @FreeMem
   500 					els
   501 13AC 60				rts						; ret
   502 					eif
   503 				.endl
   504
   505 13AD			.local	RANDOM						; FUNCTION | ASSEMBLER | OVERLOAD
   506 13AD			.local	@010180000
   507 13AD 8D 61 9C			sta RANGE
   508
   509 				; -------------------  ASM Block 00000049  -------------------
   510
   511
   512 				;BYTE FUNC Rand(BYTE range)
   513 				; returns random number between 0 and
   514 				; range-1.  If range=0, then a random
   515 				; number between 0 and 255 is returned
   516
   517 13B0 AC 0A D2		  ldy $d20a   ; RANDOM
   518
   519 13B3 AD 61 9C		  lda range
   520 13B6 F0 08		  beq stop
   521
   522 13B8 85 8C		  sta :ecx
   523 13BA 84 84		  sty :eax
   524
   525 13BC 20 43 10		  jsr imulCL
   526 13BF A8			  tay
   527
   528 13C0 8C 62 9C		stop  sty Result
   529
   530
   531 13C3			@exit
   532
   533 				; ------------------------------------------------------------
   534
   535 = 9C61			RANGE	= DATAORIGIN+$000B
   536 = 9C62			RESULT	= DATAORIGIN+$000C
   537
   538 = 9C61			@VarData	= RANGE
   539 = 0001			@VarDataSize	= 1
   540
   541 13C3 60				rts						; ret
   542 				.endl
   543 				.endl							; overload
   544
   545 13C4			.local	RANDOM						; FUNCTION | OVERLOAD
   546 13C4			.local	@010184000
   547
   548 				; optimize OK (system_atari.inc), line = 179
   549
   550 13C4 AD 64 9C			lda RANGE+1
   551 13C7 0D 63 9C			ora RANGE
   552 13CA D0 0B			jne l_0184
   553
   554 				; optimize OK (system_atari.inc), line = 180
   555
   556 13CC A9 00			lda #$00
   557 13CE 8D 65 9C			sta RESULT
   558 13D1 8D 66 9C			sta RESULT+1
   559 13D4 4C 39 14			jmp l_0192
   560 13D7			l_0184
   561
   562 				; optimize OK (system_atari.inc), line = 183
   563
   564 13D7 AD 5F 9C			lda RNDSEED
   565 13DA 85 8C			sta :ecx
   566 13DC AD 60 9C			lda RNDSEED+1
   567 13DF 85 8D			sta :ecx+1
   568 13E1 A9 95			lda #$95
   569 13E3 85 84			sta :eax
   570 13E5 A9 45			lda #$45
   571 13E7 85 85			sta :eax+1
   572 					.ifdef fmulinit
   573 					fmulu_16
   574 					els
   575 13E9 20 8F 10			imulCX
   576 					eif
   577 13EC A5 84			lda :eax
   578 13EE 8D 5F 9C			sta RNDSEED
   579 13F1 A5 85			lda :eax+1
   580 13F3 8D 60 9C			sta RNDSEED+1
   581
   582 				; optimize OK (system_atari.inc), line = 184
   583
   584 13F6 AD 63 9C			lda RANGE
   585 13F9 85 8C			sta @SMALLINT.MOD.B
   586 13FB AD 64 9C			lda RANGE+1
   587 13FE 85 8D			sta @SMALLINT.MOD.B+1
   588 1400 AD 5F 9C			lda RNDSEED
   589 1403 85 84			sta @SMALLINT.MOD.A
   590 1405 AD 60 9C			lda RNDSEED+1
   591 1408 85 85			sta @SMALLINT.MOD.A+1
   592 140A 20 E0 0F			jsr @SMALLINT.MOD
   593 140D A5 90			lda @SMALLINT.MOD.RESULT
   594 140F 8D 65 9C			sta RESULT
   595 1412 A5 91			lda @SMALLINT.MOD.RESULT+1
   596 1414 8D 66 9C			sta RESULT+1
   597
   598 				; -------------------  ASM Block 00000050  -------------------
   599
   600 1417 AD 64 9C			lda range+1
   601 141A 10 07			bpl plus
   602
   603 141C AD 66 9C			lda Result+1
   604 141F 30 18			bmi ok
   605 1421 10 05			bpl sign
   606
   607 1423 AD 66 9C		plus	lda Result+1
   608 1426 10 11			bpl ok
   609
   610 1428 A9 00		sign 	lda #0
   611 142A 38 ED 65 9C			sub Result
   612 142E 8D 65 9C			sta Result
   613
   614 1431 A9 00			lda #0
   615 1433 ED 66 9C			sbc Result+1
   616 1436 8D 66 9C			sta Result+1
   617 1439			ok
   618
   619 1439			l_0192
   620 1439			@exit
   621
   622 				; ------------------------------------------------------------
   623
   624 = 9C63			RANGE	= DATAORIGIN+$000D
   625 = 9C65			RESULT	= DATAORIGIN+$000F
   626
   627 = 9C63			@VarData	= RANGE
   628 = 0002			@VarDataSize	= 2
   629
   630 1439 60				rts						; ret
   631 				.endl
   632 				.endl							; overload
   633
   634 143A			.local	CONCAT						; FUNCTION | ASSEMBLER | OVERLOAD
   635 143A			.local	@0201898600189860
   636
   637 				; -------------------  ASM Block 00000053  -------------------
   638
   639 143A AD 68 9C C9 04 D0 + 	cpw a #@buf
   640 1446 F0 0E			beq skp
   641
   642 1448 A9 00 8D 00 04		mva #0 @buf
   643 					@addString a
   643 				 LDY A+1\ LDA A\ JSR @ADDSTRING
   643 144D AC 68 9C		 LDY A+1
   643 1450 AD 67 9C		 LDA A
   643 1453 20 96 0F		 JSR @ADDSTRING
   644 1456			skp
   645 					@addString b
   645 				 LDY B+1\ LDA B\ JSR @ADDSTRING
   645 1456 AC 6A 9C		 LDY B+1
   645 1459 AD 69 9C		 LDA B
   645 145C 20 96 0F		 JSR @ADDSTRING
   646
   647 145F A0 00			ldy #0
   648 1461 B9 00 04 99 6B 9C + 	mva:rne @buf,y adr.Result,y+
   649
   650 146A			@exit
   651
   652 				; ------------------------------------------------------------
   653
   654 = 9C67			A	= DATAORIGIN+$0011
   655 = 9C69			B	= DATAORIGIN+$0013
   656 = 9C6B			adr.RESULT	= [DATAORIGIN+$0015] .array [256]
   657 146A			.var RESULT	= adr.RESULT .word
   658
   659 = 9C67			@VarData	= A
   660 = 0104			@VarDataSize	= 260
   661
   662 146A 60				rts						; ret
   663 = 146B 6B 9C		RESULT
   663 				.endl
   664 				.endl							; overload
   665
   666 				; ------------------------------------------------------------
   667 				; ------------------------------------------------------------
   668 146D			@UnitInit
   669
   670 				; -------------------  ASM Block 00000060  -------------------
   671
   672 					.ifdef @CmdLine
   673
   674 					ldx #$0F
   675 					mva:rpl $340,x IOCB@COPY,x-
   676 					rts
   677
   678 				IOCB@COPY	:16 brk
   679 					eif
   680
   681
   682 146D 60				rts
   683
   684 				; ------------------------------------------------------------
   685
   686 = 0648			M_PI_2	= $0648
   687 = 0192			D_PI_2	= $0192
   688 = 0004			D_PI_180	= $04
   689 = 0101			__PORTB_BANKS	= $0101
   690 = 0000			MGTIA	= $00
   691 = 0080			MVBXE	= $80
   692 = 0000			VBXE_XDLADR	= $00
   693 = 00E0			VBXE_BCBTMP	= $E0
   694 = 0100			VBXE_BCBADR	= $0100
   695 = 1000			VBXE_MAPADR	= $1000
   696 = 1000			VBXE_CHBASE	= $1000
   697 = 5000			VBXE_OVRADR	= $5000
   698 = B000			VBXE_WINDOW	= $B000
   699 = 0000			IDLI	= $00
   700 = 0001			IVBL	= $01
   701 = 0001			IVBLD	= $01
   702 = 0002			IVBLI	= $02
   703 = 0003			ITIM1	= $03
   704 = 0004			ITIM2	= $04
   705 = 0005			ITIM4	= $05
   706 = 00FE			CH_DELCHR	= $FE
   707 = 009B			CH_ENTER	= $9B
   708 = 001B			CH_ESC	= $1B
   709 = 001C			CH_CURS_UP	= $1C
   710 = 001D			CH_CURS_DOWN	= $1D
   711 = 001E			CH_CURS_LEFT	= $1E
   712 = 001F			CH_CURS_RIGHT	= $1F
   713 = 007F			CH_TAB	= $7F
   714 = 009B			CH_EOL	= $9B
   715 = 007D			CH_CLR	= $7D
   716 = 00FD			CH_BELL	= $FD
   717 = 007E			CH_DEL	= $7E
   718 = 009C			CH_DELLINE	= $9C
   719 = 009D			CH_INSLINE	= $9D
   720 = 0000			PAL_PMCOLOR0	= $00
   721 = 0001			PAL_PMCOLOR1	= $01
   722 = 0002			PAL_PMCOLOR2	= $02
   723 = 0003			PAL_PMCOLOR3	= $03
   724 = 0004			PAL_COLOR0	= $04
   725 = 0005			PAL_COLOR1	= $05
   726 = 0006			PAL_COLOR2	= $06
   727 = 0007			PAL_COLOR3	= $07
   728 = 0008			PAL_COLBAK	= $08
   729 = 0000			COLOR_BLACK	= $00
   730 = 000E			COLOR_WHITE	= $0E
   731 = 0032			COLOR_RED	= $32
   732 = 0096			COLOR_CYAN	= $96
   733 = 0068			COLOR_VIOLET	= $68
   734 = 00C4			COLOR_GREEN	= $C4
   735 = 0074			COLOR_BLUE	= $74
   736 = 00EE			COLOR_YELLOW	= $EE
   737 = 0028			COLOR_ORANGE	= $28
   738 = 00E4			COLOR_BROWN	= $E4
   739 = 003C			COLOR_LIGHTRED	= $3C
   740 = 0004			COLOR_GRAY1	= $04
   741 = 0006			COLOR_GRAY2	= $06
   742 = 000A			COLOR_GRAY3	= $0A
   743 = 00CC			COLOR_LIGHTGREEN	= $CC
   744 = 007C			COLOR_LIGHTBLUE	= $7C
   745 = 0004			FMOPENREAD	= $04
   746 = 0008			FMOPENWRITE	= $08
   747 = 0009			FMOPENAPPEND	= $09
   748 = 000C			FMOPENREADWRITE	= $0C
   749 = 9C56			DATESEPARATOR	= DATAORIGIN+$0000
   750 = D20A			RND	= $D20A
   751 = 02C0			adr.PALETTE	= $02C0
   752 146E			.var PALETTE	= adr.PALETTE .word
   753 = D012			adr.HPALETTE	= $D012
   754 146E			.var HPALETTE	= adr.HPALETTE .word
   755 = 9C57			FILEMODE	= DATAORIGIN+$0001
   756 = 9C58			GRAPHMODE	= DATAORIGIN+$0002
   757 = 9C59			IORESULT	= DATAORIGIN+$0003
   758 = 9C5A			EOLN	= DATAORIGIN+$0004
   759 = 9C5B			SCREENWIDTH	= DATAORIGIN+$0005
   760 = 9C5D			SCREENHEIGHT	= DATAORIGIN+$0007
   761 = 0000			adr.MEM	= $00
   762 146E			.var MEM	= adr.MEM .word
   763 = 9C5F			RNDSEED	= DATAORIGIN+$0009
   764
   765 = 146E C0 02		PALETTE
   765 = 1470 12 D0		HPALETTE
   765 = 1472 00 00		MEM
   765 				.endl							; UNIT SYSTEM
   766
   767 				; ------------------------------------------------------------
   768
   769 1474			.local	ATARI						; UNIT
   770
   771 				; ------------------------------------------------------------
   772
   773 = 0000			DL_BLANK1	= $00
   774 = 0010			DL_BLANK2	= $10
   775 = 0020			DL_BLANK3	= $20
   776 = 0030			DL_BLANK4	= $30
   777 = 0040			DL_BLANK5	= $40
   778 = 0050			DL_BLANK6	= $50
   779 = 0060			DL_BLANK7	= $60
   780 = 0070			DL_BLANK8	= $70
   781 = 0080			DL_DLI	= $80
   782 = 0040			DL_LMS	= $40
   783 = 0020			DL_VSCROLL	= $20
   784 = 0010			DL_HSCROLL	= $10
   785 = 0001			DL_JMP	= $01
   786 = 0041			DL_JVB	= $41
   787 = 000E			DL_MODE_GR15	= $0E
   788 = 000F			DL_MODE_GR8	= $0F
   789 = 0010			IRQENS	= $10
   790 = 0012			RTCLOK	= $12
   791 = 0012			RTCLOK1	= $12
   792 = 0013			RTCLOK2	= $13
   793 = 0014			RTCLOK3	= $14
   794 = 004D			ATRACT	= $4D
   795 = 0052			LMARGIN	= $52
   796 = 0053			RMARGIN	= $53
   797 = 0054			ROWCRS	= $54
   798 = 0055			COLCRS	= $55
   799 = 0057			DINDEX	= $57
   800 = 0058			SAVMSC	= $58
   801 = 0062			PALNTS	= $62
   802 = 006A			RAMTOP	= $6A
   803 = 0200			VDSLST	= $0200
   804 = 0230			SDLSTL	= $0230
   805 = 0290			TXTROW	= $0290
   806 = 0291			TXTCOL	= $0291
   807 = 0293			TINDEX	= $0293
   808 = 0294			TXTMSC	= $0294
   809 = 022F			SDMCTL	= $022F
   810 = 026F			GPRIOR	= $026F
   811 = 02F0			CRSINH	= $02F0
   812 = 02F3			CHACT	= $02F3
   813 = 02F4			CHBAS	= $02F4
   814 = 02FC			CH	= $02FC
   815 = 02FD			FILDAT	= $02FD
   816 = 02C0			PCOLR0	= $02C0
   817 = 02C1			PCOLR1	= $02C1
   818 = 02C2			PCOLR2	= $02C2
   819 = 02C3			PCOLR3	= $02C3
   820 = 02C4			COLOR0	= $02C4
   821 = 02C5			COLOR1	= $02C5
   822 = 02C6			COLOR2	= $02C6
   823 = 02C7			COLOR3	= $02C7
   824 = 02C8			COLOR4	= $02C8
   825 = 02C8			COLBAKS	= $02C8
   826 = D000			HPOSP0	= $D000
   827 = D001			HPOSP1	= $D001
   828 = D002			HPOSP2	= $D002
   829 = D003			HPOSP3	= $D003
   830 = D004			HPOSM0	= $D004
   831 = D005			HPOSM1	= $D005
   832 = D006			HPOSM2	= $D006
   833 = D007			HPOSM3	= $D007
   834 = D008			SIZEP0	= $D008
   835 = D009			SIZEP1	= $D009
   836 = D00A			SIZEP2	= $D00A
   837 = D00B			SIZEP3	= $D00B
   838 = D00C			SIZEM	= $D00C
   839 = D00D			GRAFP0	= $D00D
   840 = D00E			GRAFP1	= $D00E
   841 = D00F			GRAFP2	= $D00F
   842 = D010			GRAFP3	= $D010
   843 = D011			GRAFM	= $D011
   844 = D004			P0PF	= $D004
   845 = D014			PAL	= $D014
   846 = D013			TRIG3	= $D013
   847 = D012			COLPM0	= $D012
   848 = D013			COLPM1	= $D013
   849 = D014			COLPM2	= $D014
   850 = D015			COLPM3	= $D015
   851 = D016			COLPF0	= $D016
   852 = D017			COLPF1	= $D017
   853 = D018			COLPF2	= $D018
   854 = D019			COLPF3	= $D019
   855 = D01A			COLBAK	= $D01A
   856 = D01A			COLBK	= $D01A
   857 = D01B			PRIOR	= $D01B
   858 = D01D			GRACTL	= $D01D
   859 = D01E			HITCLR	= $D01E
   860 = D01F			CONSOL	= $D01F
   861 = D200			AUDF1	= $D200
   862 = D201			AUDC1	= $D201
   863 = D202			AUDF2	= $D202
   864 = D203			AUDC2	= $D203
   865 = D204			AUDF3	= $D204
   866 = D205			AUDC3	= $D205
   867 = D206			AUDF4	= $D206
   868 = D207			AUDC4	= $D207
   869 = D208			AUDCTL	= $D208
   870 = D209			KBCODE	= $D209
   871 = D20E			IRQEN	= $D20E
   872 = D20F			SKSTAT	= $D20F
   873 = D300			PORTA	= $D300
   874 = D301			PORTB	= $D301
   875 = D302			PACTL	= $D302
   876 = D400			DMACTL	= $D400
   877 = D401			CHACTL	= $D401
   878 = D402			DLISTL	= $D402
   879 = D404			HSCROL	= $D404
   880 = D405			VSCROL	= $D405
   881 = D407			PMBASE	= $D407
   882 = D409			CHBASE	= $D409
   883 = D40A			WSYNC	= $D40A
   884 = D40B			VCOUNT	= $D40B
   885 = D40C			PENH	= $D40C
   886 = D40D			PENV	= $D40D
   887 = D40E			NMIEN	= $D40E
   888 = FFFA			NMIVEC	= $FFFA
   889 = FFFC			RESETVEC	= $FFFC
   890 = FFFE			IRQVEC	= $FFFE
   891
   892 				.endl							; UNIT ATARI
   893
   894 				; ------------------------------------------------------------
   895
   896 1474			.local	MATH						; UNIT
   897
   898 				; ------------------------------------------------------------
   899
   900 				.endl							; UNIT MATH
   901
   902 				; ------------------------------------------------------------
   903
   904 1474			.local	PMG						; UNIT
   905
   906 				; ------------------------------------------------------------
   907
   908 = 000E			_P_MAX	= $0E
   909 = 0002			_M0_MAX	= $02
   910 = 0000			_M1_MAX	= $00
   911 = 0003			_M2_MAX	= $03
   912 = 0004			_M3_MAX	= $04
   913 = 0000			_PM_NORMAL_SIZE	= $00
   914 = 0001			_PM_DOUBLE_SIZE	= $01
   915 = 0003			_PM_QUAD_SIZE	= $03
   916 = 0003			_PM_SHOW_ON	= $03
   917 = 0000			_PM_SHOW_OFF	= $00
   918 = 0001			_PM_DOUBLE_RES	= $01
   919 = 0002			_PM_SINGLE_RES	= $02
   920 = 9D6B			adr.P_DATA	= [DATAORIGIN+$0115] .array [4] .word
   921 1474			.var P_DATA	= adr.P_DATA .word
   922 = 9D73			adr.M_DATA	= [DATAORIGIN+$011D] .array [4] .word
   923 1474			.var M_DATA	= adr.M_DATA .word
   924 = 9D7B			PM_MEM	= DATAORIGIN+$0125
   925 = 9D7D			PM_OFFSET	= DATAORIGIN+$0127
   926 = 9D7F			PM_TOP	= DATAORIGIN+$0129
   927 = 9D80			PM_SIZE	= DATAORIGIN+$012A
   928
   929 = 1474 6B 9D		P_DATA
   929 = 1476 73 9D		M_DATA
   929 				.endl							; UNIT PMG
   930
   931 				; ------------------------------------------------------------
   932
   933 1478			.local	XBIOS						; UNIT
   934
   935 1478			.local	XBIOSOPENFILE					; PROCEDURE | ASSEMBLER
   936
   937 				; -------------------  ASM Block 00000063  -------------------
   938
   939
   940 1478 8A 48		    txa:pha
   941 147A A9 00 8D 82 9D	    mva #0 xBiosIOresult
   942 147F 8D 83 9D		    sta xBiosIOerror
   943 1482 AC 88 9D		    ldy filename
   944 1485 AE 89 9D		    ldx filename+1
   945 1488 C8			    iny
   946 1489 D0 01		    sne
   947 148B E8			    inx
   948 148C 20 09 08		    jsr xBIOS_OPEN_FILE
   949 148F 90 08		    bcc @+
   950 1491 8E 83 9D		    stx xBiosIOerror
   951 1494 A9 01 8D 82 9D	    mva #1 xBiosIOresult 
   952 1499 68 AA		@   pla:tax
   953
   954 				; ------------------------------------------------------------
   955
   956 = 9D88			FILENAME	= DATAORIGIN+$0132
   957
   958 = 9D88			@VarData	= FILENAME
   959 = 0002			@VarDataSize	= 2
   960
   961 149B			@exit
   962 					.ifdef @new
   963 					lda <@VarData
   964 					sta :ztmp
   965 					lda >@VarData
   966 					ldy #@VarDataSize-1
   967 					jmp @FreeMem
   968 					els
   969 149B 60				rts						; ret
   970 					eif
   971 				.endl
   972
   973 149C			.local	XBIOSLOADDATA					; PROCEDURE | ASSEMBLER
   974
   975 				; -------------------  ASM Block 00000064  -------------------
   976
   977
   978 149C 8A 48		    txa:pha
   979 149E A9 00 8D 82 9D	    mva #0 xBiosIOresult
   980 14A3 8D 83 9D		    sta xBiosIOerror
   981 14A6 AC 8A 9D		    ldy dest
   982 14A9 AE 8B 9D		    ldx dest+1
   983 14AC 20 0C 08		    jsr xBIOS_LOAD_DATA
   984 14AF 90 08		    bcc @+
   985 14B1 8E 83 9D		    stx xBiosIOerror
   986 14B4 A9 01 8D 82 9D	    mva #1 xBiosIOresult 
   987 14B9 68 AA		@   pla:tax
   988
   989 				; ------------------------------------------------------------
   990
   991 = 9D8A			DEST	= DATAORIGIN+$0134
   992
   993 = 9D8A			@VarData	= DEST
   994 = 0002			@VarDataSize	= 2
   995
   996 14BB			@exit
   997 					.ifdef @new
   998 					lda <@VarData
   999 					sta :ztmp
  1000 					lda >@VarData
  1001 					ldy #@VarDataSize-1
  1002 					jmp @FreeMem
  1003 					els
  1004 14BB 60				rts						; ret
  1005 					eif
  1006 				.endl
  1007
  1008 14BC			.local	XBIOSGETBYTE					; FUNCTION | ASSEMBLER
  1009
  1010 				; -------------------  ASM Block 00000068  -------------------
  1011
  1012
  1013 14BC 8A 48		    txa:pha
  1014 14BE A9 00 8D 82 9D	    mva #0 xBiosIOresult
  1015 14C3 8D 83 9D		    sta xBiosIOerror
  1016 14C6 20 15 08		    jsr xBIOS_GET_BYTE  
  1017 14C9 8D 8C 9D		    sta result
  1018 14CC 90 08		    bcc @+
  1019 14CE 8E 83 9D		    stx xBiosIOerror
  1020 14D1 A9 01 8D 82 9D	    mva #1 xBiosIOresult 
  1021 14D6 68 AA		@   pla:tax
  1022
  1023 14D8			@exit
  1024
  1025 				; ------------------------------------------------------------
  1026
  1027 = 9D8C			RESULT	= DATAORIGIN+$0136
  1028
  1029 14D8 60				rts						; ret
  1030 				.endl
  1031
  1032 				; ------------------------------------------------------------
  1033
  1034 = 9D82			XBIOSIORESULT	= DATAORIGIN+$012C
  1035 = 9D83			XBIOSIOERROR	= DATAORIGIN+$012D
  1036 = 9D84			XBIOSDIRENTRYINDEX	= DATAORIGIN+$012E
  1037 = 9D85			XBIOSDIRENTRYSTATUS	= DATAORIGIN+$012F
  1038 = 9D86			XBIOSDIRENTRYSECTOR	= DATAORIGIN+$0130
  1039 = 0800			XBIOS_ADDRESS	= $0800
  1040 = 0802			XBIOS_VERSION	= $0802
  1041 = 0803			XBIOS_RENAME_ENTRY	= $0803
  1042 = 0806			XBIOS_LOAD_FILE	= $0806
  1043 = 0809			XBIOS_OPEN_FILE	= $0809
  1044 = 080C			XBIOS_LOAD_DATA	= $080C
  1045 = 080F			XBIOS_WRITE_DATA	= $080F
  1046 = 0812			XBIOS_OPEN_CURRENT_DIR	= $0812
  1047 = 0815			XBIOS_GET_BYTE	= $0815
  1048 = 0818			XBIOS_PUT_BYTE	= $0818
  1049 = 081B			XBIOS_FLUSH_BUFFER	= $081B
  1050 = 081E			XBIOS_SET_LENGTH	= $081E
  1051 = 0821			XBIOS_SET_INIAD	= $0821
  1052 = 0824			XBIOS_SET_FILE_OFFSET	= $0824
  1053 = 0827			XBIOS_SET_RUNAD	= $0827
  1054 = 082A			XBIOS_SET_DEFAULT_DEVICE	= $082A
  1055 = 082D			XBIOS_OPEN_DIR	= $082D
  1056 = 0830			XBIOS_LOAD_BINARY_FILE	= $0830
  1057 = 0833			XBIOS_OPEN_DEFAULT_DIR	= $0833
  1058 = 0836			XBIOS_SET_DEVICE	= $0836
  1059 = 0839			XBIOS_RELOCATE_BUFFER	= $0839
  1060 = 083C			XBIOS_GET_ENTRY	= $083C
  1061 = 083F			XBIOS_OPEN_DEFAULT_FILE	= $083F
  1062 = 0842			XBIOS_READ_SECTOR	= $0842
  1063 = 0845			XBIOS_FIND_ENTRY	= $0845
  1064 = 0848			XBIOS_SET_BUFFER_SIZE	= $0848
  1065 = 0BE5			XDIRSIZE	= $0BE5
  1066 = 0BE6			XSPEED	= $0BE6
  1067 = 0BE7			XHSPEED	= $0BE7
  1068 = 0BE8			XIRQEN	= $0BE8
  1069 = 0BE9			XAUDCTL	= $0BE9
  1070 = 0BEA			XFILE	= $0BEA
  1071 = 0BEC			XDIR	= $0BEC
  1072 = 0BEE			XIOV	= $0BEE
  1073 = 0BF0			XBUFFERH	= $0BF0
  1074 = 0BF1			XBUFSIZE	= $0BF1
  1075 = 0BF2			XDAUX3	= $0BF2
  1076 = 0BF3			XSEGMENT	= $0BF3
  1077 = 0BF5			XNOTE	= $0BF5
  1078 = 0BF7			XNOTEH	= $0BF7
  1079 = 0BFC			XDEVICE	= $0BFC
  1080 = 0BFD			XDCMD	= $0BFD
  1081 = 0BFE			XDAUX1	= $0BFE
  1082 = 0BFF			XDAUX2	= $0BFF
  1083
  1084 				.endl							; UNIT XBIOS
  1085
  1086 				; ------------------------------------------------------------
  1087
  1088 14D9			.local	CRT						; UNIT
  1089
  1090 				; ------------------------------------------------------------
  1091
  1092 = 9D8D			TEXTATTR	= DATAORIGIN+$0137
  1093 = D01F			CONSOL	= $D01F
  1094 = 0000			CN_START_SELECT_OPTION	= $00
  1095 = 0001			CN_SELECT_OPTION	= $01
  1096 = 0002			CN_START_OPTION	= $02
  1097 = 0003			CN_OPTION	= $03
  1098 = 0004			CN_START_SELECT	= $04
  1099 = 0005			CN_SELECT	= $05
  1100 = 0006			CN_START	= $06
  1101 = 0007			CN_NONE	= $07
  1102 = 0000			BLACK	= $00
  1103 = 000F			WHITE	= $0F
  1104 = 0026			RED	= $26
  1105 = 00AC			CYAN	= $AC
  1106 = 0048			PURPLE	= $48
  1107 = 00B6			GREEN	= $B6
  1108 = 0086			BLUE	= $86
  1109 = 00DC			YELLOW	= $DC
  1110 = 0018			ORANGE	= $18
  1111 = 00F4			BROWN	= $F4
  1112 = 002A			LIGHT_RED	= $2A
  1113 = 0004			DARK_GREY	= $04
  1114 = 0008			GREY	= $08
  1115 = 00BC			LIGHT_GREEN	= $BC
  1116 = 009A			LIGHT_BLUE	= $9A
  1117 = 000C			LIGHT_GREY	= $0C
  1118 = 0000			BW40	= $00
  1119 = 0001			CO40	= $01
  1120 = 0002			BW80	= $02
  1121 = 0003			CO80	= $03
  1122 = 0007			MONO	= $07
  1123 = 0001			C40	= $01
  1124 = 0003			C80	= $03
  1125 = 0080			BLINK	= $80
  1126
  1127 				.endl							; UNIT CRT
  1128
  1129 				; ------------------------------------------------------------
  1130
  1131 14D9			.local	B_UTILS						; UNIT
  1132
  1133 				; ------------------------------------------------------------
  1134
  1135 = 9D8E			BASE64CHARS	= DATAORIGIN+$0138
  1136 = 9D90			adr.BASE64INV	= [DATAORIGIN+$013A] .array [128]
  1137 14D9			.var BASE64INV	= adr.BASE64INV .word
  1138
  1139 = 14D9 90 9D		BASE64INV
  1139 				.endl							; UNIT B_UTILS
  1140
  1141 				; ------------------------------------------------------------
  1142
  1143 14DB			.local	MISC						; UNIT
  1144
  1145 14DB			.local	DETECTANTIC					; FUNCTION | ASSEMBLER
  1146
  1147 				; -------------------  ASM Block 00000099  -------------------
  1148
  1149
  1150 				// ANTIC PAL Test for Atari 8-bits
  1151 				// (C) 2019 Guillermo Fuenzalida
  1152
  1153 14DB			antic_loop1
  1154 14DB AD 0B D4			lda vcount
  1155 14DE C9 64			cmp #100
  1156 14E0 90 F9			bcc antic_loop1		// wait till scanline 200
  1157 14E2 8D F9 14			sta scanline
  1158 14E5			antic_loop2
  1159 14E5 AD 0B D4			lda vcount
  1160 14E8 C9 0A			cmp #10
  1161 14EA 30 0A			bmi antic_loop2_fin
  1162 14EC CD F9 14			cmp scanline
  1163 14EF 30 F4			bmi antic_loop2
  1164 14F1 8D F9 14			sta scanline
  1165 14F4 10 EF			bpl antic_loop2
  1166
  1167 14F6			antic_loop2_fin
  1168 14F6 A0 00			ldy #$00
  1169 14F8 A9 00			lda #0
  1170 = 14F9			scanline equ *-1
  1171 14FA C9 87			cmp #135
  1172 14FC 30 01			bmi ntsc
  1173 14FE C8				iny
  1174 14FF			ntsc
  1175 14FF 8C 10 9E			sty Result
  1176
  1177
  1178 1502			@exit
  1179
  1180 				; ------------------------------------------------------------
  1181
  1182 = 9E10			RESULT	= DATAORIGIN+$01BA
  1183
  1184 1502 60				rts						; ret
  1185 				.endl
  1186
  1187 				; ------------------------------------------------------------
  1188
  1189 = 0101			adr.BANKS	= $0101
  1190 1503			.var BANKS	= adr.BANKS .word
  1191 = FFF7			DETECTOS	= $FFF7
  1192
  1193 = 1503 01 01		BANKS
  1193 				.endl							; UNIT MISC
  1194
  1195 				; ------------------------------------------------------------
  1196
  1197 1505			.local	RMT						; UNIT
  1198
  1199 1505			.local	TRMT.INIT					; PROCEDURE | ASSEMBLER
  1200 1505 8D 12 9E			sta TRMT
  1201 1508 8C 13 9E			sty TRMT+1
  1202 150B 8D 15 9E			sta PLAYER
  1203 150E 8C 16 9E			sty PLAYER+1
  1204 1511 18 69 02			add #2
  1205 1514 90 01			scc
  1206 1516 C8				iny
  1207 1517 8D 17 9E			sta MODUL
  1208 151A 8C 18 9E			sty MODUL+1
  1209
  1210 				; -------------------  ASM Block 00000109  -------------------
  1211
  1212 151D 8A 48			txa:pha
  1213
  1214 151F AD 12 9E 85 82 AD + 	mwa TRMT :bp2
  1215
  1216 1529 A0 01			ldy #1
  1217 152B B1 82			lda (:bp2),y
  1218 152D 8D 3D 15			sta adr+2
  1219
  1220 1530 C8				iny
  1221 1531 B1 82			lda (:bp2),y
  1222 1533 AA				tax		; low byte of RMT module to X reg
  1223 1534 C8				iny
  1224 1535 B1 82			lda (:bp2),y
  1225 1537 A8				tay		; hi byte of RMT module to Y reg
  1226
  1227 1538 AD 14 9E			lda a		; starting song line 0-255 to A reg
  1228 153B 20 03 FF		adr	jsr $ff03	; jsr player+3
  1229
  1230 153E 68 AA			pla:tax
  1231
  1232 				; ------------------------------------------------------------
  1233
  1234 = 9E12			TRMT	= DATAORIGIN+$01BC
  1235 = 9E14			A	= DATAORIGIN+$01BE
  1236 = 9E15			PLAYER	= DATAORIGIN+$01BF
  1237 = 9E17			MODUL	= DATAORIGIN+$01C1
  1238
  1239 = 9E12			@VarData	= TRMT
  1240 = 0007			@VarDataSize	= 7
  1241
  1242 1540			@exit
  1243 					.ifdef @new
  1244 					lda <@VarData
  1245 					sta :ztmp
  1246 					lda >@VarData
  1247 					ldy #@VarDataSize-1
  1248 					jmp @FreeMem
  1249 					els
  1250 1540 60				rts						; ret
  1251 					eif
  1252 				.endl
  1253
  1254 1541			.local	TRMT.PLAY					; PROCEDURE | ASSEMBLER
  1255 1541 8D 1D 9E			sta TRMT
  1256 1544 8C 1E 9E			sty TRMT+1
  1257 1547 8D 1F 9E			sta PLAYER
  1258 154A 8C 20 9E			sty PLAYER+1
  1259 154D 18 69 02			add #2
  1260 1550 90 01			scc
  1261 1552 C8				iny
  1262 1553 8D 21 9E			sta MODUL
  1263 1556 8C 22 9E			sty MODUL+1
  1264
  1265 				; -------------------  ASM Block 00000111  -------------------
  1266
  1267 1559 8A 48			txa:pha
  1268
  1269 155B 0E 11 9E			asl ntsc		; =0 PAL, =4 NTSC
  1270 155E 90 07			bcc skp
  1271
  1272 1560 A9 04			lda #%00000100
  1273 1562 8D 11 9E			sta ntsc
  1274
  1275 1565 D0 17			bne quit
  1276 1567			skp
  1277 1567 AD 1D 9E 8D 76 15 + 	mwa TRMT adr+1
  1278
  1279 1573 A0 01			ldy #1
  1280 1575 B9 FF FF		adr	lda $ffff,y
  1281 1578 8D 7D 15			sta ptr+2
  1282
  1283 157B 20 00 FF		ptr	jsr $ff00		; jmp (TRMT)	6502 buggy indirect jump
  1284
  1285 157E 68 AA		quit	pla:tax
  1286
  1287 				; ------------------------------------------------------------
  1288
  1289 = 9E1D			TRMT	= DATAORIGIN+$01C7
  1290 = 9E1F			PLAYER	= DATAORIGIN+$01C9
  1291 = 9E21			MODUL	= DATAORIGIN+$01CB
  1292
  1293 = 9E1D			@VarData	= TRMT
  1294 = 0006			@VarDataSize	= 6
  1295
  1296 1580			@exit
  1297 					.ifdef @new
  1298 					lda <@VarData
  1299 					sta :ztmp
  1300 					lda >@VarData
  1301 					ldy #@VarDataSize-1
  1302 					jmp @FreeMem
  1303 					els
  1304 1580 60				rts						; ret
  1305 					eif
  1306 				.endl
  1307
  1308 1581			.local	TRMT.STOP					; PROCEDURE | ASSEMBLER
  1309 1581 8D 23 9E			sta TRMT
  1310 1584 8C 24 9E			sty TRMT+1
  1311 1587 8D 25 9E			sta PLAYER
  1312 158A 8C 26 9E			sty PLAYER+1
  1313 158D 18 69 02			add #2
  1314 1590 90 01			scc
  1315 1592 C8				iny
  1316 1593 8D 27 9E			sta MODUL
  1317 1596 8C 28 9E			sty MODUL+1
  1318
  1319 				; -------------------  ASM Block 00000112  -------------------
  1320
  1321 1599 8A 48			txa:pha
  1322
  1323 159B AD 23 9E 85 82 AD + 	mwa TRMT :bp2
  1324
  1325 15A5 A0 01			ldy #1
  1326 15A7 B1 82			lda (:bp2),y
  1327 15A9 8D AE 15			sta adr+2
  1328
  1329 15AC 20 09 FF		adr	jsr $ff09	; jsr player+9
  1330
  1331 15AF 68 AA			pla:tax
  1332
  1333 				; ------------------------------------------------------------
  1334
  1335 = 9E23			TRMT	= DATAORIGIN+$01CD
  1336 = 9E25			PLAYER	= DATAORIGIN+$01CF
  1337 = 9E27			MODUL	= DATAORIGIN+$01D1
  1338
  1339 = 9E23			@VarData	= TRMT
  1340 = 0006			@VarDataSize	= 6
  1341
  1342 15B1			@exit
  1343 					.ifdef @new
  1344 					lda <@VarData
  1345 					sta :ztmp
  1346 					lda >@VarData
  1347 					ldy #@VarDataSize-1
  1348 					jmp @FreeMem
  1349 					els
  1350 15B1 60				rts						; ret
  1351 					eif
  1352 				.endl
  1353
  1354 				; ------------------------------------------------------------
  1355 				; ------------------------------------------------------------
  1356 15B2			@UnitInit
  1357
  1358 				; optimize FAIL ('MISC.DETECTANTIC', RMT), line = 159
  1359
  1360 15B2 20 DB 14			jsr MISC.DETECTANTIC
  1361 15B5 AD 10 9E			lda MISC.DETECTANTIC.RESULT
  1362 15B8 F0 05			jeq l_0244
  1363
  1364 				; optimize OK (RMT), line = 160
  1365
  1366 15BA A9 00			lda #$00
  1367 15BC 4C C1 15			jmp l_0252
  1368 15BF			l_0244
  1369
  1370 				; optimize OK (RMT), line = 162
  1371
  1372 15BF A9 04			lda #$04
  1373 15C1			l_0252
  1374 15C1 8D 11 9E			sta NTSC
  1375
  1376 15C4 60				rts
  1377
  1378 				; ------------------------------------------------------------
  1379
  1380 = 9E11			NTSC	= DATAORIGIN+$01BB
  1381
  1382 				.endl							; UNIT RMT
  1383
  1384 				; ------------------------------------------------------------
  1385
  1386 15C5			.local	DOS						; UNIT
  1387
  1388 				; ------------------------------------------------------------
  1389
  1390 = D014			PALNTSC	= $D014
  1391
  1392 				.endl							; UNIT DOS
  1393
  1394 				; ------------------------------------------------------------
  1395
  1396 15C5			.local	STRUTILS					; UNIT
  1397
  1398 				; ------------------------------------------------------------
  1399
  1400 				.endl							; UNIT STRUTILS
  1401
  1402 				; ------------------------------------------------------------
  1403
  1404 15C5			.local	SYSUTILS					; UNIT
  1405
  1406 15C5			.local	INTTOSTR					; FUNCTION | ASSEMBLER | OVERLOAD
  1407 15C5			.local	@010185000
  1408
  1409 				; ------------------------------------------------------------
  1410
  1411 				; Generate Assignment for CARDINAL / INTEGER / REAL / SINGLE
  1412 				; as Pointer
  1413 15C5 B5 94			lda :STACKORIGIN,x
  1414 15C7 8D 29 9E			sta A
  1415 15CA B5 A4			lda :STACKORIGIN+STACKWIDTH,x
  1416 15CC 8D 2A 9E			sta A+1
  1417 15CF B5 B4			lda :STACKORIGIN+STACKWIDTH*2,x
  1418 15D1 8D 2B 9E			sta A+2
  1419 15D4 B5 C4			lda :STACKORIGIN+STACKWIDTH*3,x
  1420 15D6 8D 2C 9E			sta A+3
  1421 15D9 CA				dex
  1422 15DA			@main
  1423
  1424 				; -------------------  ASM Block 00000126  -------------------
  1425
  1426 15DA 8A 48			txa:pha
  1427
  1428 15DC E8				inx
  1429
  1430 					@ValueToStr #@printINT
  1430 				 LDY> @PRINTINT\ LDA< @PRINTINT\ JSR @VALUETOSTR
  1430 15DD A0 11		 LDY> @PRINTINT
  1430 15DF A9 F4		 LDA< @PRINTINT
  1430 15E1 20 C8 11		 JSR @VALUETOSTR
  1431
  1432 15E4 A2 20			ldx #$20
  1433 15E6 BD 00 04 9D 2D 9E + 	mva:rpl @buf,x adr.Result,x-
  1434
  1435 15EF 68 AA			pla:tax
  1436
  1437 15F1			@exit
  1438
  1439 				; ------------------------------------------------------------
  1440
  1441 				; Push WORD / SMALLINT / SHORTREAL / POINTER
  1442 				; as Pointer
  1443
  1444 15F1 E8				inx
  1445 15F2 AD FD 15 95 94		mva RESULT :STACKORIGIN,x
  1446 15F7 AD FE 15 95 A4		mva RESULT+1 :STACKORIGIN+STACKWIDTH,x
  1447
  1448 					.ifdef @new
  1449 					lda <@VarData
  1450 					sta :ztmp
  1451 					lda >@VarData
  1452 					ldy #@VarDataSize-1
  1453 					jmp @FreeMem
  1454 					eif
  1455
  1456 				; ------------------------------------------------------------
  1457
  1458 = 9E29			A	= DATAORIGIN+$01D3
  1459 = 9E2D			adr.RESULT	= [DATAORIGIN+$01D7] .array [33]
  1460 15FC			.var RESULT	= adr.RESULT .word
  1461
  1462 = 9E29			@VarData	= A
  1463 = 0025			@VarDataSize	= 37
  1464
  1465 15FC 60				rts						; ret
  1466 = 15FD 2D 9E		RESULT
  1466 				.endl
  1467 				.endl							; overload
  1468
  1469 15FF			.local	INTTOSTR					; FUNCTION | ASSEMBLER | OVERLOAD
  1470 15FF			.local	@010182000
  1471
  1472 				; ------------------------------------------------------------
  1473
  1474 				; Generate Assignment for CARDINAL / INTEGER / REAL / SINGLE
  1475 				; as Pointer
  1476 15FF B5 94			lda :STACKORIGIN,x
  1477 1601 8D 4E 9E			sta A
  1478 1604 B5 A4			lda :STACKORIGIN+STACKWIDTH,x
  1479 1606 8D 4F 9E			sta A+1
  1480 1609 B5 B4			lda :STACKORIGIN+STACKWIDTH*2,x
  1481 160B 8D 50 9E			sta A+2
  1482 160E B5 C4			lda :STACKORIGIN+STACKWIDTH*3,x
  1483 1610 8D 51 9E			sta A+3
  1484 1613 CA				dex
  1485 1614			@main
  1486
  1487 				; -------------------  ASM Block 00000127  -------------------
  1488
  1489 1614 8A 48			txa:pha
  1490
  1491 1616 E8				inx
  1492
  1493 					@ValueToStr #@printCARD
  1493 				 LDY> @PRINTCARD\ LDA< @PRINTCARD\ JSR @VALUETOSTR
  1493 1617 A0 11		 LDY> @PRINTCARD
  1493 1619 A9 FE		 LDA< @PRINTCARD
  1493 161B 20 C8 11		 JSR @VALUETOSTR
  1494
  1495 161E A2 20			ldx #$20
  1496 1620 BD 00 04 9D 52 9E + 	mva:rpl @buf,x adr.Result,x-
  1497
  1498 1629 68 AA			pla:tax
  1499
  1500 162B			@exit
  1501
  1502 				; ------------------------------------------------------------
  1503
  1504 				; Push WORD / SMALLINT / SHORTREAL / POINTER
  1505 				; as Pointer
  1506
  1507 162B E8				inx
  1508 162C AD 37 16 95 94		mva RESULT :STACKORIGIN,x
  1509 1631 AD 38 16 95 A4		mva RESULT+1 :STACKORIGIN+STACKWIDTH,x
  1510
  1511 					.ifdef @new
  1512 					lda <@VarData
  1513 					sta :ztmp
  1514 					lda >@VarData
  1515 					ldy #@VarDataSize-1
  1516 					jmp @FreeMem
  1517 					eif
  1518
  1519 				; ------------------------------------------------------------
  1520
  1521 = 9E4E			A	= DATAORIGIN+$01F8
  1522 = 9E52			adr.RESULT	= [DATAORIGIN+$01FC] .array [33]
  1523 1636			.var RESULT	= adr.RESULT .word
  1524
  1525 = 9E4E			@VarData	= A
  1526 = 0025			@VarDataSize	= 37
  1527
  1528 1636 60				rts						; ret
  1529 = 1637 52 9E		RESULT
  1529 				.endl
  1530 				.endl							; overload
  1531
  1532 				; ------------------------------------------------------------
  1533
  1534 = 0001			FAREADONLY	= $01
  1535 = 0002			FAHIDDEN	= $02
  1536 = 0004			FASYSFILE	= $04
  1537 = 0008			FAVOLUMEID	= $08
  1538 = 0010			FADIRECTORY	= $10
  1539 = 0020			FAARCHIVE	= $20
  1540 = 003F			FAANYFILE	= $3F
  1541
  1542 				.endl							; UNIT SYSUTILS
  1543
  1544 				; ------------------------------------------------------------
  1545
  1546 1639			.local	B_SYSTEM					; UNIT
  1547
  1548 1639			.local	SYSTEMOFF					; PROCEDURE | ASSEMBLER | OVERLOAD
  1549 1639			.local	@010180000
  1550 1639 8D 74 9E			sta PORT_B
  1551
  1552 				; -------------------  ASM Block 00000133  -------------------
  1553
  1554
  1555 						;lda:cmp:req 20 ;; removed due to problem with nmien = 0 already set
  1556 163C 78					sei
  1557 163D A9 00 8D 0E D4			mva #0 NMIEN
  1558
  1559 1642 AD 74 9E 8D 01 D3			mva port_b PORTB
  1560 1648 A9 72 8D FA FF A9 + 		mwa #__nmi NMIVEC
  1561
  1562 1652 A9 88				lda <__iret
  1563 1654 8D FE FF				sta IRQVEC
  1564 1657 8D 86 16				sta __vblvec
  1565 165A 8D 78 16				sta __dlivec
  1566
  1567 165D A9 16				lda >__iret
  1568 165F 8D FF FF				sta IRQVEC+1
  1569 1662 8D 87 16				sta __vblvec+1
  1570 1665 8D 79 16				sta __dlivec+1
  1571
  1572 1668 A9 40 8D 0E D4			mva #$40 NMIEN
  1573 166D 8D 73 9E				sta __nmien
  1574 1670 D0 17				bne __stop
  1575 1672			__nmi
  1576 1672 2C 0F D4				bit NMIST
  1577 1675 10 04				bpl __vbl
  1578 1677 4C 78 16				jmp __dlivec
  1579 = 1678			.def :__dlivec = *-2
  1580 167A 40					rti
  1581 167B			__vbl
  1582 167B E6 14				inc rtclok+2
  1583 167D D0 06				bne __vblvec-1
  1584 167F E6 13				inc rtclok+1
  1585 1681 D0 02				bne __vblvec-1
  1586 1683 E6 12				inc rtclok
  1587 1685 4C 86 16				jmp __vblvec
  1588 = 1686			.def :__vblvec = *-2
  1589 = 1688			.def :__iret
  1590 1688 40			    	rti
  1591 1689			__stop
  1592
  1593 				; ------------------------------------------------------------
  1594
  1595 = 9E74			PORT_B	= DATAORIGIN+$021E
  1596
  1597 = 9E74			@VarData	= PORT_B
  1598 = 0001			@VarDataSize	= 1
  1599
  1600 1689			@exit
  1601 					.ifdef @new
  1602 					lda <@VarData
  1603 					sta :ztmp
  1604 					lda >@VarData
  1605 					ldy #@VarDataSize-1
  1606 					jmp @FreeMem
  1607 					els
  1608 1689 60				rts						; ret
  1609 					eif
  1610 				.endl
  1611 				.endl							; overload
  1612
  1613 168A			.local	SYSTEMOFF					; PROCEDURE | OVERLOAD
  1614 168A			.local	@00
  1615
  1616 				; optimize OK (B_SYSTEM), line = 180
  1617
  1618 168A A9 FE			lda #$FE
  1619 168C 20 39 16			jsr SYSTEMOFF.@010180000
  1620
  1621 168F			@exit
  1622 					.ifdef @new
  1623 					lda <@VarData
  1624 					sta :ztmp
  1625 					lda >@VarData
  1626 					ldy #@VarDataSize-1
  1627 					jmp @FreeMem
  1628 					els
  1629 168F 60				rts						; ret
  1630 					eif
  1631 				.endl
  1632 				.endl							; overload
  1633
  1634 1690			.local	ENABLEDLI					; PROCEDURE | ASSEMBLER
  1635
  1636 				; -------------------  ASM Block 00000140  -------------------
  1637
  1638
  1639 1690 A5 14 C5 14 F0 FC			lda:cmp:req 20
  1640 1696 A9 00 8D 0E D4			mva #0 NMIEN
  1641 169B AD 75 9E 8D 78 16 + 		mwa dliptr __dlivec
  1642 16A7 A9 C0 8D 0E D4			mva #$c0 NMIEN
  1643 16AC 8D 73 9E				sta __nmien
  1644
  1645 				; ------------------------------------------------------------
  1646
  1647 = 9E75			DLIPTR	= DATAORIGIN+$021F
  1648
  1649 = 9E75			@VarData	= DLIPTR
  1650 = 0002			@VarDataSize	= 2
  1651
  1652 16AF			@exit
  1653 					.ifdef @new
  1654 					lda <@VarData
  1655 					sta :ztmp
  1656 					lda >@VarData
  1657 					ldy #@VarDataSize-1
  1658 					jmp @FreeMem
  1659 					els
  1660 16AF 60				rts						; ret
  1661 					eif
  1662 				.endl
  1663
  1664 16B0			.local	DISABLEDLI					; PROCEDURE | ASSEMBLER
  1665
  1666 				; -------------------  ASM Block 00000141  -------------------
  1667
  1668
  1669 16B0 A5 14 C5 14 F0 FC			lda:cmp:req 20
  1670 16B6 A9 40 8D 0E D4			mva #$40 NMIEN
  1671 16BB 8D 73 9E				sta __nmien
  1672
  1673 16BE			@exit
  1674 					.ifdef @new
  1675 					lda <@VarData
  1676 					sta :ztmp
  1677 					lda >@VarData
  1678 					ldy #@VarDataSize-1
  1679 					jmp @FreeMem
  1680 					els
  1681 16BE 60				rts						; ret
  1682 					eif
  1683 				.endl
  1684
  1685 16BF			.local	WAITFRAME					; PROCEDURE | ASSEMBLER
  1686
  1687 				; -------------------  ASM Block 00000142  -------------------
  1688
  1689
  1690 16BF A5 14 C5 14 F0 FC	    lda:cmp:req rtclok+2
  1691
  1692 16C5			@exit
  1693 					.ifdef @new
  1694 					lda <@VarData
  1695 					sta :ztmp
  1696 					lda >@VarData
  1697 					ldy #@VarDataSize-1
  1698 					jmp @FreeMem
  1699 					els
  1700 16C5 60				rts						; ret
  1701 					eif
  1702 				.endl
  1703
  1704 16C6			.local	WAITFRAMES					; PROCEDURE
  1705 16C6 8D 77 9E			sta FRAMES
  1706
  1707 				; --- WhileProlog
  1708 16C9 4C D2 16			jmp l_02AA
  1709 16CC			l_02AB
  1710
  1711 				; optimize FAIL ('WAITFRAME', B_SYSTEM), line = 269
  1712
  1713 16CC 20 BF 16			jsr WAITFRAME
  1714
  1715 				; optimize FAIL (0, B_SYSTEM), line = 270
  1716
  1717 16CF CE 77 9E			dec FRAMES
  1718 16D2			l_02AA
  1719
  1720 				; optimize OK (B_SYSTEM), line = 268
  1721
  1722 16D2 AD 77 9E			lda FRAMES
  1723 16D5 D0 F5			jne l_02AB
  1724
  1725 				; ------------------------------------------------------------
  1726
  1727 = 9E77			FRAMES	= DATAORIGIN+$0221
  1728
  1729 = 9E77			@VarData	= FRAMES
  1730 = 0001			@VarDataSize	= 1
  1731
  1732 16D7			@exit
  1733 					.ifdef @new
  1734 					lda <@VarData
  1735 					sta :ztmp
  1736 					lda >@VarData
  1737 					ldy #@VarDataSize-1
  1738 					jmp @FreeMem
  1739 					els
  1740 16D7 60				rts						; ret
  1741 					eif
  1742 				.endl
  1743
  1744 16D8			.local	SETCHARSET					; PROCEDURE
  1745 16D8 8D 78 9E			sta MSB
  1746
  1747 				; optimize OK (B_SYSTEM), line = 276
  1748
  1749 16DB 8D 09 D4			sta ATARI.CHBASE
  1750
  1751 				; ------------------------------------------------------------
  1752
  1753 = 9E78			MSB	= DATAORIGIN+$0222
  1754
  1755 = 9E78			@VarData	= MSB
  1756 = 0001			@VarDataSize	= 1
  1757
  1758 16DE			@exit
  1759 					.ifdef @new
  1760 					lda <@VarData
  1761 					sta :ztmp
  1762 					lda >@VarData
  1763 					ldy #@VarDataSize-1
  1764 					jmp @FreeMem
  1765 					els
  1766 16DE 60				rts						; ret
  1767 					eif
  1768 				.endl
  1769
  1770 				; ------------------------------------------------------------
  1771
  1772 = 9E73			__NMIEN	= DATAORIGIN+$021D
  1773 = 0080			PORTB_SELFTEST_OFF	= $80
  1774 = 0002			PORTB_BASIC_OFF	= $02
  1775 = 0001			PORTB_SYSTEM_ON	= $01
  1776
  1777 				.endl							; UNIT B_SYSTEM
  1778
  1779 				; ------------------------------------------------------------
  1780
  1781 16DF			.local	B_CRT						; UNIT
  1782
  1783 16DF			.local	ATASCII2ANTIC					; FUNCTION | OVERLOAD
  1784 16DF			.local	@010180000
  1785 16DF 8D 82 9E			sta C
  1786
  1787 				; -------------------  ASM Block 00000143  -------------------
  1788
  1789
  1790 16E2 AD 82 9E		        lda c
  1791 16E5 0A			        asl
  1792 16E6 08			        php
  1793 16E7 C9 C0		        cmp #2*$60
  1794 16E9 B0 06		        bcs @+
  1795 16EB E9 3F		        sbc #2*$20-1
  1796 16ED B0 02		        bcs @+
  1797 16EF 69 C0		        adc #2*$60
  1798 16F1 28			@       plp
  1799 16F2 6A			        ror
  1800 16F3 8D 83 9E		        sta result;
  1801 				    
  1802 16F6			@exit
  1803
  1804 				; ------------------------------------------------------------
  1805
  1806 = 9E82			C	= DATAORIGIN+$022C
  1807 = 9E83			RESULT	= DATAORIGIN+$022D
  1808
  1809 = 9E82			@VarData	= C
  1810 = 0001			@VarDataSize	= 1
  1811
  1812 16F6 60				rts						; ret
  1813 				.endl
  1814 				.endl							; overload
  1815
  1816 16F7			.local	ATASCII2ANTIC					; FUNCTION | OVERLOAD
  1817 16F7			.local	@0101898600000100
  1818
  1819 				; ------------------------------------------------------------
  1820
  1821 				; Generate Assignment for WORD / SMALLINT / SHORTREAL / POINTER
  1822 				; as Pointer
  1823 16F7 B5 94			lda :STACKORIGIN,x
  1824 16F9 85 82			sta :bp2
  1825 16FB B5 A4			lda :STACKORIGIN+STACKWIDTH,x
  1826 16FD 85 83			sta :bp2+1
  1827 16FF A0 00			ldy #$00
  1828 1701 B1 82 99 84 9E C8 + 	mva:rne (:bp2),y adr.S,y+
  1829 1709 CA				dex
  1830 170A			@main
  1831
  1832 				; optimize OK (B_CRT), line = 468
  1833
  1834 170A AD 84 9E			lda adr.S
  1835 170D 8D 84 9F			sta adr.RESULT
  1836
  1837 				; optimize OK (B_CRT), line = 469
  1838
  1839 1710 A9 01			lda #$01
  1840 1712 8D 84 A0			sta I
  1841 1715 AD 84 9E 8D 1C 17		mva adr.S @FORTMP_02E2_0
  1842
  1843 171B			l_02E5
  1844 				; --- ForToDoCondition
  1845 171B A9 00			lda @FORTMP_02E2_0::#$00
  1846 171D CD 84 A0			cmp I
  1847 1720 90 21			jcc l_02F3
  1848
  1849 				; optimize FAIL (1, B_CRT), line = 470
  1850
  1851 1722 E8				inx
  1852 1723 AD 84 A0 95 94		mva I :STACKORIGIN,x
  1853 1728 A9 00 95 A4			mva #$00 :STACKORIGIN+STACKWIDTH,x
  1854 172C AC 84 A0			ldy I
  1855 172F B9 84 9E			lda adr.S,y
  1856 1732 20 DF 16			jsr ATASCII2ANTIC.@010180000
  1857 1735 B4 94			ldy :STACKORIGIN,x
  1858 1737 AD 83 9E			lda ATASCII2ANTIC.@010180000.RESULT
  1859 173A 99 84 9F			sta adr.RESULT,y
  1860 173D CA				dex
  1861
  1862 				; --- ForToDoEpilog
  1863 173E EE 84 A0			inc I
  1864 1741 D0 D8			jne l_02E5
  1865 1743			l_02F3
  1866 1743			@exit
  1867
  1868 				; ------------------------------------------------------------
  1869
  1870 = 9E84			adr.S	= [DATAORIGIN+$022E] .array [256]
  1871 1743			.var S	= adr.S .word
  1872 = 9F84			adr.RESULT	= [DATAORIGIN+$032E] .array [256]
  1873 1743			.var RESULT	= adr.RESULT .word
  1874 = A084			I	= DATAORIGIN+$042E
  1875
  1876 = 1744			@VarData	= S
  1877 = 0201			@VarDataSize	= 513
  1878
  1879 1743 60				rts						; ret
  1880 = 1744 84 9E		S
  1880 = 1746 84 9F		RESULT
  1880 				.endl
  1881 				.endl							; overload
  1882
  1883 1748			.local	CRT_INIT					; PROCEDURE | OVERLOAD
  1884 1748			.local	@03018000001800000181000
  1885
  1886 				; optimize OK (B_CRT), line = 483
  1887
  1888 1748 AD 86 A0			lda VRAM_ADDRESS
  1889 174B 8D 79 9E			sta CRT_VRAM
  1890 174E AD 87 A0			lda VRAM_ADDRESS+1
  1891 1751 8D 7A 9E			sta CRT_VRAM+1
  1892
  1893 				; optimize OK (B_CRT), line = 484
  1894
  1895 1754 AD 88 A0			lda WIDTH
  1896 1757 8D 7D 9E			sta CRT_SCREENWIDTH
  1897
  1898 				; optimize OK (B_CRT), line = 485
  1899
  1900 175A AD 89 A0			lda HEIGHT
  1901 175D 8D 7E 9E			sta CRT_SCREENHEIGHT
  1902
  1903 				; optimize OK (B_CRT), line = 486
  1904
  1905 1760 85 8C			sta :ecx
  1906 1762 AD 88 A0			lda WIDTH
  1907 1765 85 84			sta :eax
  1908 					.ifdef fmulinit
  1909 					fmulu_8
  1910 					els
  1911 1767 20 43 10			imulCL
  1912 					eif
  1913 176A 8D 7C 9E			sta CRT_SIZE+1
  1914 176D A5 84			lda :eax
  1915 176F 8D 7B 9E			sta CRT_SIZE
  1916
  1917 				; optimize OK (B_CRT), line = 487
  1918
  1919 1772 AD 79 9E			lda CRT_VRAM
  1920 1775 8D 7F 9E			sta CRT_CURSOR
  1921 1778 AD 7A 9E			lda CRT_VRAM+1
  1922 177B 8D 80 9E			sta CRT_CURSOR+1
  1923
  1924 				; optimize OK (B_CRT), line = 488
  1925
  1926 177E A9 00			lda #$00
  1927 1780 8D 81 9E			sta CRT_LEFTMARGIN
  1928
  1929 				; ------------------------------------------------------------
  1930
  1931 = A086			VRAM_ADDRESS	= DATAORIGIN+$0430
  1932 = A088			WIDTH	= DATAORIGIN+$0432
  1933 = A089			HEIGHT	= DATAORIGIN+$0433
  1934
  1935 = A086			@VarData	= VRAM_ADDRESS
  1936 = 0004			@VarDataSize	= 4
  1937
  1938 1783			@exit
  1939 					.ifdef @new
  1940 					lda <@VarData
  1941 					sta :ztmp
  1942 					lda >@VarData
  1943 					ldy #@VarDataSize-1
  1944 					jmp @FreeMem
  1945 					els
  1946 1783 60				rts						; ret
  1947 					eif
  1948 				.endl
  1949 				.endl							; overload
  1950
  1951 1784			.local	CRT_CLEAR					; PROCEDURE | OVERLOAD
  1952 1784			.local	@00
  1953
  1954 				; optimize OK (B_CRT), line = 504
  1955
  1956 1784 AD 79 9E			lda CRT_VRAM
  1957 1787 85 88			sta SYSTEM.FILLCHAR.@03018000001810000188000.A
  1958 1789 AD 7A 9E			lda CRT_VRAM+1
  1959 178C 85 89			sta SYSTEM.FILLCHAR.@03018000001810000188000.A+1
  1960 178E AD 7B 9E			lda CRT_SIZE
  1961 1791 85 8C			sta SYSTEM.FILLCHAR.@03018000001810000188000.COUNT
  1962 1793 AD 7C 9E			lda CRT_SIZE+1
  1963 1796 85 8D			sta SYSTEM.FILLCHAR.@03018000001810000188000.COUNT+1
  1964 1798 A9 00			lda #$00
  1965 179A 85 84			sta SYSTEM.FILLCHAR.@03018000001810000188000.VALUE
  1966 179C				.LOCAL +MAIN.SYSTEM.FILLCHAR.@03018000001810000188000
  1967 179C				m@INLINE
Macro: MAIN.SYSTEM.FILLCHAR.@03018000001810000188000.M@INLINE [Source: main_PL.a65]
     4 179C 20 2C 0F			jsr @fill
Source: main_PL.a65
  1968 					.ENDL
  1969
  1970 				; optimize OK (B_CRT), line = 505
  1971
  1972 179F AD 79 9E			lda CRT_VRAM
  1973 17A2 8D 7F 9E			sta CRT_CURSOR
  1974 17A5 AD 7A 9E			lda CRT_VRAM+1
  1975 17A8 8D 80 9E			sta CRT_CURSOR+1
  1976
  1977 17AB			@exit
  1978 					.ifdef @new
  1979 					lda <@VarData
  1980 					sta :ztmp
  1981 					lda >@VarData
  1982 					ldy #@VarDataSize-1
  1983 					jmp @FreeMem
  1984 					els
  1985 17AB 60				rts						; ret
  1986 					eif
  1987 				.endl
  1988 				.endl							; overload
  1989
  1990 17AC			.local	CRT_GOTOXY					; PROCEDURE
  1991
  1992 				; optimize OK (B_CRT), line = 516
  1993
  1994 17AC AD 7D 9E			lda CRT_SCREENWIDTH
  1995 17AF 85 8C			sta :ecx
  1996 17B1 AD 8B A0			lda Y
  1997 17B4 85 84			sta :eax
  1998 					.ifdef fmulinit
  1999 					fmulu_8
  2000 					els
  2001 17B6 20 43 10			imulCL
  2002 					eif
  2003 17B9 A5 84			lda :eax
  2004 17BB 18 6D 8A A0			add X
  2005 17BF 85 9D			sta :STACKORIGIN+9
  2006 17C1 A5 85			lda :eax+1
  2007 17C3 69 00			adc #$00
  2008 17C5 85 AD			sta :STACKORIGIN+STACKWIDTH+9
  2009 17C7 A5 9D			lda :STACKORIGIN+9
  2010 17C9 18 6D 79 9E			add CRT_VRAM
  2011 17CD 8D 7F 9E			sta CRT_CURSOR
  2012 17D0 A5 AD			lda :STACKORIGIN+STACKWIDTH+9
  2013 17D2 6D 7A 9E			adc CRT_VRAM+1
  2014 17D5 8D 80 9E			sta CRT_CURSOR+1
  2015
  2016 				; ------------------------------------------------------------
  2017
  2018 = A08A			X	= DATAORIGIN+$0434
  2019 = A08B			Y	= DATAORIGIN+$0435
  2020
  2021 = A08A			@VarData	= X
  2022 = 0002			@VarDataSize	= 2
  2023
  2024 17D8			@exit
  2025 					.ifdef @new
  2026 					lda <@VarData
  2027 					sta :ztmp
  2028 					lda >@VarData
  2029 					ldy #@VarDataSize-1
  2030 					jmp @FreeMem
  2031 					els
  2032 17D8 60				rts						; ret
  2033 					eif
  2034 				.endl
  2035
  2036 17D9			.local	CRT_WHEREY					; FUNCTION
  2037
  2038 				; optimize OK (B_CRT), line = 521
  2039
  2040 17D9 AD 7F 9E			lda CRT_CURSOR
  2041 17DC 38 ED 79 9E			sub CRT_VRAM
  2042 17E0 85 84			sta @WORD.DIV.A
  2043 17E2 AD 80 9E			lda CRT_CURSOR+1
  2044 17E5 ED 7A 9E			sbc CRT_VRAM+1
  2045 17E8 85 85			sta @WORD.DIV.A+1
  2046 17EA AD 7D 9E			lda CRT_SCREENWIDTH
  2047 17ED 85 8C			sta @WORD.DIV.B
  2048 17EF A9 00			lda #$00
  2049 17F1 85 8D			sta @WORD.DIV.B+1
  2050 17F3 20 24 11			jsr @WORD.DIV
  2051 17F6 A5 84			lda :eax
  2052 17F8 8D 8C A0			sta RESULT
  2053 17FB			@exit
  2054
  2055 				; ------------------------------------------------------------
  2056
  2057 = A08C			RESULT	= DATAORIGIN+$0436
  2058
  2059 17FB 60				rts						; ret
  2060 				.endl
  2061
  2062 17FC			.local	CRT_WHEREX					; FUNCTION
  2063
  2064 				; optimize OK (B_CRT), line = 526
  2065
  2066 17FC AD 7F 9E			lda CRT_CURSOR
  2067 17FF 38 ED 79 9E			sub CRT_VRAM
  2068 1803 85 84			sta @WORD.MOD.A
  2069 1805 AD 80 9E			lda CRT_CURSOR+1
  2070 1808 ED 7A 9E			sbc CRT_VRAM+1
  2071 180B 85 85			sta @WORD.MOD.A+1
  2072 180D AD 7D 9E			lda CRT_SCREENWIDTH
  2073 1810 85 8C			sta @WORD.MOD.B
  2074 1812 A9 00			lda #$00
  2075 1814 85 8D			sta @WORD.MOD.B+1
  2076 1816 20 24 11			jsr @WORD.MOD
  2077 1819 A5 90			lda @WORD.MOD.RESULT
  2078 181B 8D 8D A0			sta RESULT
  2079 181E			@exit
  2080
  2081 				; ------------------------------------------------------------
  2082
  2083 = A08D			RESULT	= DATAORIGIN+$0437
  2084
  2085 181E 60				rts						; ret
  2086 				.endl
  2087
  2088 181F			.local	CRT_WRITE					; PROCEDURE | OVERLOAD
  2089 181F			.local	@0101898600000100
  2090
  2091 				; ------------------------------------------------------------
  2092
  2093 				; Generate Assignment for WORD / SMALLINT / SHORTREAL / POINTER
  2094 				; as Pointer
  2095 181F B5 94			lda :STACKORIGIN,x
  2096 1821 85 82			sta :bp2
  2097 1823 B5 A4			lda :STACKORIGIN+STACKWIDTH,x
  2098 1825 85 83			sta :bp2+1
  2099 1827 A0 00			ldy #$00
  2100 1829 B1 82 99 8E A0 C8 + 	mva:rne (:bp2),y adr.S,y+
  2101 1831 CA				dex
  2102 1832			@main
  2103
  2104 				; optimize OK (B_CRT), line = 531
  2105
  2106 1832 AD 8E A0			lda adr.S
  2107 1835 85 84			sta SYSTEM.MOVE.@03018100001880000300000.COUNT
  2108 1837 A9 8F			lda <adr.S+$01
  2109 1839 85 88			sta SYSTEM.MOVE.@03018100001880000300000.SOURCE
  2110 183B A9 A0			lda >adr.S+$01
  2111 183D 85 89			sta SYSTEM.MOVE.@03018100001880000300000.SOURCE+1
  2112 183F AD 7F 9E			lda CRT_CURSOR
  2113 1842 85 8C			sta SYSTEM.MOVE.@03018100001880000300000.DEST
  2114 1844 AD 80 9E			lda CRT_CURSOR+1
  2115 1847 85 8D			sta SYSTEM.MOVE.@03018100001880000300000.DEST+1
  2116 1849 A9 00			lda #$00
  2117 184B 85 85			sta SYSTEM.MOVE.@03018100001880000300000.COUNT+1
  2118 184D				.LOCAL +MAIN.SYSTEM.MOVE.@03018100001880000300000
  2119 184D				m@INLINE
Macro: MAIN.SYSTEM.MOVE.@03018100001880000300000.M@INLINE [Source: main_PL.a65]
     4 184D 20 D7 0E			jsr @move
Source: main_PL.a65
  2120 					.ENDL
  2121
  2122 				; optimize OK (B_CRT), line = 532
  2123
  2124 1850 AD 8E A0			lda adr.S
  2125 1853 18 6D 7F 9E			add CRT_CURSOR
  2126 1857 8D 7F 9E			sta CRT_CURSOR
  2127 185A AD 80 9E			lda CRT_CURSOR+1
  2128 185D 69 00			adc #$00
  2129 185F 8D 80 9E			sta CRT_CURSOR+1
  2130
  2131 				; ------------------------------------------------------------
  2132
  2133 = A08E			adr.S	= [DATAORIGIN+$0438] .array [256]
  2134 1862			.var S	= adr.S .word
  2135
  2136 = 1863			@VarData	= S
  2137 = 0100			@VarDataSize	= 256
  2138
  2139 1862			@exit
  2140 					.ifdef @new
  2141 					lda <@VarData
  2142 					sta :ztmp
  2143 					lda >@VarData
  2144 					ldy #@VarDataSize-1
  2145 					jmp @FreeMem
  2146 					els
  2147 1862 60				rts						; ret
  2148 					eif
  2149 = 1863 8E A0		S
  2149 				.endl
  2150 				.endl							; overload
  2151
  2152 1865			.local	CRT_WRITE					; PROCEDURE | OVERLOAD
  2153 1865			.local	@010186000
  2154 1865 8D 8E A1			sta C
  2155
  2156 				; optimize OK (B_CRT), line = 537
  2157
  2158 1868 AC 80 9E			ldy CRT_CURSOR+1
  2159 186B 84 81			sty :bp+1
  2160 186D AC 7F 9E			ldy CRT_CURSOR
  2161 1870 AD 8E A1			lda C
  2162 1873 91 80			sta (:bp),y
  2163
  2164 				; optimize FAIL (0, B_CRT), line = 538
  2165
  2166 1875 EE 7F 9E			inc CRT_CURSOR
  2167 1878 D0 03			sne
  2168 187A EE 80 9E			inc CRT_CURSOR+1
  2169
  2170 				; ------------------------------------------------------------
  2171
  2172 = A18E			C	= DATAORIGIN+$0538
  2173
  2174 = A18E			@VarData	= C
  2175 = 0001			@VarDataSize	= 1
  2176
  2177 187D			@exit
  2178 					.ifdef @new
  2179 					lda <@VarData
  2180 					sta :ztmp
  2181 					lda >@VarData
  2182 					ldy #@VarDataSize-1
  2183 					jmp @FreeMem
  2184 					els
  2185 187D 60				rts						; ret
  2186 					eif
  2187 				.endl
  2188 				.endl							; overload
  2189
  2190 187E			.local	CRT_WRITE					; PROCEDURE | OVERLOAD
  2191 187E			.local	@010180000
  2192 187E 8D 8F A1			sta NUM
  2193
  2194 				; optimize FAIL ('SYSUTILS.INTTOSTR.@010182000', B_CRT), line = 543
  2195
  2196 1881 E8				inx
  2197 1882 AD 8F A1 95 94		mva NUM :STACKORIGIN,x
  2198 1887 A9 00 95 A4			mva #$00 :STACKORIGIN+STACKWIDTH,x
  2199 188B 95 B4			sta :STACKORIGIN+STACKWIDTH*2,x
  2200 188D 95 C4			sta :STACKORIGIN+STACKWIDTH*3,x
  2201 188F 20 FF 15			jsr SYSUTILS.INTTOSTR.@010182000
  2202 1892 20 F7 16			jsr ATASCII2ANTIC.@0101898600000100
  2203 1895 E8				inx
  2204 1896 AD 46 17 95 94		mva ATASCII2ANTIC.@0101898600000100.RESULT :STACKORIGIN,x
  2205 189B AD 47 17 95 A4		mva ATASCII2ANTIC.@0101898600000100.RESULT+1 :STACKORIGIN+STACKWIDTH,x
  2206 18A0 20 1F 18			jsr CRT_WRITE.@0101898600000100
  2207
  2208 				; ------------------------------------------------------------
  2209
  2210 = A18F			NUM	= DATAORIGIN+$0539
  2211
  2212 = A18F			@VarData	= NUM
  2213 = 0001			@VarDataSize	= 1
  2214
  2215 18A3			@exit
  2216 					.ifdef @new
  2217 					lda <@VarData
  2218 					sta :ztmp
  2219 					lda >@VarData
  2220 					ldy #@VarDataSize-1
  2221 					jmp @FreeMem
  2222 					els
  2223 18A3 60				rts						; ret
  2224 					eif
  2225 				.endl
  2226 				.endl							; overload
  2227
  2228 18A4			.local	CRT_WRITE					; PROCEDURE | OVERLOAD
  2229 18A4			.local	@010181000
  2230
  2231 				; optimize FAIL ('SYSUTILS.INTTOSTR.@010182000', B_CRT), line = 548
  2232
  2233 18A4 E8				inx
  2234 18A5 AD 90 A1 95 94		mva NUM :STACKORIGIN,x
  2235 18AA AD 91 A1 95 A4		mva NUM+1 :STACKORIGIN+STACKWIDTH,x
  2236 18AF A9 00 95 B4			mva #$00 :STACKORIGIN+STACKWIDTH*2,x
  2237 18B3 95 C4			sta :STACKORIGIN+STACKWIDTH*3,x
  2238 18B5 20 FF 15			jsr SYSUTILS.INTTOSTR.@010182000
  2239 18B8 20 F7 16			jsr ATASCII2ANTIC.@0101898600000100
  2240 18BB E8				inx
  2241 18BC AD 46 17 95 94		mva ATASCII2ANTIC.@0101898600000100.RESULT :STACKORIGIN,x
  2242 18C1 AD 47 17 95 A4		mva ATASCII2ANTIC.@0101898600000100.RESULT+1 :STACKORIGIN+STACKWIDTH,x
  2243 18C6 20 1F 18			jsr CRT_WRITE.@0101898600000100
  2244
  2245 				; ------------------------------------------------------------
  2246
  2247 = A190			NUM	= DATAORIGIN+$053A
  2248
  2249 = A190			@VarData	= NUM
  2250 = 0002			@VarDataSize	= 2
  2251
  2252 18C9			@exit
  2253 					.ifdef @new
  2254 					lda <@VarData
  2255 					sta :ztmp
  2256 					lda >@VarData
  2257 					ldy #@VarDataSize-1
  2258 					jmp @FreeMem
  2259 					els
  2260 18C9 60				rts						; ret
  2261 					eif
  2262 				.endl
  2263 				.endl							; overload
  2264
  2265 18CA			.local	CRT_WRITE					; PROCEDURE | OVERLOAD
  2266 18CA			.local	@010185000
  2267
  2268 				; optimize FAIL ('SYSUTILS.INTTOSTR.@010185000', B_CRT), line = 558
  2269
  2270 18CA E8				inx
  2271 18CB AD 92 A1 95 94		mva NUM :STACKORIGIN,x
  2272 18D0 AD 93 A1 95 A4		mva NUM+1 :STACKORIGIN+STACKWIDTH,x
  2273 18D5 AD 94 A1 95 B4		mva NUM+2 :STACKORIGIN+STACKWIDTH*2,x
  2274 18DA AD 95 A1 95 C4		mva NUM+3 :STACKORIGIN+STACKWIDTH*3,x
  2275 18DF 20 C5 15			jsr SYSUTILS.INTTOSTR.@010185000
  2276 18E2 20 F7 16			jsr ATASCII2ANTIC.@0101898600000100
  2277 18E5 E8				inx
  2278 18E6 AD 46 17 95 94		mva ATASCII2ANTIC.@0101898600000100.RESULT :STACKORIGIN,x
  2279 18EB AD 47 17 95 A4		mva ATASCII2ANTIC.@0101898600000100.RESULT+1 :STACKORIGIN+STACKWIDTH,x
  2280 18F0 20 1F 18			jsr CRT_WRITE.@0101898600000100
  2281
  2282 				; ------------------------------------------------------------
  2283
  2284 = A192			NUM	= DATAORIGIN+$053C
  2285
  2286 = A192			@VarData	= NUM
  2287 = 0004			@VarDataSize	= 4
  2288
  2289 18F3			@exit
  2290 					.ifdef @new
  2291 					lda <@VarData
  2292 					sta :ztmp
  2293 					lda >@VarData
  2294 					ldy #@VarDataSize-1
  2295 					jmp @FreeMem
  2296 					els
  2297 18F3 60				rts						; ret
  2298 					eif
  2299 				.endl
  2300 				.endl							; overload
  2301
  2302 18F4			.local	CRT_PUT						; PROCEDURE | OVERLOAD
  2303 18F4			.local	@010180000
  2304 18F4 8D 96 A1			sta B
  2305
  2306 				; optimize OK (B_CRT), line = 574
  2307
  2308 18F7 AC 80 9E			ldy CRT_CURSOR+1
  2309 18FA 84 81			sty :bp+1
  2310 18FC AC 7F 9E			ldy CRT_CURSOR
  2311 18FF AD 96 A1			lda B
  2312 1902 91 80			sta (:bp),y
  2313
  2314 				; optimize FAIL (0, B_CRT), line = 575
  2315
  2316 1904 EE 7F 9E			inc CRT_CURSOR
  2317 1907 D0 03			sne
  2318 1909 EE 80 9E			inc CRT_CURSOR+1
  2319
  2320 				; ------------------------------------------------------------
  2321
  2322 = A196			B	= DATAORIGIN+$0540
  2323
  2324 = A196			@VarData	= B
  2325 = 0001			@VarDataSize	= 1
  2326
  2327 190C			@exit
  2328 					.ifdef @new
  2329 					lda <@VarData
  2330 					sta :ztmp
  2331 					lda >@VarData
  2332 					ldy #@VarDataSize-1
  2333 					jmp @FreeMem
  2334 					els
  2335 190C 60				rts						; ret
  2336 					eif
  2337 				.endl
  2338 				.endl							; overload
  2339
  2340 190D			.local	CRT_KEYPRESSED					; FUNCTION
  2341
  2342 				; optimize OK (B_CRT), line = 592
  2343
  2344 190D A9 00			lda #$00
  2345 190F 8D 97 A1			sta RESULT
  2346
  2347 				; optimize OK (B_CRT), line = 593
  2348
  2349 1912 AD 0F D2			lda ATARI.SKSTAT
  2350 1915 29 04			and #$04
  2351 1917 D0 05			jne l_03EA
  2352 1919 A9 01			lda #$01
  2353 191B 8D 97 A1			sta RESULT
  2354 191E			l_03EA
  2355 191E			@exit
  2356
  2357 				; ------------------------------------------------------------
  2358
  2359 = A197			RESULT	= DATAORIGIN+$0541
  2360
  2361 191E 60				rts						; ret
  2362 				.endl
  2363
  2364 191F			.local	CRT_READKEY					; FUNCTION
  2365
  2366 				; optimize OK (B_CRT), line = 598
  2367
  2368 191F AD 09 D2			lda KBCODE
  2369 1922 8D 98 A1			sta RESULT
  2370
  2371 				; --- RepeatUntilProlog
  2372 1925			l_03FC
  2373
  2374 				; optimize FAIL ('CRT_KEYPRESSED', B_CRT), line = 599
  2375
  2376 1925 20 0D 19			jsr CRT_KEYPRESSED
  2377 1928 A0 01			ldy #1
  2378 192A AD 97 A1			lda CRT_KEYPRESSED.RESULT
  2379 192D F0 01			beq @+
  2380 192F 88				dey
  2381 				@
  2382 1930 94 95			sty :STACKORIGIN+1,x
  2383 1932 A0 01			ldy #1
  2384 1934 AD 98 A1			lda RESULT
  2385 1937 CD 09 D2			cmp KBCODE
  2386 193A D0 01			bne @+
  2387 193C 88				dey
  2388 				@
  2389 193D 98				tya
  2390 193E 15 95			ora :STACKORIGIN+1,x
  2391 1940 F0 E3			jeq l_03FC
  2392
  2393 				; --- RepeatUntilProlog
  2394 1942			l_0413
  2395
  2396 				; optimize FAIL ('CRT_KEYPRESSED', B_CRT), line = 600
  2397
  2398 1942 20 0D 19			jsr CRT_KEYPRESSED
  2399 1945 AD 97 A1			lda CRT_KEYPRESSED.RESULT
  2400 1948 F0 F8			jeq l_0413
  2401
  2402 				; optimize OK (B_CRT), line = 601
  2403
  2404 194A AD 09 D2			lda KBCODE
  2405 194D 8D 98 A1			sta RESULT
  2406 1950			@exit
  2407
  2408 				; ------------------------------------------------------------
  2409
  2410 = A198			RESULT	= DATAORIGIN+$0542
  2411
  2412 1950 60				rts						; ret
  2413 				.endl
  2414
  2415 1951			.local	CRT_READCHAR					; FUNCTION
  2416
  2417 				; --- RepeatUntilProlog
  2418 1951			l_0423
  2419
  2420 				; optimize FAIL ('CRT_READKEY', B_CRT), line = 607
  2421
  2422 1951 20 1F 19			jsr CRT_READKEY
  2423 1954 AC 98 A1			ldy CRT_READKEY.RESULT
  2424 1957 B9 E6 0C			lda adr.CRT_KEYCODE,y
  2425 195A 8D 99 A1			sta RESULT
  2426
  2427 				; optimize OK (B_CRT), line = 608
  2428
  2429 195D C9 FF			cmp #$FF
  2430 195F F0 F0			jeq l_0423
  2431 1961			@exit
  2432
  2433 				; ------------------------------------------------------------
  2434
  2435 = A199			RESULT	= DATAORIGIN+$0543
  2436
  2437 1961 60				rts						; ret
  2438 				.endl
  2439
  2440 1962			.local	CRT_READCHARI					; FUNCTION
  2441
  2442 				; optimize FAIL ('CRT_READCHAR', B_CRT), line = 613
  2443
  2444 1962 20 51 19			jsr CRT_READCHAR
  2445 1965 AD 99 A1			lda CRT_READCHAR.RESULT
  2446 1968 20 DF 16			jsr ATASCII2ANTIC.@010180000
  2447 196B AD 83 9E			lda ATASCII2ANTIC.@010180000.RESULT
  2448 196E 8D 9A A1			sta RESULT
  2449 1971			@exit
  2450
  2451 				; ------------------------------------------------------------
  2452
  2453 = A19A			RESULT	= DATAORIGIN+$0544
  2454
  2455 1971 60				rts						; ret
  2456 				.endl
  2457
  2458 1972			.local	CRT_NEWLINE					; PROCEDURE | OVERLOAD
  2459 1972			.local	@010180000
  2460 1972 8D 9B A1			sta OFFSET
  2461
  2462 				; optimize OK (B_CRT), line = 670
  2463
  2464 1975 8D 81 9E			sta CRT_LEFTMARGIN
  2465
  2466 				; optimize OK (B_CRT), line = 671
  2467
  2468 1978 AD 7F 9E			lda CRT_CURSOR
  2469 197B 18 6D 7D 9E			add CRT_SCREENWIDTH
  2470 197F 85 9D			sta :STACKORIGIN+9
  2471 1981 AD 80 9E			lda CRT_CURSOR+1
  2472 1984 69 00			adc #$00
  2473 1986 85 AD			sta :STACKORIGIN+STACKWIDTH+9
  2474 1988 AD 7F 9E			lda CRT_CURSOR
  2475 198B 38 ED 79 9E			sub CRT_VRAM
  2476 198F 85 84			sta @INTEGER.MOD.A
  2477 1991 AD 80 9E			lda CRT_CURSOR+1
  2478 1994 ED 7A 9E			sbc CRT_VRAM+1
  2479 1997 85 85			sta @INTEGER.MOD.A+1
  2480 1999 A9 00			lda #$00
  2481 199B E9 00			sbc #$00
  2482 199D 85 86			sta @INTEGER.MOD.A+2
  2483 199F A9 00			lda #$00
  2484 19A1 E9 00			sbc #$00
  2485 19A3 85 87			sta @INTEGER.MOD.A+3
  2486 19A5 AD 7D 9E			lda CRT_SCREENWIDTH
  2487 19A8 85 8C			sta @INTEGER.MOD.B
  2488 19AA A9 00			lda #$00
  2489 19AC 85 8D			sta @INTEGER.MOD.B+1
  2490 19AE 85 8E			sta @INTEGER.MOD.B+2
  2491 19B0 85 8F			sta @INTEGER.MOD.B+3
  2492 19B2 20 03 10			jsr @INTEGER.MOD
  2493 19B5 A5 88			lda @INTEGER.MOD.RESULT
  2494 19B7 85 9E			sta :STACKORIGIN+10
  2495 19B9 A5 89			lda @INTEGER.MOD.RESULT+1
  2496 19BB 85 AE			sta :STACKORIGIN+STACKWIDTH+10
  2497 19BD A5 9D			lda :STACKORIGIN+9
  2498 19BF 38 E5 9E			sub :STACKORIGIN+10
  2499 19C2 A8				tay
  2500 19C3 A5 AD			lda :STACKORIGIN+STACKWIDTH+9
  2501 19C5 E5 AE			sbc :STACKORIGIN+STACKWIDTH+10
  2502 19C7 8D 80 9E			sta CRT_CURSOR+1
  2503 19CA 98				tya
  2504 19CB 18 6D 9B A1			add OFFSET
  2505 19CF 8D 7F 9E			sta CRT_CURSOR
  2506 19D2 90 03			scc
  2507 19D4 EE 80 9E			inc CRT_CURSOR+1
  2508
  2509 				; ------------------------------------------------------------
  2510
  2511 = A19B			OFFSET	= DATAORIGIN+$0545
  2512
  2513 = A19B			@VarData	= OFFSET
  2514 = 0001			@VarDataSize	= 1
  2515
  2516 19D7			@exit
  2517 					.ifdef @new
  2518 					lda <@VarData
  2519 					sta :ztmp
  2520 					lda >@VarData
  2521 					ldy #@VarDataSize-1
  2522 					jmp @FreeMem
  2523 					els
  2524 19D7 60				rts						; ret
  2525 					eif
  2526 				.endl
  2527 				.endl							; overload
  2528
  2529 19D8			.local	CRT_NEWLINE					; PROCEDURE | OVERLOAD
  2530 19D8			.local	@00
  2531
  2532 				; optimize OK (B_CRT), line = 676
  2533
  2534 19D8 AD 81 9E			lda CRT_LEFTMARGIN
  2535 19DB 20 72 19			jsr CRT_NEWLINE.@010180000
  2536
  2537 19DE			@exit
  2538 					.ifdef @new
  2539 					lda <@VarData
  2540 					sta :ztmp
  2541 					lda >@VarData
  2542 					ldy #@VarDataSize-1
  2543 					jmp @FreeMem
  2544 					els
  2545 19DE 60				rts						; ret
  2546 					eif
  2547 				.endl
  2548 				.endl							; overload
  2549
  2550 19DF			.local	CRT_WRITECENTERED				; PROCEDURE | OVERLOAD
  2551 19DF			.local	@02018986000001000180000
  2552
  2553 				; ------------------------------------------------------------
  2554
  2555 				; Generate Assignment for BYTE / CHAR / SHORTINT / BOOLEAN
  2556 				; as Pointer
  2557 19DF B5 94			lda :STACKORIGIN,x
  2558 19E1 8D 9C A1			sta ROW
  2559 19E4 CA				dex
  2560 19E5 30 01			jmi @main
  2561 19E7 CA				dex
  2562 19E8			@main
  2563
  2564 				; optimize OK (B_CRT), line = 690
  2565
  2566 19E8 AD 7D 9E			lda CRT_SCREENWIDTH
  2567 19EB 4A				lsr @
  2568 19EC 85 9D			sta :STACKORIGIN+9
  2569 19EE AD 9D A1			lda adr.S
  2570 19F1 4A				lsr @
  2571 19F2 85 9E			sta :STACKORIGIN+10
  2572 19F4 A5 9D			lda :STACKORIGIN+9
  2573 19F6 38 E5 9E			sub :STACKORIGIN+10
  2574 19F9 38 E9 01			sub #$01
  2575 19FC 8D 9D A2			sta OFF
  2576
  2577 				; optimize OK (B_CRT), line = 691
  2578
  2579 19FF AD 7F 9E			lda CRT_CURSOR
  2580 1A02 18 6D 9D A2			add OFF
  2581 1A06 8D 7F 9E			sta CRT_CURSOR
  2582 1A09 90 03			scc
  2583 1A0B EE 80 9E			inc CRT_CURSOR+1
  2584
  2585 				; optimize OK (B_CRT), line = 692
  2586
  2587 1A0E AD 9D A2			lda OFF
  2588 1A11 8D 8A A0			sta CRT_GOTOXY.X
  2589 1A14 AD 9C A1			lda ROW
  2590 1A17 8D 8B A0			sta CRT_GOTOXY.Y
  2591 1A1A 20 AC 17			jsr CRT_GOTOXY
  2592
  2593 				; optimize FAIL ('CRT_WRITE.@0101898600000100', B_CRT), line = 693
  2594
  2595 1A1D E8				inx
  2596 1A1E AD 2C 1A 95 94		mva S :STACKORIGIN,x
  2597 1A23 AD 2D 1A 95 A4		mva S+1 :STACKORIGIN+STACKWIDTH,x
  2598 1A28 20 1F 18			jsr CRT_WRITE.@0101898600000100
  2599
  2600 				; ------------------------------------------------------------
  2601
  2602 = A19C			ROW	= DATAORIGIN+$0546
  2603 = A19D			adr.S	= [DATAORIGIN+$0547] .array [256]
  2604 1A2B			.var S	= adr.S .word
  2605 = A29D			OFF	= DATAORIGIN+$0647
  2606
  2607 = A19C			@VarData	= ROW
  2608 = 0102			@VarDataSize	= 258
  2609
  2610 1A2B			@exit
  2611 					.ifdef @new
  2612 					lda <@VarData
  2613 					sta :ztmp
  2614 					lda >@VarData
  2615 					ldy #@VarDataSize-1
  2616 					jmp @FreeMem
  2617 					els
  2618 1A2B 60				rts						; ret
  2619 					eif
  2620 = 1A2C 9D A1		S
  2620 				.endl
  2621 				.endl							; overload
  2622
  2623 1A2E			.local	CRT_WRITERIGHTALIGNED				; PROCEDURE | OVERLOAD
  2624 1A2E			.local	@02018986000001000180000
  2625
  2626 				; ------------------------------------------------------------
  2627
  2628 				; Generate Assignment for BYTE / CHAR / SHORTINT / BOOLEAN
  2629 				; as Pointer
  2630 1A2E B5 94			lda :STACKORIGIN,x
  2631 1A30 8D 9E A2			sta ROW
  2632 1A33 CA				dex
  2633 1A34 30 01			jmi @main
  2634 1A36 CA				dex
  2635 1A37			@main
  2636
  2637 				; optimize OK (B_CRT), line = 704
  2638
  2639 1A37 AD 7D 9E			lda CRT_SCREENWIDTH
  2640 1A3A 38 ED 9F A2			sub adr.S
  2641 1A3E 8D 9F A3			sta OFF
  2642
  2643 				; optimize OK (B_CRT), line = 705
  2644
  2645 1A41 AD 7F 9E			lda CRT_CURSOR
  2646 1A44 18 6D 9F A3			add OFF
  2647 1A48 8D 7F 9E			sta CRT_CURSOR
  2648 1A4B 90 03			scc
  2649 1A4D EE 80 9E			inc CRT_CURSOR+1
  2650
  2651 				; optimize OK (B_CRT), line = 706
  2652
  2653 1A50 AD 9F A3			lda OFF
  2654 1A53 8D 8A A0			sta CRT_GOTOXY.X
  2655 1A56 AD 9E A2			lda ROW
  2656 1A59 8D 8B A0			sta CRT_GOTOXY.Y
  2657 1A5C 20 AC 17			jsr CRT_GOTOXY
  2658
  2659 				; optimize FAIL ('CRT_WRITE.@0101898600000100', B_CRT), line = 707
  2660
  2661 1A5F E8				inx
  2662 1A60 AD 6E 1A 95 94		mva S :STACKORIGIN,x
  2663 1A65 AD 6F 1A 95 A4		mva S+1 :STACKORIGIN+STACKWIDTH,x
  2664 1A6A 20 1F 18			jsr CRT_WRITE.@0101898600000100
  2665
  2666 				; ------------------------------------------------------------
  2667
  2668 = A29E			ROW	= DATAORIGIN+$0648
  2669 = A29F			adr.S	= [DATAORIGIN+$0649] .array [256]
  2670 1A6D			.var S	= adr.S .word
  2671 = A39F			OFF	= DATAORIGIN+$0749
  2672
  2673 = A29E			@VarData	= ROW
  2674 = 0102			@VarDataSize	= 258
  2675
  2676 1A6D			@exit
  2677 					.ifdef @new
  2678 					lda <@VarData
  2679 					sta :ztmp
  2680 					lda >@VarData
  2681 					ldy #@VarDataSize-1
  2682 					jmp @FreeMem
  2683 					els
  2684 1A6D 60				rts						; ret
  2685 					eif
  2686 = 1A6E 9F A2		S
  2686 				.endl
  2687 				.endl							; overload
  2688
  2689 1A70			.local	CRT_INVERT					; PROCEDURE
  2690
  2691 				; optimize OK (B_CRT), line = 734
  2692
  2693 1A70 AD 7D 9E			lda CRT_SCREENWIDTH
  2694 1A73 85 8C			sta :ecx
  2695 1A75 AD A1 A3			lda Y
  2696 1A78 85 84			sta :eax
  2697 					.ifdef fmulinit
  2698 					fmulu_8
  2699 					els
  2700 1A7A 20 43 10			imulCL
  2701 					eif
  2702 1A7D A5 84			lda :eax
  2703 1A7F 18 6D 79 9E			add CRT_VRAM
  2704 1A83 A8				tay
  2705 1A84 A5 85			lda :eax+1
  2706 1A86 6D 7A 9E			adc CRT_VRAM+1
  2707 1A89 8D A4 A3			sta CURSOR+1
  2708 1A8C 98				tya
  2709 1A8D 18 6D A0 A3			add X
  2710 1A91 8D A3 A3			sta CURSOR
  2711 1A94 90 03			scc
  2712 1A96 EE A4 A3			inc CURSOR+1
  2713
  2714 				; --- WhileProlog
  2715 1A99 4C B5 1A			jmp l_04DD
  2716 1A9C			l_04DE
  2717
  2718 				; optimize OK (B_CRT), line = 736
  2719
  2720 1A9C AC A4 A3			ldy CURSOR+1
  2721 1A9F 84 81			sty :bp+1
  2722 1AA1 AC A3 A3			ldy CURSOR
  2723 1AA4 B1 80			lda (:bp),y
  2724 1AA6 49 80			eor #$80
  2725 1AA8 91 80			sta (:bp),y
  2726
  2727 				; optimize FAIL (0, B_CRT), line = 737
  2728
  2729 1AAA CE A2 A3			dec WIDTH
  2730
  2731 				; optimize FAIL (0, B_CRT), line = 738
  2732
  2733 1AAD EE A3 A3			inc CURSOR
  2734 1AB0 D0 03			sne
  2735 1AB2 EE A4 A3			inc CURSOR+1
  2736 1AB5			l_04DD
  2737
  2738 				; optimize OK (B_CRT), line = 735
  2739
  2740 1AB5 AD A2 A3			lda WIDTH
  2741 1AB8 D0 E2			jne l_04DE
  2742
  2743 				; ------------------------------------------------------------
  2744
  2745 = A3A0			X	= DATAORIGIN+$074A
  2746 = A3A1			Y	= DATAORIGIN+$074B
  2747 = A3A2			WIDTH	= DATAORIGIN+$074C
  2748 = A3A3			CURSOR	= DATAORIGIN+$074D
  2749
  2750 = A3A0			@VarData	= X
  2751 = 0005			@VarDataSize	= 5
  2752
  2753 1ABA			@exit
  2754 					.ifdef @new
  2755 					lda <@VarData
  2756 					sta :ztmp
  2757 					lda >@VarData
  2758 					ldy #@VarDataSize-1
  2759 					jmp @FreeMem
  2760 					els
  2761 1ABA 60				rts						; ret
  2762 					eif
  2763 				.endl
  2764
  2765 				; ------------------------------------------------------------
  2766
  2767 = 0028			DEFAULT_SCREENWIDTH	= $28
  2768 = 0018			DEFAULT_SCREENHEIGHT	= $18
  2769 = 009B			CHAR_RETURN	= $9B
  2770 = 001B			CHAR_ESCAPE	= $1B
  2771 = 007E			CHAR_BACKSPACE	= $7E
  2772 = 007F			CHAR_TAB	= $7F
  2773 = 0081			CHAR_INVERSE	= $81
  2774 = 0082			CHAR_CAPS	= $82
  2775 = 00DB			ICHAR_RETURN	= $DB
  2776 = 005B			ICHAR_ESCAPE	= $5B
  2777 = 007E			ICHAR_BACKSPACE	= $7E
  2778 = 007F			ICHAR_TAB	= $7F
  2779 = 00C1			ICHAR_INVERSE	= $C1
  2780 = 00C2			ICHAR_CAPS	= $C2
  2781 = 0CE6			adr.CRT_KEYCODE	= CODEORIGIN+$00E6
  2782 1ABB			.var CRT_KEYCODE	= adr.CRT_KEYCODE .word
  2783 = 9E79			CRT_VRAM	= DATAORIGIN+$0223
  2784 = 9E7B			CRT_SIZE	= DATAORIGIN+$0225
  2785 = 9E7D			CRT_SCREENWIDTH	= DATAORIGIN+$0227
  2786 = 9E7E			CRT_SCREENHEIGHT	= DATAORIGIN+$0228
  2787 = 9E7F			CRT_CURSOR	= DATAORIGIN+$0229
  2788 = 9E81			CRT_LEFTMARGIN	= DATAORIGIN+$022B
  2789 = D209			KBCODE	= $D209
  2790 = D01F			CONSOL	= $D01F
  2791
  2792 = 1ABB E6 0C		CRT_KEYCODE
  2792 				.endl							; UNIT B_CRT
  2793
  2794 1ABD			.local	SETBANK						; PROCEDURE
  2795
  2796 				; optimize OK (b_maxflash.pas), line = 50
  2797
  2798 1ABD AD 09 C2			lda BANK_BANK
  2799 1AC0 85 DC			sta CURBANK
  2800
  2801 				; optimize OK (b_maxflash.pas), line = 51
  2802
  2803 1AC2 A8				tay
  2804 1AC3 A9 00			lda #$00
  2805 1AC5 99 00 D5			sta $D500,y
  2806
  2807 1AC8			@exit
  2808 					.ifdef @new
  2809 					lda <@VarData
  2810 					sta :ztmp
  2811 					lda >@VarData
  2812 					ldy #@VarDataSize-1
  2813 					jmp @FreeMem
  2814 					els
  2815 1AC8 60				rts						; ret
  2816 					eif
  2817 				.endl
  2818
  2819 1AC9			.local	SETSECTOR					; PROCEDURE
  2820
  2821 				; optimize OK (b_maxflash.pas), line = 57
  2822
  2823 1AC9 AD 11 C2			lda BANK_SECTOR
  2824 1ACC 85 DD			sta CURSEC
  2825
  2826 				; optimize OK (b_maxflash.pas), line = 58
  2827
  2828 1ACE 0A				asl @
  2829 1ACF 0A				asl @
  2830 1AD0 0A				asl @
  2831 1AD1 8D 09 C2			sta BANK_BANK
  2832
  2833 				; optimize FAIL ('SETBANK', b_maxflash.pas), line = 59
  2834
  2835 1AD4 20 BD 1A			jsr SETBANK
  2836
  2837 1AD7			@exit
  2838 					.ifdef @new
  2839 					lda <@VarData
  2840 					sta :ztmp
  2841 					lda >@VarData
  2842 					ldy #@VarDataSize-1
  2843 					jmp @FreeMem
  2844 					els
  2845 1AD7 60				rts						; ret
  2846 					eif
  2847 				.endl
  2848
  2849 1AD8			.local	WR5555						; PROCEDURE | ASSEMBLER
  2850
  2851 				; -------------------  ASM Block 00000145  -------------------
  2852
  2853
  2854 1AD8 AD 12 C2		        lda bank_write
  2855 = 1ADB			.def :_wr5555
  2856 1ADB 24 DC		        bit curbank
  2857 1ADD 70 07		        bvs _wr5c2
  2858 1ADF 8D 02 D5		        sta $d502   
  2859 1AE2 8D 55 B5		        sta $b555
  2860 1AE5 60			        rts     
  2861 1AE6			_wr5c2  
  2862 1AE6 8D 42 D5		        sta $d542   
  2863 1AE9 8D 55 B5		        sta $b555
  2864
  2865 1AEC			@exit
  2866 					.ifdef @new
  2867 					lda <@VarData
  2868 					sta :ztmp
  2869 					lda >@VarData
  2870 					ldy #@VarDataSize-1
  2871 					jmp @FreeMem
  2872 					els
  2873 1AEC 60				rts						; ret
  2874 					eif
  2875 				.endl
  2876
  2877 1AED			.local	WR2AAA						; PROCEDURE | ASSEMBLER
  2878
  2879 				; -------------------  ASM Block 00000146  -------------------
  2880
  2881
  2882 1AED AD 12 C2		        lda bank_write
  2883 1AF0 24 DC		        bit curbank
  2884 1AF2 70 07		        bvs _wr2c2
  2885 1AF4 8D 01 D5		        sta $d501
  2886 1AF7 8D AA AA		        sta $aaaa
  2887 1AFA 60			        rts 
  2888 1AFB			_wr2c2      
  2889 1AFB 8D 41 D5		        sta $d541       
  2890 1AFE 8D AA AA		        sta $aaaa       
  2891
  2892 1B01			@exit
  2893 					.ifdef @new
  2894 					lda <@VarData
  2895 					sta :ztmp
  2896 					lda >@VarData
  2897 					ldy #@VarDataSize-1
  2898 					jmp @FreeMem
  2899 					els
  2900 1B01 60				rts						; ret
  2901 					eif
  2902 				.endl
  2903
  2904 1B02			.local	CMDUNLOCK					; PROCEDURE
  2905
  2906 				; optimize OK (b_maxflash.pas), line = 94
  2907
  2908 1B02 A9 AA			lda #$AA
  2909 1B04 8D 12 C2			sta BANK_WRITE
  2910
  2911 				; optimize FAIL ('WR5555', b_maxflash.pas), line = 95
  2912
  2913 1B07 20 D8 1A			jsr WR5555
  2914
  2915 				; optimize OK (b_maxflash.pas), line = 96
  2916
  2917 1B0A A9 55			lda #$55
  2918 1B0C 8D 12 C2			sta BANK_WRITE
  2919
  2920 				; optimize FAIL ('WR2AAA', b_maxflash.pas), line = 97
  2921
  2922 1B0F 20 ED 1A			jsr WR2AAA
  2923
  2924 1B12			@exit
  2925 					.ifdef @new
  2926 					lda <@VarData
  2927 					sta :ztmp
  2928 					lda >@VarData
  2929 					ldy #@VarDataSize-1
  2930 					jmp @FreeMem
  2931 					els
  2932 1B12 60				rts						; ret
  2933 					eif
  2934 				.endl
  2935
  2936 1B13			.local	CMDINIT						; PROCEDURE | ASSEMBLER
  2937
  2938 				; -------------------  ASM Block 00000147  -------------------
  2939
  2940
  2941 1B13 A9 00		    lda #$00            
  2942 1B15 8D 0E D4		    sta nmien           
  2943 1B18 8D 0A D4		    sta wsync   
  2944
  2945 1B1B			@exit
  2946 					.ifdef @new
  2947 					lda <@VarData
  2948 					sta :ztmp
  2949 					lda >@VarData
  2950 					ldy #@VarDataSize-1
  2951 					jmp @FreeMem
  2952 					els
  2953 1B1B 60				rts						; ret
  2954 					eif
  2955 				.endl
  2956
  2957 1B1C			.local	CMDCLEANUP					; PROCEDURE | ASSEMBLER
  2958
  2959 				; -------------------  ASM Block 00000148  -------------------
  2960
  2961
  2962 1B1C 8D 80 D5		    sta cartoff
  2963 1B1F 8D 0A D4		    sta wsync           
  2964 1B22 AD 13 D0		    lda trig3           
  2965 1B25 8D FA 03		    sta GINTLK  
  2966 1B28 A9 40		    lda #$40
  2967 1B2A 8D 0E D4		    sta nmien   
  2968
  2969 1B2D			@exit
  2970 					.ifdef @new
  2971 					lda <@VarData
  2972 					sta :ztmp
  2973 					lda >@VarData
  2974 					ldy #@VarDataSize-1
  2975 					jmp @FreeMem
  2976 					els
  2977 1B2D 60				rts						; ret
  2978 					eif
  2979 				.endl
  2980
  2981 1B2E			.local	WAITTOCOMPLETE					; PROCEDURE | ASSEMBLER
  2982
  2983 				; -------------------  ASM Block 00000149  -------------------
  2984
  2985
  2986 1B2E			poll_write  
  2987 1B2E A9 00		        lda #$00        
  2988 1B30 85 DB		        sta workpages       
  2989 1B32			_poll_again 
  2990 1B32 AD 00 A0		        lda carbase 
  2991 1B35 CD 00 A0		        cmp carbase         
  2992 1B38 D0 F4		        bne poll_write      
  2993 1B3A CD 00 A0		        cmp carbase         
  2994 1B3D D0 EF		        bne poll_write      
  2995 1B3F E6 DB		        inc workpages       
  2996 1B41 D0 EF		        bne _poll_again     
  2997
  2998 1B43			@exit
  2999 					.ifdef @new
  3000 					lda <@VarData
  3001 					sta :ztmp
  3002 					lda >@VarData
  3003 					ldy #@VarDataSize-1
  3004 					jmp @FreeMem
  3005 					els
  3006 1B43 60				rts						; ret
  3007 					eif
  3008 				.endl
  3009
  3010 1B44			.local	ERASESECTOR					; PROCEDURE
  3011
  3012 				; optimize FAIL ('CMDINIT', b_maxflash.pas), line = 138
  3013
  3014 1B44 20 13 1B			jsr CMDINIT
  3015
  3016 				; optimize FAIL ('SETSECTOR', b_maxflash.pas), line = 139
  3017
  3018 1B47 20 C9 1A			jsr SETSECTOR
  3019
  3020 				; optimize FAIL ('CMDUNLOCK', b_maxflash.pas), line = 140
  3021
  3022 1B4A 20 02 1B			jsr CMDUNLOCK
  3023
  3024 				; optimize OK (b_maxflash.pas), line = 141
  3025
  3026 1B4D A9 80			lda #$80
  3027 1B4F 8D 12 C2			sta BANK_WRITE
  3028
  3029 				; optimize FAIL ('WR5555', b_maxflash.pas), line = 142
  3030
  3031 1B52 20 D8 1A			jsr WR5555
  3032
  3033 				; optimize FAIL ('CMDUNLOCK', b_maxflash.pas), line = 143
  3034
  3035 1B55 20 02 1B			jsr CMDUNLOCK
  3036
  3037 				; optimize FAIL ('SETSECTOR', b_maxflash.pas), line = 144
  3038
  3039 1B58 20 C9 1A			jsr SETSECTOR
  3040
  3041 				; optimize OK (b_maxflash.pas), line = 145
  3042
  3043 1B5B A9 30			lda #$30
  3044 1B5D 8D 00 A0			sta CARBASE
  3045
  3046 				; optimize FAIL ('WAITTOCOMPLETE', b_maxflash.pas), line = 146
  3047
  3048 1B60 20 2E 1B			jsr WAITTOCOMPLETE
  3049
  3050 				; optimize FAIL ('CMDCLEANUP', b_maxflash.pas), line = 147
  3051
  3052 1B63 20 1C 1B			jsr CMDCLEANUP
  3053
  3054 1B66			@exit
  3055 					.ifdef @new
  3056 					lda <@VarData
  3057 					sta :ztmp
  3058 					lda >@VarData
  3059 					ldy #@VarDataSize-1
  3060 					jmp @FreeMem
  3061 					els
  3062 1B66 60				rts						; ret
  3063 					eif
  3064 				.endl
  3065
  3066 1B67			.local	BURNBLOCK					; PROCEDURE
  3067
  3068 				; optimize FAIL ('CMDINIT', b_maxflash.pas), line = 167
  3069
  3070 1B67 20 13 1B			jsr CMDINIT
  3071
  3072 				; --- RepeatUntilProlog
  3073 1B6A			l_054F
  3074
  3075 				; optimize FAIL ('CMDUNLOCK', b_maxflash.pas), line = 169
  3076
  3077 1B6A 20 02 1B			jsr CMDUNLOCK
  3078
  3079 				; optimize OK (b_maxflash.pas), line = 171
  3080
  3081 1B6D A9 A0			lda #$A0
  3082 1B6F 8D 12 C2			sta BANK_WRITE
  3083
  3084 				; optimize FAIL ('WR5555', b_maxflash.pas), line = 172
  3085
  3086 1B72 20 D8 1A			jsr WR5555
  3087
  3088 				; optimize FAIL ('SETBANK', b_maxflash.pas), line = 174
  3089
  3090 1B75 20 BD 1A			jsr SETBANK
  3091
  3092 				; optimize OK (b_maxflash.pas), line = 175
  3093
  3094 1B78 AC 0B C2			ldy BANK_SRC+1
  3095 1B7B 84 81			sty :bp+1
  3096 1B7D AC 0A C2			ldy BANK_SRC
  3097 1B80 B1 80			lda (:bp),y
  3098 1B82 AC 0D C2			ldy BANK_DEST+1
  3099 1B85 84 81			sty :bp+1
  3100 1B87 AC 0C C2			ldy BANK_DEST
  3101 1B8A 91 80			sta (:bp),y
  3102
  3103 				; optimize FAIL (0, b_maxflash.pas), line = 176
  3104
  3105 1B8C EE 0A C2			inc BANK_SRC
  3106 1B8F D0 03			sne
  3107 1B91 EE 0B C2			inc BANK_SRC+1
  3108
  3109 				; optimize FAIL (0, b_maxflash.pas), line = 177
  3110
  3111 1B94 EE 0C C2			inc BANK_DEST
  3112 1B97 D0 03			sne
  3113 1B99 EE 0D C2			inc BANK_DEST+1
  3114
  3115 				; optimize OK (b_maxflash.pas), line = 178
  3116
  3117 1B9C AD 0D C2			lda BANK_DEST+1
  3118 1B9F C9 C0			cmp #$C0
  3119 1BA1 D0 03			bne @+
  3120 1BA3 AD 0C C2			lda BANK_DEST
  3121 				@
  3122 1BA6 D0 0D			jne l_0575
  3123
  3124 				; optimize FAIL (0, b_maxflash.pas), line = 179
  3125
  3126 1BA8 EE 09 C2			inc BANK_BANK
  3127
  3128 				; optimize OK (b_maxflash.pas), line = 180
  3129
  3130 1BAB A9 00			lda #$00
  3131 1BAD 8D 0C C2			sta BANK_DEST
  3132 1BB0 A9 A0			lda #$A0
  3133 1BB2 8D 0D C2			sta BANK_DEST+1
  3134 1BB5			l_0575
  3135
  3136 				; optimize FAIL (0, b_maxflash.pas), line = 182
  3137
  3138 1BB5 AD 0E C2			lda BANK_SIZE
  3139 1BB8 D0 03			bne @+
  3140 1BBA CE 0F C2			dec BANK_SIZE+1
  3141 				@
  3142 1BBD CE 0E C2			dec BANK_SIZE
  3143
  3144 				; optimize OK (b_maxflash.pas), line = 183
  3145
  3146 1BC0 AD 0F C2			lda BANK_SIZE+1
  3147 1BC3 0D 0E C2			ora BANK_SIZE
  3148 1BC6 D0 A2			jne l_054F
  3149
  3150 				; optimize FAIL ('CMDCLEANUP', b_maxflash.pas), line = 184
  3151
  3152 1BC8 20 1C 1B			jsr CMDCLEANUP
  3153
  3154 1BCB			@exit
  3155 					.ifdef @new
  3156 					lda <@VarData
  3157 					sta :ztmp
  3158 					lda >@VarData
  3159 					ldy #@VarDataSize-1
  3160 					jmp @FreeMem
  3161 					els
  3162 1BCB 60				rts						; ret
  3163 					eif
  3164 				.endl
  3165
  3166 1BCC			.local	MUSICPROXY					; PROCEDURE
  3167
  3168 				; optimize OK (main.pas), line = 59
  3169
  3170 1BCC AD 11 CA			lda PLAYMUSIC
  3171 1BCF C9 01			cmp #$01
  3172 1BD1 D0 09			jne l_05A7
  3173
  3174 				; optimize FAIL ('RMT.TRMT.PLAY', main.pas), line = 60
  3175
  3176 1BD3 AD 1F 9A			lda MSX
  3177 1BD6 AC 20 9A			ldy MSX+1
  3178 1BD9 20 41 15			jsr RMT.TRMT.PLAY
  3179 1BDC			l_05A7
  3180
  3181 1BDC			@exit
  3182 					.ifdef @new
  3183 					lda <@VarData
  3184 					sta :ztmp
  3185 					lda >@VarData
  3186 					ldy #@VarDataSize-1
  3187 					jmp @FreeMem
  3188 					els
  3189 1BDC 60				rts						; ret
  3190 					eif
  3191 				.endl
  3192
  3193 1BDD			.local	READKEYANDSTICK					; FUNCTION
  3194
  3195 				; optimize OK (helpers_input.pas), line = 28
  3196
  3197 1BDD A9 00			lda #$00
  3198 1BDF 8D F0 A4			sta CH
  3199
  3200 				; -------------------  ASM Block 00000150  -------------------
  3201
  3202
  3203 1BE2 48 8A 48 98 48	        phr
  3204 1BE7 A9 00		        lda #$00
  3205 1BE9 8D F9 EA		        sta joystickused
  3206 1BEC			  loop:
  3207 1BEC AD 00 D3		        lda $d300
  3208 1BEF 29 0F		        and #$0f
  3209 1BF1 C9 0F		        cmp #$0f 
  3210 1BF3 D0 3A		        bne foundstick
  3211
  3212 1BF5 AD 10 D0		        lda $d010 ; try stick button 
  3213 1BF8 C9 00		        cmp #$00
  3214 1BFA D0 08		        bne nofire 
  3215 1BFC A9 0C		        lda #$0c
  3216 1BFE 8D F9 EA		        sta joystickused
  3217 1C01 4C 45 1C		        jmp loopend
  3218
  3219 1C04			nofire:
  3220 1C04 AD 1F D0		        lda consol		; START
  3221 1C07 C9 05		        cmp #$05
  3222 1C09 F0 2E		        beq foundsave
  3223 1C0B C9 03		        cmp #$03
  3224 1C0D F0 34		        beq foundload
  3225 1C0F C9 06		        cmp #$06
  3226 1C11 F0 2B		        beq foundmsx
  3227
  3228 1C13 AD 0F D2		        lda skctl		; ANY KEY
  3229 1C16 29 04		        and #$04
  3230 1C18 D0 D2		        bne loop
  3231
  3232 1C1A AD 09 D2		        lda kbcode
  3233 1C1D 4C 45 1C		        jmp loopend
  3234 1C20			  stickdata:
  3235 				        // right, left, down, up --> 7= 0111=right;  11=1011=left, 13=1101=down, 14=1110=up
  3236 1C20 00 00 00 00 00 00 +         dta 0,0,0,0,    0,0, 0, 07,   0, 0,0, 06, 0,     15, 14
  3237 1C2F			  foundstick:
  3238 1C2F A8			        tay
  3239 1C30 B9 20 1C		        lda stickdata,y
  3240 1C33 8D F9 EA		        sta joystickused
  3241 1C36 4C 45 1C		        jmp loopend
  3242 1C39			  foundsave:
  3243 1C39 A9 1F		        lda #$1f 
  3244 1C3B 4C 45 1C		        jmp loopend
  3245 1C3E			  foundmsx:
  3246 1C3E A9 20		        lda #$20
  3247 1C40 4C 45 1C		        jmp loopend
  3248 1C43			  foundload:
  3249 1C43 A9 1E		        lda #$1e
  3250 				        // check for key
  3251 1C45			  loopend:
  3252 1C45 8D F0 A4		        sta ch
  3253 1C48 68 A8 68 AA 68	        plr
  3254 				  
  3255 				; optimize OK (helpers_input.pas), line = 82
  3256
  3257 1C4D AD F0 A4			lda CH
  3258 1C50 8D EF A4			sta RESULT
  3259 1C53			@exit
  3260
  3261 				; ------------------------------------------------------------
  3262
  3263 = A4EF			RESULT	= DATAORIGIN+$0899
  3264 = A4F0			CH	= DATAORIGIN+$089A
  3265
  3266 = A4F0			@VarData	= CH
  3267 = 0001			@VarDataSize	= 1
  3268
  3269 1C53 60				rts						; ret
  3270 				.endl
  3271
  3272 1C54			.local	CHECKKEYANDSTICK				; FUNCTION
  3273
  3274 				; optimize OK (helpers_input.pas), line = 92
  3275
  3276 1C54 A9 00			lda #$00
  3277 1C56 8D F2 A4			sta CH
  3278
  3279 				; -------------------  ASM Block 00000151  -------------------
  3280
  3281
  3282 1C59 48 8A 48 98 48	        phr
  3283
  3284 1C5E AD 00 D3		        lda $d300
  3285 1C61 29 0F		        and #$0f
  3286 1C63 C9 0F		        cmp #$0f   
  3287 1C65 D0 2F		        bne foundstick
  3288
  3289 1C67 AD 10 D0		        lda $d010 ; try stick button 
  3290 1C6A C9 00		        cmp #$00
  3291 1C6C D0 05		        bne nofire 
  3292 1C6E A9 0C		        lda #$0c
  3293 1C70 4C 9F 1C		        jmp loopend
  3294
  3295 1C73			  nofire:
  3296 1C73 AD 1F D0		        lda consol		; START
  3297 1C76 29 01		        and #1
  3298 1C78 F0 23		        beq foundconsol
  3299
  3300 1C7A AD 0F D2		        lda skctl		; ANY KEY
  3301 1C7D 29 04		        and #$04
  3302 1C7F D0 1C		        bne loopend_zero
  3303
  3304 1C81 AD 09 D2		        lda kbcode
  3305 1C84 4C 9F 1C		        jmp loopend
  3306 1C87			  stickdata:
  3307 1C87 00 00 00 00 00 00 +         dta 0,0,0,0,    0,0, 0, 07,   0, 0,0, 06, 0,     15, 14
  3308 1C96			  foundstick:
  3309 1C96 A8			        tay
  3310 1C97 B9 87 1C		        lda stickdata,y
  3311 1C9A 4C 9F 1C		        jmp loopend
  3312 1C9D			  foundconsol:
  3313 				        // check for key
  3314 1C9D			  loopend_zero:
  3315 1C9D A9 00		        lda #$00
  3316 1C9F			  loopend:
  3317 1C9F 8D F2 A4		        sta ch
  3318 1CA2 68 A8 68 AA 68	        plr
  3319 				  
  3320 				; optimize OK (helpers_input.pas), line = 132
  3321
  3322 1CA7 AD F2 A4			lda CH
  3323 1CAA 8D F1 A4			sta RESULT
  3324 1CAD			@exit
  3325
  3326 				; ------------------------------------------------------------
  3327
  3328 = A4F1			RESULT	= DATAORIGIN+$089B
  3329 = A4F2			CH	= DATAORIGIN+$089C
  3330
  3331 = A4F2			@VarData	= CH
  3332 = 0001			@VarDataSize	= 1
  3333
  3334 1CAD 60				rts						; ret
  3335 				.endl
  3336
  3337 1CAE			.local	WAITFORKEYRELEASE				; PROCEDURE
  3338
  3339 				; optimize FAIL ('READKEYANDSTICK', helpers_input.pas), line = 146
  3340
  3341 1CAE 20 DD 1B			jsr READKEYANDSTICK
  3342 1CB1 AD EF A4			lda READKEYANDSTICK.RESULT
  3343 1CB4 8D F3 A4			sta CH
  3344
  3345 				; --- RepeatUntilProlog
  3346 1CB7			l_05D0
  3347
  3348 				; optimize FAIL ('CHECKKEYANDSTICK', helpers_input.pas), line = 148
  3349
  3350 1CB7 20 54 1C			jsr CHECKKEYANDSTICK
  3351 1CBA AD F1 A4			lda CHECKKEYANDSTICK.RESULT
  3352 1CBD 8D F4 A4			sta TMPCH
  3353
  3354 				; optimize OK (helpers_input.pas), line = 149
  3355
  3356 1CC0 CD F3 A4			cmp CH
  3357 1CC3 F0 F2			jeq l_05D0
  3358
  3359 				; ------------------------------------------------------------
  3360
  3361 = A4F3			CH	= DATAORIGIN+$089D
  3362 = A4F4			TMPCH	= DATAORIGIN+$089E
  3363
  3364 = A4F3			@VarData	= CH
  3365 = 0002			@VarDataSize	= 2
  3366
  3367 1CC5			@exit
  3368 					.ifdef @new
  3369 					lda <@VarData
  3370 					sta :ztmp
  3371 					lda >@VarData
  3372 					ldy #@VarDataSize-1
  3373 					jmp @FreeMem
  3374 					els
  3375 1CC5 60				rts						; ret
  3376 					eif
  3377 				.endl
  3378
  3379 1CC6			.local	CRT_WRITE_LOCSTR				; PROCEDURE
  3380 1CC6 8D F5 A4			sta B
  3381
  3382 				; optimize OK (helpers.pas), line = 7
  3383
  3384 1CC9 38 E9 01			sub #$01
  3385 1CCC 85 84			sta :eax
  3386 1CCE A9 00			lda #$00
  3387 1CD0 E9 00			sbc #$00
  3388 1CD2 85 85			sta :eax+1
  3389 1CD4 A9 28			lda #$28
  3390 1CD6 85 8C			sta :ecx
  3391 1CD8 A9 00			lda #$00
  3392 1CDA 85 8D			sta :ecx+1
  3393 					.ifdef fmulinit
  3394 					fmulu_16
  3395 					els
  3396 1CDC 20 8F 10			imulCX
  3397 					eif
  3398 1CDF A5 84			lda :eax
  3399 1CE1 8D F6 A4			sta Z
  3400 1CE4 A5 85			lda :eax+1
  3401 1CE6 8D F7 A4			sta Z+1
  3402
  3403 				; optimize OK (helpers.pas), line = 8
  3404
  3405 1CE9 AD BD 9A			lda LOC_STRING_1
  3406 1CEC 18 6D F6 A4			add Z
  3407 1CF0 8D F8 A4			sta TMPSTR
  3408 1CF3 AD BE 9A			lda LOC_STRING_1+1
  3409 1CF6 6D F7 A4			adc Z+1
  3410 1CF9 8D F9 A4			sta TMPSTR+1
  3411
  3412 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', helpers.pas), line = 9
  3413
  3414 1CFC E8				inx
  3415 1CFD AD F8 A4 95 94		mva TMPSTR :STACKORIGIN,x
  3416 1D02 AD F9 A4 95 A4		mva TMPSTR+1 :STACKORIGIN+STACKWIDTH,x
  3417 1D07 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
  3418
  3419 				; ------------------------------------------------------------
  3420
  3421 = A4F5			B	= DATAORIGIN+$089F
  3422 = A4F6			Z	= DATAORIGIN+$08A0
  3423 = A4F8			TMPSTR	= DATAORIGIN+$08A2
  3424
  3425 = A4F5			@VarData	= B
  3426 = 0005			@VarDataSize	= 5
  3427
  3428 1D0A			@exit
  3429 					.ifdef @new
  3430 					lda <@VarData
  3431 					sta :ztmp
  3432 					lda >@VarData
  3433 					ldy #@VarDataSize-1
  3434 					jmp @FreeMem
  3435 					els
  3436 1D0A 60				rts						; ret
  3437 					eif
  3438 				.endl
  3439
  3440 1D0B			.local	CRT_WRITELN_LOCSTR				; PROCEDURE
  3441 1D0B 8D FA A4			sta B
  3442
  3443 				; optimize OK (helpers.pas), line = 15
  3444
  3445 1D0E 20 C6 1C			jsr CRT_WRITE_LOCSTR
  3446
  3447 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', helpers.pas), line = 16
  3448
  3449 1D11 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
  3450
  3451 				; ------------------------------------------------------------
  3452
  3453 = A4FA			B	= DATAORIGIN+$08A4
  3454
  3455 = A4FA			@VarData	= B
  3456 = 0001			@VarDataSize	= 1
  3457
  3458 1D14			@exit
  3459 					.ifdef @new
  3460 					lda <@VarData
  3461 					sta :ztmp
  3462 					lda >@VarData
  3463 					ldy #@VarDataSize-1
  3464 					jmp @FreeMem
  3465 					els
  3466 1D14 60				rts						; ret
  3467 					eif
  3468 				.endl
  3469
  3470 1D15			.local	CRT_WRITELN2_LOCSTR				; PROCEDURE
  3471 1D15 8D FB A4			sta B
  3472
  3473 				; optimize OK (helpers.pas), line = 22
  3474
  3475 1D18 20 0B 1D			jsr CRT_WRITELN_LOCSTR
  3476
  3477 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', helpers.pas), line = 23
  3478
  3479 1D1B 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
  3480
  3481 				; ------------------------------------------------------------
  3482
  3483 = A4FB			B	= DATAORIGIN+$08A5
  3484
  3485 = A4FB			@VarData	= B
  3486 = 0001			@VarDataSize	= 1
  3487
  3488 1D1E			@exit
  3489 					.ifdef @new
  3490 					lda <@VarData
  3491 					sta :ztmp
  3492 					lda >@VarData
  3493 					ldy #@VarDataSize-1
  3494 					jmp @FreeMem
  3495 					els
  3496 1D1E 60				rts						; ret
  3497 					eif
  3498 				.endl
  3499
  3500 1D1F			.local	CRT_WRITECENTERED_LOCSTR			; PROCEDURE
  3501
  3502 				; optimize OK (helpers.pas), line = 31
  3503
  3504 1D1F AD FD A4			lda B
  3505 1D22 38 E9 01			sub #$01
  3506 1D25 85 84			sta :eax
  3507 1D27 A9 00			lda #$00
  3508 1D29 E9 00			sbc #$00
  3509 1D2B 85 85			sta :eax+1
  3510 1D2D A9 28			lda #$28
  3511 1D2F 85 8C			sta :ecx
  3512 1D31 A9 00			lda #$00
  3513 1D33 85 8D			sta :ecx+1
  3514 					.ifdef fmulinit
  3515 					fmulu_16
  3516 					els
  3517 1D35 20 8F 10			imulCX
  3518 					eif
  3519 1D38 A5 84			lda :eax
  3520 1D3A 8D FE A4			sta Z
  3521 1D3D A5 85			lda :eax+1
  3522 1D3F 8D FF A4			sta Z+1
  3523
  3524 				; optimize OK (helpers.pas), line = 32
  3525
  3526 1D42 AD BD 9A			lda LOC_STRING_1
  3527 1D45 18 6D FE A4			add Z
  3528 1D49 8D 00 A5			sta TMPSTR
  3529 1D4C AD BE 9A			lda LOC_STRING_1+1
  3530 1D4F 6D FF A4			adc Z+1
  3531 1D52 8D 01 A5			sta TMPSTR+1
  3532
  3533 				; optimize FAIL ('B_CRT.CRT_WRITECENTERED.@02018986000001000180000', helpers.pas), line = 33
  3534
  3535 1D55 E8				inx
  3536 1D56 AC 00 A5 84 82 AC + 	mwy TMPSTR :bp2
  3537 1D60 A0 00			ldy #$00
  3538 1D62 B1 82 99 9D A1 C8 + 	mva:rne (:bp2),y B_CRT.CRT_WRITECENTERED.@02018986000001000180000.adr.S,y+
  3539 1D6A E8				inx
  3540 1D6B AD FC A4 95 94		mva R :STACKORIGIN,x
  3541 1D70 20 DF 19			jsr B_CRT.CRT_WRITECENTERED.@02018986000001000180000
  3542
  3543 				; ------------------------------------------------------------
  3544
  3545 = A4FC			R	= DATAORIGIN+$08A6
  3546 = A4FD			B	= DATAORIGIN+$08A7
  3547 = A4FE			Z	= DATAORIGIN+$08A8
  3548 = A500			TMPSTR	= DATAORIGIN+$08AA
  3549
  3550 = A4FC			@VarData	= R
  3551 = 0006			@VarDataSize	= 6
  3552
  3553 1D73			@exit
  3554 					.ifdef @new
  3555 					lda <@VarData
  3556 					sta :ztmp
  3557 					lda >@VarData
  3558 					ldy #@VarDataSize-1
  3559 					jmp @FreeMem
  3560 					els
  3561 1D73 60				rts						; ret
  3562 					eif
  3563 				.endl
  3564
  3565 1D74			.local	EFFECTWAIT					; PROCEDURE
  3566
  3567 				; optimize OK (helpers.pas), line = 40
  3568
  3569 1D74 A9 78			lda #$78
  3570 1D76 20 C6 16			jsr B_SYSTEM.WAITFRAMES
  3571
  3572 1D79			@exit
  3573 					.ifdef @new
  3574 					lda <@VarData
  3575 					sta :ztmp
  3576 					lda >@VarData
  3577 					ldy #@VarDataSize-1
  3578 					jmp @FreeMem
  3579 					els
  3580 1D79 60				rts						; ret
  3581 					eif
  3582 				.endl
  3583
  3584 1D7A			.local	CRT_READKEYORJOYSTICK				; FUNCTION
  3585
  3586 				; optimize OK (helpers.pas), line = 48
  3587
  3588 1D7A AD 09 D2			lda B_CRT.KBCODE
  3589 1D7D 8D 02 A5			sta RESULT
  3590
  3591 				; --- RepeatUntilProlog
  3592 1D80			l_0647
  3593
  3594 				; optimize FAIL ('B_CRT.CRT_KEYPRESSED', helpers.pas), line = 49
  3595
  3596 1D80 20 0D 19			jsr B_CRT.CRT_KEYPRESSED
  3597 1D83 A0 01			ldy #1
  3598 1D85 AD 97 A1			lda B_CRT.CRT_KEYPRESSED.RESULT
  3599 1D88 F0 01			beq @+
  3600 1D8A 88				dey
  3601 				@
  3602 1D8B 94 95			sty :STACKORIGIN+1,x
  3603 1D8D A0 01			ldy #1
  3604 1D8F AD 02 A5			lda RESULT
  3605 1D92 CD 09 D2			cmp B_CRT.KBCODE
  3606 1D95 D0 01			bne @+
  3607 1D97 88				dey
  3608 				@
  3609 1D98 98				tya
  3610 1D99 15 95			ora :STACKORIGIN+1,x
  3611 1D9B F0 E3			jeq l_0647
  3612
  3613 				; --- RepeatUntilProlog
  3614 1D9D			l_065E
  3615
  3616 				; optimize FAIL ('CHECKKEYANDSTICK', helpers.pas), line = 51
  3617
  3618 1D9D 20 54 1C			jsr CHECKKEYANDSTICK
  3619 1DA0 AD F1 A4			lda CHECKKEYANDSTICK.RESULT
  3620 1DA3 8D 03 A5			sta Z
  3621
  3622 				; optimize FAIL ('B_CRT.CRT_KEYPRESSED', helpers.pas), line = 52
  3623
  3624 1DA6 20 0D 19			jsr B_CRT.CRT_KEYPRESSED
  3625 1DA9 A0 01			ldy #1
  3626 1DAB AD 03 A5			lda Z
  3627 1DAE C9 0C			cmp #$0C
  3628 1DB0 F0 01			beq @+
  3629 1DB2 88				dey
  3630 				@
  3631 1DB3 98				tya
  3632 1DB4 0D 97 A1			ora B_CRT.CRT_KEYPRESSED.RESULT
  3633 1DB7 95 95			sta :STACKORIGIN+1,x
  3634 1DB9 A0 01			ldy #1
  3635 1DBB AD 03 A5			lda Z
  3636 1DBE C9 0E			cmp #$0E
  3637 1DC0 F0 01			beq @+
  3638 1DC2 88				dey
  3639 				@
  3640 1DC3 98				tya
  3641 1DC4 15 95			ora :STACKORIGIN+1,x
  3642 1DC6 95 95			sta :STACKORIGIN+1,x
  3643 1DC8 A0 01			ldy #1
  3644 1DCA AD 03 A5			lda Z
  3645 1DCD C9 0F			cmp #$0F
  3646 1DCF F0 01			beq @+
  3647 1DD1 88				dey
  3648 				@
  3649 1DD2 98				tya
  3650 1DD3 15 95			ora :STACKORIGIN+1,x
  3651 1DD5 95 95			sta :STACKORIGIN+1,x
  3652 1DD7 A0 01			ldy #1
  3653 1DD9 AD 03 A5			lda Z
  3654 1DDC C9 06			cmp #$06
  3655 1DDE F0 01			beq @+
  3656 1DE0 88				dey
  3657 				@
  3658 1DE1 98				tya
  3659 1DE2 15 95			ora :STACKORIGIN+1,x
  3660 1DE4 95 95			sta :STACKORIGIN+1,x
  3661 1DE6 A0 01			ldy #1
  3662 1DE8 AD 03 A5			lda Z
  3663 1DEB C9 07			cmp #$07
  3664 1DED F0 01			beq @+
  3665 1DEF 88				dey
  3666 				@
  3667 1DF0 98				tya
  3668 1DF1 15 95			ora :STACKORIGIN+1,x
  3669 1DF3 F0 A8			jeq l_065E
  3670
  3671 				; optimize OK (helpers.pas), line = 53
  3672
  3673 1DF5 AD 03 A5			lda Z
  3674 1DF8 F0 03			jeq l_06B5
  3675
  3676 				; optimize OK (helpers.pas), line = 54
  3677
  3678 1DFA 4C 00 1E			jmp l_06C5
  3679 1DFD			l_06B5
  3680
  3681 				; optimize OK (helpers.pas), line = 56
  3682
  3683 1DFD AD 09 D2			lda B_CRT.KBCODE
  3684 1E00			l_06C5
  3685 1E00 8D 02 A5			sta RESULT
  3686 1E03			@exit
  3687
  3688 				; ------------------------------------------------------------
  3689
  3690 = A502			RESULT	= DATAORIGIN+$08AC
  3691 = A503			Z	= DATAORIGIN+$08AD
  3692
  3693 = A503			@VarData	= Z
  3694 = 0001			@VarDataSize	= 1
  3695
  3696 1E03 60				rts						; ret
  3697 				.endl
  3698
  3699 1E04			.local	CRT_READKEYORFIRE				; FUNCTION
  3700
  3701 				; optimize OK (helpers.pas), line = 62
  3702
  3703 1E04 AD 09 D2			lda B_CRT.KBCODE
  3704 1E07 8D 04 A5			sta RESULT
  3705
  3706 				; --- RepeatUntilProlog
  3707 1E0A			l_06D6
  3708
  3709 				; optimize FAIL ('B_CRT.CRT_KEYPRESSED', helpers.pas), line = 63
  3710
  3711 1E0A 20 0D 19			jsr B_CRT.CRT_KEYPRESSED
  3712 1E0D A0 01			ldy #1
  3713 1E0F AD 97 A1			lda B_CRT.CRT_KEYPRESSED.RESULT
  3714 1E12 F0 01			beq @+
  3715 1E14 88				dey
  3716 				@
  3717 1E15 94 95			sty :STACKORIGIN+1,x
  3718 1E17 A0 01			ldy #1
  3719 1E19 AD 04 A5			lda RESULT
  3720 1E1C CD 09 D2			cmp B_CRT.KBCODE
  3721 1E1F D0 01			bne @+
  3722 1E21 88				dey
  3723 				@
  3724 1E22 98				tya
  3725 1E23 15 95			ora :STACKORIGIN+1,x
  3726 1E25 F0 E3			jeq l_06D6
  3727
  3728 				; --- RepeatUntilProlog
  3729 1E27			l_06ED
  3730
  3731 				; optimize FAIL ('B_CRT.CRT_KEYPRESSED', helpers.pas), line = 64
  3732
  3733 1E27 20 0D 19			jsr B_CRT.CRT_KEYPRESSED
  3734 1E2A E8				inx
  3735 1E2B AD 97 A1 95 94		mva B_CRT.CRT_KEYPRESSED.RESULT :STACKORIGIN,x
  3736 1E30 20 54 1C			jsr CHECKKEYANDSTICK
  3737 1E33 CA				dex
  3738 1E34 A0 01			ldy #1
  3739 1E36 AD F1 A4			lda CHECKKEYANDSTICK.RESULT
  3740 1E39 C9 0C			cmp #$0C
  3741 1E3B F0 01			beq @+
  3742 1E3D 88				dey
  3743 				@
  3744 1E3E 98				tya
  3745 1E3F 15 95			ora :STACKORIGIN+1,x
  3746 1E41 F0 E4			jeq l_06ED
  3747
  3748 				; optimize OK (helpers.pas), line = 65
  3749
  3750 1E43 AD 09 D2			lda B_CRT.KBCODE
  3751 1E46 8D 04 A5			sta RESULT
  3752 1E49			@exit
  3753
  3754 				; ------------------------------------------------------------
  3755
  3756 = A504			RESULT	= DATAORIGIN+$08AE
  3757
  3758 1E49 60				rts						; ret
  3759 				.endl
  3760
  3761 1E4A			.local	WAITFORKEY					; PROCEDURE
  3762
  3763 				; optimize FAIL ('B_CRT.CRT_WHEREY', helpers.pas), line = 72
  3764
  3765 1E4A 20 D9 17			jsr B_CRT.CRT_WHEREY
  3766 1E4D AD 8C A0			lda B_CRT.CRT_WHEREY.RESULT
  3767 1E50 8D 05 A5			sta K
  3768
  3769 				; optimize OK (helpers.pas), line = 73
  3770
  3771 1E53 18 69 02			add #$02
  3772 1E56 8D 05 A5			sta K
  3773
  3774 				; optimize FAIL ('B_CRT.CRT_WRITECENTERED.@02018986000001000180000', helpers.pas), line = 74
  3775
  3776 1E59 E8				inx
  3777 1E5A AC 0D 9C 84 82 AC + 	mwy WAITKEY_STRING :bp2
  3778 1E64 A0 00			ldy #$00
  3779 1E66 B1 82 99 9D A1 C8 + 	mva:rne (:bp2),y B_CRT.CRT_WRITECENTERED.@02018986000001000180000.adr.S,y+
  3780 1E6E E8				inx
  3781 1E6F AD 05 A5 95 94		mva K :STACKORIGIN,x
  3782 1E74 20 DF 19			jsr B_CRT.CRT_WRITECENTERED.@02018986000001000180000
  3783
  3784 				; optimize FAIL ('CRT_READKEYORFIRE', helpers.pas), line = 75
  3785
  3786 1E77 20 04 1E			jsr CRT_READKEYORFIRE
  3787
  3788 				; ------------------------------------------------------------
  3789
  3790 = A505			K	= DATAORIGIN+$08AF
  3791
  3792 = A505			@VarData	= K
  3793 = 0001			@VarDataSize	= 1
  3794
  3795 1E7A			@exit
  3796 					.ifdef @new
  3797 					lda <@VarData
  3798 					sta :ztmp
  3799 					lda >@VarData
  3800 					ldy #@VarDataSize-1
  3801 					jmp @FreeMem
  3802 					els
  3803 1E7A 60				rts						; ret
  3804 					eif
  3805 				.endl
  3806
  3807 1E7B			.local	CRT_NEWLINE2					; PROCEDURE
  3808
  3809 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', helpers.pas), line = 82
  3810
  3811 1E7B 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
  3812
  3813 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', helpers.pas), line = 83
  3814
  3815 1E7E 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
  3816
  3817 1E81			@exit
  3818 					.ifdef @new
  3819 					lda <@VarData
  3820 					sta :ztmp
  3821 					lda >@VarData
  3822 					ldy #@VarDataSize-1
  3823 					jmp @FreeMem
  3824 					els
  3825 1E81 60				rts						; ret
  3826 					eif
  3827 				.endl
  3828
  3829 1E82			.local	CRT_WRITELN2					; PROCEDURE
  3830
  3831 				; ------------------------------------------------------------
  3832
  3833 				; Generate Assignment for WORD / SMALLINT / SHORTREAL / POINTER
  3834 				; as Pointer
  3835 1E82 B5 94			lda :STACKORIGIN,x
  3836 1E84 85 82			sta :bp2
  3837 1E86 B5 A4			lda :STACKORIGIN+STACKWIDTH,x
  3838 1E88 85 83			sta :bp2+1
  3839 1E8A A0 00			ldy #$00
  3840 1E8C B1 82 99 06 A5 C8 + 	mva:rne (:bp2),y adr.S,y+
  3841 1E94 CA				dex
  3842 1E95			@main
  3843
  3844 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', helpers.pas), line = 88
  3845
  3846 1E95 E8				inx
  3847 1E96 AD A7 1E 95 94		mva S :STACKORIGIN,x
  3848 1E9B AD A8 1E 95 A4		mva S+1 :STACKORIGIN+STACKWIDTH,x
  3849 1EA0 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
  3850
  3851 				; optimize FAIL ('CRT_NEWLINE2', helpers.pas), line = 89
  3852
  3853 1EA3 20 7B 1E			jsr CRT_NEWLINE2
  3854
  3855 				; ------------------------------------------------------------
  3856
  3857 = A506			adr.S	= [DATAORIGIN+$08B0] .array [256]
  3858 1EA6			.var S	= adr.S .word
  3859
  3860 = 1EA7			@VarData	= S
  3861 = 0100			@VarDataSize	= 256
  3862
  3863 1EA6			@exit
  3864 					.ifdef @new
  3865 					lda <@VarData
  3866 					sta :ztmp
  3867 					lda >@VarData
  3868 					ldy #@VarDataSize-1
  3869 					jmp @FreeMem
  3870 					els
  3871 1EA6 60				rts						; ret
  3872 					eif
  3873 = 1EA7 06 A5		S
  3873 				.endl
  3874
  3875 1EA9			.local	CRT_WRITELN					; PROCEDURE
  3876
  3877 				; ------------------------------------------------------------
  3878
  3879 				; Generate Assignment for WORD / SMALLINT / SHORTREAL / POINTER
  3880 				; as Pointer
  3881 1EA9 B5 94			lda :STACKORIGIN,x
  3882 1EAB 85 82			sta :bp2
  3883 1EAD B5 A4			lda :STACKORIGIN+STACKWIDTH,x
  3884 1EAF 85 83			sta :bp2+1
  3885 1EB1 A0 00			ldy #$00
  3886 1EB3 B1 82 99 06 A6 C8 + 	mva:rne (:bp2),y adr.S,y+
  3887 1EBB CA				dex
  3888 1EBC			@main
  3889
  3890 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', helpers.pas), line = 95
  3891
  3892 1EBC E8				inx
  3893 1EBD AD CE 1E 95 94		mva S :STACKORIGIN,x
  3894 1EC2 AD CF 1E 95 A4		mva S+1 :STACKORIGIN+STACKWIDTH,x
  3895 1EC7 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
  3896
  3897 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', helpers.pas), line = 96
  3898
  3899 1ECA 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
  3900
  3901 				; ------------------------------------------------------------
  3902
  3903 = A606			adr.S	= [DATAORIGIN+$09B0] .array [256]
  3904 1ECD			.var S	= adr.S .word
  3905
  3906 = 1ECE			@VarData	= S
  3907 = 0100			@VarDataSize	= 256
  3908
  3909 1ECD			@exit
  3910 					.ifdef @new
  3911 					lda <@VarData
  3912 					sta :ztmp
  3913 					lda >@VarData
  3914 					ldy #@VarDataSize-1
  3915 					jmp @FreeMem
  3916 					els
  3917 1ECD 60				rts						; ret
  3918 					eif
  3919 = 1ECE 06 A6		S
  3919 				.endl
  3920
  3921 1ED0			.local	GETRANDOM					; FUNCTION
  3922
  3923 				; optimize FAIL ('B_CRT.CRT_WHEREX', helpers.pas), line = 104
  3924
  3925 1ED0 20 FC 17			jsr B_CRT.CRT_WHEREX
  3926 1ED3 AD 8D A0			lda B_CRT.CRT_WHEREX.RESULT
  3927 1ED6 8D 10 A7			sta X
  3928
  3929 				; optimize FAIL ('B_CRT.CRT_WHEREY', helpers.pas), line = 105
  3930
  3931 1ED9 20 D9 17			jsr B_CRT.CRT_WHEREY
  3932 1EDC AD 8C A0			lda B_CRT.CRT_WHEREY.RESULT
  3933 1EDF 8D 11 A7			sta Y
  3934
  3935 				; optimize OK (helpers.pas), line = 106
  3936
  3937 1EE2 AD 06 A7			lda MINP
  3938 1EE5 8D 0E A7			sta PROP
  3939 1EE8 AD 07 A7			lda MINP+1
  3940 1EEB 8D 0F A7			sta PROP+1
  3941
  3942 				; --- RepeatUntilProlog
  3943 1EEE			l_0749
  3944
  3945 				; optimize FAIL ('B_CRT.CRT_KEYPRESSED', helpers.pas), line = 108
  3946
  3947 1EEE 20 0D 19			jsr B_CRT.CRT_KEYPRESSED
  3948 1EF1 AD 97 A1			lda B_CRT.CRT_KEYPRESSED.RESULT
  3949 1EF4 D0 F8			jne l_0749
  3950
  3951 				; --- RepeatUntilProlog
  3952 1EF6			l_0752
  3953
  3954 				; optimize OK (helpers.pas), line = 111
  3955
  3956 1EF6 AD 0E A7			lda PROP
  3957 1EF9 18 6D 0A A7			add STEPS
  3958 1EFD 8D 0E A7			sta PROP
  3959 1F00 AD 0F A7			lda PROP+1
  3960 1F03 6D 0B A7			adc STEPS+1
  3961 1F06 8D 0F A7			sta PROP+1
  3962
  3963 				; optimize OK (helpers.pas), line = 112
  3964
  3965 1F09 AD 09 A7			lda MAXP+1
  3966 1F0C CD 0F A7			cmp PROP+1
  3967 1F0F D0 06			bne @+
  3968 1F11 AD 08 A7			lda MAXP
  3969 1F14 CD 0E A7			cmp PROP
  3970 				@
  3971 1F17 B0 0C			jcs l_076E
  3972
  3973 				; optimize OK (helpers.pas), line = 113
  3974
  3975 1F19 AD 06 A7			lda MINP
  3976 1F1C 8D 0E A7			sta PROP
  3977 1F1F AD 07 A7			lda MINP+1
  3978 1F22 8D 0F A7			sta PROP+1
  3979 1F25			l_076E
  3980
  3981 				; optimize OK (helpers.pas), line = 114
  3982
  3983 1F25 AD 10 A7			lda X
  3984 1F28 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
  3985 1F2B AD 11 A7			lda Y
  3986 1F2E 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
  3987 1F31 20 AC 17			jsr B_CRT.CRT_GOTOXY
  3988
  3989 				; optimize FAIL ('B_SYSTEM.WAITFRAME', helpers.pas), line = 115
  3990
  3991 1F34 20 BF 16			jsr B_SYSTEM.WAITFRAME
  3992
  3993 				; optimize OK (helpers.pas), line = 116
  3994
  3995 1F37 AD 0E A7			lda PROP
  3996 1F3A 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
  3997 1F3D AD 0F A7			lda PROP+1
  3998 1F40 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
  3999 1F43 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
  4000
  4001 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', helpers.pas), line = 117
  4002
  4003 1F46 E8				inx
  4004 1F47 A9 6B 95 94			mva #$6B :STACKORIGIN,x
  4005 1F4B A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
  4006 1F4F 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
  4007
  4008 				; optimize FAIL ('CHECKKEYANDSTICK', helpers.pas), line = 119
  4009
  4010 1F52 20 54 1C			jsr CHECKKEYANDSTICK
  4011 1F55 AD F1 A4			lda CHECKKEYANDSTICK.RESULT
  4012 1F58 F0 9C			jeq l_0752
  4013
  4014 				; --- RepeatUntilProlog
  4015 1F5A			l_078F
  4016
  4017 				; optimize FAIL ('CHECKKEYANDSTICK', helpers.pas), line = 121
  4018
  4019 1F5A 20 54 1C			jsr CHECKKEYANDSTICK
  4020 1F5D AD F1 A4			lda CHECKKEYANDSTICK.RESULT
  4021 1F60 8D FC 02			sta ATARI.CH
  4022
  4023 				; optimize FAIL (1, helpers.pas), line = 122
  4024
  4025 1F63 E8				inx
  4026 1F64 A0 01			ldy #1
  4027 1F66 AD FC 02			lda ATARI.CH
  4028 1F69 F0 01			beq @+
  4029 1F6B 88				dey
  4030 				@
  4031 1F6C 94 94			sty :STACKORIGIN,x
  4032 1F6E 20 0D 19			jsr B_CRT.CRT_KEYPRESSED
  4033 1F71 CA				dex
  4034 1F72 A0 01			ldy #1
  4035 1F74 AD 97 A1			lda B_CRT.CRT_KEYPRESSED.RESULT
  4036 1F77 F0 01			beq @+
  4037 1F79 88				dey
  4038 				@
  4039 1F7A 98				tya
  4040 1F7B 35 95			and :STACKORIGIN+1,x
  4041 1F7D F0 DB			jeq l_078F
  4042
  4043 				; optimize OK (helpers.pas), line = 123
  4044
  4045 1F7F AD 0E A7			lda PROP
  4046 1F82 8D 0C A7			sta RESULT
  4047 1F85 AD 0F A7			lda PROP+1
  4048 1F88 8D 0D A7			sta RESULT+1
  4049 1F8B			@exit
  4050
  4051 				; ------------------------------------------------------------
  4052
  4053 = A706			MINP	= DATAORIGIN+$0AB0
  4054 = A708			MAXP	= DATAORIGIN+$0AB2
  4055 = A70A			STEPS	= DATAORIGIN+$0AB4
  4056 = A70C			RESULT	= DATAORIGIN+$0AB6
  4057 = A70E			PROP	= DATAORIGIN+$0AB8
  4058 = A710			X	= DATAORIGIN+$0ABA
  4059 = A711			Y	= DATAORIGIN+$0ABB
  4060
  4061 = A706			@VarData	= MINP
  4062 = 000A			@VarDataSize	= 10
  4063
  4064 1F8B 60				rts						; ret
  4065 				.endl
  4066
  4067 1F8C			.local	GETANSWERCHAR					; FUNCTION
  4068
  4069 				; optimize FAIL ('B_CRT.CRT_WHEREX', helpers.pas), line = 133
  4070
  4071 1F8C 20 FC 17			jsr B_CRT.CRT_WHEREX
  4072 1F8F AD 8D A0			lda B_CRT.CRT_WHEREX.RESULT
  4073 1F92 8D 17 A7			sta X
  4074
  4075 				; optimize FAIL ('B_CRT.CRT_WHEREY', helpers.pas), line = 134
  4076
  4077 1F95 20 D9 17			jsr B_CRT.CRT_WHEREY
  4078 1F98 AD 8C A0			lda B_CRT.CRT_WHEREY.RESULT
  4079 1F9B 8D 18 A7			sta Y
  4080
  4081 				; optimize OK (helpers.pas), line = 135
  4082
  4083 1F9E AD 14 A7			lda A
  4084 1FA1 8D 1A A7			sta ANSWER
  4085
  4086 				; --- RepeatUntilProlog
  4087 1FA4			l_07BF
  4088
  4089 				; optimize OK (helpers.pas), line = 137
  4090
  4091 1FA4 AD 17 A7			lda X
  4092 1FA7 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
  4093 1FAA AD 18 A7			lda Y
  4094 1FAD 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
  4095 1FB0 20 AC 17			jsr B_CRT.CRT_GOTOXY
  4096
  4097 				; optimize OK (helpers.pas), line = 138
  4098
  4099 1FB3 AD 1A A7			lda ANSWER
  4100 1FB6 20 65 18			jsr B_CRT.CRT_WRITE.@010186000
  4101
  4102 				; optimize OK (helpers.pas), line = 139
  4103
  4104 1FB9 A9 00			lda #$00
  4105 1FBB 20 65 18			jsr B_CRT.CRT_WRITE.@010186000
  4106
  4107 				; optimize FAIL ('CRT_READKEYORJOYSTICK', helpers.pas), line = 140
  4108
  4109 1FBE 20 7A 1D			jsr CRT_READKEYORJOYSTICK
  4110 1FC1 AD 02 A5			lda CRT_READKEYORJOYSTICK.RESULT
  4111 1FC4 8D 19 A7			sta CH
  4112
  4113 				; optimize OK (helpers.pas), line = 141
  4114
  4115 1FC7 C9 0C			cmp #$0C
  4116 1FC9 D0 03			jne l_07E2
  4117 1FCB 4C F5 1F			jmp b_07BF
  4118 1FCE			l_07E2
  4119
  4120 				; optimize OK (helpers.pas), line = 142
  4121
  4122 1FCE AD 19 A7			lda CH
  4123 1FD1 C9 0E			cmp #$0E
  4124 1FD3 F0 05			jeq l_0805x
  4125 1FD5 CD 12 A7			cmp AKEY
  4126 1FD8 D0 06			jne l_0805
  4127 1FDA			l_0805x
  4128 1FDA AD 14 A7			lda A
  4129 1FDD 8D 1A A7			sta ANSWER
  4130 1FE0			l_0805
  4131
  4132 				; optimize OK (helpers.pas), line = 143
  4133
  4134 1FE0 AD 19 A7			lda CH
  4135 1FE3 C9 0F			cmp #$0F
  4136 1FE5 F0 05			jeq l_082Ex
  4137 1FE7 CD 13 A7			cmp BKEY
  4138 1FEA D0 06			jne l_082E
  4139 1FEC			l_082Ex
  4140 1FEC AD 15 A7			lda B
  4141 1FEF 8D 1A A7			sta ANSWER
  4142 1FF2			l_082E
  4143
  4144 				; optimize OK (helpers.pas), line = 144
  4145
  4146 1FF2 4C A4 1F			jmp l_07BF
  4147 1FF5			b_07BF
  4148
  4149 				; optimize OK (helpers.pas), line = 145
  4150
  4151 1FF5 AD 1A A7			lda ANSWER
  4152 1FF8 CD 14 A7			cmp A
  4153 1FFB D0 05			jne l_0850
  4154 1FFD A9 00			lda #$00
  4155 1FFF 4C 04 20			jmp l_085E
  4156 2002			l_0850
  4157 2002 A9 01			lda #$01
  4158 2004			l_085E
  4159 2004 8D 16 A7			sta RESULT
  4160 2007			@exit
  4161
  4162 				; ------------------------------------------------------------
  4163
  4164 = A712			AKEY	= DATAORIGIN+$0ABC
  4165 = A713			BKEY	= DATAORIGIN+$0ABD
  4166 = A714			A	= DATAORIGIN+$0ABE
  4167 = A715			B	= DATAORIGIN+$0ABF
  4168 = A716			RESULT	= DATAORIGIN+$0AC0
  4169 = A717			X	= DATAORIGIN+$0AC1
  4170 = A718			Y	= DATAORIGIN+$0AC2
  4171 = A719			CH	= DATAORIGIN+$0AC3
  4172 = A71A			ANSWER	= DATAORIGIN+$0AC4
  4173
  4174 = A712			@VarData	= AKEY
  4175 = 0008			@VarDataSize	= 8
  4176
  4177 2007 60				rts						; ret
  4178 				.endl
  4179
  4180 2008			.local	GETYESNO					; FUNCTION
  4181
  4182 				; optimize OK (helpers.pas), line = 152
  4183
  4184 2008 A9 23			lda #$23
  4185 200A 8D 12 A7			sta GETANSWERCHAR.AKEY
  4186 200D A9 2D			lda #$2D
  4187 200F 8D 13 A7			sta GETANSWERCHAR.BKEY
  4188 2012 A9 2E			lda #$2E
  4189 2014 8D 14 A7			sta GETANSWERCHAR.A
  4190 2017 A9 34			lda #$34
  4191 2019 8D 15 A7			sta GETANSWERCHAR.B
  4192 201C 20 8C 1F			jsr GETANSWERCHAR
  4193 201F AD 16 A7			lda GETANSWERCHAR.RESULT
  4194 2022 8D 1B A7			sta RESULT
  4195 2025			@exit
  4196
  4197 				; ------------------------------------------------------------
  4198
  4199 = A71B			RESULT	= DATAORIGIN+$0AC5
  4200
  4201 2025 60				rts						; ret
  4202 				.endl
  4203
  4204 2026			.local	READVALUE					; FUNCTION
  4205
  4206 				; optimize FAIL ('B_CRT.CRT_WHEREX', helpers.pas), line = 169
  4207
  4208 2026 20 FC 17			jsr B_CRT.CRT_WHEREX
  4209 2029 AD 8D A0			lda B_CRT.CRT_WHEREX.RESULT
  4210 202C 8D 28 A7			sta X
  4211
  4212 				; optimize FAIL ('B_CRT.CRT_WHEREY', helpers.pas), line = 170
  4213
  4214 202F 20 D9 17			jsr B_CRT.CRT_WHEREY
  4215 2032 AD 8C A0			lda B_CRT.CRT_WHEREY.RESULT
  4216 2035 8D 29 A7			sta Y
  4217
  4218 				; optimize OK (helpers.pas), line = 172
  4219
  4220 2038 AD 1C A7			lda MINVALUE
  4221 203B 8D 22 A7			sta VALUE
  4222 203E A0 00			ldy #$00
  4223 2040 AD 1D A7			lda MINVALUE+1
  4224 2043 10 01			spl
  4225 2045 88				dey
  4226 2046 8D 23 A7			sta VALUE+1
  4227 2049 8C 24 A7			sty VALUE+2
  4228 204C 8C 25 A7			sty VALUE+3
  4229
  4230 				; optimize OK (helpers.pas), line = 173
  4231
  4232 204F A9 01			lda #$01
  4233 2051 8D 26 A7			sta STEP
  4234 2054 A9 00			lda #$00
  4235 2056 8D 27 A7			sta STEP+1
  4236
  4237 				; optimize OK (helpers.pas), line = 174
  4238
  4239 2059 8D 2D A7			sta FASTADJUSTCOUNTER
  4240
  4241 				; optimize OK (helpers.pas), line = 175
  4242
  4243 205C A9 10			lda #$10
  4244 205E 8D 2C A7			sta CURDELAY
  4245
  4246 				; optimize OK (helpers.pas), line = 176
  4247
  4248 2061 AD 22 A7			lda VALUE
  4249 2064 8D 92 A1			sta B_CRT.CRT_WRITE.@010185000.NUM
  4250 2067 AD 23 A7			lda VALUE+1
  4251 206A 8D 93 A1			sta B_CRT.CRT_WRITE.@010185000.NUM+1
  4252 206D AD 24 A7			lda VALUE+2
  4253 2070 8D 94 A1			sta B_CRT.CRT_WRITE.@010185000.NUM+2
  4254 2073 AD 25 A7			lda VALUE+3
  4255 2076 8D 95 A1			sta B_CRT.CRT_WRITE.@010185000.NUM+3
  4256 2079 20 CA 18			jsr B_CRT.CRT_WRITE.@010185000
  4257
  4258 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', helpers.pas), line = 177
  4259
  4260 207C E8				inx
  4261 207D A9 6E 95 94			mva #$6E :STACKORIGIN,x
  4262 2081 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
  4263 2085 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
  4264
  4265 				; optimize FAIL ('CRT_READKEYORJOYSTICK', helpers.pas), line = 178
  4266
  4267 2088 20 7A 1D			jsr CRT_READKEYORJOYSTICK
  4268 208B AD 02 A5			lda CRT_READKEYORJOYSTICK.RESULT
  4269 208E 8D 2B A7			sta CH
  4270
  4271 				; --- RepeatUntilProlog
  4272 2091			l_0894
  4273
  4274 				; optimize FAIL ('CHECKKEYANDSTICK', helpers.pas), line = 180
  4275
  4276 2091 20 54 1C			jsr CHECKKEYANDSTICK
  4277 2094 AD F1 A4			lda CHECKKEYANDSTICK.RESULT
  4278 2097 8D 2B A7			sta CH
  4279
  4280 				; optimize OK (helpers.pas), line = 182
  4281
  4282 209A C9 0C			cmp #$0C
  4283 209C D0 03			jne l_08AA
  4284 209E 4C A5 23			jmp b_0894
  4285 20A1			l_08AA
  4286
  4287 				; optimize OK (helpers.pas), line = 184
  4288
  4289 20A1 AD 2B A7			lda CH
  4290 20A4 C9 0E			cmp #$0E
  4291 20A6 F0 03 4C 62 21		jne l_08BF
  4292
  4293 				; optimize OK (helpers.pas), line = 186
  4294
  4295 20AB AD 2D A7			lda FASTADJUSTCOUNTER
  4296 20AE F0 03 4C 5F 21		jne l_08D2
  4297
  4298 				; optimize OK (helpers.pas), line = 188
  4299
  4300 20B3 AD 26 A7			lda STEP
  4301 20B6 85 9E			sta :STACKORIGIN+10
  4302 20B8 A0 00			ldy #$00
  4303 20BA AD 27 A7			lda STEP+1
  4304 20BD 10 01			spl
  4305 20BF 88				dey
  4306 20C0 85 AE			sta :STACKORIGIN+STACKWIDTH+10
  4307 20C2 84 BE			sty :STACKORIGIN+STACKWIDTH*2+10
  4308 20C4 84 CE			sty :STACKORIGIN+STACKWIDTH*3+10
  4309 20C6 AD 22 A7			lda VALUE
  4310 20C9 18 65 9E			add :STACKORIGIN+10
  4311 20CC 8D 22 A7			sta VALUE
  4312 20CF AD 23 A7			lda VALUE+1
  4313 20D2 65 AE			adc :STACKORIGIN+STACKWIDTH+10
  4314 20D4 8D 23 A7			sta VALUE+1
  4315 20D7 AD 24 A7			lda VALUE+2
  4316 20DA 65 BE			adc :STACKORIGIN+STACKWIDTH*2+10
  4317 20DC 8D 24 A7			sta VALUE+2
  4318 20DF AD 25 A7			lda VALUE+3
  4319 20E2 65 CE			adc :STACKORIGIN+STACKWIDTH*3+10
  4320 20E4 8D 25 A7			sta VALUE+3
  4321
  4322 				; optimize OK (helpers.pas), line = 189
  4323
  4324 20E7 AD 1E A7			lda MAXVALUE
  4325 20EA 85 9E			sta :STACKORIGIN+10
  4326 20EC A0 00			ldy #$00
  4327 20EE AD 1F A7			lda MAXVALUE+1
  4328 20F1 10 01			spl
  4329 20F3 88				dey
  4330 20F4 85 AE			sta :STACKORIGIN+STACKWIDTH+10
  4331 20F6 84 BE			sty :STACKORIGIN+STACKWIDTH*2+10
  4332 20F8 84 CE			sty :STACKORIGIN+STACKWIDTH*3+10
  4333 20FA				.LOCAL
  4334 20FA AD 25 A7			lda VALUE+3
  4335 20FD 38 E5 CE			sub :STACKORIGIN+STACKWIDTH*3+10
  4336 2100 D0 1F			bne L4
  4337 2102 AD 24 A7			lda VALUE+2
  4338 2105 C5 BE			cmp :STACKORIGIN+STACKWIDTH*2+10
  4339 2107 D0 0C			bne L1
  4340 2109 AD 23 A7			lda VALUE+1
  4341 210C C5 AE			cmp :STACKORIGIN+STACKWIDTH+10
  4342 210E D0 05			bne L1
  4343 2110 AD 22 A7			lda VALUE
  4344 2113 C5 9E			cmp :STACKORIGIN+10
  4345 2115 F0 10		L1	beq L5
  4346 2117 B0 04			bcs L3
  4347 2119 A9 FF			lda #$FF
  4348 211B D0 0A			bne L5
  4349 211D A9 01		L3	lda #$01
  4350 211F D0 06			bne L5
  4351 2121 50 04		L4	bvc L5
  4352 2123 49 FF			eor #$FF
  4353 2125 09 01			ora #$01
  4354 2127			L5
  4355 					.ENDL
  4356 2127 30 19			jmi l_08ED
  4357 2129 F0 17			jeq l_08ED
  4358
  4359 				; optimize OK (helpers.pas), line = 190
  4360
  4361 212B AD 1E A7			lda MAXVALUE
  4362 212E 8D 22 A7			sta VALUE
  4363 2131 A0 00			ldy #$00
  4364 2133 AD 1F A7			lda MAXVALUE+1
  4365 2136 10 01			spl
  4366 2138 88				dey
  4367 2139 8D 23 A7			sta VALUE+1
  4368 213C 8C 24 A7			sty VALUE+2
  4369 213F 8C 25 A7			sty VALUE+3
  4370 2142			l_08ED
  4371
  4372 				; optimize OK (helpers.pas), line = 191
  4373
  4374 2142 AD 2C A7			lda CURDELAY
  4375 2145 C9 03			cmp #$03
  4376 2147 90 06			jcc l_0907
  4377
  4378 				; optimize OK (helpers.pas), line = 192
  4379
  4380 2149 CE 2C A7			dec CURDELAY
  4381 214C 4C 59 21			jmp l_091B
  4382 214F			l_0907
  4383
  4384 				; optimize OK (helpers.pas), line = 194
  4385
  4386 214F A9 02			lda #$02
  4387 2151 8D 26 A7			sta STEP
  4388 2154 A9 00			lda #$00
  4389 2156 8D 27 A7			sta STEP+1
  4390 2159			l_091B
  4391
  4392 				; optimize OK (helpers.pas), line = 195
  4393
  4394 2159 AD 2C A7			lda CURDELAY
  4395 215C 8D 2D A7			sta FASTADJUSTCOUNTER
  4396 215F			l_08D2
  4397 215F 4C 61 23			jmp l_0930
  4398 2162			l_08BF
  4399
  4400 				; optimize OK (helpers.pas), line = 198
  4401
  4402 2162 AD 2B A7			lda CH
  4403 2165 C9 07			cmp #$07
  4404 2167 F0 03 4C F9 21		jne l_0942
  4405
  4406 				; optimize OK (helpers.pas), line = 200
  4407
  4408 216C AD 22 A7			lda VALUE
  4409 216F 18 69 F4			add #$F4
  4410 2172 8D 22 A7			sta VALUE
  4411 2175 AD 23 A7			lda VALUE+1
  4412 2178 69 01			adc #$01
  4413 217A 8D 23 A7			sta VALUE+1
  4414 217D AD 24 A7			lda VALUE+2
  4415 2180 69 00			adc #$00
  4416 2182 8D 24 A7			sta VALUE+2
  4417 2185 AD 25 A7			lda VALUE+3
  4418 2188 69 00			adc #$00
  4419 218A 8D 25 A7			sta VALUE+3
  4420
  4421 				; optimize OK (helpers.pas), line = 201
  4422
  4423 218D AD 1E A7			lda MAXVALUE
  4424 2190 85 9E			sta :STACKORIGIN+10
  4425 2192 A0 00			ldy #$00
  4426 2194 AD 1F A7			lda MAXVALUE+1
  4427 2197 10 01			spl
  4428 2199 88				dey
  4429 219A 85 AE			sta :STACKORIGIN+STACKWIDTH+10
  4430 219C 84 BE			sty :STACKORIGIN+STACKWIDTH*2+10
  4431 219E 84 CE			sty :STACKORIGIN+STACKWIDTH*3+10
  4432 21A0				.LOCAL
  4433 21A0 AD 25 A7			lda VALUE+3
  4434 21A3 38 E5 CE			sub :STACKORIGIN+STACKWIDTH*3+10
  4435 21A6 D0 1F			bne L4
  4436 21A8 AD 24 A7			lda VALUE+2
  4437 21AB C5 BE			cmp :STACKORIGIN+STACKWIDTH*2+10
  4438 21AD D0 0C			bne L1
  4439 21AF AD 23 A7			lda VALUE+1
  4440 21B2 C5 AE			cmp :STACKORIGIN+STACKWIDTH+10
  4441 21B4 D0 05			bne L1
  4442 21B6 AD 22 A7			lda VALUE
  4443 21B9 C5 9E			cmp :STACKORIGIN+10
  4444 21BB F0 10		L1	beq L5
  4445 21BD B0 04			bcs L3
  4446 21BF A9 FF			lda #$FF
  4447 21C1 D0 0A			bne L5
  4448 21C3 A9 01		L3	lda #$01
  4449 21C5 D0 06			bne L5
  4450 21C7 50 04		L4	bvc L5
  4451 21C9 49 FF			eor #$FF
  4452 21CB 09 01			ora #$01
  4453 21CD			L5
  4454 					.ENDL
  4455 21CD 30 19			jmi l_095C
  4456 21CF F0 17			jeq l_095C
  4457
  4458 				; optimize OK (helpers.pas), line = 202
  4459
  4460 21D1 AD 1E A7			lda MAXVALUE
  4461 21D4 8D 22 A7			sta VALUE
  4462 21D7 A0 00			ldy #$00
  4463 21D9 AD 1F A7			lda MAXVALUE+1
  4464 21DC 10 01			spl
  4465 21DE 88				dey
  4466 21DF 8D 23 A7			sta VALUE+1
  4467 21E2 8C 24 A7			sty VALUE+2
  4468 21E5 8C 25 A7			sty VALUE+3
  4469 21E8			l_095C
  4470
  4471 				; --- RepeatUntilProlog
  4472 21E8			l_0965
  4473
  4474 				; optimize FAIL ('CHECKKEYANDSTICK', helpers.pas), line = 205
  4475
  4476 21E8 20 54 1C			jsr CHECKKEYANDSTICK
  4477 21EB AD F1 A4			lda CHECKKEYANDSTICK.RESULT
  4478 21EE 8D 2A A7			sta TMPCH
  4479
  4480 				; optimize OK (helpers.pas), line = 206
  4481
  4482 21F1 CD 2B A7			cmp CH
  4483 21F4 F0 F2			jeq l_0965
  4484 21F6 4C 61 23			jmp l_0981
  4485 21F9			l_0942
  4486
  4487 				; optimize OK (helpers.pas), line = 208
  4488
  4489 21F9 AD 2B A7			lda CH
  4490 21FC C9 06			cmp #$06
  4491 21FE F0 03 4C 8E 22		jne l_0993
  4492
  4493 				; optimize OK (helpers.pas), line = 210
  4494
  4495 2203 AD 22 A7			lda VALUE
  4496 2206 38 E9 F4			sub #$F4
  4497 2209 8D 22 A7			sta VALUE
  4498 220C AD 23 A7			lda VALUE+1
  4499 220F E9 01			sbc #$01
  4500 2211 8D 23 A7			sta VALUE+1
  4501 2214 AD 24 A7			lda VALUE+2
  4502 2217 E9 00			sbc #$00
  4503 2219 8D 24 A7			sta VALUE+2
  4504 221C AD 25 A7			lda VALUE+3
  4505 221F E9 00			sbc #$00
  4506 2221 8D 25 A7			sta VALUE+3
  4507
  4508 				; optimize OK (helpers.pas), line = 211
  4509
  4510 2224 AD 1C A7			lda MINVALUE
  4511 2227 85 9E			sta :STACKORIGIN+10
  4512 2229 A0 00			ldy #$00
  4513 222B AD 1D A7			lda MINVALUE+1
  4514 222E 10 01			spl
  4515 2230 88				dey
  4516 2231 85 AE			sta :STACKORIGIN+STACKWIDTH+10
  4517 2233 84 BE			sty :STACKORIGIN+STACKWIDTH*2+10
  4518 2235 84 CE			sty :STACKORIGIN+STACKWIDTH*3+10
  4519 2237				.LOCAL
  4520 2237 AD 25 A7			lda VALUE+3
  4521 223A 38 E5 CE			sub :STACKORIGIN+STACKWIDTH*3+10
  4522 223D D0 1F			bne L4
  4523 223F AD 24 A7			lda VALUE+2
  4524 2242 C5 BE			cmp :STACKORIGIN+STACKWIDTH*2+10
  4525 2244 D0 0C			bne L1
  4526 2246 AD 23 A7			lda VALUE+1
  4527 2249 C5 AE			cmp :STACKORIGIN+STACKWIDTH+10
  4528 224B D0 05			bne L1
  4529 224D AD 22 A7			lda VALUE
  4530 2250 C5 9E			cmp :STACKORIGIN+10
  4531 2252 F0 10		L1	beq L5
  4532 2254 B0 04			bcs L3
  4533 2256 A9 FF			lda #$FF
  4534 2258 D0 0A			bne L5
  4535 225A A9 01		L3	lda #$01
  4536 225C D0 06			bne L5
  4537 225E 50 04		L4	bvc L5
  4538 2260 49 FF			eor #$FF
  4539 2262 09 01			ora #$01
  4540 2264			L5
  4541 					.ENDL
  4542 2264 10 17			jpl l_09AD
  4543
  4544 				; optimize OK (helpers.pas), line = 212
  4545
  4546 2266 AD 1C A7			lda MINVALUE
  4547 2269 8D 22 A7			sta VALUE
  4548 226C A0 00			ldy #$00
  4549 226E AD 1D A7			lda MINVALUE+1
  4550 2271 10 01			spl
  4551 2273 88				dey
  4552 2274 8D 23 A7			sta VALUE+1
  4553 2277 8C 24 A7			sty VALUE+2
  4554 227A 8C 25 A7			sty VALUE+3
  4555 227D			l_09AD
  4556
  4557 				; --- RepeatUntilProlog
  4558 227D			l_09B6
  4559
  4560 				; optimize FAIL ('CHECKKEYANDSTICK', helpers.pas), line = 215
  4561
  4562 227D 20 54 1C			jsr CHECKKEYANDSTICK
  4563 2280 AD F1 A4			lda CHECKKEYANDSTICK.RESULT
  4564 2283 8D 2A A7			sta TMPCH
  4565
  4566 				; optimize OK (helpers.pas), line = 216
  4567
  4568 2286 CD 2B A7			cmp CH
  4569 2289 F0 F2			jeq l_09B6
  4570 228B 4C 61 23			jmp l_09D2
  4571 228E			l_0993
  4572
  4573 				; optimize OK (helpers.pas), line = 218
  4574
  4575 228E AD 2B A7			lda CH
  4576 2291 C9 0F			cmp #$0F
  4577 2293 F0 03 4C 4D 23		jne l_09E4
  4578
  4579 				; optimize OK (helpers.pas), line = 220
  4580
  4581 2298 AD 2D A7			lda FASTADJUSTCOUNTER
  4582 229B F0 03 4C 4A 23		jne l_09F7
  4583
  4584 				; optimize OK (helpers.pas), line = 222
  4585
  4586 22A0 AD 26 A7			lda STEP
  4587 22A3 85 9E			sta :STACKORIGIN+10
  4588 22A5 A0 00			ldy #$00
  4589 22A7 AD 27 A7			lda STEP+1
  4590 22AA 10 01			spl
  4591 22AC 88				dey
  4592 22AD 85 AE			sta :STACKORIGIN+STACKWIDTH+10
  4593 22AF 84 BE			sty :STACKORIGIN+STACKWIDTH*2+10
  4594 22B1 84 CE			sty :STACKORIGIN+STACKWIDTH*3+10
  4595 22B3 AD 22 A7			lda VALUE
  4596 22B6 38 E5 9E			sub :STACKORIGIN+10
  4597 22B9 8D 22 A7			sta VALUE
  4598 22BC AD 23 A7			lda VALUE+1
  4599 22BF E5 AE			sbc :STACKORIGIN+STACKWIDTH+10
  4600 22C1 8D 23 A7			sta VALUE+1
  4601 22C4 AD 24 A7			lda VALUE+2
  4602 22C7 E5 BE			sbc :STACKORIGIN+STACKWIDTH*2+10
  4603 22C9 8D 24 A7			sta VALUE+2
  4604 22CC AD 25 A7			lda VALUE+3
  4605 22CF E5 CE			sbc :STACKORIGIN+STACKWIDTH*3+10
  4606 22D1 8D 25 A7			sta VALUE+3
  4607
  4608 				; optimize OK (helpers.pas), line = 223
  4609
  4610 22D4 AD 1C A7			lda MINVALUE
  4611 22D7 85 9E			sta :STACKORIGIN+10
  4612 22D9 A0 00			ldy #$00
  4613 22DB AD 1D A7			lda MINVALUE+1
  4614 22DE 10 01			spl
  4615 22E0 88				dey
  4616 22E1 85 AE			sta :STACKORIGIN+STACKWIDTH+10
  4617 22E3 84 BE			sty :STACKORIGIN+STACKWIDTH*2+10
  4618 22E5 84 CE			sty :STACKORIGIN+STACKWIDTH*3+10
  4619 22E7				.LOCAL
  4620 22E7 AD 25 A7			lda VALUE+3
  4621 22EA 38 E5 CE			sub :STACKORIGIN+STACKWIDTH*3+10
  4622 22ED D0 1F			bne L4
  4623 22EF AD 24 A7			lda VALUE+2
  4624 22F2 C5 BE			cmp :STACKORIGIN+STACKWIDTH*2+10
  4625 22F4 D0 0C			bne L1
  4626 22F6 AD 23 A7			lda VALUE+1
  4627 22F9 C5 AE			cmp :STACKORIGIN+STACKWIDTH+10
  4628 22FB D0 05			bne L1
  4629 22FD AD 22 A7			lda VALUE
  4630 2300 C5 9E			cmp :STACKORIGIN+10
  4631 2302 F0 10		L1	beq L5
  4632 2304 B0 04			bcs L3
  4633 2306 A9 FF			lda #$FF
  4634 2308 D0 0A			bne L5
  4635 230A A9 01		L3	lda #$01
  4636 230C D0 06			bne L5
  4637 230E 50 04		L4	bvc L5
  4638 2310 49 FF			eor #$FF
  4639 2312 09 01			ora #$01
  4640 2314			L5
  4641 					.ENDL
  4642 2314 10 17			jpl l_0A12
  4643
  4644 				; optimize OK (helpers.pas), line = 224
  4645
  4646 2316 AD 1C A7			lda MINVALUE
  4647 2319 8D 22 A7			sta VALUE
  4648 231C A0 00			ldy #$00
  4649 231E AD 1D A7			lda MINVALUE+1
  4650 2321 10 01			spl
  4651 2323 88				dey
  4652 2324 8D 23 A7			sta VALUE+1
  4653 2327 8C 24 A7			sty VALUE+2
  4654 232A 8C 25 A7			sty VALUE+3
  4655 232D			l_0A12
  4656
  4657 				; optimize OK (helpers.pas), line = 225
  4658
  4659 232D AD 2C A7			lda CURDELAY
  4660 2330 C9 03			cmp #$03
  4661 2332 90 06			jcc l_0A2C
  4662
  4663 				; optimize OK (helpers.pas), line = 226
  4664
  4665 2334 CE 2C A7			dec CURDELAY
  4666 2337 4C 44 23			jmp l_0A40
  4667 233A			l_0A2C
  4668
  4669 				; optimize OK (helpers.pas), line = 228
  4670
  4671 233A A9 02			lda #$02
  4672 233C 8D 26 A7			sta STEP
  4673 233F A9 00			lda #$00
  4674 2341 8D 27 A7			sta STEP+1
  4675 2344			l_0A40
  4676
  4677 				; optimize OK (helpers.pas), line = 229
  4678
  4679 2344 AD 2C A7			lda CURDELAY
  4680 2347 8D 2D A7			sta FASTADJUSTCOUNTER
  4681 234A			l_09F7
  4682 234A 4C 61 23			jmp l_0A55
  4683 234D			l_09E4
  4684
  4685 				; optimize OK (helpers.pas), line = 234
  4686
  4687 234D A9 00			lda #$00
  4688 234F 8D 2D A7			sta FASTADJUSTCOUNTER
  4689
  4690 				; optimize OK (helpers.pas), line = 235
  4691
  4692 2352 A9 10			lda #$10
  4693 2354 8D 2C A7			sta CURDELAY
  4694
  4695 				; optimize OK (helpers.pas), line = 236
  4696
  4697 2357 A9 01			lda #$01
  4698 2359 8D 26 A7			sta STEP
  4699 235C A9 00			lda #$00
  4700 235E 8D 27 A7			sta STEP+1
  4701 2361			l_0A55
  4702 2361			l_09D2
  4703 2361			l_0981
  4704 2361			l_0930
  4705
  4706 				; optimize OK (helpers.pas), line = 239
  4707
  4708 2361 AD 2D A7			lda FASTADJUSTCOUNTER
  4709 2364 F0 03			jeq l_0A73
  4710
  4711 				; optimize OK (helpers.pas), line = 240
  4712
  4713 2366 CE 2D A7			dec FASTADJUSTCOUNTER
  4714 2369			l_0A73
  4715
  4716 				; optimize OK (helpers.pas), line = 242
  4717
  4718 2369 AD 28 A7			lda X
  4719 236C 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
  4720 236F AD 29 A7			lda Y
  4721 2372 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
  4722 2375 20 AC 17			jsr B_CRT.CRT_GOTOXY
  4723
  4724 				; optimize OK (helpers.pas), line = 243
  4725
  4726 2378 AD 22 A7			lda VALUE
  4727 237B 8D 92 A1			sta B_CRT.CRT_WRITE.@010185000.NUM
  4728 237E AD 23 A7			lda VALUE+1
  4729 2381 8D 93 A1			sta B_CRT.CRT_WRITE.@010185000.NUM+1
  4730 2384 AD 24 A7			lda VALUE+2
  4731 2387 8D 94 A1			sta B_CRT.CRT_WRITE.@010185000.NUM+2
  4732 238A AD 25 A7			lda VALUE+3
  4733 238D 8D 95 A1			sta B_CRT.CRT_WRITE.@010185000.NUM+3
  4734 2390 20 CA 18			jsr B_CRT.CRT_WRITE.@010185000
  4735
  4736 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', helpers.pas), line = 244
  4737
  4738 2393 E8				inx
  4739 2394 A9 6E 95 94			mva #$6E :STACKORIGIN,x
  4740 2398 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
  4741 239C 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
  4742
  4743 				; optimize FAIL ('B_SYSTEM.WAITFRAME', helpers.pas), line = 245
  4744
  4745 239F 20 BF 16			jsr B_SYSTEM.WAITFRAME
  4746
  4747 				; optimize OK (helpers.pas), line = 246
  4748
  4749 23A2 4C 91 20			jmp l_0894
  4750 23A5			b_0894
  4751
  4752 				; optimize OK (helpers.pas), line = 248
  4753
  4754 23A5 AD 22 A7			lda VALUE
  4755 23A8 8D 20 A7			sta RESULT
  4756 23AB AD 23 A7			lda VALUE+1
  4757 23AE 8D 21 A7			sta RESULT+1
  4758 23B1			@exit
  4759
  4760 				; ------------------------------------------------------------
  4761
  4762 = A71C			MINVALUE	= DATAORIGIN+$0AC6
  4763 = A71E			MAXVALUE	= DATAORIGIN+$0AC8
  4764 = A720			RESULT	= DATAORIGIN+$0ACA
  4765 = A722			VALUE	= DATAORIGIN+$0ACC
  4766 = A726			STEP	= DATAORIGIN+$0AD0
  4767 = A728			X	= DATAORIGIN+$0AD2
  4768 = A729			Y	= DATAORIGIN+$0AD3
  4769 = A72A			TMPCH	= DATAORIGIN+$0AD4
  4770 = A72B			CH	= DATAORIGIN+$0AD5
  4771 = A72C			CURDELAY	= DATAORIGIN+$0AD6
  4772 = A72D			FASTADJUSTCOUNTER	= DATAORIGIN+$0AD7
  4773
  4774 = A71C			@VarData	= MINVALUE
  4775 = 0010			@VarDataSize	= 16
  4776
  4777 23B1 60				rts						; ret
  4778 				.endl
  4779
  4780 23B2			.local	LOADGANGSTER					; PROCEDURE
  4781 23B2 8D 2E A7			sta G
  4782
  4783 				; optimize OK (helpers.pas), line = 259
  4784
  4785 23B5 AD 9B 9B			lda GANGSTERFILENAME
  4786 23B8 8D 88 9D			sta XBIOS.XBIOSOPENFILE.FILENAME
  4787 23BB AD 9C 9B			lda GANGSTERFILENAME+1
  4788 23BE 8D 89 9D			sta XBIOS.XBIOSOPENFILE.FILENAME+1
  4789 23C1 20 78 14			jsr XBIOS.XBIOSOPENFILE
  4790
  4791 				; optimize OK (helpers.pas), line = 265
  4792
  4793 23C4 A9 00			lda #$00
  4794 23C6 8D 2F A7			sta B
  4795 23C9 AC 2E A7			ldy G
  4796 23CC 88				dey
  4797 23CD 8C D1 23			sty @FORTMP_0AA8_0
  4798
  4799 23D0			l_0AAB
  4800 				; --- ForToDoCondition
  4801 23D0 A9 00			lda @FORTMP_0AA8_0::#$00
  4802 23D2 CD 2F A7			cmp B
  4803 23D5 90 4D			jcc l_0AB9
  4804
  4805 				; optimize OK (helpers.pas), line = 267
  4806
  4807 23D7 A9 00			lda #$00
  4808 23D9 8D 30 A7			sta K
  4809
  4810 23DC			l_0AC2
  4811 				; --- ForToDoCondition
  4812 23DC AD 30 A7			lda K
  4813 23DF C9 EF			cmp #$EF
  4814 23E1 B0 28			jcs l_0AD0
  4815
  4816 				; optimize FAIL ('XBIOS.XBIOSGETBYTE', helpers.pas), line = 268
  4817
  4818 23E3 20 BC 14			jsr XBIOS.XBIOSGETBYTE
  4819 23E6 E8				inx
  4820 23E7 AD 8C 9D 95 94		mva XBIOS.XBIOSGETBYTE.RESULT :STACKORIGIN,x
  4821 23EC E8				inx
  4822 23ED A9 70 95 94			mva #$70 :STACKORIGIN,x
  4823 23F1 A9 CE 95 A4			mva #$CE :STACKORIGIN+STACKWIDTH,x
  4824 23F5 E8				inx
  4825 23F6 AD 30 A7 95 94		mva K :STACKORIGIN,x
  4826 23FB A9 00 95 A4			mva #$00 :STACKORIGIN+STACKWIDTH,x
  4827 23FF 20 F9 0D			jsr addAX_CX
  4828 2402 CA				dex
  4829 2403 20 6A 13			jsr SYSTEM.POKE
  4830 2406 EE 30 A7			inc K
  4831 2409 D0 D1			jne l_0AC2
  4832 240B			l_0AD0
  4833
  4834 				; optimize OK (helpers.pas), line = 269
  4835
  4836 240B A9 00			lda #$00
  4837 240D 8D 30 A7			sta K
  4838
  4839 2410			l_0AEB
  4840 				; --- ForToDoCondition
  4841 2410 AD 30 A7			lda K
  4842 2413 C9 11			cmp #$11
  4843 2415 B0 08			jcs l_0AF9
  4844
  4845 				; optimize FAIL ('XBIOS.XBIOSGETBYTE', helpers.pas), line = 270
  4846
  4847 2417 20 BC 14			jsr XBIOS.XBIOSGETBYTE
  4848 241A EE 30 A7			inc K
  4849 241D D0 F1			jne l_0AEB
  4850 241F			l_0AF9
  4851
  4852 				; --- ForToDoEpilog
  4853 241F EE 2F A7			inc B
  4854 2422 D0 AC			jne l_0AAB
  4855 2424			l_0AB9
  4856
  4857 				; optimize FAIL ('CRT_WRITELN', helpers.pas), line = 283
  4858
  4859 2424 E8				inx
  4860 2425 AD 7F 9B 95 94		mva BUF_GANGSTERNAME :STACKORIGIN,x
  4861 242A AD 80 9B 95 A4		mva BUF_GANGSTERNAME+1 :STACKORIGIN+STACKWIDTH,x
  4862 242F 20 A9 1E			jsr CRT_WRITELN
  4863
  4864 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', helpers.pas), line = 284
  4865
  4866 2432 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
  4867
  4868 				; optimize FAIL ('CRT_WRITELN', helpers.pas), line = 285
  4869
  4870 2435 E8				inx
  4871 2436 AD 73 9B 95 94		mva BUF_GANGSTERTEXT1 :STACKORIGIN,x
  4872 243B AD 74 9B 95 A4		mva BUF_GANGSTERTEXT1+1 :STACKORIGIN+STACKWIDTH,x
  4873 2440 20 A9 1E			jsr CRT_WRITELN
  4874
  4875 				; optimize FAIL ('CRT_WRITELN', helpers.pas), line = 286
  4876
  4877 2443 E8				inx
  4878 2444 AD 75 9B 95 94		mva BUF_GANGSTERTEXT2 :STACKORIGIN,x
  4879 2449 AD 76 9B 95 A4		mva BUF_GANGSTERTEXT2+1 :STACKORIGIN+STACKWIDTH,x
  4880 244E 20 A9 1E			jsr CRT_WRITELN
  4881
  4882 				; optimize FAIL ('CRT_WRITELN', helpers.pas), line = 287
  4883
  4884 2451 E8				inx
  4885 2452 AD 77 9B 95 94		mva BUF_GANGSTERTEXT3 :STACKORIGIN,x
  4886 2457 AD 78 9B 95 A4		mva BUF_GANGSTERTEXT3+1 :STACKORIGIN+STACKWIDTH,x
  4887 245C 20 A9 1E			jsr CRT_WRITELN
  4888
  4889 				; optimize FAIL ('CRT_WRITELN', helpers.pas), line = 288
  4890
  4891 245F E8				inx
  4892 2460 AD 79 9B 95 94		mva BUF_GANGSTERTEXT4 :STACKORIGIN,x
  4893 2465 AD 7A 9B 95 A4		mva BUF_GANGSTERTEXT4+1 :STACKORIGIN+STACKWIDTH,x
  4894 246A 20 A9 1E			jsr CRT_WRITELN
  4895
  4896 				; optimize FAIL ('CRT_WRITELN', helpers.pas), line = 289
  4897
  4898 246D E8				inx
  4899 246E AD 7B 9B 95 94		mva BUF_GANGSTERTEXT5 :STACKORIGIN,x
  4900 2473 AD 7C 9B 95 A4		mva BUF_GANGSTERTEXT5+1 :STACKORIGIN+STACKWIDTH,x
  4901 2478 20 A9 1E			jsr CRT_WRITELN
  4902
  4903 				; ------------------------------------------------------------
  4904
  4905 = A72E			G	= DATAORIGIN+$0AD8
  4906 = A72F			B	= DATAORIGIN+$0AD9
  4907 = A730			K	= DATAORIGIN+$0ADA
  4908
  4909 = A72E			@VarData	= G
  4910 = 0003			@VarDataSize	= 3
  4911
  4912 247B			@exit
  4913 					.ifdef @new
  4914 					lda <@VarData
  4915 					sta :ztmp
  4916 					lda >@VarData
  4917 					ldy #@VarDataSize-1
  4918 					jmp @FreeMem
  4919 					els
  4920 247B 60				rts						; ret
  4921 					eif
  4922 				.endl
  4923
  4924 247C			.local	RESOLVESAVEADDRESS				; PROCEDURE
  4925
  4926 				; optimize OK (helpers.pas), line = 318
  4927
  4928 247C AD 04 C2			lda SAVE_SLOT
  4929 247F 4A				lsr @
  4930 2480 4A				lsr @
  4931 2481 18 69 38			add #$38
  4932 2484 8D 01 C2			sta SAVEBANK
  4933
  4934 				; optimize OK (helpers.pas), line = 319
  4935
  4936 2487 AD 04 C2			lda SAVE_SLOT
  4937 248A 29 03			and #$03
  4938 248C 0A				asl @
  4939 248D 0A				asl @
  4940 248E 0A				asl @
  4941 248F 18 69 A0			add #$A0
  4942 2492 8D 03 C2			sta SAVEADDRESS+1
  4943 2495 A9 00			lda #$00
  4944 2497 8D 02 C2			sta SAVEADDRESS
  4945
  4946 249A			@exit
  4947 					.ifdef @new
  4948 					lda <@VarData
  4949 					sta :ztmp
  4950 					lda >@VarData
  4951 					ldy #@VarDataSize-1
  4952 					jmp @FreeMem
  4953 					els
  4954 249A 60				rts						; ret
  4955 					eif
  4956 				.endl
  4957
  4958 249B			.local	CHECKFORSAVEDGAME				; PROCEDURE
  4959
  4960 				; optimize OK (helpers.pas), line = 327
  4961
  4962 249B A9 00			lda #$00
  4963 249D 8D 05 C2			sta SAVE_GAMEFOUND
  4964
  4965 				; optimize OK (helpers.pas), line = 328
  4966
  4967 24A0 8D 00 C2			sta SAVE_LASTSAVE
  4968
  4969 				; optimize FAIL ('CMDINIT', helpers.pas), line = 329
  4970
  4971 24A3 20 13 1B			jsr CMDINIT
  4972
  4973 				; optimize OK (helpers.pas), line = 330
  4974
  4975 24A6 A9 00			lda #$00
  4976 24A8 8D 04 C2			sta SAVE_SLOT
  4977
  4978 24AB			l_0B55
  4979 				; --- ForToDoCondition
  4980 24AB AD 04 C2			lda SAVE_SLOT
  4981 24AE C9 20			cmp #$20
  4982 24B0 B0 43			jcs l_0B63
  4983
  4984 				; optimize FAIL ('RESOLVESAVEADDRESS', helpers.pas), line = 332
  4985
  4986 24B2 20 7C 24			jsr RESOLVESAVEADDRESS
  4987
  4988 				; optimize OK (helpers.pas), line = 333
  4989
  4990 24B5 AD 01 C2			lda SAVEBANK
  4991 24B8 8D 09 C2			sta BANK_BANK
  4992
  4993 				; optimize FAIL ('SETBANK', helpers.pas), line = 334
  4994
  4995 24BB 20 BD 1A			jsr SETBANK
  4996
  4997 				; optimize OK (helpers.pas), line = 335
  4998
  4999 24BE AD 02 C2			lda SAVEADDRESS
  5000 24C1 18 69 A0			add #$A0
  5001 24C4 85 82			sta :bp2
  5002 24C6 AD 03 C2			lda SAVEADDRESS+1
  5003 24C9 69 04			adc #$04
  5004 24CB 85 83			sta :bp2+1
  5005 24CD A0 00			ldy #$00
  5006 24CF B1 82			lda (:bp2),y
  5007 24D1 8D 0A C2			sta BANK_SRC
  5008 24D4 C8				iny
  5009 24D5 B1 82			lda (:bp2),y
  5010 24D7 8D 0B C2			sta BANK_SRC+1
  5011
  5012 				; optimize OK (helpers.pas), line = 336
  5013
  5014 24DA C9 AB			cmp #$AB
  5015 24DC D0 05			bne @+
  5016 24DE AD 0A C2			lda BANK_SRC
  5017 24E1 C9 CD			cmp #$CD
  5018 				@
  5019 24E3 D0 0B			jne l_0B86
  5020
  5021 				; optimize OK (helpers.pas), line = 338
  5022
  5023 24E5 A9 01			lda #$01
  5024 24E7 8D 05 C2			sta SAVE_GAMEFOUND
  5025
  5026 				; optimize OK (helpers.pas), line = 339
  5027
  5028 24EA AD 04 C2			lda SAVE_SLOT
  5029 24ED 8D 00 C2			sta SAVE_LASTSAVE
  5030 24F0			l_0B86
  5031
  5032 				; --- ForToDoEpilog
  5033 24F0 EE 04 C2			inc SAVE_SLOT
  5034 24F3 D0 B6			jne l_0B55
  5035 24F5			l_0B63
  5036
  5037 				; optimize FAIL ('CMDCLEANUP', helpers.pas), line = 342
  5038
  5039 24F5 20 1C 1B			jsr CMDCLEANUP
  5040
  5041 				; ------------------------------------------------------------
  5042
  5043 24F8			@exit
  5044 					.ifdef @new
  5045 					lda <@VarData
  5046 					sta :ztmp
  5047 					lda >@VarData
  5048 					ldy #@VarDataSize-1
  5049 					jmp @FreeMem
  5050 					els
  5051 24F8 60				rts						; ret
  5052 					eif
  5053 				.endl
  5054
  5055 24F9			.local	SAVEGAME					; PROCEDURE
  5056
  5057 				; optimize FAIL ('B_SYSTEM.WAITFRAME', helpers.pas), line = 348
  5058
  5059 24F9 20 BF 16			jsr B_SYSTEM.WAITFRAME
  5060
  5061 				; optimize FAIL ('CHECKFORSAVEDGAME', helpers.pas), line = 351
  5062
  5063 24FC 20 9B 24			jsr CHECKFORSAVEDGAME
  5064
  5065 				; optimize OK (helpers.pas), line = 352
  5066
  5067 24FF AD 05 C2			lda SAVE_GAMEFOUND
  5068 2502 C9 01			cmp #$01
  5069 2504 D0 17			jne l_0BB1
  5070
  5071 				; optimize OK (helpers.pas), line = 354
  5072
  5073 2506 EE 00 C2			inc SAVE_LASTSAVE
  5074
  5075 				; optimize OK (helpers.pas), line = 355
  5076
  5077 2509 AD 00 C2			lda SAVE_LASTSAVE
  5078 250C C9 20			cmp #$20
  5079 250E D0 0D			jne l_0BCE
  5080
  5081 				; optimize OK (helpers.pas), line = 357
  5082
  5083 2510 A9 00			lda #$00
  5084 2512 8D 00 C2			sta SAVE_LASTSAVE
  5085
  5086 				; optimize OK (helpers.pas), line = 358
  5087
  5088 2515 A9 07			lda #$07
  5089 2517 8D 11 C2			sta BANK_SECTOR
  5090
  5091 				; optimize FAIL ('ERASESECTOR', helpers.pas), line = 359
  5092
  5093 251A 20 44 1B			jsr ERASESECTOR
  5094 251D			l_0BCE
  5095 251D			l_0BB1
  5096
  5097 				; optimize OK (helpers.pas), line = 363
  5098
  5099 251D AD 00 C2			lda SAVE_LASTSAVE
  5100 2520 8D 04 C2			sta SAVE_SLOT
  5101
  5102 				; optimize FAIL ('RESOLVESAVEADDRESS', helpers.pas), line = 364
  5103
  5104 2523 20 7C 24			jsr RESOLVESAVEADDRESS
  5105
  5106 				; optimize OK (helpers.pas), line = 367
  5107
  5108 2526 AD 55 B5			lda $B555
  5109 2529 8D 08 C2			sta TMP_55
  5110
  5111 				; optimize OK (helpers.pas), line = 368
  5112
  5113 252C AD AA AA			lda $AAAA
  5114 252F 8D 07 C2			sta TMP_AA
  5115
  5116 				; optimize OK (helpers.pas), line = 373
  5117
  5118 2532 AD 01 C2			lda SAVEBANK
  5119 2535 8D 09 C2			sta BANK_BANK
  5120
  5121 				; optimize FAIL ('SETBANK', helpers.pas), line = 374
  5122
  5123 2538 20 BD 1A			jsr SETBANK
  5124
  5125 				; optimize OK (helpers.pas), line = 376
  5126
  5127 253B A9 CD			lda #$CD
  5128 253D 8D C0 CD			sta SAVEGAMEMAGIC
  5129 2540 A9 AB			lda #$AB
  5130 2542 8D C1 CD			sta SAVEGAMEMAGIC+1
  5131
  5132 				; -------------------  ASM Block 00000152  -------------------
  5133
  5134 2545			sei 
  5135 				; optimize OK (helpers.pas), line = 378
  5136
  5137 2545 AD 01 C2			lda SAVEBANK
  5138 2548 8D 09 C2			sta BANK_BANK
  5139
  5140 				; optimize OK (helpers.pas), line = 379
  5141
  5142 254B A9 20			lda #$20
  5143 254D 8D 0A C2			sta BANK_SRC
  5144 2550 A9 C9			lda #$C9
  5145 2552 8D 0B C2			sta BANK_SRC+1
  5146
  5147 				; optimize OK (helpers.pas), line = 380
  5148
  5149 2555 AD 02 C2			lda SAVEADDRESS
  5150 2558 8D 0C C2			sta BANK_DEST
  5151 255B AD 03 C2			lda SAVEADDRESS+1
  5152 255E 8D 0D C2			sta BANK_DEST+1
  5153
  5154 				; optimize OK (helpers.pas), line = 381
  5155
  5156 2561 A9 DF			lda #$DF
  5157 2563 8D 0E C2			sta BANK_SIZE
  5158 2566 A9 06			lda #$06
  5159 2568 8D 0F C2			sta BANK_SIZE+1
  5160
  5161 				; optimize FAIL ('BURNBLOCK', helpers.pas), line = 382
  5162
  5163 256B 20 67 1B			jsr BURNBLOCK
  5164
  5165 				; -------------------  ASM Block 00000153  -------------------
  5166
  5167 256E			cli 
  5168 				; optimize FAIL ('CMDCLEANUP', helpers.pas), line = 385
  5169
  5170 256E 20 1C 1B			jsr CMDCLEANUP
  5171
  5172 				; optimize OK (helpers.pas), line = 386
  5173
  5174 2571 AD 08 C2			lda TMP_55
  5175 2574 8D 55 B5			sta $B555
  5176
  5177 				; optimize OK (helpers.pas), line = 387
  5178
  5179 2577 AD 07 C2			lda TMP_AA
  5180 257A 8D AA AA			sta $AAAA
  5181
  5182 257D			@exit
  5183 					.ifdef @new
  5184 					lda <@VarData
  5185 					sta :ztmp
  5186 					lda >@VarData
  5187 					ldy #@VarDataSize-1
  5188 					jmp @FreeMem
  5189 					els
  5190 257D 60				rts						; ret
  5191 					eif
  5192 				.endl
  5193
  5194 257E			.local	LOADGAME					; PROCEDURE
  5195
  5196 				; optimize FAIL ('B_CRT.CRT_CLEAR.@00', helpers.pas), line = 394
  5197
  5198 257E 20 84 17			jsr B_CRT.CRT_CLEAR.@00
  5199
  5200 				; optimize OK (helpers.pas), line = 395
  5201
  5202 2581 A9 01			lda #$01
  5203 2583 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
  5204 2586 A9 11			lda #$11
  5205 2588 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
  5206 258B 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
  5207
  5208 				; optimize FAIL ('CHECKFORSAVEDGAME', helpers.pas), line = 397
  5209
  5210 258E 20 9B 24			jsr CHECKFORSAVEDGAME
  5211
  5212 				; optimize OK (helpers.pas), line = 398
  5213
  5214 2591 AD 05 C2			lda SAVE_GAMEFOUND
  5215 2594 D0 13			jne l_0C32
  5216
  5217 				; optimize OK (helpers.pas), line = 399
  5218
  5219 2596 A9 03			lda #$03
  5220 2598 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
  5221 259B A9 12			lda #$12
  5222 259D 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
  5223 25A0 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
  5224
  5225 				; optimize FAIL ('WAITFORKEY', helpers.pas), line = 400
  5226
  5227 25A3 20 4A 1E			jsr WAITFORKEY
  5228 25A6 4C DE 25			jmp @exit
  5229 25A9			l_0C32
  5230
  5231 				; optimize OK (helpers.pas), line = 404
  5232
  5233 25A9 AD 00 C2			lda SAVE_LASTSAVE
  5234 25AC 8D 04 C2			sta SAVE_SLOT
  5235
  5236 				; optimize FAIL ('RESOLVESAVEADDRESS', helpers.pas), line = 405
  5237
  5238 25AF 20 7C 24			jsr RESOLVESAVEADDRESS
  5239
  5240 				; optimize FAIL ('CMDINIT', helpers.pas), line = 406
  5241
  5242 25B2 20 13 1B			jsr CMDINIT
  5243
  5244 				; optimize OK (helpers.pas), line = 407
  5245
  5246 25B5 AD 01 C2			lda SAVEBANK
  5247 25B8 8D 09 C2			sta BANK_BANK
  5248
  5249 				; optimize FAIL ('SETBANK', helpers.pas), line = 408
  5250
  5251 25BB 20 BD 1A			jsr SETBANK
  5252
  5253 				; optimize OK (helpers.pas), line = 409
  5254
  5255 25BE AD 02 C2			lda SAVEADDRESS
  5256 25C1 85 88			sta SYSTEM.MOVE.@03018100001880000188000.SOURCE
  5257 25C3 AD 03 C2			lda SAVEADDRESS+1
  5258 25C6 85 89			sta SYSTEM.MOVE.@03018100001880000188000.SOURCE+1
  5259 25C8 A9 20			lda #$20
  5260 25CA 85 8C			sta SYSTEM.MOVE.@03018100001880000188000.DEST
  5261 25CC A9 C9			lda #$C9
  5262 25CE 85 8D			sta SYSTEM.MOVE.@03018100001880000188000.DEST+1
  5263 25D0 A9 DF			lda #$DF
  5264 25D2 85 84			sta SYSTEM.MOVE.@03018100001880000188000.COUNT
  5265 25D4 A9 06			lda #$06
  5266 25D6 85 85			sta SYSTEM.MOVE.@03018100001880000188000.COUNT+1
  5267 25D8				.LOCAL +MAIN.SYSTEM.MOVE.@03018100001880000188000
  5268 25D8				m@INLINE
Macro: MAIN.SYSTEM.MOVE.@03018100001880000188000.M@INLINE [Source: main_PL.a65]
     4 25D8 20 D7 0E			jsr @move
Source: main_PL.a65
  5269 					.ENDL
  5270
  5271 				; optimize FAIL ('CMDCLEANUP', helpers.pas), line = 410
  5272
  5273 25DB 20 1C 1B			jsr CMDCLEANUP
  5274
  5275 25DE			@exit
  5276 					.ifdef @new
  5277 					lda <@VarData
  5278 					sta :ztmp
  5279 					lda >@VarData
  5280 					ldy #@VarDataSize-1
  5281 					jmp @FreeMem
  5282 					els
  5283 25DE 60				rts						; ret
  5284 					eif
  5285 				.endl
  5286
  5287 25DF			.local	DLI_MAP						; PROCEDURE | ASSEMBLER | INTERRUPT
  5288
  5289 				; -------------------  ASM Block 00000154  -------------------
  5290
  5291
  5292 25DF			dli:
  5293 25DF 48 8A 48 98 48	    phr ; store registers
  5294
  5295 25E4			dlijmp:
  5296 25E4 4C E7 25		    jmp dli1
  5297
  5298 25E7			dli1:
  5299 25E7 A9 D8		    lda #>MAP_FNT_ADDRESS
  5300 25E9 8D 09 D4		    sta $D409 ; CHBAS_real
  5301 25EC 8D 0A D4		    sta WSYNC
  5302
  5303 25EF A9 0E 8D 16 D0	    mva #$0e atari.colpf0 ; white 
  5304
  5305 25F4 AD F7 EA 8D 17 D0	    mva mapColorB atari.colpf1 ; $06 for map
  5306 25FA AD F6 EA 8D 18 D0	    mva mapColorA atari.colpf2 ; $88 for map 
  5307 2600 A9 2A 8D 19 D0	    mva #$2a atari.colpf3 ; orangish
  5308 2605 A9 00 8D 1A D0	    mva #$00 atari.colbk  ; black
  5309
  5310 				    ; move PMG to current position
  5311 260A AD F8 EA		    lda spriteMoveDir
  5312 260D C9 01		    cmp #$01
  5313 260F F0 09		    beq dli1_X
  5314 2611 AD AE EA		    lda PLAYERPOS_X
  5315 2614 38			    sec 
  5316 2615 E9 01		    sbc #$01
  5317 2617 4C 1D 26		    jmp dli1_X2
  5318 261A			dli1_X:
  5319 261A AD AE EA		    lda PLAYERPOS_X
  5320 				    ; clc
  5321 				    ; adc #$01
  5322 261D			dli1_X2:
  5323 261D 8D 00 D0		    sta HPOSP0
  5324 2620 8D 01 D0		    sta HPOSP1
  5325 2623 8D 02 D0		    sta HPOSP2
  5326 2626 8D 03 D0		    sta HPOSP3
  5327
  5328 2629 A9 39		    lda #<dli2
  5329 262B 8D E5 25		    sta dlijmp+1
  5330 262E A9 26		    lda #>dli2
  5331 2630 8D E6 25		    sta dlijmp+2
  5332
  5333 2633 68 A8 68 AA 68	    plr
  5334 2638 40			    rti
  5335
  5336 2639			dli2:
  5337 2639 EA			    nop
  5338 263A EA			    nop
  5339 263B EA			    nop
  5340 263C EA			    nop
  5341 263D A9 00 8D 18 D0	    mva #$00 atari.colpf2 ; hue
  5342 2642 A9 FF 8D 17 D0	    mva #$ff atari.colpf1 ; lum
  5343
  5344 2647 A9 B4		    lda #>MAINFONT_ADR
  5345 2649 8D 09 D4		    sta $D409 ; CHBAS_real
  5346
  5347 				    ; deactivate PMG by moving it out of screen
  5348 264C A9 00		    lda #$0
  5349 264E 8D 00 D0		    sta HPOSP0
  5350 2651 8D 01 D0		    sta HPOSP1
  5351 2654 8D 02 D0		    sta HPOSP2
  5352 2657 8D 03 D0		    sta HPOSP3
  5353 265A 8D 0A D4		    sta WSYNC
  5354
  5355 				    ; next
  5356 265D A9 6D		    lda #<dli3
  5357 265F 8D E5 25		    sta dlijmp+1
  5358 2662 A9 26		    lda #>dli3
  5359 2664 8D E6 25		    sta dlijmp+2
  5360
  5361 2667 68 A8 68 AA 68	    plr
  5362 266C 40			    rti
  5363
  5364 266D			dli3:
  5365 266D 8D 0A D4		    sta WSYNC
  5366 2670 A9 FF 8D 17 D0	    mva #$ff atari.colpf1 ; lum
  5367 2675 A9 00 8D 18 D0	    mva #$00 atari.colpf2 ; hue
  5368
  5369 267A A9 8A		    lda #<dli4
  5370 267C 8D E5 25		    sta dlijmp+1
  5371 267F A9 26		    lda #>dli4
  5372 2681 8D E6 25		    sta dlijmp+2
  5373
  5374 2684 68 A8 68 AA 68	    plr
  5375 2689 40			    rti
  5376
  5377 268A			dli4:
  5378 268A 20 CC 1B		    jsr main.musicproxy
  5379
  5380 268D A9 E7		    lda #<dli1
  5381 268F 8D E5 25		    sta dlijmp+1
  5382 2692 A9 25		    lda #>dli1
  5383 2694 8D E6 25		    sta dlijmp+2
  5384
  5385 2697 68 A8 68 AA 68	    plr
  5386 269C 40			    rti
  5387
  5388
  5389 269D 40				rti						; ret
  5390 				.endl
  5391
  5392 269E			.local	DLI_BITMAP					; PROCEDURE | ASSEMBLER | INTERRUPT
  5393
  5394 				; -------------------  ASM Block 00000155  -------------------
  5395
  5396
  5397 269E			dli:
  5398 269E 48 8A 48 98 48	    phr ; store registers
  5399
  5400 26A3			dlijmp:
  5401 26A3 4C A6 26		    jmp dli1
  5402
  5403 26A6			dli1:
  5404 26A6 A9 D8		    lda #>MAP_FNT_ADDRESS
  5405 26A8 8D 09 D4		    sta $D409 ; CHBAS_real
  5406 26AB 8D 0A D4		    sta WSYNC
  5407
  5408 26AE A9 0E 8D 16 D0	    mva #$0e atari.colpf0 ; white 
  5409 26B3 AD F7 EA 8D 17 D0	    mva mapColorB atari.colpf1 ; $06 for map
  5410 26B9 AD F6 EA 8D 18 D0	    mva mapColorA atari.colpf2 ; $88 for map 
  5411 26BF A9 2A 8D 19 D0	    mva #$2a atari.colpf3 ; orangish
  5412 26C4 A9 00 8D 1A D0	    mva #$00 atari.colbk  ; black
  5413
  5414 26C9 A9 D9		    lda #<dli2
  5415 26CB 8D A4 26		    sta dlijmp+1
  5416 26CE A9 26		    lda #>dli2
  5417 26D0 8D A5 26		    sta dlijmp+2
  5418
  5419 26D3 68 A8 68 AA 68	    plr
  5420 26D8 40			    rti
  5421
  5422 26D9			dli2:
  5423 26D9 EA			    nop
  5424 26DA EA			    nop
  5425 26DB EA			    nop
  5426 26DC EA			    nop
  5427
  5428 26DD A9 E0		    lda #>LOC_MAP_ADR
  5429 26DF 8D 09 D4		    sta $D409 ; CHBAS_real
  5430 26E2 8D 0A D4		    sta WSYNC
  5431
  5432 26E5 20 CC 1B		    jsr main.musicproxy
  5433
  5434 26E8 A9 A6		    lda #<dli1
  5435 26EA 8D A4 26		    sta dlijmp+1
  5436 26ED A9 26		    lda #>dli1
  5437 26EF 8D A5 26		    sta dlijmp+2
  5438
  5439 26F2 68 A8 68 AA 68	    plr
  5440 26F7 40			    rti
  5441
  5442
  5443 26F8 40				rti						; ret
  5444 				.endl
  5445
  5446 26F9			.local	DLI_BLACK_CONSOLE				; PROCEDURE | ASSEMBLER | INTERRUPT
  5447
  5448 				; -------------------  ASM Block 00000156  -------------------
  5449
  5450
  5451 26F9 48 8A 48 98 48	    phr 
  5452 26FE A9 00 8D 16 D0	    mva #$0 atari.colpf0 
  5453 2703 A9 00 8D 17 D0	    mva #$0 atari.colpf1 
  5454 2708 A9 00 8D 18 D0	    mva #$0 atari.colpf2 
  5455 270D A9 00 8D 1A D0	    mva #$0 atari.colbk 
  5456 2712 20 CC 1B		    jsr main.musicproxy
  5457 2715 68 A8 68 AA 68	    plr  
  5458
  5459 271A 40				rti						; ret
  5460 				.endl
  5461
  5462 271B			.local	DLI_CONSOLE					; PROCEDURE | ASSEMBLER | INTERRUPT
  5463
  5464 				; -------------------  ASM Block 00000157  -------------------
  5465
  5466
  5467 271B 48 8A 48 98 48	    phr  
  5468 2720 AD 18 C9 8D 1A D0	    mva loccolbk atari.colbk
  5469 2726 AD 19 C9 8D 16 D0	    mva loccolpf0 atari.colpf0 
  5470 272C AD 1A C9 8D 17 D0	    mva loccolpf1 atari.colpf1 
  5471 2732 AD 1B C9 8D 18 D0	    mva loccolpf2 atari.colpf2  
  5472
  5473 2738 20 CC 1B		    jsr main.musicproxy
  5474
  5475 273B 68 A8 68 AA 68	    plr 
  5476
  5477 2740 40				rti						; ret
  5478 				.endl
  5479
  5480 2741			.local	XBUNAPL						; PROCEDURE
  5481
  5482 				; optimize OK (xbaplib.pas), line = 13
  5483
  5484 2741 AD 32 A7			lda FNAME
  5485 2744 8D 88 9D			sta XBIOS.XBIOSOPENFILE.FILENAME
  5486 2747 AD 33 A7			lda FNAME+1
  5487 274A 8D 89 9D			sta XBIOS.XBIOSOPENFILE.FILENAME+1
  5488 274D 20 78 14			jsr XBIOS.XBIOSOPENFILE
  5489
  5490 				; optimize OK (xbaplib.pas), line = 14
  5491
  5492 2750 AD 34 A7			lda OUTPUTPOINTER
  5493 2753 8D 8A 9D			sta XBIOS.XBIOSLOADDATA.DEST
  5494 2756 AD 35 A7			lda OUTPUTPOINTER+1
  5495 2759 8D 8B 9D			sta XBIOS.XBIOSLOADDATA.DEST+1
  5496 275C 20 9C 14			jsr XBIOS.XBIOSLOADDATA
  5497
  5498 				; ------------------------------------------------------------
  5499
  5500 = A732			FNAME	= DATAORIGIN+$0ADC
  5501 = A734			OUTPUTPOINTER	= DATAORIGIN+$0ADE
  5502
  5503 = A732			@VarData	= FNAME
  5504 = 0004			@VarDataSize	= 4
  5505
  5506 275F			@exit
  5507 					.ifdef @new
  5508 					lda <@VarData
  5509 					sta :ztmp
  5510 					lda >@VarData
  5511 					ldy #@VarDataSize-1
  5512 					jmp @FreeMem
  5513 					els
  5514 275F 60				rts						; ret
  5515 					eif
  5516 				.endl
  5517
  5518 2760			.local	LOADXAPL					; PROCEDURE
  5519
  5520 				; optimize OK (main.pas), line = 76
  5521
  5522 2760 AD 36 A7			lda FNAME
  5523 2763 8D 32 A7			sta XBUNAPL.FNAME
  5524 2766 AD 37 A7			lda FNAME+1
  5525 2769 8D 33 A7			sta XBUNAPL.FNAME+1
  5526 276C AD 38 A7			lda OUTPUTPOINTER
  5527 276F 8D 34 A7			sta XBUNAPL.OUTPUTPOINTER
  5528 2772 AD 39 A7			lda OUTPUTPOINTER+1
  5529 2775 8D 35 A7			sta XBUNAPL.OUTPUTPOINTER+1
  5530 2778 20 41 27			jsr XBUNAPL
  5531
  5532 				; ------------------------------------------------------------
  5533
  5534 = A736			FNAME	= DATAORIGIN+$0AE0
  5535 = A738			OUTPUTPOINTER	= DATAORIGIN+$0AE2
  5536 = A73A			MSXSTATUS	= DATAORIGIN+$0AE4
  5537
  5538 = A736			@VarData	= FNAME
  5539 = 0005			@VarDataSize	= 5
  5540
  5541 277B			@exit
  5542 					.ifdef @new
  5543 					lda <@VarData
  5544 					sta :ztmp
  5545 					lda >@VarData
  5546 					ldy #@VarDataSize-1
  5547 					jmp @FreeMem
  5548 					els
  5549 277B 60				rts						; ret
  5550 					eif
  5551 				.endl
  5552
  5553 277C			.local	WAITFRAMES					; PROCEDURE
  5554 277C 8D 3C A7			sta FRAMES
  5555
  5556 				; --- WhileProlog
  5557 277F 4C 88 27			jmp l_0C6B
  5558 2782			l_0C6C
  5559
  5560 				; optimize FAIL ('B_SYSTEM.WAITFRAME', console.pas), line = 10
  5561
  5562 2782 20 BF 16			jsr B_SYSTEM.WAITFRAME
  5563
  5564 				; optimize FAIL (0, console.pas), line = 11
  5565
  5566 2785 CE 3C A7			dec FRAMES
  5567 2788			l_0C6B
  5568
  5569 				; optimize OK (console.pas), line = 8
  5570
  5571 2788 AD 3C A7			lda FRAMES
  5572 278B D0 F5			jne l_0C6C
  5573
  5574 				; ------------------------------------------------------------
  5575
  5576 = A73C			FRAMES	= DATAORIGIN+$0AE6
  5577
  5578 = A73C			@VarData	= FRAMES
  5579 = 0001			@VarDataSize	= 1
  5580
  5581 278D			@exit
  5582 					.ifdef @new
  5583 					lda <@VarData
  5584 					sta :ztmp
  5585 					lda >@VarData
  5586 					ldy #@VarDataSize-1
  5587 					jmp @FreeMem
  5588 					els
  5589 278D 60				rts						; ret
  5590 					eif
  5591 				.endl
  5592
  5593 278E			.local	BLACKCONSOLE					; PROCEDURE
  5594
  5595 				; optimize OK (console.pas), line = 18
  5596
  5597 278E AD 3B A7			lda CONSOLESTATE
  5598 2791 F0 1C			jeq @exit
  5599 2793			l_0C93
  5600
  5601 				; optimize OK (console.pas), line = 19
  5602
  5603 2793 A9 F9			lda <DLI_BLACK_CONSOLE
  5604 2795 8D 75 9E			sta B_SYSTEM.ENABLEDLI.DLIPTR
  5605 2798 A9 26			lda >DLI_BLACK_CONSOLE
  5606 279A 8D 76 9E			sta B_SYSTEM.ENABLEDLI.DLIPTR+1
  5607 279D 20 90 16			jsr B_SYSTEM.ENABLEDLI
  5608
  5609 				; optimize OK (console.pas), line = 20
  5610
  5611 27A0 A9 B0			lda #$B0
  5612 27A2 8D 02 D4			sta ATARI.DLISTL
  5613 27A5 A9 FF			lda #$FF
  5614 27A7 8D 03 D4			sta ATARI.DLISTL+1
  5615
  5616 				; optimize OK (console.pas), line = 21
  5617
  5618 27AA A9 00			lda #$00
  5619 27AC 8D 3B A7			sta CONSOLESTATE
  5620
  5621 27AF			@exit
  5622 					.ifdef @new
  5623 					lda <@VarData
  5624 					sta :ztmp
  5625 					lda >@VarData
  5626 					ldy #@VarDataSize-1
  5627 					jmp @FreeMem
  5628 					els
  5629 27AF 60				rts						; ret
  5630 					eif
  5631 				.endl
  5632
  5633 27B0			.local	ENABLECONSOLE					; PROCEDURE
  5634
  5635 				; optimize OK (console.pas), line = 27
  5636
  5637 27B0 AD 3B A7			lda CONSOLESTATE
  5638 27B3 C9 01			cmp #$01
  5639 27B5 F0 38			jeq @exit
  5640 27B7			l_0CB5
  5641
  5642 				; optimize OK (console.pas), line = 29
  5643
  5644 27B7 A9 1B			lda <DLI_CONSOLE
  5645 27B9 8D 75 9E			sta B_SYSTEM.ENABLEDLI.DLIPTR
  5646 27BC A9 27			lda >DLI_CONSOLE
  5647 27BE 8D 76 9E			sta B_SYSTEM.ENABLEDLI.DLIPTR+1
  5648 27C1 20 90 16			jsr B_SYSTEM.ENABLEDLI
  5649
  5650 				; optimize OK (console.pas), line = 30
  5651
  5652 27C4 A9 70			lda #$70
  5653 27C6 8D 02 D4			sta ATARI.DLISTL
  5654 27C9 A9 FF			lda #$FF
  5655 27CB 8D 03 D4			sta ATARI.DLISTL+1
  5656
  5657 				; optimize OK (console.pas), line = 31
  5658
  5659 27CE A9 B4			lda #$B4
  5660 27D0 20 D8 16			jsr B_SYSTEM.SETCHARSET
  5661
  5662 				; optimize OK (console.pas), line = 33
  5663
  5664 27D3 A9 00			lda #$00
  5665 27D5 8D 86 A0			sta B_CRT.CRT_INIT.@03018000001800000181000.VRAM_ADDRESS
  5666 27D8 A9 B0			lda #$B0
  5667 27DA 8D 87 A0			sta B_CRT.CRT_INIT.@03018000001800000181000.VRAM_ADDRESS+1
  5668 27DD A9 28			lda #$28
  5669 27DF 8D 88 A0			sta B_CRT.CRT_INIT.@03018000001800000181000.WIDTH
  5670 27E2 A9 19			lda #$19
  5671 27E4 8D 89 A0			sta B_CRT.CRT_INIT.@03018000001800000181000.HEIGHT
  5672 27E7 20 48 17			jsr B_CRT.CRT_INIT.@03018000001800000181000
  5673
  5674 				; optimize OK (console.pas), line = 34
  5675
  5676 27EA A9 01			lda #$01
  5677 27EC 8D 3B A7			sta CONSOLESTATE
  5678
  5679 27EF			@exit
  5680 					.ifdef @new
  5681 					lda <@VarData
  5682 					sta :ztmp
  5683 					lda >@VarData
  5684 					ldy #@VarDataSize-1
  5685 					jmp @FreeMem
  5686 					els
  5687 27EF 60				rts						; ret
  5688 					eif
  5689 				.endl
  5690
  5691 27F0			.local	ENABLEMAPCONSOLE				; PROCEDURE
  5692
  5693 				; optimize OK (console.pas), line = 40
  5694
  5695 27F0 AD 3B A7			lda CONSOLESTATE
  5696 27F3 C9 02			cmp #$02
  5697 27F5 F0 42			jeq @exit
  5698 27F7			l_0CDD
  5699
  5700 				; optimize OK (console.pas), line = 41
  5701
  5702 27F7 A9 88			lda #$88
  5703 27F9 8D F6 EA			sta MAPCOLORA
  5704
  5705 				; optimize OK (console.pas), line = 42
  5706
  5707 27FC A9 06			lda #$06
  5708 27FE 8D F7 EA			sta MAPCOLORB
  5709
  5710 				; optimize OK (console.pas), line = 43
  5711
  5712 2801 A9 DF			lda <DLI_MAP
  5713 2803 8D 75 9E			sta B_SYSTEM.ENABLEDLI.DLIPTR
  5714 2806 A9 25			lda >DLI_MAP
  5715 2808 8D 76 9E			sta B_SYSTEM.ENABLEDLI.DLIPTR+1
  5716 280B 20 90 16			jsr B_SYSTEM.ENABLEDLI
  5717
  5718 				; optimize OK (console.pas), line = 44
  5719
  5720 280E A9 90			lda #$90
  5721 2810 8D 02 D4			sta ATARI.DLISTL
  5722 2813 A9 FF			lda #$FF
  5723 2815 8D 03 D4			sta ATARI.DLISTL+1
  5724
  5725 				; optimize OK (console.pas), line = 45
  5726
  5727 2818 A9 D8			lda #$D8
  5728 281A 20 D8 16			jsr B_SYSTEM.SETCHARSET
  5729
  5730 				; optimize OK (console.pas), line = 46
  5731
  5732 281D A9 00			lda #$00
  5733 281F 8D 86 A0			sta B_CRT.CRT_INIT.@03018000001800000181000.VRAM_ADDRESS
  5734 2822 A9 DC			lda #$DC
  5735 2824 8D 87 A0			sta B_CRT.CRT_INIT.@03018000001800000181000.VRAM_ADDRESS+1
  5736 2827 A9 28			lda #$28
  5737 2829 8D 88 A0			sta B_CRT.CRT_INIT.@03018000001800000181000.WIDTH
  5738 282C A9 19			lda #$19
  5739 282E 8D 89 A0			sta B_CRT.CRT_INIT.@03018000001800000181000.HEIGHT
  5740 2831 20 48 17			jsr B_CRT.CRT_INIT.@03018000001800000181000
  5741
  5742 				; optimize OK (console.pas), line = 47
  5743
  5744 2834 A9 02			lda #$02
  5745 2836 8D 3B A7			sta CONSOLESTATE
  5746
  5747 2839			@exit
  5748 					.ifdef @new
  5749 					lda <@VarData
  5750 					sta :ztmp
  5751 					lda >@VarData
  5752 					ldy #@VarDataSize-1
  5753 					jmp @FreeMem
  5754 					els
  5755 2839 60				rts						; ret
  5756 					eif
  5757 				.endl
  5758
  5759 283A			.local	ENABLEBITMAPCONSOLE				; PROCEDURE
  5760
  5761 				; optimize OK (console.pas), line = 53
  5762
  5763 283A AD 3B A7			lda CONSOLESTATE
  5764 283D C9 03			cmp #$03
  5765 283F F0 38			jeq @exit
  5766 2841			l_0D0D
  5767
  5768 				; optimize OK (console.pas), line = 54
  5769
  5770 2841 A9 9E			lda <DLI_BITMAP
  5771 2843 8D 75 9E			sta B_SYSTEM.ENABLEDLI.DLIPTR
  5772 2846 A9 26			lda >DLI_BITMAP
  5773 2848 8D 76 9E			sta B_SYSTEM.ENABLEDLI.DLIPTR+1
  5774 284B 20 90 16			jsr B_SYSTEM.ENABLEDLI
  5775
  5776 				; optimize OK (console.pas), line = 55
  5777
  5778 284E A9 B8			lda #$B8
  5779 2850 8D 02 D4			sta ATARI.DLISTL
  5780 2853 A9 FF			lda #$FF
  5781 2855 8D 03 D4			sta ATARI.DLISTL+1
  5782
  5783 				; optimize OK (console.pas), line = 56
  5784
  5785 2858 A9 D8			lda #$D8
  5786 285A 20 D8 16			jsr B_SYSTEM.SETCHARSET
  5787
  5788 				; optimize OK (console.pas), line = 57
  5789
  5790 285D A9 00			lda #$00
  5791 285F 8D 86 A0			sta B_CRT.CRT_INIT.@03018000001800000181000.VRAM_ADDRESS
  5792 2862 A9 DC			lda #$DC
  5793 2864 8D 87 A0			sta B_CRT.CRT_INIT.@03018000001800000181000.VRAM_ADDRESS+1
  5794 2867 A9 28			lda #$28
  5795 2869 8D 88 A0			sta B_CRT.CRT_INIT.@03018000001800000181000.WIDTH
  5796 286C A9 19			lda #$19
  5797 286E 8D 89 A0			sta B_CRT.CRT_INIT.@03018000001800000181000.HEIGHT
  5798 2871 20 48 17			jsr B_CRT.CRT_INIT.@03018000001800000181000
  5799
  5800 				; optimize OK (console.pas), line = 58
  5801
  5802 2874 A9 03			lda #$03
  5803 2876 8D 3B A7			sta CONSOLESTATE
  5804
  5805 2879			@exit
  5806 					.ifdef @new
  5807 					lda <@VarData
  5808 					sta :ztmp
  5809 					lda >@VarData
  5810 					ldy #@VarDataSize-1
  5811 					jmp @FreeMem
  5812 					els
  5813 2879 60				rts						; ret
  5814 					eif
  5815 				.endl
  5816
  5817 287A			.local	SHOWLOCATIONHEADER				; PROCEDURE
  5818
  5819 				; optimize FAIL ('ENABLECONSOLE', locations.pas), line = 52
  5820
  5821 287A 20 B0 27			jsr ENABLECONSOLE
  5822
  5823 				; optimize FAIL ('B_CRT.CRT_CLEAR.@00', locations.pas), line = 53
  5824
  5825 287D 20 84 17			jsr B_CRT.CRT_CLEAR.@00
  5826
  5827 				; optimize FAIL ('B_CRT.CRT_WRITECENTERED.@02018986000001000180000', locations.pas), line = 54
  5828
  5829 2880 E8				inx
  5830 2881 AC 99 9A 84 82 AC + 	mwy LOC_NAME :bp2
  5831 288B A0 00			ldy #$00
  5832 288D B1 82 99 9D A1 C8 + 	mva:rne (:bp2),y B_CRT.CRT_WRITECENTERED.@02018986000001000180000.adr.S,y+
  5833 2895 E8				inx
  5834 2896 A9 01 95 94			mva #$01 :STACKORIGIN,x
  5835 289A 20 DF 19			jsr B_CRT.CRT_WRITECENTERED.@02018986000001000180000
  5836
  5837 				; optimize OK (locations.pas), line = 55
  5838
  5839 289D A9 00			lda #$00
  5840 289F 8D A0 A3			sta B_CRT.CRT_INVERT.X
  5841 28A2 A9 01			lda #$01
  5842 28A4 8D A1 A3			sta B_CRT.CRT_INVERT.Y
  5843 28A7 AD 7D 9E			lda B_CRT.CRT_SCREENWIDTH
  5844 28AA 8D A2 A3			sta B_CRT.CRT_INVERT.WIDTH
  5845 28AD 20 70 1A			jsr B_CRT.CRT_INVERT
  5846 28B0 A9 01 8D 3E A7		mva #$01 adr.CURRENTSUBLOCATIONNAME
  5847 28B5 A9 00 8D 3F A7		mva #$00 adr.CURRENTSUBLOCATIONNAME+1
  5848
  5849 				; optimize OK (locations.pas), line = 58
  5850
  5851 28BA A9 00			lda #$00
  5852 28BC 8D 67 A7			sta IDX
  5853
  5854 28BF			l_0D38
  5855 				; --- ForToDoCondition
  5856 28BF AC 67 A7			ldy IDX
  5857 28C2 C0 04			cpy #$04
  5858 28C4 B0 2E			jcs l_0D46
  5859
  5860 				; optimize OK (locations.pas), line = 60
  5861
  5862 28C6 B9 AA C2			lda adr.LOC_MAP_PLACES,y
  5863 28C9 CD 90 CD			cmp CURRENTMAP
  5864 28CC D0 21			jne l_0D5D
  5865
  5866 				; optimize OK (locations.pas), line = 61
  5867
  5868 28CE AD 67 A7			lda IDX
  5869 28D1 0A				asl @
  5870 28D2 A8				tay
  5871 28D3 B9 05 A4			lda adr.LOC_SUBLOCATION_NAMES,y
  5872 28D6 85 88			sta @move.src
  5873 28D8 B9 06 A4			lda adr.LOC_SUBLOCATION_NAMES+1,y
  5874 28DB 85 89			sta @move.src+1
  5875 					@moveSTRING CURRENTSUBLOCATIONNAME #40
  5875 				 MWA CURRENTSUBLOCATIONNAME @MOVE.DST\ MVA #40 @MOVESTRING.LEN\ JSR @MOVESTRING
  5875 28DD AD 3D 9C 85 8C AD +  MWA CURRENTSUBLOCATIONNAME @MOVE.DST
  5875 28E7 A9 28 8D 7B 0F	 MVA #40 @MOVESTRING.LEN
  5875 28EC 20 74 0F		 JSR @MOVESTRING
  5876 28EF			l_0D5D
  5877
  5878 				; --- ForToDoEpilog
  5879 28EF EE 67 A7			inc IDX
  5880 28F2 D0 CB			jne l_0D38
  5881 28F4			l_0D46
  5882
  5883 				; optimize FAIL ('B_CRT.CRT_WRITECENTERED.@02018986000001000180000', locations.pas), line = 63
  5884
  5885 28F4 E8				inx
  5886 28F5 AC 3D 9C 84 82 AC + 	mwy CURRENTSUBLOCATIONNAME :bp2
  5887 28FF A0 00			ldy #$00
  5888 2901 B1 82 99 9D A1 C8 + 	mva:rne (:bp2),y B_CRT.CRT_WRITECENTERED.@02018986000001000180000.adr.S,y+
  5889 2909 E8				inx
  5890 290A A9 02 95 94			mva #$02 :STACKORIGIN,x
  5891 290E 20 DF 19			jsr B_CRT.CRT_WRITECENTERED.@02018986000001000180000
  5892
  5893 				; optimize OK (locations.pas), line = 64
  5894
  5895 2911 A9 00			lda #$00
  5896 2913 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
  5897 2916 A9 04			lda #$04
  5898 2918 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
  5899 291B 20 AC 17			jsr B_CRT.CRT_GOTOXY
  5900
  5901 				; ------------------------------------------------------------
  5902
  5903 = A767			IDX	= DATAORIGIN+$0B11
  5904
  5905 = A767			@VarData	= IDX
  5906 = 0001			@VarDataSize	= 1
  5907
  5908 291E			@exit
  5909 					.ifdef @new
  5910 					lda <@VarData
  5911 					sta :ztmp
  5912 					lda >@VarData
  5913 					ldy #@VarDataSize-1
  5914 					jmp @FreeMem
  5915 					els
  5916 291E 60				rts						; ret
  5917 					eif
  5918 				.endl
  5919
  5920 291F			.local	LOADLOCATION					; PROCEDURE
  5921 291F 8D 68 A7			sta L
  5922
  5923 				; optimize OK (locations.pas), line = 74
  5924
  5925 2922 A9 00			lda #$00
  5926 2924 8D 8A A7			sta DISPLAYBMP
  5927
  5928 				; optimize OK (locations.pas), line = 75
  5929
  5930 2927 AD 21 C9			lda LASTLOCATIONSTRINGS
  5931 292A CD 68 A7			cmp L
  5932 292D D0 03 4C 4B 2C		jeq @exit
  5933 2932			l_0D8D
  5934
  5935 				; optimize OK (locations.pas), line = 76
  5936
  5937 2932 AD 68 A7			lda L
  5938 2935 8D 21 C9			sta LASTLOCATIONSTRINGS
  5939
  5940 				; optimize OK (locations.pas), line = 77
  5941
  5942 2938 AD 68 A7			lda L
  5943 293B 8D 8D A7			sta @CASETMP_0009
  5944 293E C9 01			cmp #$01
  5945 2940 D0 0B			jne l_0DA1
  5946 				@
  5947
  5948 				; optimize OK (locations.pas), line = 78
  5949
  5950 2942 AD 9D 9B			lda LOCABANKFNAME
  5951 2945 85 88			sta @move.src
  5952 2947 AD 9E 9B			lda LOCABANKFNAME+1
  5953 294A 4C 59 29			jmp s_0DB4
  5954 294D			l_0DA1
  5955 294D C9 02			cmp #$02
  5956 294F D0 0B			jne l_0DAE
  5957
  5958 				; optimize OK (locations.pas), line = 79
  5959
  5960 2951 AD 9F 9B			lda LOCAFORGFNAME
  5961 2954 85 88			sta @move.src
  5962 2956 AD A0 9B			lda LOCAFORGFNAME+1
  5963 2959			s_0DB4
  5964 2959 4C 68 29			jmp s_0DC1
  5965 295C			l_0DAE
  5966 295C C9 03			cmp #$03
  5967 295E D0 0B			jne l_0DBB
  5968
  5969 				; optimize OK (locations.pas), line = 80
  5970
  5971 2960 AD A1 9B			lda LOCAMONYFNAME
  5972 2963 85 88			sta @move.src
  5973 2965 AD A2 9B			lda LOCAMONYFNAME+1
  5974 2968			s_0DC1
  5975 2968 4C 77 29			jmp s_0DCE
  5976 296B			l_0DBB
  5977 296B C9 04			cmp #$04
  5978 296D D0 0B			jne l_0DC8
  5979
  5980 				; optimize OK (locations.pas), line = 81
  5981
  5982 296F AD A3 9B			lda LOCALOANFNAME
  5983 2972 85 88			sta @move.src
  5984 2974 AD A4 9B			lda LOCALOANFNAME+1
  5985 2977			s_0DCE
  5986 2977 4C 86 29			jmp s_0DDB
  5987 297A			l_0DC8
  5988 297A C9 05			cmp #$05
  5989 297C D0 0B			jne l_0DD5
  5990
  5991 				; optimize OK (locations.pas), line = 82
  5992
  5993 297E AD A5 9B			lda LOCAPOLIFNAME
  5994 2981 85 88			sta @move.src
  5995 2983 AD A6 9B			lda LOCAPOLIFNAME+1
  5996 2986			s_0DDB
  5997 2986 4C 95 29			jmp s_0DE8
  5998 2989			l_0DD5
  5999 2989 C9 06			cmp #$06
  6000 298B D0 0B			jne l_0DE2
  6001
  6002 				; optimize OK (locations.pas), line = 83
  6003
  6004 298D AD A7 9B			lda LOCACARSFNAME
  6005 2990 85 88			sta @move.src
  6006 2992 AD A8 9B			lda LOCACARSFNAME+1
  6007 2995			s_0DE8
  6008 2995 4C A4 29			jmp s_0DF5
  6009 2998			l_0DE2
  6010 2998 C9 07			cmp #$07
  6011 299A D0 24			jne l_0DEF
  6012
  6013 				; optimize OK (locations.pas), line = 84
  6014
  6015 299C AD A9 9B			lda LOCAPUBBFNAME
  6016 299F 85 88			sta @move.src
  6017 29A1 AD AA 9B			lda LOCAPUBBFNAME+1
  6018 29A4			s_0DF5
  6019 29A4 85 89			sta @move.src+1
  6020 					@moveSTRING LOCFNAME #32
  6020 				 MWA LOCFNAME @MOVE.DST\ MVA #32 @MOVESTRING.LEN\ JSR @MOVESTRING
  6020 29A6 AD 4C 2C 85 8C AD +  MWA LOCFNAME @MOVE.DST
  6020 29B0 A9 20 8D 7B 0F	 MVA #32 @MOVESTRING.LEN
  6020 29B5 20 74 0F		 JSR @MOVESTRING
  6021 29B8 A9 01			lda #$01
  6022 29BA 8D 8A A7			sta DISPLAYBMP
  6023 29BD 4C A7 2B			jmp a_0009
  6024 29C0			l_0DEF
  6025 29C0 C9 14			cmp #$14
  6026 29C2 D0 1F			jne l_0DFC
  6027
  6028 				; optimize OK (locations.pas), line = 85
  6029
  6030 29C4 AD AB 9B			lda LOCAPUBCFNAME
  6031 29C7 85 88			sta @move.src
  6032 29C9 AD AC 9B			lda LOCAPUBCFNAME+1
  6033 29CC 85 89			sta @move.src+1
  6034 					@moveSTRING LOCFNAME #32
  6034 				 MWA LOCFNAME @MOVE.DST\ MVA #32 @MOVESTRING.LEN\ JSR @MOVESTRING
  6034 29CE AD 4C 2C 85 8C AD +  MWA LOCFNAME @MOVE.DST
  6034 29D8 A9 20 8D 7B 0F	 MVA #32 @MOVESTRING.LEN
  6034 29DD 20 74 0F		 JSR @MOVESTRING
  6035 29E0 4C A7 2B			jmp a_0009
  6036 29E3			l_0DFC
  6037 29E3 C9 09			cmp #$09
  6038 29E5 D0 0B			jne l_0E05
  6039
  6040 				; optimize OK (locations.pas), line = 86
  6041
  6042 29E7 AD AD 9B			lda LOCASTORFNAME
  6043 29EA 85 88			sta @move.src
  6044 29EC AD AE 9B			lda LOCASTORFNAME+1
  6045 29EF 4C FE 29			jmp s_0E18
  6046 29F2			l_0E05
  6047 29F2 C9 0A			cmp #$0A
  6048 29F4 D0 0B			jne l_0E12
  6049
  6050 				; optimize OK (locations.pas), line = 87
  6051
  6052 29F6 AD AF 9B			lda LOCAHIDEFNAME
  6053 29F9 85 88			sta @move.src
  6054 29FB AD B0 9B			lda LOCAHIDEFNAME+1
  6055 29FE			s_0E18
  6056 29FE 4C 0D 2A			jmp s_0E25
  6057 2A01			l_0E12
  6058 2A01 C9 0B			cmp #$0B
  6059 2A03 D0 0B			jne l_0E1F
  6060
  6061 				; optimize OK (locations.pas), line = 88
  6062
  6063 2A05 AD B1 9B			lda LOCAGAMBFNAME
  6064 2A08 85 88			sta @move.src
  6065 2A0A AD B2 9B			lda LOCAGAMBFNAME+1
  6066 2A0D			s_0E25
  6067 2A0D 4C 1C 2A			jmp s_0E32
  6068 2A10			l_0E1F
  6069 2A10 C9 0C			cmp #$0C
  6070 2A12 D0 0B			jne l_0E2C
  6071
  6072 				; optimize OK (locations.pas), line = 89
  6073
  6074 2A14 AD B3 9B			lda LOCASUBWFNAME
  6075 2A17 85 88			sta @move.src
  6076 2A19 AD B4 9B			lda LOCASUBWFNAME+1
  6077 2A1C			s_0E32
  6078 2A1C 4C 2B 2A			jmp s_0E3F
  6079 2A1F			l_0E2C
  6080 2A1F C9 0D			cmp #$0D
  6081 2A21 D0 24			jne l_0E39
  6082
  6083 				; optimize OK (locations.pas), line = 90
  6084
  6085 2A23 AD B5 9B			lda LOCAARMSFNAME
  6086 2A26 85 88			sta @move.src
  6087 2A28 AD B6 9B			lda LOCAARMSFNAME+1
  6088 2A2B			s_0E3F
  6089 2A2B 85 89			sta @move.src+1
  6090 					@moveSTRING LOCFNAME #32
  6090 				 MWA LOCFNAME @MOVE.DST\ MVA #32 @MOVESTRING.LEN\ JSR @MOVESTRING
  6090 2A2D AD 4C 2C 85 8C AD +  MWA LOCFNAME @MOVE.DST
  6090 2A37 A9 20 8D 7B 0F	 MVA #32 @MOVESTRING.LEN
  6090 2A3C 20 74 0F		 JSR @MOVESTRING
  6091 2A3F A9 01			lda #$01
  6092 2A41 8D 8A A7			sta DISPLAYBMP
  6093 2A44 4C A7 2B			jmp a_0009
  6094 2A47			l_0E39
  6095 2A47 C9 13			cmp #$13
  6096 2A49 D0 1F			jne l_0E46
  6097
  6098 				; optimize OK (locations.pas), line = 91
  6099
  6100 2A4B AD B7 9B			lda LOCAMAINFNAME
  6101 2A4E 85 88			sta @move.src
  6102 2A50 AD B8 9B			lda LOCAMAINFNAME+1
  6103 2A53 85 89			sta @move.src+1
  6104 					@moveSTRING LOCFNAME #32
  6104 				 MWA LOCFNAME @MOVE.DST\ MVA #32 @MOVESTRING.LEN\ JSR @MOVESTRING
  6104 2A55 AD 4C 2C 85 8C AD +  MWA LOCFNAME @MOVE.DST
  6104 2A5F A9 20 8D 7B 0F	 MVA #32 @MOVESTRING.LEN
  6104 2A64 20 74 0F		 JSR @MOVESTRING
  6105 2A67 4C A7 2B			jmp a_0009
  6106 2A6A			l_0E46
  6107 2A6A C9 16			cmp #$16
  6108 2A6C D0 1F			jne l_0E4F
  6109
  6110 				; optimize OK (locations.pas), line = 92
  6111
  6112 2A6E AD B9 9B			lda LOCAJOBBFNAME
  6113 2A71 85 88			sta @move.src
  6114 2A73 AD BA 9B			lda LOCAJOBBFNAME+1
  6115 2A76 85 89			sta @move.src+1
  6116 					@moveSTRING LOCFNAME #32
  6116 				 MWA LOCFNAME @MOVE.DST\ MVA #32 @MOVESTRING.LEN\ JSR @MOVESTRING
  6116 2A78 AD 4C 2C 85 8C AD +  MWA LOCFNAME @MOVE.DST
  6116 2A82 A9 20 8D 7B 0F	 MVA #32 @MOVESTRING.LEN
  6116 2A87 20 74 0F		 JSR @MOVESTRING
  6117 2A8A 4C A7 2B			jmp a_0009
  6118 2A8D			l_0E4F
  6119 2A8D C9 18			cmp #$18
  6120 2A8F D0 24			jne l_0E58
  6121
  6122 				; optimize OK (locations.pas), line = 93
  6123
  6124 2A91 AD BB 9B			lda LOCAMAJOFNAME
  6125 2A94 85 88			sta @move.src
  6126 2A96 AD BC 9B			lda LOCAMAJOFNAME+1
  6127 2A99 85 89			sta @move.src+1
  6128 					@moveSTRING LOCFNAME #32
  6128 				 MWA LOCFNAME @MOVE.DST\ MVA #32 @MOVESTRING.LEN\ JSR @MOVESTRING
  6128 2A9B AD 4C 2C 85 8C AD +  MWA LOCFNAME @MOVE.DST
  6128 2AA5 A9 20 8D 7B 0F	 MVA #32 @MOVESTRING.LEN
  6128 2AAA 20 74 0F		 JSR @MOVESTRING
  6129 2AAD A9 01			lda #$01
  6130 2AAF 8D 8A A7			sta DISPLAYBMP
  6131 2AB2 4C A7 2B			jmp a_0009
  6132 2AB5			l_0E58
  6133 2AB5 C9 17			cmp #$17
  6134 2AB7 D0 1F			jne l_0E65
  6135
  6136 				; optimize OK (locations.pas), line = 94
  6137
  6138 2AB9 AD C7 9B			lda LOCACENTFNAME
  6139 2ABC 85 88			sta @move.src
  6140 2ABE AD C8 9B			lda LOCACENTFNAME+1
  6141 2AC1 85 89			sta @move.src+1
  6142 					@moveSTRING LOCFNAME #32
  6142 				 MWA LOCFNAME @MOVE.DST\ MVA #32 @MOVESTRING.LEN\ JSR @MOVESTRING
  6142 2AC3 AD 4C 2C 85 8C AD +  MWA LOCFNAME @MOVE.DST
  6142 2ACD A9 20 8D 7B 0F	 MVA #32 @MOVESTRING.LEN
  6142 2AD2 20 74 0F		 JSR @MOVESTRING
  6143 2AD5 4C A7 2B			jmp a_0009
  6144 2AD8			l_0E65
  6145 2AD8 C9 19			cmp #$19
  6146 2ADA D0 1F			jne l_0E6E
  6147
  6148 				; optimize OK (locations.pas), line = 95
  6149
  6150 2ADC AD BD 9B			lda LOCACOURFNAME
  6151 2ADF 85 88			sta @move.src
  6152 2AE1 AD BE 9B			lda LOCACOURFNAME+1
  6153 2AE4 85 89			sta @move.src+1
  6154 					@moveSTRING LOCFNAME #32
  6154 				 MWA LOCFNAME @MOVE.DST\ MVA #32 @MOVESTRING.LEN\ JSR @MOVESTRING
  6154 2AE6 AD 4C 2C 85 8C AD +  MWA LOCFNAME @MOVE.DST
  6154 2AF0 A9 20 8D 7B 0F	 MVA #32 @MOVESTRING.LEN
  6154 2AF5 20 74 0F		 JSR @MOVESTRING
  6155 2AF8 4C A7 2B			jmp a_0009
  6156 2AFB			l_0E6E
  6157 2AFB C9 1A			cmp #$1A
  6158 2AFD D0 1F			jne l_0E77
  6159
  6160 				; optimize OK (locations.pas), line = 96
  6161
  6162 2AFF AD BF 9B			lda LOCACAUGFNAME
  6163 2B02 85 88			sta @move.src
  6164 2B04 AD C0 9B			lda LOCACAUGFNAME+1
  6165 2B07 85 89			sta @move.src+1
  6166 					@moveSTRING LOCFNAME #32
  6166 				 MWA LOCFNAME @MOVE.DST\ MVA #32 @MOVESTRING.LEN\ JSR @MOVESTRING
  6166 2B09 AD 4C 2C 85 8C AD +  MWA LOCFNAME @MOVE.DST
  6166 2B13 A9 20 8D 7B 0F	 MVA #32 @MOVESTRING.LEN
  6166 2B18 20 74 0F		 JSR @MOVESTRING
  6167 2B1B 4C A7 2B			jmp a_0009
  6168 2B1E			l_0E77
  6169 2B1E C9 1B			cmp #$1B
  6170 2B20 D0 1F			jne l_0E80
  6171
  6172 				; optimize OK (locations.pas), line = 97
  6173
  6174 2B22 AD C1 9B			lda LOCAROADFNAME
  6175 2B25 85 88			sta @move.src
  6176 2B27 AD C2 9B			lda LOCAROADFNAME+1
  6177 2B2A 85 89			sta @move.src+1
  6178 					@moveSTRING LOCFNAME #32
  6178 				 MWA LOCFNAME @MOVE.DST\ MVA #32 @MOVESTRING.LEN\ JSR @MOVESTRING
  6178 2B2C AD 4C 2C 85 8C AD +  MWA LOCFNAME @MOVE.DST
  6178 2B36 A9 20 8D 7B 0F	 MVA #32 @MOVESTRING.LEN
  6178 2B3B 20 74 0F		 JSR @MOVESTRING
  6179 2B3E 4C A7 2B			jmp a_0009
  6180 2B41			l_0E80
  6181 2B41 C9 15			cmp #$15
  6182 2B43 D0 1F			jne l_0E89
  6183
  6184 				; optimize OK (locations.pas), line = 98
  6185
  6186 2B45 AD C3 9B			lda LOCAUPDTFNAME
  6187 2B48 85 88			sta @move.src
  6188 2B4A AD C4 9B			lda LOCAUPDTFNAME+1
  6189 2B4D 85 89			sta @move.src+1
  6190 					@moveSTRING LOCFNAME #32
  6190 				 MWA LOCFNAME @MOVE.DST\ MVA #32 @MOVESTRING.LEN\ JSR @MOVESTRING
  6190 2B4F AD 4C 2C 85 8C AD +  MWA LOCFNAME @MOVE.DST
  6190 2B59 A9 20 8D 7B 0F	 MVA #32 @MOVESTRING.LEN
  6190 2B5E 20 74 0F		 JSR @MOVESTRING
  6191 2B61 4C A7 2B			jmp a_0009
  6192 2B64			l_0E89
  6193 2B64 C9 1C			cmp #$1C
  6194 2B66 D0 1F			jne l_0E92
  6195
  6196 				; optimize OK (locations.pas), line = 99
  6197
  6198 2B68 AD C5 9B			lda LOCASETUFNAME
  6199 2B6B 85 88			sta @move.src
  6200 2B6D AD C6 9B			lda LOCASETUFNAME+1
  6201 2B70 85 89			sta @move.src+1
  6202 					@moveSTRING LOCFNAME #32
  6202 				 MWA LOCFNAME @MOVE.DST\ MVA #32 @MOVESTRING.LEN\ JSR @MOVESTRING
  6202 2B72 AD 4C 2C 85 8C AD +  MWA LOCFNAME @MOVE.DST
  6202 2B7C A9 20 8D 7B 0F	 MVA #32 @MOVESTRING.LEN
  6202 2B81 20 74 0F		 JSR @MOVESTRING
  6203 2B84 4C A7 2B			jmp a_0009
  6204 2B87			l_0E92
  6205 2B87 C9 1E			cmp #$1E
  6206 2B89 D0 1C			jne l_0E9B
  6207
  6208 				; optimize OK (locations.pas), line = 100
  6209
  6210 2B8B AD C9 9B			lda LOCACREDFNAME
  6211 2B8E 85 88			sta @move.src
  6212 2B90 AD CA 9B			lda LOCACREDFNAME+1
  6213 2B93 85 89			sta @move.src+1
  6214 					@moveSTRING LOCFNAME #32
  6214 				 MWA LOCFNAME @MOVE.DST\ MVA #32 @MOVESTRING.LEN\ JSR @MOVESTRING
  6214 2B95 AD 4C 2C 85 8C AD +  MWA LOCFNAME @MOVE.DST
  6214 2B9F A9 20 8D 7B 0F	 MVA #32 @MOVESTRING.LEN
  6214 2BA4 20 74 0F		 JSR @MOVESTRING
  6215 2BA7			l_0E9B
  6216 2BA7			a_0009
  6217
  6218 				; optimize OK (locations.pas), line = 102
  6219
  6220 2BA7 AD 4C 2C			lda LOCFNAME
  6221 2BAA 8D 36 A7			sta LOADXAPL.FNAME
  6222 2BAD AD 4D 2C			lda LOCFNAME+1
  6223 2BB0 8D 37 A7			sta LOADXAPL.FNAME+1
  6224 2BB3 A9 00			lda #$00
  6225 2BB5 8D 38 A7			sta LOADXAPL.OUTPUTPOINTER
  6226 2BB8 A9 C0			lda #$C0
  6227 2BBA 8D 39 A7			sta LOADXAPL.OUTPUTPOINTER+1
  6228 2BBD 20 60 27			jsr LOADXAPL
  6229
  6230 				; optimize OK (locations.pas), line = 104
  6231
  6232 2BC0 AD EE A4			lda SHOWBITMAPS
  6233 2BC3 D0 03 4C 4B 2C		jeq @exit
  6234 2BC8			l_0ECC
  6235
  6236 				; optimize OK (locations.pas), line = 106
  6237
  6238 2BC8 AD 8A A7			lda DISPLAYBMP
  6239 2BCB C9 01			cmp #$01
  6240 2BCD D0 7C			jne l_0EE1
  6241
  6242 				; optimize OK (locations.pas), line = 108
  6243
  6244 2BCF A9 00			lda #$00
  6245 2BD1 85 88			sta SYSTEM.FILLCHAR.@03018000001810000188000.A
  6246 2BD3 A9 DC			lda #$DC
  6247 2BD5 85 89			sta SYSTEM.FILLCHAR.@03018000001810000188000.A+1
  6248 2BD7 A9 C0			lda #$C0
  6249 2BD9 85 8C			sta SYSTEM.FILLCHAR.@03018000001810000188000.COUNT
  6250 2BDB A9 03			lda #$03
  6251 2BDD 85 8D			sta SYSTEM.FILLCHAR.@03018000001810000188000.COUNT+1
  6252 2BDF A9 00			lda #$00
  6253 2BE1 85 84			sta SYSTEM.FILLCHAR.@03018000001810000188000.VALUE
  6254 2BE3				.LOCAL +MAIN.SYSTEM.FILLCHAR.@03018000001810000188000
  6255 2BE3				m@INLINE
Macro: MAIN.SYSTEM.FILLCHAR.@03018000001810000188000.M@INLINE [Source: main_PL.a65]
     4 2BE3 20 2C 0F			jsr @fill
Source: main_PL.a65
  6256 					.ENDL
  6257
  6258 				; optimize OK (locations.pas), line = 109
  6259
  6260 2BE6 A9 42			lda #$42
  6261 2BE8 8D 6E A7			sta adr.LOCFNAME+$05
  6262
  6263 				; optimize OK (locations.pas), line = 110
  6264
  6265 2BEB AD 73 A7			lda adr.LOCFNAME+$0A
  6266 2BEE 8D 8B A7			sta E1
  6267
  6268 				; optimize OK (locations.pas), line = 111
  6269
  6270 2BF1 AD 74 A7			lda adr.LOCFNAME+$0B
  6271 2BF4 8D 8C A7			sta E2
  6272
  6273 				; optimize OK (locations.pas), line = 112
  6274
  6275 2BF7 A9 50			lda #$50
  6276 2BF9 8D 73 A7			sta adr.LOCFNAME+$0A
  6277
  6278 				; optimize OK (locations.pas), line = 113
  6279
  6280 2BFC A9 4C			lda #$4C
  6281 2BFE 8D 74 A7			sta adr.LOCFNAME+$0B
  6282
  6283 				; optimize OK (locations.pas), line = 114
  6284
  6285 2C01 AD 4C 2C			lda LOCFNAME
  6286 2C04 8D 36 A7			sta LOADXAPL.FNAME
  6287 2C07 AD 4D 2C			lda LOCFNAME+1
  6288 2C0A 8D 37 A7			sta LOADXAPL.FNAME+1
  6289 2C0D A9 00			lda #$00
  6290 2C0F 8D 38 A7			sta LOADXAPL.OUTPUTPOINTER
  6291 2C12 A9 D8			lda #$D8
  6292 2C14 8D 39 A7			sta LOADXAPL.OUTPUTPOINTER+1
  6293 2C17 20 60 27			jsr LOADXAPL
  6294
  6295 				; optimize OK (locations.pas), line = 115
  6296
  6297 2C1A A9 4C			lda #$4C
  6298 2C1C 8D 6E A7			sta adr.LOCFNAME+$05
  6299
  6300 				; optimize OK (locations.pas), line = 116
  6301
  6302 2C1F AD 8B A7			lda E1
  6303 2C22 8D 73 A7			sta adr.LOCFNAME+$0A
  6304
  6305 				; optimize OK (locations.pas), line = 117
  6306
  6307 2C25 AD 8C A7			lda E2
  6308 2C28 8D 74 A7			sta adr.LOCFNAME+$0B
  6309
  6310 				; optimize OK (locations.pas), line = 118
  6311
  6312 2C2B A9 04			lda #$04
  6313 2C2D 8D F6 EA			sta MAPCOLORA
  6314
  6315 				; optimize OK (locations.pas), line = 119
  6316
  6317 2C30 A9 0A			lda #$0A
  6318 2C32 8D F7 EA			sta MAPCOLORB
  6319
  6320 				; optimize FAIL ('ENABLEBITMAPCONSOLE', locations.pas), line = 120
  6321
  6322 2C35 20 3A 28			jsr ENABLEBITMAPCONSOLE
  6323
  6324 				; optimize FAIL ('CRT_READKEYORFIRE', locations.pas), line = 121
  6325
  6326 2C38 20 04 1E			jsr CRT_READKEYORFIRE
  6327
  6328 				; optimize FAIL ('PRELOADMAP', locations.pas), line = 123
  6329
  6330 2C3B 20 27 82			jsr PRELOADMAP
  6331
  6332 				; optimize OK (locations.pas), line = 124
  6333
  6334 2C3E A9 06			lda #$06
  6335 2C40 8D F7 EA			sta MAPCOLORB
  6336
  6337 				; optimize OK (locations.pas), line = 125
  6338
  6339 2C43 A9 88			lda #$88
  6340 2C45 8D F6 EA			sta MAPCOLORA
  6341
  6342 				; optimize FAIL ('ENABLECONSOLE', locations.pas), line = 126
  6343
  6344 2C48 20 B0 27			jsr ENABLECONSOLE
  6345 2C4B			l_0EE1
  6346
  6347 				; ------------------------------------------------------------
  6348
  6349 = A768			L	= DATAORIGIN+$0B12
  6350 = A769			adr.LOCFNAME	= [DATAORIGIN+$0B13] .array [33]
  6351 2C4B			.var LOCFNAME	= adr.LOCFNAME .word
  6352 = A78A			DISPLAYBMP	= DATAORIGIN+$0B34
  6353 = A78B			E1	= DATAORIGIN+$0B35
  6354 = A78C			E2	= DATAORIGIN+$0B36
  6355 = A78D			@CASETMP_0009	= DATAORIGIN+$0B37
  6356
  6357 = A768			@VarData	= L
  6358 = 0026			@VarDataSize	= 38
  6359
  6360 2C4B			@exit
  6361 					.ifdef @new
  6362 					lda <@VarData
  6363 					sta :ztmp
  6364 					lda >@VarData
  6365 					ldy #@VarDataSize-1
  6366 					jmp @FreeMem
  6367 					els
  6368 2C4B 60				rts						; ret
  6369 					eif
  6370 = 2C4C 69 A7		LOCFNAME
  6370 				.endl
  6371
  6372 2C4E			.local	SHOWLOCATION					; FUNCTION
  6373 2C4E 8D 8E A7			sta L
  6374
  6375 				; optimize OK (locations.pas), line = 175
  6376
  6377 2C51 20 1F 29			jsr LOADLOCATION
  6378
  6379 				; optimize OK (locations.pas), line = 176
  6380
  6381 2C54 A9 63			lda #$63
  6382 2C56 8D 3D A7			sta CURRENTSUBLOCATION
  6383
  6384 				; optimize OK (locations.pas), line = 177
  6385
  6386 2C59 A9 00			lda #$00
  6387 2C5B 8D 90 A7			sta I
  6388
  6389 2C5E			l_0F45
  6390 				; --- ForToDoCondition
  6391 2C5E AC 90 A7			ldy I
  6392 2C61 C0 04			cpy #$04
  6393 2C63 B0 13			jcs l_0F53
  6394
  6395 				; optimize OK (locations.pas), line = 178
  6396
  6397 2C65 B9 AA C2			lda adr.LOC_MAP_PLACES,y
  6398 2C68 CD 90 CD			cmp CURRENTMAP
  6399 2C6B D0 06			jne l_0F6A
  6400 2C6D AD 90 A7			lda I
  6401 2C70 8D 3D A7			sta CURRENTSUBLOCATION
  6402 2C73			l_0F6A
  6403
  6404 				; --- ForToDoEpilog
  6405 2C73 EE 90 A7			inc I
  6406 2C76 D0 E6			jne l_0F45
  6407 2C78			l_0F53
  6408
  6409 				; optimize OK (locations.pas), line = 179
  6410
  6411 2C78 AD 3D A7			lda CURRENTSUBLOCATION
  6412 2C7B C9 63			cmp #$63
  6413 2C7D D0 03			jne l_0F8A
  6414
  6415 				; --- RepeatUntilProlog
  6416 2C7F			l_0F8C
  6417 2C7F 4C 7F 2C			jmp l_0F8C
  6418 2C82			l_0F8A
  6419
  6420 				; optimize OK (locations.pas), line = 180
  6421
  6422 2C82 AD A9 C2			lda LOC_NOPTIONS
  6423 2C85 D0 08			jne l_0FA5
  6424
  6425 				; optimize OK (locations.pas), line = 182
  6426
  6427 2C87 A9 63			lda #$63
  6428 2C89 8D 8F A7			sta RESULT
  6429 2C8C 4C 09 2E			jmp @exit
  6430 2C8F			l_0FA5
  6431
  6432 				; optimize FAIL ('SHOWLOCATIONHEADER', locations.pas), line = 186
  6433
  6434 2C8F 20 7A 28			jsr SHOWLOCATIONHEADER
  6435
  6436 				; optimize OK (locations.pas), line = 189
  6437
  6438 2C92 A9 00			lda #$00
  6439 2C94 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
  6440 2C97 A9 04			lda #$04
  6441 2C99 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
  6442 2C9C 20 AC 17			jsr B_CRT.CRT_GOTOXY
  6443
  6444 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', locations.pas), line = 190
  6445
  6446 2C9F E8				inx
  6447 2CA0 AD B7 9A 95 94		mva LOC_DESCRIPTION_1 :STACKORIGIN,x
  6448 2CA5 AD B8 9A 95 A4		mva LOC_DESCRIPTION_1+1 :STACKORIGIN+STACKWIDTH,x
  6449 2CAA 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
  6450
  6451 				; optimize OK (locations.pas), line = 191
  6452
  6453 2CAD A9 00			lda #$00
  6454 2CAF 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
  6455 2CB2 A9 05			lda #$05
  6456 2CB4 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
  6457 2CB7 20 AC 17			jsr B_CRT.CRT_GOTOXY
  6458
  6459 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', locations.pas), line = 192
  6460
  6461 2CBA E8				inx
  6462 2CBB AD B9 9A 95 94		mva LOC_DESCRIPTION_2 :STACKORIGIN,x
  6463 2CC0 AD BA 9A 95 A4		mva LOC_DESCRIPTION_2+1 :STACKORIGIN+STACKWIDTH,x
  6464 2CC5 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
  6465
  6466 				; optimize OK (locations.pas), line = 194
  6467
  6468 2CC8 A9 00			lda #$00
  6469 2CCA 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
  6470 2CCD A9 07			lda #$07
  6471 2CCF 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
  6472 2CD2 20 AC 17			jsr B_CRT.CRT_GOTOXY
  6473
  6474 				; optimize OK (locations.pas), line = 195
  6475
  6476 2CD5 A9 00			lda #$00
  6477 2CD7 8D C3 A7			sta NOPT
  6478
  6479 				; optimize OK (locations.pas), line = 196
  6480
  6481 2CDA A9 07			lda #$07
  6482 2CDC 8D C2 A7			sta J
  6483
  6484 				; optimize OK (locations.pas), line = 197
  6485
  6486 2CDF A9 00			lda #$00
  6487 2CE1 8D 90 A7			sta I
  6488
  6489 2CE4			l_0FCD
  6490 				; --- ForToDoCondition
  6491 2CE4 AD 90 A7			lda I
  6492 2CE7 C9 0A			cmp #$0A
  6493 2CE9 B0 67			jcs l_0FDB
  6494
  6495 				; optimize OK (locations.pas), line = 199
  6496
  6497 2CEB 0A				asl @
  6498 2CEC A8				tay
  6499 2CED B9 F1 A3			lda adr.LOC_OPTIONS,y
  6500 2CF0 85 88			sta @move.src
  6501 2CF2 B9 F2 A3			lda adr.LOC_OPTIONS+1,y
  6502 2CF5 85 89			sta @move.src+1
  6503 					@moveSTRING TMPS #40
  6503 				 MWA TMPS @MOVE.DST\ MVA #40 @MOVESTRING.LEN\ JSR @MOVESTRING
  6503 2CF7 AD 0A 2E 85 8C AD +  MWA TMPS @MOVE.DST
  6503 2D01 A9 28 8D 7B 0F	 MVA #40 @MOVESTRING.LEN
  6503 2D06 20 74 0F		 JSR @MOVESTRING
  6504
  6505 				; optimize OK (locations.pas), line = 200
  6506
  6507 2D09 AD 92 A7			lda adr.TMPS
  6508 2D0C D0 03			jne l_0FEF
  6509 2D0E 4C 52 2D			jmp b_0FCD
  6510 2D11			l_0FEF
  6511
  6512 				; optimize OK (locations.pas), line = 202
  6513
  6514 2D11 AD 93 A7			lda adr.TMPS+$01
  6515 2D14 D0 14			jne l_1005
  6516
  6517 				; optimize FAIL ('CRT_WRITELN', locations.pas), line = 204
  6518
  6519 2D16 E8				inx
  6520 2D17 AD 0A 2E 95 94		mva TMPS :STACKORIGIN,x
  6521 2D1C AD 0B 2E 95 A4		mva TMPS+1 :STACKORIGIN+STACKWIDTH,x
  6522 2D21 20 A9 1E			jsr CRT_WRITELN
  6523
  6524 				; optimize OK (locations.pas), line = 205
  6525
  6526 2D24 EE C2 A7			inc J
  6527 2D27 4C 4D 2D			jmp l_101C
  6528 2D2A			l_1005
  6529
  6530 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', locations.pas), line = 209
  6531
  6532 2D2A 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
  6533
  6534 				; optimize OK (locations.pas), line = 210
  6535
  6536 2D2D EE C2 A7			inc J
  6537
  6538 				; optimize OK (locations.pas), line = 211
  6539
  6540 2D30 AC C3 A7			ldy NOPT
  6541 2D33 AD C2 A7			lda J
  6542 2D36 99 BB A7			sta adr.NPOS,y
  6543
  6544 				; optimize FAIL ('CRT_WRITELN', locations.pas), line = 212
  6545
  6546 2D39 E8				inx
  6547 2D3A AD 0A 2E 95 94		mva TMPS :STACKORIGIN,x
  6548 2D3F AD 0B 2E 95 A4		mva TMPS+1 :STACKORIGIN+STACKWIDTH,x
  6549 2D44 20 A9 1E			jsr CRT_WRITELN
  6550
  6551 				; optimize OK (locations.pas), line = 213
  6552
  6553 2D47 EE C2 A7			inc J
  6554
  6555 				; optimize OK (locations.pas), line = 214
  6556
  6557 2D4A EE C3 A7			inc NOPT
  6558 2D4D			l_101C
  6559
  6560 				; --- ForToDoEpilog
  6561 2D4D EE 90 A7			inc I
  6562 2D50 D0 92			jne l_0FCD
  6563 2D52			l_0FDB
  6564 2D52			b_0FCD
  6565
  6566 				; optimize OK (locations.pas), line = 218
  6567
  6568 2D52 A9 00			lda #$00
  6569 2D54 8D 91 A7			sta CHOICE
  6570
  6571 				; --- RepeatUntilProlog
  6572 2D57			l_1051
  6573
  6574 				; optimize OK (locations.pas), line = 220
  6575
  6576 2D57 A9 00			lda #$00
  6577 2D59 8D 90 A7			sta I
  6578 2D5C AC C3 A7			ldy NOPT
  6579 2D5F 88				dey
  6580 2D60 8C 64 2D			sty @FORTMP_105D_0
  6581
  6582 2D63			l_1060
  6583 				; --- ForToDoCondition
  6584 2D63 A9 00			lda @FORTMP_105D_0::#$00
  6585 2D65 CD 90 A7			cmp I
  6586 2D68 90 1B			jcc l_106E
  6587
  6588 				; optimize OK (locations.pas), line = 223
  6589
  6590 2D6A AC 90 A7			ldy I
  6591 2D6D A9 00			lda #$00
  6592 2D6F 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
  6593 2D72 B9 BB A7			lda adr.NPOS,y
  6594 2D75 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
  6595 2D78 20 AC 17			jsr B_CRT.CRT_GOTOXY
  6596
  6597 				; optimize OK (locations.pas), line = 224
  6598
  6599 2D7B A9 00			lda #$00
  6600 2D7D 20 65 18			jsr B_CRT.CRT_WRITE.@010186000
  6601
  6602 				; --- ForToDoEpilog
  6603 2D80 EE 90 A7			inc I
  6604 2D83 D0 DE			jne l_1060
  6605 2D85			l_106E
  6606
  6607 				; optimize OK (locations.pas), line = 226
  6608
  6609 2D85 AC 91 A7			ldy CHOICE
  6610 2D88 A9 00			lda #$00
  6611 2D8A 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
  6612 2D8D B9 BB A7			lda adr.NPOS,y
  6613 2D90 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
  6614 2D93 20 AC 17			jsr B_CRT.CRT_GOTOXY
  6615
  6616 				; optimize OK (locations.pas), line = 227
  6617
  6618 2D96 A9 1E			lda #$1E
  6619 2D98 20 65 18			jsr B_CRT.CRT_WRITE.@010186000
  6620
  6621 				; optimize FAIL ('READKEYANDSTICK', locations.pas), line = 229
  6622
  6623 2D9B 20 DD 1B			jsr READKEYANDSTICK
  6624 2D9E AD EF A4			lda READKEYANDSTICK.RESULT
  6625 2DA1 8D C4 A7			sta CH
  6626
  6627 				; optimize OK (locations.pas), line = 230
  6628
  6629 2DA4 A9 0A			lda #$0A
  6630 2DA6 20 7C 27			jsr WAITFRAMES
  6631
  6632 				; --- RepeatUntilProlog
  6633 2DA9			l_108E
  6634
  6635 				; optimize FAIL ('CHECKKEYANDSTICK', locations.pas), line = 232
  6636
  6637 2DA9 20 54 1C			jsr CHECKKEYANDSTICK
  6638 2DAC AD F1 A4			lda CHECKKEYANDSTICK.RESULT
  6639 2DAF 8D C5 A7			sta TMPCH
  6640
  6641 				; optimize OK (locations.pas), line = 233
  6642
  6643 2DB2 CD C4 A7			cmp CH
  6644 2DB5 F0 F2			jeq l_108E
  6645
  6646 				; optimize OK (locations.pas), line = 235
  6647
  6648 2DB7 AD C4 A7			lda CH
  6649 2DBA C9 0C			cmp #$0C
  6650 2DBC D0 0A			jne l_10B3
  6651
  6652 				; optimize OK (locations.pas), line = 236
  6653
  6654 2DBE AC 91 A7			ldy CHOICE
  6655 2DC1 C8				iny
  6656 2DC2 8C 8F A7			sty RESULT
  6657 2DC5 4C 09 2E			jmp @exit
  6658 2DC8			l_10B3
  6659
  6660 				; optimize OK (locations.pas), line = 240
  6661
  6662 2DC8 AD C4 A7			lda CH
  6663 2DCB C9 0E			cmp #$0E
  6664 2DCD D0 08			jne l_10D2
  6665
  6666 				; optimize OK (locations.pas), line = 242
  6667
  6668 2DCF AD 91 A7			lda CHOICE
  6669 2DD2 F0 03			jeq l_10E5
  6670 2DD4 CE 91 A7			dec CHOICE
  6671 2DD7			l_10E5
  6672 2DD7			l_10D2
  6673
  6674 				; optimize OK (locations.pas), line = 245
  6675
  6676 2DD7 AD C4 A7			lda CH
  6677 2DDA C9 0F			cmp #$0F
  6678 2DDC D0 1A			jne l_1106
  6679
  6680 				; optimize OK (locations.pas), line = 247
  6681
  6682 2DDE AD 91 A7			lda CHOICE
  6683 2DE1 18 69 01			add #$01
  6684 2DE4 85 9D			sta :STACKORIGIN+9
  6685 2DE6 A9 00			lda #$00
  6686 2DE8 69 00			adc #$00
  6687 2DEA C9 00			cmp #$00
  6688 2DEC D0 05			bne @+
  6689 2DEE A5 9D			lda :STACKORIGIN+9
  6690 2DF0 CD C3 A7			cmp NOPT
  6691 				@
  6692 2DF3 B0 03			jcs l_111F
  6693 2DF5 EE 91 A7			inc CHOICE
  6694 2DF8			l_111F
  6695 2DF8			l_1106
  6696
  6697 				; optimize OK (locations.pas), line = 276
  6698
  6699 2DF8 AD C4 A7			lda CH
  6700 2DFB C9 0C			cmp #$0C
  6701 2DFD F0 03 4C 57 2D		jne l_1051
  6702
  6703 				; optimize OK (locations.pas), line = 278
  6704
  6705 2E02 AC 91 A7			ldy CHOICE
  6706 2E05 C8				iny
  6707 2E06 8C 8F A7			sty RESULT
  6708 2E09			@exit
  6709
  6710 				; ------------------------------------------------------------
  6711
  6712 = A78E			L	= DATAORIGIN+$0B38
  6713 = A78F			RESULT	= DATAORIGIN+$0B39
  6714 = A790			I	= DATAORIGIN+$0B3A
  6715 = A791			CHOICE	= DATAORIGIN+$0B3B
  6716 = A792			adr.TMPS	= [DATAORIGIN+$0B3C] .array [41]
  6717 2E09			.var TMPS	= adr.TMPS .word
  6718 = A7BB			adr.NPOS	= [DATAORIGIN+$0B65] .array [7]
  6719 2E09			.var NPOS	= adr.NPOS .word
  6720 = A7C2			J	= DATAORIGIN+$0B6C
  6721 = A7C3			NOPT	= DATAORIGIN+$0B6D
  6722 = A7C4			CH	= DATAORIGIN+$0B6E
  6723 = A7C5			TMPCH	= DATAORIGIN+$0B6F
  6724
  6725 = A78E			@VarData	= L
  6726 = 0037			@VarDataSize	= 55
  6727
  6728 2E09 60				rts						; ret
  6729 = 2E0A 92 A7		TMPS
  6729 = 2E0C BB A7		NPOS
  6729 				.endl
  6730
  6731 2E0E			.local	NEXTPLAYER					; PROCEDURE
  6732
  6733 				; optimize OK (player.pas), line = 5
  6734
  6735 2E0E EE 8A CD			inc CURRENTPLAYER
  6736
  6737 				; optimize OK (player.pas), line = 6
  6738
  6739 2E11 AD 8A CD			lda CURRENTPLAYER
  6740 2E14 18 69 01			add #$01
  6741 2E17 85 9D			sta :STACKORIGIN+9
  6742 2E19 A9 00			lda #$00
  6743 2E1B 69 00			adc #$00
  6744 2E1D C9 00			cmp #$00
  6745 2E1F D0 05			bne @+
  6746 2E21 A5 9D			lda :STACKORIGIN+9
  6747 2E23 CD 20 C9			cmp NPLAYERS
  6748 				@
  6749 2E26 90 1E			jcc l_116B
  6750 2E28 F0 1C			jeq l_116B
  6751
  6752 				; optimize OK (player.pas), line = 8
  6753
  6754 2E2A AD 8A CD			lda CURRENTPLAYER
  6755 2E2D 38 ED 20 C9			sub NPLAYERS
  6756 2E31 8D 8A CD			sta CURRENTPLAYER
  6757
  6758 				; optimize OK (player.pas), line = 9
  6759
  6760 2E34 EE C2 CA			inc CURRENTMONTH
  6761
  6762 				; optimize OK (player.pas), line = 10
  6763
  6764 2E37 AD C2 CA			lda CURRENTMONTH
  6765 2E3A C9 0D			cmp #$0D
  6766 2E3C 90 08			jcc l_1194
  6767
  6768 				; optimize OK (player.pas), line = 11
  6769
  6770 2E3E EE C3 CA			inc CURRENTYEAR
  6771
  6772 				; optimize OK (player.pas), line = 12
  6773
  6774 2E41 A9 01			lda #$01
  6775 2E43 8D C2 CA			sta CURRENTMONTH
  6776 2E46			l_1194
  6777 2E46			l_116B
  6778
  6779 2E46			@exit
  6780 					.ifdef @new
  6781 					lda <@VarData
  6782 					sta :ztmp
  6783 					lda >@VarData
  6784 					ldy #@VarDataSize-1
  6785 					jmp @FreeMem
  6786 					els
  6787 2E46 60				rts						; ret
  6788 					eif
  6789 				.endl
  6790
  6791 2E47			.local	INITPLAYERS					; PROCEDURE
  6792
  6793 				; optimize OK (player.pas), line = 23
  6794
  6795 2E47 A9 00			lda #$00
  6796 2E49 A8				tay
  6797
  6798 2E4A			l_11B4
  6799 				; --- ForToDoCondition
  6800 2E4A C0 04			cpy #$04
  6801 2E4C B0 12			jcs l_11C2
  6802
  6803 				; optimize OK (player.pas), line = 25
  6804
  6805 2E4E A9 03			lda #$03
  6806 2E50 99 54 C9			sta adr.PLMAPPOSX,y
  6807
  6808 				; optimize OK (player.pas), line = 26
  6809
  6810 2E53 A9 02			lda #$02
  6811 2E55 99 58 C9			sta adr.PLMAPPOSY,y
  6812
  6813 				; optimize OK (player.pas), line = 27
  6814
  6815 2E58 A9 00			lda #$00
  6816 2E5A 99 5C C9			sta adr.PLCURRENTMAP,y
  6817
  6818 				; --- ForToDoEpilog
  6819 2E5D C8				iny
  6820 2E5E D0 EA			jne l_11B4
  6821 2E60			l_11C2
  6822 2E60 8C C7 A7			sty K
  6823
  6824 				; ------------------------------------------------------------
  6825
  6826 = A7C7			K	= DATAORIGIN+$0B71
  6827
  6828 = A7C7			@VarData	= K
  6829 = 0001			@VarDataSize	= 1
  6830
  6831 2E63			@exit
  6832 					.ifdef @new
  6833 					lda <@VarData
  6834 					sta :ztmp
  6835 					lda >@VarData
  6836 					ldy #@VarDataSize-1
  6837 					jmp @FreeMem
  6838 					els
  6839 2E63 60				rts						; ret
  6840 					eif
  6841 				.endl
  6842
  6843 2E64			.local	PLAYERSTURN					; FUNCTION
  6844
  6845 				; optimize FAIL ('B_CRT.CRT_CLEAR.@00', player.pas), line = 46
  6846
  6847 2E64 20 84 17			jsr B_CRT.CRT_CLEAR.@00
  6848
  6849 				; optimize OK (player.pas), line = 47
  6850
  6851 2E67 A9 04			lda #$04
  6852 2E69 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
  6853 2E6C A9 01			lda #$01
  6854 2E6E 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
  6855 2E71 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
  6856
  6857 				; optimize OK (player.pas), line = 48
  6858
  6859 2E74 AD 8A CD			lda CURRENTPLAYER
  6860 2E77 0A				asl @
  6861 2E78 0A				asl @
  6862 2E79 0A				asl @
  6863 2E7A 8D CA A7			sta Z
  6864
  6865 				; optimize FAIL ('B_CRT.CRT_WRITECENTERED.@02018986000001000180000', player.pas), line = 49
  6866
  6867 2E7D E8				inx
  6868 2E7E AD CA A7			lda Z
  6869 2E81 0A				asl @
  6870 2E82 A8				tay
  6871 2E83 B9 15 A4			lda adr.GANGSTERNAMES,y
  6872 2E86 85 82			sta :bp2
  6873 2E88 B9 16 A4			lda adr.GANGSTERNAMES+1,y
  6874 2E8B 85 83			sta :bp2+1
  6875 2E8D A0 00			ldy #$00
  6876 2E8F B1 82 99 9D A1 C8 + 	mva:rne (:bp2),y B_CRT.CRT_WRITECENTERED.@02018986000001000180000.adr.S,y+
  6877 2E97 E8				inx
  6878 2E98 A9 05 95 94			mva #$05 :STACKORIGIN,x
  6879 2E9C 20 DF 19			jsr B_CRT.CRT_WRITECENTERED.@02018986000001000180000
  6880
  6881 				; optimize OK (player.pas), line = 50
  6882
  6883 2E9F A9 06			lda #$06
  6884 2EA1 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
  6885 2EA4 A9 02			lda #$02
  6886 2EA6 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
  6887 2EA9 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
  6888
  6889 				; optimize OK (player.pas), line = 53
  6890
  6891 2EAC A9 00			lda #$00
  6892 2EAE 8D 14 9E			sta RMT.TRMT.INIT.A
  6893 2EB1 AD 1F 9A			lda MSX
  6894 2EB4 AC 20 9A			ldy MSX+1
  6895 2EB7 20 05 15			jsr RMT.TRMT.INIT
  6896
  6897 				; optimize FAIL ('RMT.TRMT.PLAY', player.pas), line = 54
  6898
  6899 2EBA AD 1F 9A			lda MSX
  6900 2EBD AC 20 9A			ldy MSX+1
  6901 2EC0 20 41 15			jsr RMT.TRMT.PLAY
  6902
  6903 				; optimize OK (player.pas), line = 55
  6904
  6905 2EC3 A9 01			lda #$01
  6906 2EC5 8D 11 CA			sta PLAYMUSIC
  6907
  6908 				; optimize OK (player.pas), line = 56
  6909
  6910 2EC8 A9 78			lda #$78
  6911 2ECA 20 7C 27			jsr WAITFRAMES
  6912
  6913 				; optimize FAIL ('RMT.TRMT.STOP', player.pas), line = 57
  6914
  6915 2ECD AD 1F 9A			lda MSX
  6916 2ED0 AC 20 9A			ldy MSX+1
  6917 2ED3 20 81 15			jsr RMT.TRMT.STOP
  6918
  6919 				; optimize OK (player.pas), line = 58
  6920
  6921 2ED6 A9 00			lda #$00
  6922 2ED8 8D 11 CA			sta PLAYMUSIC
  6923
  6924 				; optimize OK (player.pas), line = 69
  6925
  6926 2EDB 8D C8 A7			sta RESULT
  6927
  6928 				; optimize OK (player.pas), line = 70
  6929
  6930 2EDE AD 8A CD			lda CURRENTPLAYER
  6931 2EE1 D0 6C			jne l_121C
  6932
  6933 				; optimize OK (player.pas), line = 72
  6934
  6935 2EE3 A9 08			lda #$08
  6936 2EE5 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
  6937 2EE8 A9 28			lda #$28
  6938 2EEA 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
  6939 2EED 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
  6940
  6941 				; optimize OK (player.pas), line = 73
  6942
  6943 2EF0 A9 09			lda #$09
  6944 2EF2 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
  6945 2EF5 A9 29			lda #$29
  6946 2EF7 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
  6947 2EFA 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
  6948
  6949 				; optimize FAIL ('READKEYANDSTICK', player.pas), line = 74
  6950
  6951 2EFD 20 DD 1B			jsr READKEYANDSTICK
  6952 2F00 AD EF A4			lda READKEYANDSTICK.RESULT
  6953 2F03 8D C9 A7			sta CH
  6954
  6955 				; optimize OK (player.pas), line = 75
  6956
  6957 2F06 C9 1E			cmp #$1E
  6958 2F08 D0 15			jne l_1239
  6959
  6960 				; optimize OK (player.pas), line = 76
  6961
  6962 2F0A A9 1C			lda #$1C
  6963 2F0C 20 1F 29			jsr LOADLOCATION
  6964
  6965 				; optimize FAIL ('LOADGAME', player.pas), line = 77
  6966
  6967 2F0F 20 7E 25			jsr LOADGAME
  6968
  6969 				; optimize FAIL ('WAITFORKEY', player.pas), line = 78
  6970
  6971 2F12 20 4A 1E			jsr WAITFORKEY
  6972
  6973 				; optimize OK (player.pas), line = 79
  6974
  6975 2F15 A9 13			lda #$13
  6976 2F17 20 1F 29			jsr LOADLOCATION
  6977
  6978 				; optimize OK (player.pas), line = 80
  6979
  6980 2F1A A9 1D			lda #$1D
  6981 2F1C 8D C8 A7			sta RESULT
  6982 2F1F			l_1239
  6983
  6984 				; optimize OK (player.pas), line = 82
  6985
  6986 2F1F AD C9 A7			lda CH
  6987 2F22 C9 1F			cmp #$1F
  6988 2F24 D0 26			jne l_1258
  6989
  6990 				; optimize OK (player.pas), line = 83
  6991
  6992 2F26 A9 1C			lda #$1C
  6993 2F28 20 1F 29			jsr LOADLOCATION
  6994
  6995 				; optimize FAIL ('BLACKCONSOLE', player.pas), line = 84
  6996
  6997 2F2B 20 8E 27			jsr BLACKCONSOLE
  6998
  6999 				; optimize FAIL ('SAVEGAME', player.pas), line = 85
  7000
  7001 2F2E 20 F9 24			jsr SAVEGAME
  7002
  7003 				; optimize FAIL ('ENABLECONSOLE', player.pas), line = 86
  7004
  7005 2F31 20 B0 27			jsr ENABLECONSOLE
  7006
  7007 				; optimize FAIL ('B_CRT.CRT_CLEAR.@00', player.pas), line = 87
  7008
  7009 2F34 20 84 17			jsr B_CRT.CRT_CLEAR.@00
  7010
  7011 				; optimize OK (player.pas), line = 88
  7012
  7013 2F37 A9 01			lda #$01
  7014 2F39 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
  7015 2F3C A9 13			lda #$13
  7016 2F3E 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
  7017 2F41 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
  7018
  7019 				; optimize FAIL ('WAITFORKEY', player.pas), line = 89
  7020
  7021 2F44 20 4A 1E			jsr WAITFORKEY
  7022
  7023 				; optimize OK (player.pas), line = 90
  7024
  7025 2F47 A9 13			lda #$13
  7026 2F49 20 1F 29			jsr LOADLOCATION
  7027 2F4C			l_1258
  7028 2F4C 4C 52 2F			jmp l_1270
  7029 2F4F			l_121C
  7030
  7031 				; optimize FAIL ('WAITFORKEY', player.pas), line = 95
  7032
  7033 2F4F 20 4A 1E			jsr WAITFORKEY
  7034 2F52			l_1270
  7035
  7036 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', player.pas), line = 97
  7037
  7038 2F52 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
  7039
  7040 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', player.pas), line = 98
  7041
  7042 2F55 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
  7043 2F58			@exit
  7044
  7045 				; ------------------------------------------------------------
  7046
  7047 = A7C8			RESULT	= DATAORIGIN+$0B72
  7048 = A7C9			CH	= DATAORIGIN+$0B73
  7049 = A7CA			Z	= DATAORIGIN+$0B74
  7050
  7051 = A7C9			@VarData	= CH
  7052 = 0002			@VarDataSize	= 2
  7053
  7054 2F58 60				rts						; ret
  7055 				.endl
  7056
  7057 2F59			.local	PLACECURRENTPLAYER				; PROCEDURE
  7058
  7059 				; optimize OK (player.pas), line = 105
  7060
  7061 2F59 AC 8A CD			ldy CURRENTPLAYER
  7062 2F5C B9 54 C9			lda adr.PLMAPPOSX,y
  7063 2F5F 8D B0 EA			sta MAPPOS_X
  7064
  7065 				; optimize OK (player.pas), line = 106
  7066
  7067 2F62 B9 58 C9			lda adr.PLMAPPOSY,y
  7068 2F65 8D B1 EA			sta MAPPOS_Y
  7069
  7070 				; optimize OK (player.pas), line = 107
  7071
  7072 2F68 A9 00			lda #$00
  7073 2F6A 85 AE			sta :STACKORIGIN+STACKWIDTH+10
  7074 2F6C AD B0 EA			lda MAPPOS_X
  7075 2F6F 0A				asl @
  7076 2F70 26 AE			rol :STACKORIGIN+STACKWIDTH+10
  7077 2F72 0A				asl @
  7078 2F73 0A				asl @
  7079 2F74 18 69 31			add #$31
  7080 2F77 8D AE EA			sta PLAYERPOS_X
  7081
  7082 				; optimize OK (player.pas), line = 108
  7083
  7084 2F7A A9 00			lda #$00
  7085 2F7C 85 AE			sta :STACKORIGIN+STACKWIDTH+10
  7086 2F7E AD B1 EA			lda MAPPOS_Y
  7087 2F81 0A				asl @
  7088 2F82 26 AE			rol :STACKORIGIN+STACKWIDTH+10
  7089 2F84 0A				asl @
  7090 2F85 0A				asl @
  7091 2F86 18 69 24			add #$24
  7092 2F89 8D AF EA			sta PLAYERPOS_Y
  7093
  7094 				; optimize OK (player.pas), line = 109
  7095
  7096 2F8C A9 01			lda #$01
  7097 2F8E 8D F8 EA			sta SPRITEMOVEDIR
  7098
  7099 				; optimize OK (player.pas), line = 110
  7100
  7101 2F91 B9 5C C9			lda adr.PLCURRENTMAP,y
  7102 2F94 8D 90 CD			sta CURRENTMAP
  7103
  7104 2F97			@exit
  7105 					.ifdef @new
  7106 					lda <@VarData
  7107 					sta :ztmp
  7108 					lda >@VarData
  7109 					ldy #@VarDataSize-1
  7110 					jmp @FreeMem
  7111 					els
  7112 2F97 60				rts						; ret
  7113 					eif
  7114 				.endl
  7115
  7116 2F98			.local	ADDMONEY					; PROCEDURE
  7117
  7118 				; optimize OK (helpers_game.pas), line = 7
  7119
  7120 2F98 AD 8A CD			lda CURRENTPLAYER
  7121 2F9B 0A				asl @
  7122 2F9C 0A				asl @
  7123 2F9D A8				tay
  7124 2F9E B9 30 C9			lda adr.PLMONEY,y
  7125 2FA1 18 6D CB A7			add AMOUNT
  7126 2FA5 99 30 C9			sta adr.PLMONEY,y
  7127 2FA8 B9 31 C9			lda adr.PLMONEY+1,y
  7128 2FAB 6D CC A7			adc AMOUNT+1
  7129 2FAE 99 31 C9			sta adr.PLMONEY+1,y
  7130 2FB1 B9 32 C9			lda adr.PLMONEY+2,y
  7131 2FB4 69 00			adc #$00
  7132 2FB6 99 32 C9			sta adr.PLMONEY+2,y
  7133 2FB9 B9 33 C9			lda adr.PLMONEY+3,y
  7134 2FBC 69 00			adc #$00
  7135 2FBE 99 33 C9			sta adr.PLMONEY+3,y
  7136
  7137 				; ------------------------------------------------------------
  7138
  7139 = A7CB			AMOUNT	= DATAORIGIN+$0B75
  7140
  7141 = A7CB			@VarData	= AMOUNT
  7142 = 0002			@VarDataSize	= 2
  7143
  7144 2FC1			@exit
  7145 					.ifdef @new
  7146 					lda <@VarData
  7147 					sta :ztmp
  7148 					lda >@VarData
  7149 					ldy #@VarDataSize-1
  7150 					jmp @FreeMem
  7151 					els
  7152 2FC1 60				rts						; ret
  7153 					eif
  7154 				.endl
  7155
  7156 2FC2			.local	SUBMONEY					; PROCEDURE
  7157
  7158 				; optimize OK (helpers_game.pas), line = 13
  7159
  7160 2FC2 AD 8A CD			lda CURRENTPLAYER
  7161 2FC5 0A				asl @
  7162 2FC6 0A				asl @
  7163 2FC7 A8				tay
  7164 2FC8 B9 30 C9			lda adr.PLMONEY,y
  7165 2FCB 38 ED CD A7			sub AMOUNT
  7166 2FCF 99 30 C9			sta adr.PLMONEY,y
  7167 2FD2 B9 31 C9			lda adr.PLMONEY+1,y
  7168 2FD5 ED CE A7			sbc AMOUNT+1
  7169 2FD8 99 31 C9			sta adr.PLMONEY+1,y
  7170 2FDB B9 32 C9			lda adr.PLMONEY+2,y
  7171 2FDE E9 00			sbc #$00
  7172 2FE0 99 32 C9			sta adr.PLMONEY+2,y
  7173 2FE3 B9 33 C9			lda adr.PLMONEY+3,y
  7174 2FE6 E9 00			sbc #$00
  7175 2FE8 99 33 C9			sta adr.PLMONEY+3,y
  7176
  7177 				; ------------------------------------------------------------
  7178
  7179 = A7CD			AMOUNT	= DATAORIGIN+$0B77
  7180
  7181 = A7CD			@VarData	= AMOUNT
  7182 = 0002			@VarDataSize	= 2
  7183
  7184 2FEB			@exit
  7185 					.ifdef @new
  7186 					lda <@VarData
  7187 					sta :ztmp
  7188 					lda >@VarData
  7189 					ldy #@VarDataSize-1
  7190 					jmp @FreeMem
  7191 					els
  7192 2FEB 60				rts						; ret
  7193 					eif
  7194 				.endl
  7195
  7196 2FEC			.local	ADDPOINTS					; PROCEDURE
  7197 2FEC 8D CF A7			sta PT
  7198
  7199 				; optimize OK (helpers_game.pas), line = 19
  7200
  7201 2FEF AC 8A CD			ldy CURRENTPLAYER
  7202 2FF2 B9 A0 C9			lda adr.PLNEWPOINTS,y
  7203 2FF5 18 6D CF A7			add PT
  7204 2FF9 99 A0 C9			sta adr.PLNEWPOINTS,y
  7205
  7206 				; ------------------------------------------------------------
  7207
  7208 = A7CF			PT	= DATAORIGIN+$0B79
  7209
  7210 = A7CF			@VarData	= PT
  7211 = 0001			@VarDataSize	= 1
  7212
  7213 2FFC			@exit
  7214 					.ifdef @new
  7215 					lda <@VarData
  7216 					sta :ztmp
  7217 					lda >@VarData
  7218 					ldy #@VarDataSize-1
  7219 					jmp @FreeMem
  7220 					els
  7221 2FFC 60				rts						; ret
  7222 					eif
  7223 				.endl
  7224
  7225 2FFD			.local	REMOVEPOINTS					; PROCEDURE
  7226 2FFD 8D D0 A7			sta PT
  7227
  7228 				; optimize OK (helpers_game.pas), line = 25
  7229
  7230 3000 AC 8A CD			ldy CURRENTPLAYER
  7231 3003 B9 A0 C9			lda adr.PLNEWPOINTS,y
  7232 3006 85 9D			sta :STACKORIGIN+9
  7233 3008 A0 00			ldy #$00
  7234 300A A5 9D			lda :STACKORIGIN+9
  7235 300C 10 01			spl
  7236 300E 88				dey
  7237 300F 84 AD			sty :STACKORIGIN+STACKWIDTH+9
  7238 3011 CD D0 A7			cmp PT
  7239 3014 A5 AD			lda :STACKORIGIN+STACKWIDTH+9
  7240 3016 E9 00			sbc #$00
  7241 3018 50 02			svc
  7242 301A 49 80			eor #$80
  7243 301C 10 0B			jpl l_1309
  7244
  7245 				; optimize OK (helpers_game.pas), line = 26
  7246
  7247 301E AC 8A CD			ldy CURRENTPLAYER
  7248 3021 A9 00			lda #$00
  7249 3023 99 A0 C9			sta adr.PLNEWPOINTS,y
  7250 3026 4C 36 30			jmp @exit
  7251 3029			l_1309
  7252
  7253 				; optimize OK (helpers_game.pas), line = 29
  7254
  7255 3029 AC 8A CD			ldy CURRENTPLAYER
  7256 302C B9 A0 C9			lda adr.PLNEWPOINTS,y
  7257 302F 38 ED D0 A7			sub PT
  7258 3033 99 A0 C9			sta adr.PLNEWPOINTS,y
  7259
  7260 				; ------------------------------------------------------------
  7261
  7262 = A7D0			PT	= DATAORIGIN+$0B7A
  7263
  7264 = A7D0			@VarData	= PT
  7265 = 0001			@VarDataSize	= 1
  7266
  7267 3036			@exit
  7268 					.ifdef @new
  7269 					lda <@VarData
  7270 					sta :ztmp
  7271 					lda >@VarData
  7272 					ldy #@VarDataSize-1
  7273 					jmp @FreeMem
  7274 					els
  7275 3036 60				rts						; ret
  7276 					eif
  7277 				.endl
  7278
  7279 3037			.local	CRACKEDBANK					; PROCEDURE
  7280
  7281 				; optimize OK (helpers_game.pas), line = 37
  7282
  7283 3037 A9 01			lda #$01
  7284 3039 20 1F 29			jsr LOADLOCATION
  7285
  7286 				; optimize OK (helpers_game.pas), line = 39
  7287
  7288 303C A9 AF			lda #$AF
  7289 303E 20 AD 13			jsr SYSTEM.RANDOM.@010180000
  7290 3041 E8				inx
  7291 3042 AD 62 9C 95 94		mva SYSTEM.RANDOM.@010180000.RESULT :STACKORIGIN,x
  7292 3047 E8				inx
  7293 3048 A9 04 95 94			mva #$04 :STACKORIGIN,x
  7294 304C 20 10 0E			jsr @shlEAX_CL.BYTE
  7295 304F CA				dex
  7296 3050 B5 94			lda :STACKORIGIN,x
  7297 3052 8D D3 A7			sta M
  7298 3055 B5 A4			lda :STACKORIGIN+STACKWIDTH,x
  7299 3057 8D D4 A7			sta M+1
  7300 305A CA				dex
  7301
  7302 				; optimize OK (helpers_game.pas), line = 40
  7303
  7304 305B AD D3 A7			lda M
  7305 305E 18 69 A0			add #$A0
  7306 3061 85 9D			sta :STACKORIGIN+9
  7307 3063 AD D4 A7			lda M+1
  7308 3066 69 0F			adc #$0F
  7309 3068 85 AD			sta :STACKORIGIN+STACKWIDTH+9
  7310 306A A5 9D			lda :STACKORIGIN+9
  7311 306C 18 6D D1 A7			add P
  7312 3070 8D D3 A7			sta M
  7313 3073 A5 AD			lda :STACKORIGIN+STACKWIDTH+9
  7314 3075 6D D2 A7			adc P+1
  7315 3078 8D D4 A7			sta M+1
  7316
  7317 				; optimize FAIL ('ENABLECONSOLE', helpers_game.pas), line = 43
  7318
  7319 307B 20 B0 27			jsr ENABLECONSOLE
  7320
  7321 				; optimize FAIL ('SHOWLOCATIONHEADER', helpers_game.pas), line = 44
  7322
  7323 307E 20 7A 28			jsr SHOWLOCATIONHEADER
  7324
  7325 				; optimize OK (helpers_game.pas), line = 45
  7326
  7327 3081 A9 06			lda #$06
  7328 3083 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
  7329 3086 A9 0A			lda #$0A
  7330 3088 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
  7331 308B 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
  7332
  7333 				; optimize OK (helpers_game.pas), line = 46
  7334
  7335 308E A9 07			lda #$07
  7336 3090 8D D5 A7			sta K
  7337
  7338 				; optimize OK (helpers_game.pas), line = 49
  7339
  7340 3093 AD D2 A7			lda P+1
  7341 3096 D0 05			bne @+
  7342 3098 AD D1 A7			lda P
  7343 309B C9 01			cmp #$01
  7344 				@
  7345 309D D0 31			jne l_135C
  7346
  7347 				; optimize OK (helpers_game.pas), line = 52
  7348
  7349 309F AD 0B CA			lda TMPOPPORTUNITY
  7350 30A2 F0 2C			jeq l_137B
  7351 30A4 AD 3D A7			lda CURRENTSUBLOCATION
  7352 30A7 D0 27			jne l_137B
  7353
  7354 				; optimize OK (helpers_game.pas), line = 54
  7355
  7356 30A9 A9 07			lda #$07
  7357 30AB 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
  7358 30AE A9 0F			lda #$0F
  7359 30B0 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
  7360 30B3 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
  7361
  7362 				; optimize OK (helpers_game.pas), line = 55
  7363
  7364 30B6 AD D5 A7			lda K
  7365 30B9 18 69 02			add #$02
  7366 30BC 8D D5 A7			sta K
  7367
  7368 				; optimize OK (helpers_game.pas), line = 56
  7369
  7370 30BF AD D3 A7			lda M
  7371 30C2 18 69 4C			add #$4C
  7372 30C5 8D D3 A7			sta M
  7373 30C8 AD D4 A7			lda M+1
  7374 30CB 69 1D			adc #$1D
  7375 30CD 8D D4 A7			sta M+1
  7376 30D0			l_137B
  7377 30D0			l_135C
  7378
  7379 				; optimize OK (helpers_game.pas), line = 60
  7380
  7381 30D0 AD D5 A7			lda K
  7382 30D3 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
  7383 30D6 A9 0E			lda #$0E
  7384 30D8 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
  7385 30DB 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
  7386
  7387 				; optimize OK (helpers_game.pas), line = 61
  7388
  7389 30DE AD D5 A7			lda K
  7390 30E1 18 69 01			add #$01
  7391 30E4 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
  7392 30E7 A9 11			lda #$11
  7393 30E9 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
  7394 30EC 20 AC 17			jsr B_CRT.CRT_GOTOXY
  7395
  7396 				; optimize OK (helpers_game.pas), line = 62
  7397
  7398 30EF AD D3 A7			lda M
  7399 30F2 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
  7400 30F5 AD D4 A7			lda M+1
  7401 30F8 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
  7402 30FB 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
  7403
  7404 				; optimize FAIL ('CRT_WRITELN', helpers_game.pas), line = 63
  7405
  7406 30FE E8				inx
  7407 30FF A9 73 95 94			mva #$73 :STACKORIGIN,x
  7408 3103 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
  7409 3107 20 A9 1E			jsr CRT_WRITELN
  7410
  7411 				; optimize FAIL ('WAITFORKEY', helpers_game.pas), line = 64
  7412
  7413 310A 20 4A 1E			jsr WAITFORKEY
  7414
  7415 				; optimize OK (helpers_game.pas), line = 65
  7416
  7417 310D AD D3 A7			lda M
  7418 3110 8D CB A7			sta ADDMONEY.AMOUNT
  7419 3113 AD D4 A7			lda M+1
  7420 3116 8D CC A7			sta ADDMONEY.AMOUNT+1
  7421 3119 20 98 2F			jsr ADDMONEY
  7422
  7423 				; optimize OK (helpers_game.pas), line = 66
  7424
  7425 311C A9 04			lda #$04
  7426 311E 20 EC 2F			jsr ADDPOINTS
  7427
  7428 				; ------------------------------------------------------------
  7429
  7430 = A7D1			P	= DATAORIGIN+$0B7B
  7431 = A7D3			M	= DATAORIGIN+$0B7D
  7432 = A7D5			K	= DATAORIGIN+$0B7F
  7433
  7434 = A7D1			@VarData	= P
  7435 = 0005			@VarDataSize	= 5
  7436
  7437 3121			@exit
  7438 					.ifdef @new
  7439 					lda <@VarData
  7440 					sta :ztmp
  7441 					lda >@VarData
  7442 					ldy #@VarDataSize-1
  7443 					jmp @FreeMem
  7444 					els
  7445 3121 60				rts						; ret
  7446 					eif
  7447 				.endl
  7448
  7449 3122			.local	PREPAREFIGHTAGAINSTPOLICE			; PROCEDURE
  7450
  7451 				; optimize OK (helpers_game.pas), line = 76
  7452
  7453 3122 AD AC A3			lda adr.FP_GANG+$02
  7454 3125 85 8C			sta @move.dst
  7455 3127 AD AD A3			lda adr.FP_GANG+1+$02
  7456 312A 85 8D			sta @move.dst+1
  7457 312C AD 21 9C			lda FIGHT_POLICE_STRING_1
  7458 312F 85 88			sta @move.src
  7459 3131 AD 22 9C			lda FIGHT_POLICE_STRING_1+1
  7460 3134 85 89			sta @move.src+1
  7461 3136 A0 00			ldy #$00
  7462 3138 B1 88			lda (@move.src),y
  7463 313A 18 69 01			add #1
  7464 313D 85 84			sta @move.cnt
  7465 313F 90 01			scc
  7466 3141 C8				iny
  7467 3142 84 85			sty @move.cnt+1
  7468 3144 20 D7 0E			jsr @move
  7469
  7470 				; optimize OK (helpers_game.pas), line = 77
  7471
  7472 3147 A9 01			lda #$01
  7473 3149 8D 02 E4			sta adr.FP_AI+$01
  7474
  7475 				; optimize OK (helpers_game.pas), line = 78
  7476
  7477 314C AC 8A CD			ldy CURRENTPLAYER
  7478 314F B9 98 C9			lda adr.PLRANK,y
  7479 3152 C9 05			cmp #$05
  7480 3154 90 25			jcc l_13D3
  7481
  7482 				; optimize FAIL (2, helpers_game.pas), line = 79
  7483
  7484 3156 E8				inx
  7485 3157 A9 01 95 94			mva #$01 :STACKORIGIN,x
  7486 315B A9 00 95 A4			mva #$00 :STACKORIGIN+STACKWIDTH,x
  7487 315F E8				inx
  7488 3160 A9 05 95 94			mva #$05 :STACKORIGIN,x
  7489 3164 B9 98 C9			lda adr.PLRANK,y
  7490 3167 4A				lsr @
  7491 3168 20 AD 13			jsr SYSTEM.RANDOM.@010180000
  7492 316B B5 94			lda :STACKORIGIN,x
  7493 316D 18 6D 62 9C			add SYSTEM.RANDOM.@010180000.RESULT
  7494 3171 B4 93			ldy :STACKORIGIN-1,x
  7495 3173 99 03 E4			sta adr.FP_N,y
  7496 3176 CA				dex
  7497 3177 CA				dex
  7498 3178 4C 80 31			jmp l_13F0
  7499 317B			l_13D3
  7500
  7501 				; optimize OK (helpers_game.pas), line = 81
  7502
  7503 317B A9 05			lda #$05
  7504 317D 8D 04 E4			sta adr.FP_N+$01
  7505 3180			l_13F0
  7506
  7507 				; optimize OK (helpers_game.pas), line = 82
  7508
  7509 3180 A9 00			lda #$00
  7510 3182 8D D6 A7			sta K
  7511 3185 AC 04 E4			ldy adr.FP_N+$01
  7512 3188 88				dey
  7513 3189 8C 8D 31			sty @FORTMP_1402_0
  7514
  7515 318C			l_1405
  7516 				; --- ForToDoCondition
  7517 318C A9 00			lda @FORTMP_1402_0::#$00
  7518 318E CD D6 A7			cmp K
  7519 3191 B0 03 4C 3A 32		jcc l_1413
  7520
  7521 				; optimize OK (helpers_game.pas), line = 84
  7522
  7523 3196 A9 02			lda #$02
  7524 3198 20 AD 13			jsr SYSTEM.RANDOM.@010180000
  7525 319B AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
  7526 319E 8D F0 A3			sta TMP
  7527
  7528 				; optimize OK (helpers_game.pas), line = 85
  7529
  7530 31A1 AC D6 A7			ldy K
  7531 31A4 AD F0 A3			lda TMP
  7532 31A7 99 55 E5			sta adr.FP_SEX+$10,y
  7533
  7534 				; optimize OK (helpers_game.pas), line = 86
  7535
  7536 31AA 98				tya
  7537 31AB 0A				asl @
  7538 31AC A8				tay
  7539 31AD B9 CE A3			lda adr.FP_NAME+$20,y
  7540 31B0 85 8C			sta @move.dst
  7541 31B2 B9 CF A3			lda adr.FP_NAME+1+$20,y
  7542 31B5 85 8D			sta @move.dst+1
  7543 31B7 AD 23 9C			lda FIGHT_POLICE_STRING_2
  7544 31BA 85 88			sta @move.src
  7545 31BC AD 24 9C			lda FIGHT_POLICE_STRING_2+1
  7546 31BF 85 89			sta @move.src+1
  7547 31C1 A0 00			ldy #$00
  7548 31C3 B1 88			lda (@move.src),y
  7549 31C5 18 69 01			add #1
  7550 31C8 85 84			sta @move.cnt
  7551 31CA 90 01			scc
  7552 31CC C8				iny
  7553 31CD 84 85			sty @move.cnt+1
  7554 31CF 20 D7 0E			jsr @move
  7555
  7556 				; optimize OK (helpers_game.pas), line = 87
  7557
  7558 31D2 AC 8A CD			ldy CURRENTPLAYER
  7559 31D5 B9 98 C9			lda adr.PLRANK,y
  7560 31D8 A0 01			ldy #1
  7561 31DA C9 06			cmp #$06
  7562 31DC B0 01			bcs @+
  7563 31DE 88				dey
  7564 				@
  7565 31DF 84 9F			sty :STACKORIGIN+11
  7566 31E1 06 9F			asl :STACKORIGIN+11
  7567 31E3 A9 05			lda #$05
  7568 31E5 18 65 9F			add :STACKORIGIN+11
  7569 31E8 AC D6 A7			ldy K
  7570 31EB 99 55 E4			sta adr.FP_WEAPON+$10,y
  7571
  7572 				; optimize FAIL (2, helpers_game.pas), line = 88
  7573
  7574 31EE E8				inx
  7575 31EF E8				inx
  7576 31F0 A9 10			lda #$10
  7577 31F2 18 6D D6 A7			add K
  7578 31F6 95 93			sta :STACKORIGIN-1,x
  7579 31F8 A9 00			lda #$00
  7580 31FA 69 00			adc #$00
  7581 31FC 95 A3			sta :STACKORIGIN-1+STACKWIDTH,x
  7582 31FE A9 12 95 94			mva #$12 :STACKORIGIN,x
  7583 3202 E8				inx
  7584 3203 AC 8A CD			ldy CURRENTPLAYER
  7585 3206 B9 98 C9			lda adr.PLRANK,y
  7586 3209 95 94			sta :STACKORIGIN,x
  7587 320B E8				inx
  7588 320C A9 01 95 94			mva #$01 :STACKORIGIN,x
  7589 3210 20 10 0E			jsr @shlEAX_CL.BYTE
  7590 3213 CA				dex
  7591 3214 A9 00 95 A3			mva #$00 :STACKORIGIN-1+STACKWIDTH,x
  7592 3218 95 B3			sta :STACKORIGIN-1+STACKWIDTH*2,x
  7593 321A 95 C3			sta :STACKORIGIN-1+STACKWIDTH*3,x
  7594 321C 20 E6 0D			jsr addAL_CL
  7595 321F CA				dex
  7596 3220 A9 0A			lda #$0A
  7597 3222 20 AD 13			jsr SYSTEM.RANDOM.@010180000
  7598 3225 B5 94			lda :STACKORIGIN,x
  7599 3227 38 ED 62 9C			sub SYSTEM.RANDOM.@010180000.RESULT
  7600 322B B4 93			ldy :STACKORIGIN-1,x
  7601 322D 99 85 E4			sta adr.FP_ENERGY,y
  7602 3230 CA				dex
  7603 3231 CA				dex
  7604
  7605 				; --- ForToDoEpilog
  7606 3232 EE D6 A7			inc K
  7607 3235 F0 03 4C 8C 31		jne l_1405
  7608 323A			l_1413
  7609
  7610 				; ------------------------------------------------------------
  7611
  7612 = A7D6			K	= DATAORIGIN+$0B80
  7613
  7614 = A7D6			@VarData	= K
  7615 = 0001			@VarDataSize	= 1
  7616
  7617 323A			@exit
  7618 					.ifdef @new
  7619 					lda <@VarData
  7620 					sta :ztmp
  7621 					lda >@VarData
  7622 					ldy #@VarDataSize-1
  7623 					jmp @FreeMem
  7624 					els
  7625 323A 60				rts						; ret
  7626 					eif
  7627 				.endl
  7628
  7629 323B			.local	PAYMONEY					; FUNCTION
  7630
  7631 				; optimize OK (helpers_game.pas), line = 113
  7632
  7633 323B AD 8A CD			lda CURRENTPLAYER
  7634 323E 0A				asl @
  7635 323F 0A				asl @
  7636 3240 A8				tay
  7637 3241 B9 30 C9			lda adr.PLMONEY,y
  7638 3244 85 9D			sta :STACKORIGIN+9
  7639 3246 B9 31 C9			lda adr.PLMONEY+1,y
  7640 3249 85 AD			sta :STACKORIGIN+STACKWIDTH+9
  7641 324B B9 32 C9			lda adr.PLMONEY+2,y
  7642 324E 85 BD			sta :STACKORIGIN+STACKWIDTH*2+9
  7643 3250 B9 33 C9			lda adr.PLMONEY+3,y
  7644 3253 85 CD			sta :STACKORIGIN+STACKWIDTH*3+9
  7645 3255 AD D8 A7			lda PRICE
  7646 3258 85 9E			sta :STACKORIGIN+10
  7647 325A A0 00			ldy #$00
  7648 325C AD D9 A7			lda PRICE+1
  7649 325F 10 01			spl
  7650 3261 88				dey
  7651 3262 85 AE			sta :STACKORIGIN+STACKWIDTH+10
  7652 3264 84 BE			sty :STACKORIGIN+STACKWIDTH*2+10
  7653 3266 84 CE			sty :STACKORIGIN+STACKWIDTH*3+10
  7654 3268				.LOCAL
  7655 3268 A5 CD			lda :STACKORIGIN+STACKWIDTH*3+9
  7656 326A 38 E5 CE			sub :STACKORIGIN+STACKWIDTH*3+10
  7657 326D D0 1C			bne L4
  7658 326F A5 BD			lda :STACKORIGIN+STACKWIDTH*2+9
  7659 3271 C5 BE			cmp :STACKORIGIN+STACKWIDTH*2+10
  7660 3273 D0 0A			bne L1
  7661 3275 A5 AD			lda :STACKORIGIN+STACKWIDTH+9
  7662 3277 C5 AE			cmp :STACKORIGIN+STACKWIDTH+10
  7663 3279 D0 04			bne L1
  7664 327B A5 9D			lda :STACKORIGIN+9
  7665 327D C5 9E			cmp :STACKORIGIN+10
  7666 327F F0 10		L1	beq L5
  7667 3281 B0 04			bcs L3
  7668 3283 A9 FF			lda #$FF
  7669 3285 D0 0A			bne L5
  7670 3287 A9 01		L3	lda #$01
  7671 3289 D0 06			bne L5
  7672 328B 50 04		L4	bvc L5
  7673 328D 49 FF			eor #$FF
  7674 328F 09 01			ora #$01
  7675 3291			L5
  7676 					.ENDL
  7677 3291 10 1C			jpl l_1489
  7678
  7679 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', helpers_game.pas), line = 115
  7680
  7681 3293 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
  7682
  7683 				; optimize FAIL ('CRT_WRITELN', helpers_game.pas), line = 116
  7684
  7685 3296 E8				inx
  7686 3297 AD 25 9C 95 94		mva NOT_ENOUGH_MONEY_STRING :STACKORIGIN,x
  7687 329C AD 26 9C 95 A4		mva NOT_ENOUGH_MONEY_STRING+1 :STACKORIGIN+STACKWIDTH,x
  7688 32A1 20 A9 1E			jsr CRT_WRITELN
  7689
  7690 				; optimize FAIL ('CRT_READKEYORFIRE', helpers_game.pas), line = 117
  7691
  7692 32A4 20 04 1E			jsr CRT_READKEYORFIRE
  7693
  7694 				; optimize OK (helpers_game.pas), line = 118
  7695
  7696 32A7 A9 00			lda #$00
  7697 32A9 8D DA A7			sta RESULT
  7698 32AC 4C C3 32			jmp @exit
  7699 32AF			l_1489
  7700
  7701 				; optimize OK (helpers_game.pas), line = 121
  7702
  7703 32AF AD D8 A7			lda PRICE
  7704 32B2 8D CD A7			sta SUBMONEY.AMOUNT
  7705 32B5 AD D9 A7			lda PRICE+1
  7706 32B8 8D CE A7			sta SUBMONEY.AMOUNT+1
  7707 32BB 20 C2 2F			jsr SUBMONEY
  7708
  7709 				; optimize OK (helpers_game.pas), line = 122
  7710
  7711 32BE A9 01			lda #$01
  7712 32C0 8D DA A7			sta RESULT
  7713 32C3			@exit
  7714
  7715 				; ------------------------------------------------------------
  7716
  7717 = A7D8			PRICE	= DATAORIGIN+$0B82
  7718 = A7DA			RESULT	= DATAORIGIN+$0B84
  7719
  7720 = A7D8			@VarData	= PRICE
  7721 = 0002			@VarDataSize	= 2
  7722
  7723 32C3 60				rts						; ret
  7724 				.endl
  7725
  7726 32C4			.local	PRINTGANGSTERS					; PROCEDURE
  7727
  7728 				; optimize OK (helpers_game.pas), line = 129
  7729
  7730 32C4 A9 00			lda #$00
  7731 32C6 8D 0A CA			sta GANGSTERCOUNT
  7732
  7733 				; optimize FAIL ('B_CRT.CRT_WHEREY', helpers_game.pas), line = 130
  7734
  7735 32C9 20 D9 17			jsr B_CRT.CRT_WHEREY
  7736 32CC AD 8C A0			lda B_CRT.CRT_WHEREY.RESULT
  7737 32CF 38 E9 01			sub #$01
  7738 32D2 8D DD A7			sta Y
  7739
  7740 				; optimize OK (helpers_game.pas), line = 131
  7741
  7742 32D5 A9 00			lda #$00
  7743 32D7 8D DB A7			sta K
  7744
  7745 32DA			l_14B5
  7746 				; --- ForToDoCondition
  7747 32DA AC DB A7			ldy K
  7748 32DD C0 20			cpy #$20
  7749 32DF 90 03 4C 0D 34		jcs l_14C3
  7750
  7751 				; optimize OK (helpers_game.pas), line = 133
  7752
  7753 32E4 B9 91 CD			lda adr.PLGANGSTERS,y
  7754 32E7 CD 8A CD			cmp CURRENTPLAYER
  7755 32EA F0 03 4C 05 34		jne l_14DA
  7756
  7757 				; optimize OK (helpers_game.pas), line = 135
  7758
  7759 32EF A9 00			lda #$00
  7760 32F1 8D DC A7			sta X
  7761
  7762 				; optimize OK (helpers_game.pas), line = 136
  7763
  7764 32F4 AD 0A CA			lda GANGSTERCOUNT
  7765 32F7 29 01			and #$01
  7766 32F9 C9 01			cmp #$01
  7767 32FB D0 08			jne l_14F5
  7768
  7769 				; optimize OK (helpers_game.pas), line = 137
  7770
  7771 32FD A9 14			lda #$14
  7772 32FF 8D DC A7			sta X
  7773 3302 4C 18 33			jmp l_1503
  7774 3305			l_14F5
  7775
  7776 				; optimize OK (helpers_game.pas), line = 140
  7777
  7778 3305 AD DD A7			lda Y
  7779 3308 18 69 03			add #$03
  7780 330B 8D DD A7			sta Y
  7781
  7782 				; optimize OK (helpers_game.pas), line = 141
  7783
  7784 330E AD 23 C9			lda SHOWWEAPONS
  7785 3311 C9 01			cmp #$01
  7786 3313 D0 03			jne l_151F
  7787 3315 EE DD A7			inc Y
  7788 3318			l_1503
  7789 3318			l_151F
  7790
  7791 				; optimize OK (helpers_game.pas), line = 144
  7792
  7793 3318 AD DC A7			lda X
  7794 331B 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
  7795 331E AD DD A7			lda Y
  7796 3321 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
  7797 3324 20 AC 17			jsr B_CRT.CRT_GOTOXY
  7798
  7799 				; optimize OK (helpers_game.pas), line = 145
  7800
  7801 3327 AD 0A CA			lda GANGSTERCOUNT
  7802 332A 18 69 01			add #$01
  7803 332D 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
  7804 3330 A9 00			lda #$00
  7805 3332 69 00			adc #$00
  7806 3334 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
  7807 3337 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
  7808
  7809 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', helpers_game.pas), line = 146
  7810
  7811 333A E8				inx
  7812 333B A9 76 95 94			mva #$76 :STACKORIGIN,x
  7813 333F A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
  7814 3343 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
  7815
  7816 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', helpers_game.pas), line = 147
  7817
  7818 3346 E8				inx
  7819 3347 AD DB A7			lda K
  7820 334A 0A				asl @
  7821 334B A8				tay
  7822 334C B9 15 A4			lda adr.GANGSTERNAMES,y
  7823 334F 95 94			sta :STACKORIGIN,x
  7824 3351 B9 16 A4			lda adr.GANGSTERNAMES+1,y
  7825 3354 95 A4			sta :STACKORIGIN+STACKWIDTH,x
  7826 3356 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
  7827
  7828 				; optimize OK (helpers_game.pas), line = 148
  7829
  7830 3359 AD DD A7			lda Y
  7831 335C 18 69 01			add #$01
  7832 335F 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
  7833 3362 AD DC A7			lda X
  7834 3365 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
  7835 3368 20 AC 17			jsr B_CRT.CRT_GOTOXY
  7836
  7837 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', helpers_game.pas), line = 149
  7838
  7839 336B E8				inx
  7840 336C A9 7A 95 94			mva #$7A :STACKORIGIN,x
  7841 3370 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
  7842 3374 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
  7843
  7844 				; optimize OK (helpers_game.pas), line = 150
  7845
  7846 3377 AC DB A7			ldy K
  7847 337A B9 C8 CC			lda adr.GANGSTERSTR,y
  7848 337D 20 7E 18			jsr B_CRT.CRT_WRITE.@010180000
  7849
  7850 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', helpers_game.pas), line = 151
  7851
  7852 3380 E8				inx
  7853 3381 A9 7D 95 94			mva #$7D :STACKORIGIN,x
  7854 3385 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
  7855 3389 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
  7856
  7857 				; optimize OK (helpers_game.pas), line = 152
  7858
  7859 338C AC DB A7			ldy K
  7860 338F B9 E8 CC			lda adr.GANGSTERINT,y
  7861 3392 20 7E 18			jsr B_CRT.CRT_WRITE.@010180000
  7862
  7863 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', helpers_game.pas), line = 153
  7864
  7865 3395 E8				inx
  7866 3396 A9 81 95 94			mva #$81 :STACKORIGIN,x
  7867 339A A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
  7868 339E 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
  7869
  7870 				; optimize OK (helpers_game.pas), line = 154
  7871
  7872 33A1 AC DB A7			ldy K
  7873 33A4 B9 08 CD			lda adr.GANGSTERBRUT,y
  7874 33A7 20 7E 18			jsr B_CRT.CRT_WRITE.@010180000
  7875
  7876 				; optimize OK (helpers_game.pas), line = 155
  7877
  7878 33AA A9 00			lda #$00
  7879 33AC 20 65 18			jsr B_CRT.CRT_WRITE.@010186000
  7880
  7881 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', helpers_game.pas), line = 156
  7882
  7883 33AF E8				inx
  7884 33B0 A9 65 95 94			mva #$65 :STACKORIGIN,x
  7885 33B4 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
  7886 33B8 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
  7887
  7888 				; optimize OK (helpers_game.pas), line = 157
  7889
  7890 33BB AC DB A7			ldy K
  7891 33BE B9 28 CD			lda adr.GANGSTERHEALTH,y
  7892 33C1 20 7E 18			jsr B_CRT.CRT_WRITE.@010180000
  7893
  7894 				; optimize OK (helpers_game.pas), line = 158
  7895
  7896 33C4 AD 23 C9			lda SHOWWEAPONS
  7897 33C7 C9 01			cmp #$01
  7898 33C9 D0 2E			jne l_1586
  7899
  7900 				; optimize OK (helpers_game.pas), line = 159
  7901
  7902 33CB AD DD A7			lda Y
  7903 33CE 18 69 02			add #$02
  7904 33D1 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
  7905 33D4 AD DC A7			lda X
  7906 33D7 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
  7907 33DA 20 AC 17			jsr B_CRT.CRT_GOTOXY
  7908
  7909 				; optimize OK (helpers_game.pas), line = 160
  7910
  7911 33DD AC DB A7			ldy K
  7912 33E0 B9 48 CD			lda adr.GANGSTERWEAPON,y
  7913 33E3 8D DE A7			sta T
  7914
  7915 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', helpers_game.pas), line = 161
  7916
  7917 33E6 E8				inx
  7918 33E7 AD DE A7			lda T
  7919 33EA 0A				asl @
  7920 33EB A8				tay
  7921 33EC B9 6B A4			lda adr.WEAPONNAMES,y
  7922 33EF 95 94			sta :STACKORIGIN,x
  7923 33F1 B9 6C A4			lda adr.WEAPONNAMES+1,y
  7924 33F4 95 A4			sta :STACKORIGIN+STACKWIDTH,x
  7925 33F6 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
  7926 33F9			l_1586
  7927
  7928 				; optimize OK (helpers_game.pas), line = 163
  7929
  7930 33F9 AC 0A CA			ldy GANGSTERCOUNT
  7931 33FC AD DB A7			lda K
  7932 33FF 99 00 CA			sta adr.GANGSTERMAP,y
  7933
  7934 				; optimize OK (helpers_game.pas), line = 164
  7935
  7936 3402 EE 0A CA			inc GANGSTERCOUNT
  7937 3405			l_14DA
  7938
  7939 				; --- ForToDoEpilog
  7940 3405 EE DB A7			inc K
  7941 3408 F0 03 4C DA 32		jne l_14B5
  7942 340D			l_14C3
  7943
  7944 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', helpers_game.pas), line = 167
  7945
  7946 340D 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
  7947
  7948 				; ------------------------------------------------------------
  7949
  7950 = A7DB			K	= DATAORIGIN+$0B85
  7951 = A7DC			X	= DATAORIGIN+$0B86
  7952 = A7DD			Y	= DATAORIGIN+$0B87
  7953 = A7DE			T	= DATAORIGIN+$0B88
  7954
  7955 = A7DB			@VarData	= K
  7956 = 0004			@VarDataSize	= 4
  7957
  7958 3410			@exit
  7959 					.ifdef @new
  7960 					lda <@VarData
  7961 					sta :ztmp
  7962 					lda >@VarData
  7963 					ldy #@VarDataSize-1
  7964 					jmp @FreeMem
  7965 					els
  7966 3410 60				rts						; ret
  7967 					eif
  7968 				.endl
  7969
  7970 3411			.local	SELECTGANGSTER					; PROCEDURE
  7971
  7972 				; optimize OK (helpers_game.pas), line = 174
  7973
  7974 3411 AC 8A CD			ldy CURRENTPLAYER
  7975 3414 B9 B1 CD			lda adr.PLNGANGSTERS,y
  7976 3417 C9 01			cmp #$01
  7977 3419 D0 0C			jne l_15D7
  7978
  7979 				; optimize OK (helpers_game.pas), line = 175
  7980
  7981 341B AD 8A CD			lda CURRENTPLAYER
  7982 341E 0A				asl @
  7983 341F 0A				asl @
  7984 3420 0A				asl @
  7985 3421 8D 88 CD			sta CURRENTGANGSTER
  7986 3424 4C 6C 34			jmp @exit
  7987 3427			l_15D7
  7988
  7989 				; optimize FAIL ('PRINTGANGSTERS', helpers_game.pas), line = 179
  7990
  7991 3427 20 C4 32			jsr PRINTGANGSTERS
  7992
  7993 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', helpers_game.pas), line = 180
  7994
  7995 342A 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
  7996
  7997 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', helpers_game.pas), line = 181
  7998
  7999 342D E8				inx
  8000 342E AD 27 9C 95 94		mva YOUR_CHOICE_STRING :STACKORIGIN,x
  8001 3433 AD 28 9C 95 A4		mva YOUR_CHOICE_STRING+1 :STACKORIGIN+STACKWIDTH,x
  8002 3438 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
  8003
  8004 				; optimize OK (helpers_game.pas), line = 182
  8005
  8006 343B A9 01			lda #$01
  8007 343D 8D 1C A7			sta READVALUE.MINVALUE
  8008 3440 A9 00			lda #$00
  8009 3442 8D 1D A7			sta READVALUE.MINVALUE+1
  8010 3445 AD 0A CA			lda GANGSTERCOUNT
  8011 3448 8D 1E A7			sta READVALUE.MAXVALUE
  8012 344B A9 00			lda #$00
  8013 344D 8D 1F A7			sta READVALUE.MAXVALUE+1
  8014 3450 20 26 20			jsr READVALUE
  8015 3453 AD 20 A7			lda READVALUE.RESULT
  8016 3456 8D DF A7			sta X
  8017
  8018 				; optimize OK (helpers_game.pas), line = 183
  8019
  8020 3459 D0 05			jne l_1603
  8021 345B A9 63			lda #$63
  8022 345D 4C 66 34			jmp l_1611
  8023 3460			l_1603
  8024
  8025 				; optimize OK (helpers_game.pas), line = 184
  8026
  8027 3460 AC DF A7			ldy X
  8028 3463 B9 FF C9			lda adr.GANGSTERMAP-$01,y
  8029 3466			l_1611
  8030 3466 8D 88 CD			sta CURRENTGANGSTER
  8031
  8032 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', helpers_game.pas), line = 185
  8033
  8034 3469 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
  8035
  8036 				; ------------------------------------------------------------
  8037
  8038 = A7DF			X	= DATAORIGIN+$0B89
  8039
  8040 = A7DF			@VarData	= X
  8041 = 0001			@VarDataSize	= 1
  8042
  8043 346C			@exit
  8044 					.ifdef @new
  8045 					lda <@VarData
  8046 					sta :ztmp
  8047 					lda >@VarData
  8048 					ldy #@VarDataSize-1
  8049 					jmp @FreeMem
  8050 					els
  8051 346C 60				rts						; ret
  8052 					eif
  8053 				.endl
  8054
  8055 346D			.local	GOTOCOURT					; FUNCTION
  8056
  8057 				; optimize OK (sprites.pas), line = 18
  8058
  8059 346D A9 04			lda #$04
  8060 346F 20 AD 13			jsr SYSTEM.RANDOM.@010180000
  8061 3472 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
  8062 3475 8D E4 A7			sta R
  8063
  8064 				; optimize OK (sprites.pas), line = 19
  8065
  8066 3478 8D EA A7			sta @CASETMP_000A
  8067 347B C9 00			cmp #$00
  8068 347D D0 10			jne l_1633
  8069 				@
  8070
  8071 				; optimize OK (sprites.pas), line = 21
  8072
  8073 347F A9 0F			lda #$0F
  8074 3481 8D E5 A7			sta I
  8075 3484 A9 02			lda #$02
  8076 3486 8D E6 A7			sta J
  8077 3489 8D E7 A7			sta K
  8078 348C 4C CE 34			jmp a_000A
  8079 348F			l_1633
  8080 348F C9 01			cmp #$01
  8081 3491 D0 12			jne l_1646
  8082
  8083 				; optimize OK (sprites.pas), line = 24
  8084
  8085 3493 A9 10			lda #$10
  8086 3495 8D E5 A7			sta I
  8087 3498 A9 02			lda #$02
  8088 349A 8D E6 A7			sta J
  8089 349D A9 05			lda #$05
  8090 349F 8D E7 A7			sta K
  8091 34A2 4C CE 34			jmp a_000A
  8092 34A5			l_1646
  8093 34A5 C9 02			cmp #$02
  8094 34A7 D0 12			jne l_1659
  8095
  8096 				; optimize OK (sprites.pas), line = 27
  8097
  8098 34A9 A9 02			lda #$02
  8099 34AB 8D E5 A7			sta I
  8100 34AE A9 0A			lda #$0A
  8101 34B0 8D E6 A7			sta J
  8102 34B3 A9 09			lda #$09
  8103 34B5 8D E7 A7			sta K
  8104 34B8 4C CE 34			jmp a_000A
  8105 34BB			l_1659
  8106 34BB C9 03			cmp #$03
  8107 34BD D0 0F			jne l_166C
  8108
  8109 				; optimize OK (sprites.pas), line = 30
  8110
  8111 34BF A9 0D			lda #$0D
  8112 34C1 8D E5 A7			sta I
  8113 34C4 A9 0A			lda #$0A
  8114 34C6 8D E6 A7			sta J
  8115 34C9 A9 04			lda #$04
  8116 34CB 8D E7 A7			sta K
  8117 34CE			l_166C
  8118 34CE			a_000A
  8119
  8120 				; optimize FAIL ('BLACKCONSOLE', sprites.pas), line = 33
  8121
  8122 34CE 20 8E 27			jsr BLACKCONSOLE
  8123
  8124 				; optimize OK (sprites.pas), line = 36
  8125
  8126 34D1 AC 8A CD			ldy CURRENTPLAYER
  8127 34D4 A9 00			lda #$00
  8128 34D6 99 60 C9			sta adr.PLOPPORTUNITY,y
  8129
  8130 				; optimize OK (sprites.pas), line = 39
  8131
  8132 34D9 AD E5 A7			lda I
  8133 34DC 99 54 C9			sta adr.PLMAPPOSX,y
  8134
  8135 				; optimize OK (sprites.pas), line = 40
  8136
  8137 34DF AD E6 A7			lda J
  8138 34E2 99 58 C9			sta adr.PLMAPPOSY,y
  8139
  8140 				; optimize OK (sprites.pas), line = 41
  8141
  8142 34E5 AD E7 A7			lda K
  8143 34E8 99 5C C9			sta adr.PLCURRENTMAP,y
  8144
  8145 				; optimize FAIL ('PLACECURRENTPLAYER', sprites.pas), line = 42
  8146
  8147 34EB 20 59 2F			jsr PLACECURRENTPLAYER
  8148
  8149 				; optimize OK (sprites.pas), line = 43
  8150
  8151 34EE AD B0 EA			lda MAPPOS_X
  8152 34F1 8D B2 EA			sta OLDMAPPOS_X
  8153
  8154 				; optimize OK (sprites.pas), line = 44
  8155
  8156 34F4 AD B1 EA			lda MAPPOS_Y
  8157 34F7 8D B3 EA			sta OLDMAPPOS_Y
  8158
  8159 				; optimize FAIL ('PRELOADMAP', sprites.pas), line = 45
  8160
  8161 34FA 20 27 82			jsr PRELOADMAP
  8162
  8163 				; optimize OK (sprites.pas), line = 47
  8164
  8165 34FD A9 19			lda #$19
  8166 34FF 20 1F 29			jsr LOADLOCATION
  8167
  8168 				; optimize FAIL ('ENABLECONSOLE', sprites.pas), line = 48
  8169
  8170 3502 20 B0 27			jsr ENABLECONSOLE
  8171
  8172 				; optimize OK (sprites.pas), line = 49
  8173
  8174 3505 AC 8A CD			ldy CURRENTPLAYER
  8175 3508 B9 98 C9			lda adr.PLRANK,y
  8176 350B 4A				lsr @
  8177 350C 18 69 01			add #$01
  8178 350F 8D E3 A7			sta PRISONTIME
  8179
  8180 				; optimize FAIL ('SHOWLOCATIONHEADER', sprites.pas), line = 51
  8181
  8182 3512 20 7A 28			jsr SHOWLOCATIONHEADER
  8183
  8184 				; optimize OK (sprites.pas), line = 53
  8185
  8186 3515 AC 8A CD			ldy CURRENTPLAYER
  8187 3518 B9 98 C9			lda adr.PLRANK,y
  8188 351B C9 05			cmp #$05
  8189 351D B0 03 4C F2 35		jcc l_16D9
  8190
  8191 				; optimize OK (sprites.pas), line = 55
  8192
  8193 3522 A9 01			lda #$01
  8194 3524 20 15 1D			jsr CRT_WRITELN2_LOCSTR
  8195
  8196 				; optimize FAIL ('GETYESNO', sprites.pas), line = 56
  8197
  8198 3527 20 08 20			jsr GETYESNO
  8199 352A AD 1B A7			lda GETYESNO.RESULT
  8200 352D 8D E4 A7			sta R
  8201
  8202 				; optimize OK (sprites.pas), line = 57
  8203
  8204 3530 C9 01			cmp #$01
  8205 3532 F0 03 4C F2 35		jne l_16F2
  8206
  8207 				; optimize OK (sprites.pas), line = 59
  8208
  8209 3537 A9 02			lda #$02
  8210 3539 20 0B 1D			jsr CRT_WRITELN_LOCSTR
  8211
  8212 				; optimize OK (sprites.pas), line = 60
  8213
  8214 353C A9 00			lda #$00
  8215 353E 8D 1C A7			sta READVALUE.MINVALUE
  8216 3541 8D 1D A7			sta READVALUE.MINVALUE+1
  8217 3544 A9 10			lda #$10
  8218 3546 8D 1E A7			sta READVALUE.MAXVALUE
  8219 3549 A9 27			lda #$27
  8220 354B 8D 1F A7			sta READVALUE.MAXVALUE+1
  8221 354E 20 26 20			jsr READVALUE
  8222 3551 AD 20 A7			lda READVALUE.RESULT
  8223 3554 8D E1 A7			sta LAWYER
  8224 3557 AD 21 A7			lda READVALUE.RESULT+1
  8225 355A 8D E2 A7			sta LAWYER+1
  8226
  8227 				; optimize FAIL ('CRT_NEWLINE2', sprites.pas), line = 61
  8228
  8229 355D 20 7B 1E			jsr CRT_NEWLINE2
  8230
  8231 				; optimize OK (sprites.pas), line = 62
  8232
  8233 3560 AD E1 A7			lda LAWYER
  8234 3563 8D D8 A7			sta PAYMONEY.PRICE
  8235 3566 AD E2 A7			lda LAWYER+1
  8236 3569 8D D9 A7			sta PAYMONEY.PRICE+1
  8237 356C 20 3B 32			jsr PAYMONEY
  8238 356F AD DA A7			lda PAYMONEY.RESULT
  8239 3572 8D E8 A7			sta T
  8240
  8241 				; optimize OK (sprites.pas), line = 63
  8242
  8243 3575 C9 01			cmp #$01
  8244 3577 D0 79			jne l_1714
  8245
  8246 				; optimize OK (sprites.pas), line = 66
  8247
  8248 3579 AD E2 A7			lda LAWYER+1
  8249 357C 4A				lsr @
  8250 357D 4A				lsr @
  8251 357E 18 69 01			add #$01
  8252 3581 8D E9 A7			sta CHANGE
  8253
  8254 				; optimize OK (sprites.pas), line = 67
  8255
  8256 3584 20 AD 13			jsr SYSTEM.RANDOM.@010180000
  8257 3587 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
  8258 358A 8D E9 A7			sta CHANGE
  8259
  8260 				; optimize OK (sprites.pas), line = 68
  8261
  8262 358D AD E3 A7			lda PRISONTIME
  8263 3590 38 ED E9 A7			sub CHANGE
  8264 3594 8D E3 A7			sta PRISONTIME
  8265
  8266 				; optimize OK (sprites.pas), line = 69
  8267
  8268 3597 10 05			jpl l_1747
  8269
  8270 				; optimize OK (sprites.pas), line = 70
  8271
  8272 3599 A9 00			lda #$00
  8273 359B 8D E3 A7			sta PRISONTIME
  8274 359E			l_1747
  8275
  8276 				; optimize OK (sprites.pas), line = 71
  8277
  8278 359E AC 8A CD			ldy CURRENTPLAYER
  8279 35A1 AD E3 A7			lda PRISONTIME
  8280 35A4 99 94 C9			sta adr.PLPRISON,y
  8281
  8282 				; optimize OK (sprites.pas), line = 72
  8283
  8284 35A7 AD E3 A7			lda PRISONTIME
  8285 35AA D0 15			jne l_1769
  8286
  8287 				; optimize OK (sprites.pas), line = 74
  8288
  8289 35AC A9 02			lda #$02
  8290 35AE 20 EC 2F			jsr ADDPOINTS
  8291
  8292 				; optimize OK (sprites.pas), line = 75
  8293
  8294 35B1 A9 03			lda #$03
  8295 35B3 20 0B 1D			jsr CRT_WRITELN_LOCSTR
  8296
  8297 				; optimize FAIL ('WAITFORKEY', sprites.pas), line = 76
  8298
  8299 35B6 20 4A 1E			jsr WAITFORKEY
  8300
  8301 				; optimize OK (sprites.pas), line = 77
  8302
  8303 35B9 A9 01			lda #$01
  8304 35BB 8D E0 A7			sta RESULT
  8305 35BE 4C 31 36			jmp @exit
  8306 35C1			l_1769
  8307
  8308 				; optimize OK (sprites.pas), line = 80
  8309
  8310 35C1 A9 03			lda #$03
  8311 35C3 20 FD 2F			jsr REMOVEPOINTS
  8312
  8313 				; optimize OK (sprites.pas), line = 81
  8314
  8315 35C6 A9 04			lda #$04
  8316 35C8 20 0B 1D			jsr CRT_WRITELN_LOCSTR
  8317
  8318 				; optimize OK (sprites.pas), line = 82
  8319
  8320 35CB A0 00			ldy #$00
  8321 35CD AD E3 A7			lda PRISONTIME
  8322 35D0 10 01			spl
  8323 35D2 88				dey
  8324 35D3 8D 92 A1			sta B_CRT.CRT_WRITE.@010185000.NUM
  8325 35D6 8C 93 A1			sty B_CRT.CRT_WRITE.@010185000.NUM+1
  8326 35D9 8C 94 A1			sty B_CRT.CRT_WRITE.@010185000.NUM+2
  8327 35DC 8C 95 A1			sty B_CRT.CRT_WRITE.@010185000.NUM+3
  8328 35DF 20 CA 18			jsr B_CRT.CRT_WRITE.@010185000
  8329
  8330 				; optimize OK (sprites.pas), line = 83
  8331
  8332 35E2 A9 05			lda #$05
  8333 35E4 20 0B 1D			jsr CRT_WRITELN_LOCSTR
  8334
  8335 				; optimize FAIL ('WAITFORKEY', sprites.pas), line = 84
  8336
  8337 35E7 20 4A 1E			jsr WAITFORKEY
  8338
  8339 				; optimize OK (sprites.pas), line = 85
  8340
  8341 35EA A9 01			lda #$01
  8342 35EC 8D E0 A7			sta RESULT
  8343 35EF 4C 31 36			jmp @exit
  8344 35F2			l_1714
  8345 35F2			l_16F2
  8346 35F2			l_16D9
  8347
  8348 				; optimize OK (sprites.pas), line = 92
  8349
  8350 35F2 AC 8A CD			ldy CURRENTPLAYER
  8351 35F5 AD E3 A7			lda PRISONTIME
  8352 35F8 99 94 C9			sta adr.PLPRISON,y
  8353
  8354 				; optimize OK (sprites.pas), line = 93
  8355
  8356 35FB A9 06			lda #$06
  8357 35FD 20 C6 1C			jsr CRT_WRITE_LOCSTR
  8358
  8359 				; optimize OK (sprites.pas), line = 94
  8360
  8361 3600 A0 00			ldy #$00
  8362 3602 AD E3 A7			lda PRISONTIME
  8363 3605 10 01			spl
  8364 3607 88				dey
  8365 3608 8D 92 A1			sta B_CRT.CRT_WRITE.@010185000.NUM
  8366 360B 8C 93 A1			sty B_CRT.CRT_WRITE.@010185000.NUM+1
  8367 360E 8C 94 A1			sty B_CRT.CRT_WRITE.@010185000.NUM+2
  8368 3611 8C 95 A1			sty B_CRT.CRT_WRITE.@010185000.NUM+3
  8369 3614 20 CA 18			jsr B_CRT.CRT_WRITE.@010185000
  8370
  8371 				; optimize OK (sprites.pas), line = 95
  8372
  8373 3617 A9 07			lda #$07
  8374 3619 20 C6 1C			jsr CRT_WRITE_LOCSTR
  8375
  8376 				; optimize OK (sprites.pas), line = 96
  8377
  8378 361C AC 8A CD			ldy CURRENTPLAYER
  8379 361F A9 00			lda #$00
  8380 3621 99 80 C9			sta adr.PLJOB,y
  8381
  8382 				; optimize OK (sprites.pas), line = 97
  8383
  8384 3624 A9 03			lda #$03
  8385 3626 20 FD 2F			jsr REMOVEPOINTS
  8386
  8387 				; optimize FAIL ('WAITFORKEY', sprites.pas), line = 98
  8388
  8389 3629 20 4A 1E			jsr WAITFORKEY
  8390
  8391 				; optimize OK (sprites.pas), line = 99
  8392
  8393 362C A9 01			lda #$01
  8394 362E 8D E0 A7			sta RESULT
  8395 3631			@exit
  8396
  8397 				; ------------------------------------------------------------
  8398
  8399 = A7E0			RESULT	= DATAORIGIN+$0B8A
  8400 = A7E1			LAWYER	= DATAORIGIN+$0B8B
  8401 = A7E3			PRISONTIME	= DATAORIGIN+$0B8D
  8402 = A7E4			R	= DATAORIGIN+$0B8E
  8403 = A7E5			I	= DATAORIGIN+$0B8F
  8404 = A7E6			J	= DATAORIGIN+$0B90
  8405 = A7E7			K	= DATAORIGIN+$0B91
  8406 = A7E8			T	= DATAORIGIN+$0B92
  8407 = A7E9			CHANGE	= DATAORIGIN+$0B93
  8408 = A7EA			@CASETMP_000A	= DATAORIGIN+$0B94
  8409
  8410 = A7E1			@VarData	= LAWYER
  8411 = 000A			@VarDataSize	= 10
  8412
  8413 3631 60				rts						; ret
  8414 				.endl
  8415
  8416 3632			.local	GOTCAUGHT					; FUNCTION
  8417
  8418 				; optimize OK (sprites.pas), line = 112
  8419
  8420 3632 A9 1A			lda #$1A
  8421 3634 20 1F 29			jsr LOADLOCATION
  8422
  8423 				; optimize FAIL ('ENABLECONSOLE', sprites.pas), line = 113
  8424
  8425 3637 20 B0 27			jsr ENABLECONSOLE
  8426
  8427 				; optimize FAIL ('SHOWLOCATIONHEADER', sprites.pas), line = 115
  8428
  8429 363A 20 7A 28			jsr SHOWLOCATIONHEADER
  8430
  8431 				; optimize FAIL (1, sprites.pas), line = 118
  8432
  8433 363D E8				inx
  8434 363E AC 8A CD			ldy CURRENTPLAYER
  8435 3641 B9 7C C9			lda adr.PLBRIBE,y
  8436 3644 95 94			sta :STACKORIGIN,x
  8437 3646 E8				inx
  8438 3647 A0 01			ldy #1
  8439 3649 B5 93			lda :STACKORIGIN-1,x
  8440 364B D0 01			bne @+
  8441 364D 88				dey
  8442 				@
  8443 364E CA				dex
  8444 364F 94 94			sty :STACKORIGIN,x
  8445 3651 A9 02			lda #$02
  8446 3653 20 AD 13			jsr SYSTEM.RANDOM.@010180000
  8447 3656 CA				dex
  8448 3657 A0 01			ldy #1
  8449 3659 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
  8450 365C C9 01			cmp #$01
  8451 365E F0 01			beq @+
  8452 3660 88				dey
  8453 				@
  8454 3661 98				tya
  8455 3662 35 95			and :STACKORIGIN+1,x
  8456 3664 F0 15			jeq l_17D1
  8457
  8458 				; optimize OK (sprites.pas), line = 120
  8459
  8460 3666 A9 01			lda #$01
  8461 3668 20 0B 1D			jsr CRT_WRITELN_LOCSTR
  8462
  8463 				; optimize OK (sprites.pas), line = 121
  8464
  8465 366B A9 02			lda #$02
  8466 366D 20 0B 1D			jsr CRT_WRITELN_LOCSTR
  8467
  8468 				; optimize FAIL ('WAITFORKEY', sprites.pas), line = 122
  8469
  8470 3670 20 4A 1E			jsr WAITFORKEY
  8471
  8472 				; optimize OK (sprites.pas), line = 123
  8473
  8474 3673 A9 00			lda #$00
  8475 3675 8D EB A7			sta RESULT
  8476 3678 4C D6 37			jmp @exit
  8477 367B			l_17D1
  8478
  8479 				; optimize OK (sprites.pas), line = 127
  8480
  8481 367B A9 03			lda #$03
  8482 367D 20 15 1D			jsr CRT_WRITELN2_LOCSTR
  8483
  8484 				; optimize OK (sprites.pas), line = 128
  8485
  8486 3680 A9 04			lda #$04
  8487 3682 20 0B 1D			jsr CRT_WRITELN_LOCSTR
  8488
  8489 				; optimize OK (sprites.pas), line = 129
  8490
  8491 3685 A9 05			lda #$05
  8492 3687 20 0B 1D			jsr CRT_WRITELN_LOCSTR
  8493
  8494 				; optimize OK (sprites.pas), line = 130
  8495
  8496 368A A9 06			lda #$06
  8497 368C 20 15 1D			jsr CRT_WRITELN2_LOCSTR
  8498
  8499 				; optimize OK (sprites.pas), line = 132
  8500
  8501 368F A9 07			lda #$07
  8502 3691 20 C6 1C			jsr CRT_WRITE_LOCSTR
  8503
  8504 				; optimize OK (sprites.pas), line = 133
  8505
  8506 3694 A9 01			lda #$01
  8507 3696 8D 1C A7			sta READVALUE.MINVALUE
  8508 3699 A9 00			lda #$00
  8509 369B 8D 1D A7			sta READVALUE.MINVALUE+1
  8510 369E A9 03			lda #$03
  8511 36A0 8D 1E A7			sta READVALUE.MAXVALUE
  8512 36A3 A9 00			lda #$00
  8513 36A5 8D 1F A7			sta READVALUE.MAXVALUE+1
  8514 36A8 20 26 20			jsr READVALUE
  8515 36AB AD 20 A7			lda READVALUE.RESULT
  8516 36AE 8D EC A7			sta A
  8517
  8518 				; optimize FAIL ('CRT_NEWLINE2', sprites.pas), line = 135
  8519
  8520 36B1 20 7B 1E			jsr CRT_NEWLINE2
  8521
  8522 				; optimize OK (sprites.pas), line = 136
  8523
  8524 36B4 AD EC A7			lda A
  8525 36B7 C9 01			cmp #$01
  8526 36B9 F0 03 4C 6A 37		jne l_1800
  8527
  8528 				; optimize OK (sprites.pas), line = 138
  8529
  8530 36BE AC 8A CD			ldy CURRENTPLAYER
  8531 36C1 B9 98 C9			lda adr.PLRANK,y
  8532 36C4 85 84			sta :eax
  8533 36C6 A9 00			lda #$00
  8534 36C8 85 85			sta :eax+1
  8535 36CA A9 F4			lda #$F4
  8536 36CC 85 8C			sta :ecx
  8537 36CE A9 01			lda #$01
  8538 36D0 85 8D			sta :ecx+1
  8539 					.ifdef fmulinit
  8540 					fmulu_16
  8541 					els
  8542 36D2 20 D3 10			imulCX_AL
  8543 					eif
  8544 36D5 A5 84			lda :eax
  8545 36D7 18 69 F4			add #$F4
  8546 36DA 8D EE A7			sta PRICE
  8547 36DD A5 85			lda :eax+1
  8548 36DF 69 01			adc #$01
  8549 36E1 8D EF A7			sta PRICE+1
  8550
  8551 				; optimize OK (sprites.pas), line = 139
  8552
  8553 36E4 A9 08			lda #$08
  8554 36E6 20 C6 1C			jsr CRT_WRITE_LOCSTR
  8555
  8556 				; optimize OK (sprites.pas), line = 140
  8557
  8558 36E9 AD EE A7			lda PRICE
  8559 36EC 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
  8560 36EF AD EF A7			lda PRICE+1
  8561 36F2 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
  8562 36F5 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
  8563
  8564 				; optimize OK (sprites.pas), line = 141
  8565
  8566 36F8 A9 09			lda #$09
  8567 36FA 20 C6 1C			jsr CRT_WRITE_LOCSTR
  8568
  8569 				; optimize FAIL ('GETYESNO', sprites.pas), line = 142
  8570
  8571 36FD 20 08 20			jsr GETYESNO
  8572 3700 AD 1B A7			lda GETYESNO.RESULT
  8573 3703 8D ED A7			sta R
  8574
  8575 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', sprites.pas), line = 143
  8576
  8577 3706 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
  8578
  8579 				; optimize OK (sprites.pas), line = 144
  8580
  8581 3709 AD ED A7			lda R
  8582 370C C9 01			cmp #$01
  8583 370E D0 51			jne l_1830
  8584
  8585 				; optimize OK (sprites.pas), line = 146
  8586
  8587 3710 AD EE A7			lda PRICE
  8588 3713 8D D8 A7			sta PAYMONEY.PRICE
  8589 3716 AD EF A7			lda PRICE+1
  8590 3719 8D D9 A7			sta PAYMONEY.PRICE+1
  8591 371C 20 3B 32			jsr PAYMONEY
  8592 371F AD DA A7			lda PAYMONEY.RESULT
  8593 3722 D0 0C			jne l_1843
  8594
  8595 				; optimize FAIL ('GOTOCOURT', sprites.pas), line = 149
  8596
  8597 3724 20 6D 34			jsr GOTOCOURT
  8598 3727 AD E0 A7			lda GOTOCOURT.RESULT
  8599 372A 8D EB A7			sta RESULT
  8600 372D 4C D6 37			jmp @exit
  8601 3730			l_1843
  8602
  8603 				; optimize OK (sprites.pas), line = 154
  8604
  8605 3730 A9 05			lda #$05
  8606 3732 20 AD 13			jsr SYSTEM.RANDOM.@010180000
  8607 3735 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
  8608 3738 D0 14			jne l_1862
  8609
  8610 				; optimize OK (sprites.pas), line = 156
  8611
  8612 373A A9 0A			lda #$0A
  8613 373C 20 0B 1D			jsr CRT_WRITELN_LOCSTR
  8614
  8615 				; optimize FAIL ('WAITFORKEY', sprites.pas), line = 157
  8616
  8617 373F 20 4A 1E			jsr WAITFORKEY
  8618
  8619 				; optimize FAIL ('GOTOCOURT', sprites.pas), line = 158
  8620
  8621 3742 20 6D 34			jsr GOTOCOURT
  8622 3745 AD E0 A7			lda GOTOCOURT.RESULT
  8623 3748 8D EB A7			sta RESULT
  8624 374B 4C D6 37			jmp @exit
  8625 374E			l_1862
  8626
  8627 				; optimize OK (sprites.pas), line = 163
  8628
  8629 374E A9 0B			lda #$0B
  8630 3750 20 0B 1D			jsr CRT_WRITELN_LOCSTR
  8631
  8632 				; optimize FAIL ('WAITFORKEY', sprites.pas), line = 164
  8633
  8634 3753 20 4A 1E			jsr WAITFORKEY
  8635
  8636 				; optimize OK (sprites.pas), line = 165
  8637
  8638 3756 A9 00			lda #$00
  8639 3758 8D EB A7			sta RESULT
  8640 375B 4C D6 37			jmp @exit
  8641 375E			l_1851
  8642 375E 4C 6A 37			jmp l_187C
  8643 3761			l_1830
  8644
  8645 				; optimize FAIL ('GOTOCOURT', sprites.pas), line = 174
  8646
  8647 3761 20 6D 34			jsr GOTOCOURT
  8648 3764 AD E0 A7			lda GOTOCOURT.RESULT
  8649 3767 8D EB A7			sta RESULT
  8650 376A			l_187C
  8651 376A			l_1800
  8652
  8653 				; optimize OK (sprites.pas), line = 178
  8654
  8655 376A AD EC A7			lda A
  8656 376D C9 02			cmp #$02
  8657 376F D0 55			jne l_1894
  8658
  8659 				; optimize OK (sprites.pas), line = 181
  8660
  8661 3771 A9 50			lda #$50
  8662 3773 20 AD 13			jsr SYSTEM.RANDOM.@010180000
  8663 3776 E8				inx
  8664 3777 AD 62 9C 95 94		mva SYSTEM.RANDOM.@010180000.RESULT :STACKORIGIN,x
  8665 377C E8				inx
  8666 377D AC 8A CD			ldy CURRENTPLAYER
  8667 3780 B9 4C C9			lda adr.PLCAR,y
  8668 3783 A8				tay
  8669 3784 B9 12 E7			lda adr.CARRANGE,y
  8670 3787 A0 01			ldy #1
  8671 3789 D5 93			cmp :STACKORIGIN-1,x
  8672 378B 90 01			bcc @+
  8673 378D 88				dey
  8674 				@
  8675 378E CA				dex
  8676 378F CA				dex
  8677 3790 98				tya
  8678 3791 F0 1E			jeq l_18AE
  8679
  8680 				; optimize OK (sprites.pas), line = 183
  8681
  8682 3793 A9 04			lda #$04
  8683 3795 20 FD 2F			jsr REMOVEPOINTS
  8684
  8685 				; optimize OK (sprites.pas), line = 184
  8686
  8687 3798 A9 0C			lda #$0C
  8688 379A 20 0B 1D			jsr CRT_WRITELN_LOCSTR
  8689
  8690 				; optimize OK (sprites.pas), line = 185
  8691
  8692 379D A9 0D			lda #$0D
  8693 379F 20 0B 1D			jsr CRT_WRITELN_LOCSTR
  8694
  8695 				; optimize FAIL ('WAITFORKEY', sprites.pas), line = 186
  8696
  8697 37A2 20 4A 1E			jsr WAITFORKEY
  8698
  8699 				; optimize FAIL ('GOTOCOURT', sprites.pas), line = 187
  8700
  8701 37A5 20 6D 34			jsr GOTOCOURT
  8702 37A8 AD E0 A7			lda GOTOCOURT.RESULT
  8703 37AB 8D EB A7			sta RESULT
  8704 37AE 4C D6 37			jmp @exit
  8705 37B1			l_18AE
  8706
  8707 				; optimize OK (sprites.pas), line = 190
  8708
  8709 37B1 A9 0E			lda #$0E
  8710 37B3 20 0B 1D			jsr CRT_WRITELN_LOCSTR
  8711
  8712 				; optimize OK (sprites.pas), line = 191
  8713
  8714 37B6 A9 02			lda #$02
  8715 37B8 20 EC 2F			jsr ADDPOINTS
  8716
  8717 				; optimize FAIL ('WAITFORKEY', sprites.pas), line = 192
  8718
  8719 37BB 20 4A 1E			jsr WAITFORKEY
  8720
  8721 				; optimize OK (sprites.pas), line = 193
  8722
  8723 37BE A9 00			lda #$00
  8724 37C0 8D EB A7			sta RESULT
  8725 37C3 4C D6 37			jmp @exit
  8726 37C6			l_1894
  8727
  8728 				; optimize OK (sprites.pas), line = 197
  8729
  8730 37C6 AD EC A7			lda A
  8731 37C9 C9 03			cmp #$03
  8732 37CB D0 09			jne l_18D9
  8733
  8734 				; optimize FAIL ('GOTOCOURT', sprites.pas), line = 198
  8735
  8736 37CD 20 6D 34			jsr GOTOCOURT
  8737 37D0 AD E0 A7			lda GOTOCOURT.RESULT
  8738 37D3 8D EB A7			sta RESULT
  8739 37D6			l_18D9
  8740 37D6			@exit
  8741
  8742 				; ------------------------------------------------------------
  8743
  8744 = A7EB			RESULT	= DATAORIGIN+$0B95
  8745 = A7EC			A	= DATAORIGIN+$0B96
  8746 = A7ED			R	= DATAORIGIN+$0B97
  8747 = A7EE			PRICE	= DATAORIGIN+$0B98
  8748
  8749 = A7EC			@VarData	= A
  8750 = 0004			@VarDataSize	= 4
  8751
  8752 37D6 60				rts						; ret
  8753 				.endl
  8754
  8755 37D7			.local	ROADBLOCK					; FUNCTION
  8756
  8757 				; optimize OK (sprites.pas), line = 205
  8758
  8759 37D7 A9 01			lda #$01
  8760 37D9 8D EC A4			sta MAPRELOADED
  8761
  8762 				; optimize OK (sprites.pas), line = 206
  8763
  8764 37DC A9 00			lda #$00
  8765 37DE 8D F0 A7			sta RESULT
  8766
  8767 				; optimize OK (sprites.pas), line = 208
  8768
  8769 37E1 AC 8A CD			ldy CURRENTPLAYER
  8770 37E4 B9 98 C9			lda adr.PLRANK,y
  8771 37E7 C9 04			cmp #$04
  8772 37E9 B0 03			jcs l_1901
  8773 37EB 4C 83 38			jmp @exit
  8774 37EE			l_1901
  8775
  8776 				; optimize OK (sprites.pas), line = 209
  8777
  8778 37EE A9 E0			lda #$E0
  8779 37F0 20 AD 13			jsr SYSTEM.RANDOM.@010180000
  8780 37F3 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
  8781 37F6 F0 03			jeq l_1915
  8782 37F8 4C 83 38			jmp @exit
  8783 37FB			l_1915
  8784
  8785 				; optimize OK (sprites.pas), line = 211
  8786
  8787 37FB A9 1B			lda #$1B
  8788 37FD 20 1F 29			jsr LOADLOCATION
  8789
  8790 				; optimize FAIL ('ENABLECONSOLE', sprites.pas), line = 212
  8791
  8792 3800 20 B0 27			jsr ENABLECONSOLE
  8793
  8794 				; optimize FAIL ('SHOWLOCATIONHEADER', sprites.pas), line = 213
  8795
  8796 3803 20 7A 28			jsr SHOWLOCATIONHEADER
  8797
  8798 				; optimize OK (sprites.pas), line = 215
  8799
  8800 3806 A9 01			lda #$01
  8801 3808 20 0B 1D			jsr CRT_WRITELN_LOCSTR
  8802
  8803 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', sprites.pas), line = 216
  8804
  8805 380B 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
  8806
  8807 				; optimize OK (sprites.pas), line = 217
  8808
  8809 380E A9 78			lda #$78
  8810 3810 20 7C 27			jsr WAITFRAMES
  8811
  8812 				; optimize OK (sprites.pas), line = 219
  8813
  8814 3813 A9 02			lda #$02
  8815 3815 20 AD 13			jsr SYSTEM.RANDOM.@010180000
  8816 3818 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
  8817 381B D0 59			jne l_1932
  8818
  8819 				; optimize OK (sprites.pas), line = 221
  8820
  8821 381D A9 01			lda #$01
  8822 381F 8D F0 A7			sta RESULT
  8823
  8824 				; optimize OK (sprites.pas), line = 222
  8825
  8826 3822 AC 8A CD			ldy CURRENTPLAYER
  8827 3825 B9 40 C9			lda adr.PLFAKEMONEY,y
  8828 3828 F0 11			jeq l_194C
  8829
  8830 				; optimize FAIL ('CRT_WRITELN', sprites.pas), line = 223
  8831
  8832 382A E8				inx
  8833 382B AD BF 9A 95 94		mva LOC_STRING_2 :STACKORIGIN,x
  8834 3830 AD C0 9A 95 A4		mva LOC_STRING_2+1 :STACKORIGIN+STACKWIDTH,x
  8835 3835 20 A9 1E			jsr CRT_WRITELN
  8836 3838 4C 76 38			jmp l_1959
  8837 383B			l_194C
  8838
  8839 				; optimize OK (sprites.pas), line = 224
  8840
  8841 383B AC 8A CD			ldy CURRENTPLAYER
  8842 383E B9 44 C9			lda adr.PLALCOHOL,y
  8843 3841 F0 15			jeq l_196E
  8844
  8845 				; optimize OK (sprites.pas), line = 226
  8846
  8847 3843 A9 03			lda #$03
  8848 3845 20 0B 1D			jsr CRT_WRITELN_LOCSTR
  8849
  8850 				; optimize OK (sprites.pas), line = 227
  8851
  8852 3848 A9 04			lda #$04
  8853 384A 20 0B 1D			jsr CRT_WRITELN_LOCSTR
  8854
  8855 				; optimize OK (sprites.pas), line = 228
  8856
  8857 384D AC 8A CD			ldy CURRENTPLAYER
  8858 3850 A9 00			lda #$00
  8859 3852 99 44 C9			sta adr.PLALCOHOL,y
  8860 3855 4C 76 38			jmp l_1983
  8861 3858			l_196E
  8862
  8863 				; optimize OK (sprites.pas), line = 230
  8864
  8865 3858 AC 8A CD			ldy CURRENTPLAYER
  8866 385B B9 48 C9			lda adr.PLFORGEDID,y
  8867 385E D0 11			jne l_1998
  8868
  8869 				; optimize FAIL ('CRT_WRITELN', sprites.pas), line = 231
  8870
  8871 3860 E8				inx
  8872 3861 AD C5 9A 95 94		mva LOC_STRING_5 :STACKORIGIN,x
  8873 3866 AD C6 9A 95 A4		mva LOC_STRING_5+1 :STACKORIGIN+STACKWIDTH,x
  8874 386B 20 A9 1E			jsr CRT_WRITELN
  8875 386E 4C 76 38			jmp l_19A5
  8876 3871			l_1998
  8877
  8878 				; optimize OK (sprites.pas), line = 233
  8879
  8880 3871 A9 00			lda #$00
  8881 3873 8D F0 A7			sta RESULT
  8882 3876			l_19A5
  8883 3876			l_1983
  8884 3876			l_1959
  8885 3876			l_1932
  8886
  8887 				; optimize OK (sprites.pas), line = 236
  8888
  8889 3876 AD F0 A7			lda RESULT
  8890 3879 D0 05			jne l_19BD
  8891
  8892 				; optimize OK (sprites.pas), line = 237
  8893
  8894 387B A9 06			lda #$06
  8895 387D 20 0B 1D			jsr CRT_WRITELN_LOCSTR
  8896 3880			l_19BD
  8897
  8898 				; optimize FAIL ('WAITFORKEY', sprites.pas), line = 238
  8899
  8900 3880 20 4A 1E			jsr WAITFORKEY
  8901 3883			@exit
  8902
  8903 				; ------------------------------------------------------------
  8904
  8905 = A7F0			RESULT	= DATAORIGIN+$0B9A
  8906
  8907 3883 60				rts						; ret
  8908 				.endl
  8909
  8910 3884			.local	PAINTPLAYER					; PROCEDURE
  8911 3884 8D F1 A7			sta CLEAR
  8912
  8913 				; optimize OK (sprites.pas), line = 252
  8914
  8915 3887 AD 8A CD			lda CURRENTPLAYER
  8916 388A 0A				asl @
  8917 388B 0A				asl @
  8918 388C 0A				asl @
  8919 388D 8D F5 A7			sta Z
  8920
  8921 				; optimize OK (sprites.pas), line = 254
  8922
  8923 3890 A9 00			lda #$00
  8924 3892 8D F3 A7			sta PLAYEROFS
  8925 3895 8D F4 A7			sta PLAYEROFS+1
  8926
  8927 				; optimize OK (sprites.pas), line = 255
  8928
  8929 3898 AD F8 EA			lda SPRITEMOVEDIR
  8930 389B C9 FF			cmp #$FF
  8931 389D D0 0A			jne l_19E7
  8932
  8933 				; optimize OK (sprites.pas), line = 256
  8934
  8935 389F A9 C0			lda #$C0
  8936 38A1 8D F3 A7			sta PLAYEROFS
  8937 38A4 A9 00			lda #$00
  8938 38A6 8D F4 A7			sta PLAYEROFS+1
  8939 38A9			l_19E7
  8940
  8941 				; optimize OK (sprites.pas), line = 258
  8942
  8943 38A9 AC F5 A7			ldy Z
  8944 38AC B9 68 CD			lda adr.GANGSTERSEX,y
  8945 38AF C9 01			cmp #$01
  8946 38B1 D0 0E			jne l_1A03
  8947 38B3 AD F3 A7			lda PLAYEROFS
  8948 38B6 18 69 60			add #$60
  8949 38B9 8D F3 A7			sta PLAYEROFS
  8950 38BC 90 03			scc
  8951 38BE EE F4 A7			inc PLAYEROFS+1
  8952 38C1			l_1A03
  8953
  8954 				; optimize OK (sprites.pas), line = 266
  8955
  8956 38C1 A9 00			lda #$00
  8957 38C3 CD ED A4			cmp SPRITEOFFSET
  8958 38C6 B0 14			jcs l_1A2D
  8959 38C8 AD ED A4			lda SPRITEOFFSET
  8960 38CB C9 07			cmp #$07
  8961 38CD B0 0D			jcs l_1A2D
  8962
  8963 				; optimize OK (sprites.pas), line = 267
  8964
  8965 38CF AD F3 A7			lda PLAYEROFS
  8966 38D2 69 30			adc #$30
  8967 38D4 8D F3 A7			sta PLAYEROFS
  8968 38D7 90 03			scc
  8969 38D9 EE F4 A7			inc PLAYEROFS+1
  8970 38DC			l_1A2D
  8971
  8972 				; optimize OK (sprites.pas), line = 270
  8973
  8974 38DC A9 0C			lda #$0C
  8975 38DE 8D F2 A7			sta PLAYERHEIGHT
  8976
  8977 				; optimize OK (sprites.pas), line = 273
  8978
  8979 38E1 AD AF EA			lda PLAYERPOS_Y
  8980 38E4 85 8C			sta SYSTEM.MOVE.@03018100001880000188000.DEST
  8981 38E6 A9 BC			lda #$BC
  8982 38E8 85 8D			sta SYSTEM.MOVE.@03018100001880000188000.DEST+1
  8983 38EA AD F3 A7			lda PLAYEROFS
  8984 38ED 85 88			sta SYSTEM.MOVE.@03018100001880000188000.SOURCE
  8985 38EF A9 B8			lda #$B8
  8986 38F1 18 6D F4 A7			add PLAYEROFS+1
  8987 38F5 85 89			sta SYSTEM.MOVE.@03018100001880000188000.SOURCE+1
  8988 38F7 AD F2 A7			lda PLAYERHEIGHT
  8989 38FA 85 84			sta SYSTEM.MOVE.@03018100001880000188000.COUNT
  8990 38FC A9 00			lda #$00
  8991 38FE 85 85			sta SYSTEM.MOVE.@03018100001880000188000.COUNT+1
  8992 3900				.LOCAL +MAIN.SYSTEM.MOVE.@03018100001880000188000
  8993 3900				m@INLINE
Macro: MAIN.SYSTEM.MOVE.@03018100001880000188000.M@INLINE [Source: main_PL.a65]
     4 3900 20 D7 0E			jsr @move
Source: main_PL.a65
  8994 					.ENDL
  8995
  8996 				; optimize OK (sprites.pas), line = 274
  8997
  8998 3903 AD AF EA			lda PLAYERPOS_Y
  8999 3906 85 8C			sta SYSTEM.MOVE.@03018100001880000188000.DEST
  9000 3908 A9 BD			lda #$BD
  9001 390A 85 8D			sta SYSTEM.MOVE.@03018100001880000188000.DEST+1
  9002 390C AD F3 A7			lda PLAYEROFS
  9003 390F 18 6D F2 A7			add PLAYERHEIGHT
  9004 3913 85 88			sta SYSTEM.MOVE.@03018100001880000188000.SOURCE
  9005 3915 AD F4 A7			lda PLAYEROFS+1
  9006 3918 69 B8			adc #$B8
  9007 391A 85 89			sta SYSTEM.MOVE.@03018100001880000188000.SOURCE+1
  9008 391C AD F2 A7			lda PLAYERHEIGHT
  9009 391F 85 84			sta SYSTEM.MOVE.@03018100001880000188000.COUNT
  9010 3921 A9 00			lda #$00
  9011 3923 85 85			sta SYSTEM.MOVE.@03018100001880000188000.COUNT+1
  9012 3925				.LOCAL +MAIN.SYSTEM.MOVE.@03018100001880000188000
  9013 3925				m@INLINE
Macro: MAIN.SYSTEM.MOVE.@03018100001880000188000.M@INLINE [Source: main_PL.a65]
     4 3925 20 D7 0E			jsr @move
Source: main_PL.a65
  9014 					.ENDL
  9015
  9016 				; optimize OK (sprites.pas), line = 275
  9017
  9018 3928 AD AF EA			lda PLAYERPOS_Y
  9019 392B 85 8C			sta SYSTEM.MOVE.@03018100001880000188000.DEST
  9020 392D A9 BE			lda #$BE
  9021 392F 85 8D			sta SYSTEM.MOVE.@03018100001880000188000.DEST+1
  9022 3931 AD F3 A7			lda PLAYEROFS
  9023 3934 85 9F			sta :STACKORIGIN+11
  9024 3936 A9 B8			lda #$B8
  9025 3938 18 6D F4 A7			add PLAYEROFS+1
  9026 393C 85 AF			sta :STACKORIGIN+STACKWIDTH+11
  9027 393E A9 00			lda #$00
  9028 3940 85 B0			sta :STACKORIGIN+STACKWIDTH+12
  9029 3942 AD F2 A7			lda PLAYERHEIGHT
  9030 3945 0A				asl @
  9031 3946 26 B0			rol :STACKORIGIN+STACKWIDTH+12
  9032 3948 18 65 9F			add :STACKORIGIN+11
  9033 394B 85 88			sta SYSTEM.MOVE.@03018100001880000188000.SOURCE
  9034 394D A5 AF			lda :STACKORIGIN+STACKWIDTH+11
  9035 394F 65 B0			adc :STACKORIGIN+STACKWIDTH+12
  9036 3951 85 89			sta SYSTEM.MOVE.@03018100001880000188000.SOURCE+1
  9037 3953 AD F2 A7			lda PLAYERHEIGHT
  9038 3956 85 84			sta SYSTEM.MOVE.@03018100001880000188000.COUNT
  9039 3958 A9 00			lda #$00
  9040 395A 85 85			sta SYSTEM.MOVE.@03018100001880000188000.COUNT+1
  9041 395C				.LOCAL +MAIN.SYSTEM.MOVE.@03018100001880000188000
  9042 395C				m@INLINE
Macro: MAIN.SYSTEM.MOVE.@03018100001880000188000.M@INLINE [Source: main_PL.a65]
     4 395C 20 D7 0E			jsr @move
Source: main_PL.a65
  9043 					.ENDL
  9044
  9045 				; optimize OK (sprites.pas), line = 276
  9046
  9047 395F AD AF EA			lda PLAYERPOS_Y
  9048 3962 85 8C			sta SYSTEM.MOVE.@03018100001880000188000.DEST
  9049 3964 A9 BF			lda #$BF
  9050 3966 85 8D			sta SYSTEM.MOVE.@03018100001880000188000.DEST+1
  9051 3968 AD F3 A7			lda PLAYEROFS
  9052 396B 85 9F			sta :STACKORIGIN+11
  9053 396D A9 B8			lda #$B8
  9054 396F 18 6D F4 A7			add PLAYEROFS+1
  9055 3973 85 AF			sta :STACKORIGIN+STACKWIDTH+11
  9056 3975 A9 00			lda #$00
  9057 3977 85 B0			sta :STACKORIGIN+STACKWIDTH+12
  9058 3979 AD F2 A7			lda PLAYERHEIGHT
  9059 397C 0A				asl @
  9060 397D 26 B0			rol :STACKORIGIN+STACKWIDTH+12
  9061 397F 18 6D F2 A7			add PLAYERHEIGHT
  9062 3983 85 A0			sta :STACKORIGIN+12
  9063 3985 A5 B0			lda :STACKORIGIN+STACKWIDTH+12
  9064 3987 69 00			adc #$00
  9065 3989 85 B0			sta :STACKORIGIN+STACKWIDTH+12
  9066 398B A5 9F			lda :STACKORIGIN+11
  9067 398D 18 65 A0			add :STACKORIGIN+12
  9068 3990 85 88			sta SYSTEM.MOVE.@03018100001880000188000.SOURCE
  9069 3992 A5 AF			lda :STACKORIGIN+STACKWIDTH+11
  9070 3994 65 B0			adc :STACKORIGIN+STACKWIDTH+12
  9071 3996 85 89			sta SYSTEM.MOVE.@03018100001880000188000.SOURCE+1
  9072 3998 AD F2 A7			lda PLAYERHEIGHT
  9073 399B 85 84			sta SYSTEM.MOVE.@03018100001880000188000.COUNT
  9074 399D A9 00			lda #$00
  9075 399F 85 85			sta SYSTEM.MOVE.@03018100001880000188000.COUNT+1
  9076 39A1				.LOCAL +MAIN.SYSTEM.MOVE.@03018100001880000188000
  9077 39A1				m@INLINE
Macro: MAIN.SYSTEM.MOVE.@03018100001880000188000.M@INLINE [Source: main_PL.a65]
     4 39A1 20 D7 0E			jsr @move
Source: main_PL.a65
  9078 					.ENDL
  9079
  9080 				; optimize OK (sprites.pas), line = 279
  9081
  9082 39A4 AD F1 A7			lda CLEAR
  9083 39A7 C9 01			cmp #$01
  9084 39A9 F0 03 4C 7F 3A		jne l_1ABD
  9085
  9086 				; optimize OK (sprites.pas), line = 281
  9087
  9088 39AE AD AF EA			lda PLAYERPOS_Y
  9089 39B1 38 E9 01			sub #$01
  9090 39B4 8D F3 A7			sta PLAYEROFS
  9091 39B7 A9 00			lda #$00
  9092 39B9 E9 00			sbc #$00
  9093 39BB 8D F4 A7			sta PLAYEROFS+1
  9094
  9095 				; optimize OK (sprites.pas), line = 282
  9096
  9097 39BE AD F3 A7			lda PLAYEROFS
  9098 39C1 85 82			sta :bp2
  9099 39C3 A9 BC			lda #$BC
  9100 39C5 18 6D F4 A7			add PLAYEROFS+1
  9101 39C9 85 83			sta :bp2+1
  9102 39CB A9 00			lda #$00
  9103 39CD A0 00			ldy #$00
  9104 39CF 91 82 88 10 FB		sta:rpl (:bp2),y-
  9105
  9106 				; optimize OK (sprites.pas), line = 283
  9107
  9108 39D4 AD F3 A7			lda PLAYEROFS
  9109 39D7 85 82			sta :bp2
  9110 39D9 A9 BD			lda #$BD
  9111 39DB 18 6D F4 A7			add PLAYEROFS+1
  9112 39DF 85 83			sta :bp2+1
  9113 39E1 A9 00			lda #$00
  9114 39E3 A0 00			ldy #$00
  9115 39E5 91 82 88 10 FB		sta:rpl (:bp2),y-
  9116
  9117 				; optimize OK (sprites.pas), line = 284
  9118
  9119 39EA AD F3 A7			lda PLAYEROFS
  9120 39ED 85 82			sta :bp2
  9121 39EF A9 BE			lda #$BE
  9122 39F1 18 6D F4 A7			add PLAYEROFS+1
  9123 39F5 85 83			sta :bp2+1
  9124 39F7 A9 00			lda #$00
  9125 39F9 A0 00			ldy #$00
  9126 39FB 91 82 88 10 FB		sta:rpl (:bp2),y-
  9127
  9128 				; optimize OK (sprites.pas), line = 285
  9129
  9130 3A00 AD F3 A7			lda PLAYEROFS
  9131 3A03 85 82			sta :bp2
  9132 3A05 A9 BF			lda #$BF
  9133 3A07 18 6D F4 A7			add PLAYEROFS+1
  9134 3A0B 85 83			sta :bp2+1
  9135 3A0D A9 00			lda #$00
  9136 3A0F A0 00			ldy #$00
  9137 3A11 91 82 88 10 FB		sta:rpl (:bp2),y-
  9138
  9139 				; optimize OK (sprites.pas), line = 287
  9140
  9141 3A16 AD AF EA			lda PLAYERPOS_Y
  9142 3A19 18 6D F2 A7			add PLAYERHEIGHT
  9143 3A1D 8D F3 A7			sta PLAYEROFS
  9144 3A20 A9 00			lda #$00
  9145 3A22 69 00			adc #$00
  9146 3A24 8D F4 A7			sta PLAYEROFS+1
  9147
  9148 				; optimize OK (sprites.pas), line = 288
  9149
  9150 3A27 AD F3 A7			lda PLAYEROFS
  9151 3A2A 85 82			sta :bp2
  9152 3A2C A9 BC			lda #$BC
  9153 3A2E 18 6D F4 A7			add PLAYEROFS+1
  9154 3A32 85 83			sta :bp2+1
  9155 3A34 A9 00			lda #$00
  9156 3A36 A0 00			ldy #$00
  9157 3A38 91 82 88 10 FB		sta:rpl (:bp2),y-
  9158
  9159 				; optimize OK (sprites.pas), line = 289
  9160
  9161 3A3D AD F3 A7			lda PLAYEROFS
  9162 3A40 85 82			sta :bp2
  9163 3A42 A9 BD			lda #$BD
  9164 3A44 18 6D F4 A7			add PLAYEROFS+1
  9165 3A48 85 83			sta :bp2+1
  9166 3A4A A9 00			lda #$00
  9167 3A4C A0 00			ldy #$00
  9168 3A4E 91 82 88 10 FB		sta:rpl (:bp2),y-
  9169
  9170 				; optimize OK (sprites.pas), line = 290
  9171
  9172 3A53 AD F3 A7			lda PLAYEROFS
  9173 3A56 85 82			sta :bp2
  9174 3A58 A9 BE			lda #$BE
  9175 3A5A 18 6D F4 A7			add PLAYEROFS+1
  9176 3A5E 85 83			sta :bp2+1
  9177 3A60 A9 00			lda #$00
  9178 3A62 A0 00			ldy #$00
  9179 3A64 91 82 88 10 FB		sta:rpl (:bp2),y-
  9180
  9181 				; optimize OK (sprites.pas), line = 291
  9182
  9183 3A69 AD F3 A7			lda PLAYEROFS
  9184 3A6C 85 82			sta :bp2
  9185 3A6E A9 BF			lda #$BF
  9186 3A70 18 6D F4 A7			add PLAYEROFS+1
  9187 3A74 85 83			sta :bp2+1
  9188 3A76 A9 00			lda #$00
  9189 3A78 A0 00			ldy #$00
  9190 3A7A 91 82 88 10 FB		sta:rpl (:bp2),y-
  9191 3A7F			l_1ABD
  9192
  9193 				; ------------------------------------------------------------
  9194
  9195 = A7F1			CLEAR	= DATAORIGIN+$0B9B
  9196 = A7F2			PLAYERHEIGHT	= DATAORIGIN+$0B9C
  9197 = A7F3			PLAYEROFS	= DATAORIGIN+$0B9D
  9198 = A7F5			Z	= DATAORIGIN+$0B9F
  9199
  9200 = A7F1			@VarData	= CLEAR
  9201 = 0005			@VarDataSize	= 5
  9202
  9203 3A7F			@exit
  9204 					.ifdef @new
  9205 					lda <@VarData
  9206 					sta :ztmp
  9207 					lda >@VarData
  9208 					ldy #@VarDataSize-1
  9209 					jmp @FreeMem
  9210 					els
  9211 3A7F 60				rts						; ret
  9212 					eif
  9213 				.endl
  9214
  9215 3A80			.local	MOVECURRENTPLAYER				; FUNCTION
  9216 3A80 8D F6 A7			sta CH
  9217
  9218 				; optimize OK (sprites.pas), line = 307
  9219
  9220 3A83 A9 10			lda #$10
  9221 3A85 8D FD A7			sta CURLOC
  9222
  9223 				; optimize OK (sprites.pas), line = 308
  9224
  9225 3A88 8D F7 A7			sta RESULT
  9226
  9227 				; optimize OK (sprites.pas), line = 310
  9228
  9229 3A8B A9 00			lda #$00
  9230 3A8D 8D F9 A7			sta DIR_X
  9231
  9232 				; optimize OK (sprites.pas), line = 311
  9233
  9234 3A90 8D FA A7			sta DIR_Y
  9235
  9236 				; optimize OK (sprites.pas), line = 313
  9237
  9238 3A93 AD F6 A7			lda CH
  9239 3A96 8D FF A7			sta @CASETMP_000B
  9240 3A99 C9 06			cmp #$06
  9241 3A9B D0 05			jne l_1B5D
  9242 				@
  9243
  9244 				; optimize OK (sprites.pas), line = 315
  9245
  9246 3A9D A9 FF			lda #$FF
  9247 				; optimize OK (sprites.pas), line = 316
  9248 3A9F 4C A8 3A			jmp s_1B74
  9249 3AA2			l_1B5D
  9250 3AA2 C9 07			cmp #$07
  9251 3AA4 D0 0B			jne l_1B6C
  9252
  9253 				; optimize OK (sprites.pas), line = 319
  9254
  9255 3AA6 A9 01			lda #$01
  9256 3AA8			s_1B74
  9257 3AA8 8D F9 A7			sta DIR_X
  9258
  9259 				; optimize OK (sprites.pas), line = 320
  9260
  9261 3AAB 8D F8 EA			sta SPRITEMOVEDIR
  9262 3AAE 4C D1 3A			jmp a_000B
  9263 3AB1			l_1B6C
  9264 3AB1 C9 0E			cmp #$0E
  9265 3AB3 D0 08			jne l_1B7B
  9266
  9267 				; optimize OK (sprites.pas), line = 322
  9268
  9269 3AB5 A9 FF			lda #$FF
  9270 3AB7 8D FA A7			sta DIR_Y
  9271 3ABA 4C D1 3A			jmp a_000B
  9272 3ABD			l_1B7B
  9273 3ABD C9 0F			cmp #$0F
  9274 3ABF D0 08			jne l_1B86
  9275
  9276 				; optimize OK (sprites.pas), line = 323
  9277
  9278 3AC1 A9 01			lda #$01
  9279 3AC3 8D FA A7			sta DIR_Y
  9280 3AC6 4C D1 3A			jmp a_000B
  9281 3AC9			l_1B86
  9282
  9283 				; optimize OK (sprites.pas), line = 326
  9284
  9285 3AC9 A9 01			lda #$01
  9286 3ACB 20 7C 27			jsr WAITFRAMES
  9287 3ACE 4C 5E 3D			jmp @exit
  9288 3AD1			a_000B
  9289
  9290 				; optimize OK (sprites.pas), line = 333
  9291
  9292 3AD1 A9 00			lda #$00
  9293 3AD3 8D FC A7			sta LEAVEMAP
  9294
  9295 				; optimize OK (sprites.pas), line = 334
  9296
  9297 3AD6 AD B0 EA			lda MAPPOS_X
  9298 3AD9 C9 13			cmp #$13
  9299 3ADB D0 0C			jne l_1BB4
  9300 3ADD AD F9 A7			lda DIR_X
  9301 3AE0 C9 01			cmp #$01
  9302 3AE2 D0 05			jne l_1BB4
  9303 3AE4 A9 01			lda #$01
  9304 3AE6 8D FC A7			sta LEAVEMAP
  9305 3AE9			l_1BB4
  9306
  9307 				; optimize OK (sprites.pas), line = 335
  9308
  9309 3AE9 AD B0 EA			lda MAPPOS_X
  9310 3AEC D0 0C			jne l_1BD9
  9311 3AEE AD F9 A7			lda DIR_X
  9312 3AF1 C9 FF			cmp #$FF
  9313 3AF3 D0 05			jne l_1BD9
  9314 3AF5 A9 01			lda #$01
  9315 3AF7 8D FC A7			sta LEAVEMAP
  9316 3AFA			l_1BD9
  9317
  9318 				; optimize OK (sprites.pas), line = 336
  9319
  9320 3AFA AD B1 EA			lda MAPPOS_Y
  9321 3AFD C9 11			cmp #$11
  9322 3AFF D0 0C			jne l_1BFE
  9323 3B01 AD FA A7			lda DIR_Y
  9324 3B04 C9 01			cmp #$01
  9325 3B06 D0 05			jne l_1BFE
  9326 3B08 A9 01			lda #$01
  9327 3B0A 8D FC A7			sta LEAVEMAP
  9328 3B0D			l_1BFE
  9329
  9330 				; optimize OK (sprites.pas), line = 337
  9331
  9332 3B0D AD B1 EA			lda MAPPOS_Y
  9333 3B10 D0 0C			jne l_1C23
  9334 3B12 AD FA A7			lda DIR_Y
  9335 3B15 C9 FF			cmp #$FF
  9336 3B17 D0 05			jne l_1C23
  9337 3B19 A9 01			lda #$01
  9338 3B1B 8D FC A7			sta LEAVEMAP
  9339 3B1E			l_1C23
  9340
  9341 				; optimize OK (sprites.pas), line = 338
  9342
  9343 3B1E AD FC A7			lda LEAVEMAP
  9344 3B21 F0 03 4C 4D 3C		jne l_1C3C
  9345
  9346 				; optimize OK (sprites.pas), line = 340
  9347
  9348 3B26 AD B1 EA			lda MAPPOS_Y
  9349 3B29 18 69 01			add #$01
  9350 3B2C 85 9E			sta :STACKORIGIN+10
  9351 3B2E A9 00			lda #$00
  9352 3B30 69 00			adc #$00
  9353 3B32 85 AE			sta :STACKORIGIN+STACKWIDTH+10
  9354 3B34 A0 00			ldy #$00
  9355 3B36 AD FA A7			lda DIR_Y
  9356 3B39 10 01			spl
  9357 3B3B 88				dey
  9358 3B3C 18 65 9E			add :STACKORIGIN+10
  9359 3B3F 85 84			sta :eax
  9360 3B41 98				tya
  9361 3B42 65 AE			adc :STACKORIGIN+STACKWIDTH+10
  9362 3B44 85 85			sta :eax+1
  9363 3B46 A9 28			lda #$28
  9364 3B48 85 8C			sta :ecx
  9365 3B4A A9 00			lda #$00
  9366 3B4C 85 8D			sta :ecx+1
  9367 					.ifdef fmulinit
  9368 					fmulu_16
  9369 					els
  9370 3B4E 20 8F 10			imulCX
  9371 					eif
  9372 3B51 A5 84			lda :eax
  9373 3B53 85 9D			sta :STACKORIGIN+9
  9374 3B55 A9 E0			lda #$E0
  9375 3B57 18 65 85			add :eax+1
  9376 3B5A 85 AD			sta :STACKORIGIN+STACKWIDTH+9
  9377 3B5C AD B0 EA			lda MAPPOS_X
  9378 3B5F 85 9E			sta :STACKORIGIN+10
  9379 3B61 A9 00			lda #$00
  9380 3B63 06 9E			asl :STACKORIGIN+10
  9381 3B65 2A				rol @
  9382 3B66 85 AE			sta :STACKORIGIN+STACKWIDTH+10
  9383 3B68 A5 9D			lda :STACKORIGIN+9
  9384 3B6A 18 65 9E			add :STACKORIGIN+10
  9385 3B6D 85 9D			sta :STACKORIGIN+9
  9386 3B6F A5 AD			lda :STACKORIGIN+STACKWIDTH+9
  9387 3B71 65 AE			adc :STACKORIGIN+STACKWIDTH+10
  9388 3B73 85 AD			sta :STACKORIGIN+STACKWIDTH+9
  9389 3B75 A0 00			ldy #$00
  9390 3B77 AD F9 A7			lda DIR_X
  9391 3B7A 10 01			spl
  9392 3B7C 88				dey
  9393 3B7D 84 AE			sty :STACKORIGIN+STACKWIDTH+10
  9394 3B7F 0A				asl @
  9395 3B80 26 AE			rol :STACKORIGIN+STACKWIDTH+10
  9396 3B82 18 65 9D			add :STACKORIGIN+9
  9397 3B85 A8				tay
  9398 3B86 A5 AD			lda :STACKORIGIN+STACKWIDTH+9
  9399 3B88 65 AE			adc :STACKORIGIN+STACKWIDTH+10
  9400 3B8A 85 81			sta :bp+1
  9401 3B8C B1 80			lda (:bp),y
  9402 3B8E 8D FB A7			sta LENCID
  9403
  9404 				; optimize OK (sprites.pas), line = 343
  9405
  9406 3B91 8D 00 A8			sta @CASETMP_000C
  9407 3B94 C9 41			cmp #$41
  9408 3B96 D0 08			jne l_1C75
  9409 				@
  9410
  9411 				; optimize OK (sprites.pas), line = 344
  9412
  9413 3B98 A9 0D			lda #$0D
  9414 3B9A 8D FD A7			sta CURLOC
  9415 3B9D 4C 4D 3C			jmp a_000C
  9416 3BA0			l_1C75
  9417 3BA0 C9 42			cmp #$42
  9418 3BA2 D0 08			jne l_1C80
  9419
  9420 				; optimize OK (sprites.pas), line = 345
  9421
  9422 3BA4 A9 06			lda #$06
  9423 3BA6 8D FD A7			sta CURLOC
  9424 3BA9 4C 4D 3C			jmp a_000C
  9425 3BAC			l_1C80
  9426 3BAC C9 43			cmp #$43
  9427 3BAE D0 08			jne l_1C8B
  9428
  9429 				; optimize OK (sprites.pas), line = 346
  9430
  9431 3BB0 A9 02			lda #$02
  9432 3BB2 8D FD A7			sta CURLOC
  9433 3BB5 4C 4D 3C			jmp a_000C
  9434 3BB8			l_1C8B
  9435 3BB8 C9 44			cmp #$44
  9436 3BBA D0 08			jne l_1C96
  9437
  9438 				; optimize OK (sprites.pas), line = 347
  9439
  9440 3BBC A9 04			lda #$04
  9441 3BBE 8D FD A7			sta CURLOC
  9442 3BC1 4C 4D 3C			jmp a_000C
  9443 3BC4			l_1C96
  9444 3BC4 C9 45			cmp #$45
  9445 3BC6 D0 08			jne l_1CA1
  9446
  9447 				; optimize OK (sprites.pas), line = 348
  9448
  9449 3BC8 A9 07			lda #$07
  9450 3BCA 8D FD A7			sta CURLOC
  9451 3BCD 4C 4D 3C			jmp a_000C
  9452 3BD0			l_1CA1
  9453 3BD0 C9 46			cmp #$46
  9454 3BD2 D0 08			jne l_1CAC
  9455
  9456 				; optimize OK (sprites.pas), line = 349
  9457
  9458 3BD4 A9 0C			lda #$0C
  9459 3BD6 8D FD A7			sta CURLOC
  9460 3BD9 4C 4D 3C			jmp a_000C
  9461 3BDC			l_1CAC
  9462 3BDC C9 47			cmp #$47
  9463 3BDE D0 08			jne l_1CB7
  9464
  9465 				; optimize OK (sprites.pas), line = 350
  9466
  9467 3BE0 A9 01			lda #$01
  9468 3BE2 8D FD A7			sta CURLOC
  9469 3BE5 4C 4D 3C			jmp a_000C
  9470 3BE8			l_1CB7
  9471 3BE8 C9 48			cmp #$48
  9472 3BEA D0 08			jne l_1CC2
  9473
  9474 				; optimize OK (sprites.pas), line = 351
  9475
  9476 3BEC A9 0B			lda #$0B
  9477 3BEE 8D FD A7			sta CURLOC
  9478 3BF1 4C 4D 3C			jmp a_000C
  9479 3BF4			l_1CC2
  9480 3BF4 C9 49			cmp #$49
  9481 3BF6 D0 08			jne l_1CCD
  9482
  9483 				; optimize OK (sprites.pas), line = 352
  9484
  9485 3BF8 A9 0A			lda #$0A
  9486 3BFA 8D FD A7			sta CURLOC
  9487 3BFD 4C 4D 3C			jmp a_000C
  9488 3C00			l_1CCD
  9489 3C00 C9 4A			cmp #$4A
  9490 3C02 D0 08			jne l_1CD8
  9491
  9492 				; optimize OK (sprites.pas), line = 353
  9493
  9494 3C04 A9 05			lda #$05
  9495 3C06 8D FD A7			sta CURLOC
  9496 3C09 4C 4D 3C			jmp a_000C
  9497 3C0C			l_1CD8
  9498 3C0C C9 4B			cmp #$4B
  9499 3C0E D0 08			jne l_1CE3
  9500
  9501 				; optimize OK (sprites.pas), line = 354
  9502
  9503 3C10 A9 09			lda #$09
  9504 3C12 8D FD A7			sta CURLOC
  9505 3C15 4C 4D 3C			jmp a_000C
  9506 3C18			l_1CE3
  9507 3C18 C9 4C			cmp #$4C
  9508 3C1A D0 08			jne l_1CEE
  9509
  9510 				; optimize OK (sprites.pas), line = 355
  9511
  9512 3C1C A9 17			lda #$17
  9513 3C1E 8D FD A7			sta CURLOC
  9514 3C21 4C 4D 3C			jmp a_000C
  9515 3C24			l_1CEE
  9516 3C24 C9 4D			cmp #$4D
  9517 3C26 D0 08			jne l_1CF9
  9518
  9519 				; optimize OK (sprites.pas), line = 356
  9520
  9521 3C28 A9 03			lda #$03
  9522 3C2A 8D FD A7			sta CURLOC
  9523 3C2D 4C 4D 3C			jmp a_000C
  9524 3C30			l_1CF9
  9525 3C30 C9 4E			cmp #$4E
  9526 3C32 D0 08			jne l_1D04
  9527
  9528 				; optimize OK (sprites.pas), line = 357
  9529
  9530 3C34 A9 18			lda #$18
  9531 3C36 8D FD A7			sta CURLOC
  9532 3C39 4C 4D 3C			jmp a_000C
  9533 3C3C			l_1D04
  9534 3C3C C9 2E			cmp #$2E
  9535 3C3E D0 08			jne l_1D0F
  9536
  9537 				; optimize OK (sprites.pas), line = 358
  9538
  9539 3C40 A9 10			lda #$10
  9540 3C42 8D FD A7			sta CURLOC
  9541 3C45 4C 4D 3C			jmp a_000C
  9542 3C48			l_1D0F
  9543
  9544 				; optimize OK (sprites.pas), line = 360
  9545
  9546 3C48 A9 0F			lda #$0F
  9547 3C4A 8D FD A7			sta CURLOC
  9548 3C4D			a_000C
  9549 3C4D			l_1C3C
  9550
  9551 				; optimize OK (sprites.pas), line = 364
  9552
  9553 3C4D AD FD A7			lda CURLOC
  9554 3C50 C9 0F			cmp #$0F
  9555 3C52 D0 12			jne l_1D3C
  9556
  9557 				; optimize OK (sprites.pas), line = 366
  9558
  9559 3C54 A9 10			lda #$10
  9560 3C56 8D F7 A7			sta RESULT
  9561
  9562 				; optimize OK (sprites.pas), line = 367
  9563
  9564 3C59 A9 00			lda #$00
  9565 3C5B 8D ED A4			sta SPRITEOFFSET
  9566
  9567 				; optimize OK (sprites.pas), line = 368
  9568
  9569 3C5E A9 01			lda #$01
  9570 3C60 20 84 38			jsr PAINTPLAYER
  9571 3C63 4C 5E 3D			jmp @exit
  9572 3C66			l_1D3C
  9573
  9574 				; optimize OK (sprites.pas), line = 372
  9575
  9576 3C66 AC 8A CD			ldy CURRENTPLAYER
  9577 3C69 B9 50 C9			lda adr.PLSTEPS,y
  9578 3C6C 38 E9 01			sub #$01
  9579 3C6F 99 50 C9			sta adr.PLSTEPS,y
  9580
  9581 				; optimize OK (sprites.pas), line = 373
  9582
  9583 3C72 AD B0 EA			lda MAPPOS_X
  9584 3C75 8D B2 EA			sta OLDMAPPOS_X
  9585
  9586 				; optimize OK (sprites.pas), line = 374
  9587
  9588 3C78 AD B1 EA			lda MAPPOS_Y
  9589 3C7B 8D B3 EA			sta OLDMAPPOS_Y
  9590
  9591 				; optimize OK (sprites.pas), line = 375
  9592
  9593 3C7E AD AE EA			lda PLAYERPOS_X
  9594 3C81 8D B4 EA			sta OLDPLAYERPOS_X
  9595
  9596 				; optimize OK (sprites.pas), line = 376
  9597
  9598 3C84 AD AF EA			lda PLAYERPOS_Y
  9599 3C87 8D B5 EA			sta OLDPLAYERPOS_Y
  9600
  9601 				; optimize OK (sprites.pas), line = 377
  9602
  9603 3C8A AD B0 EA			lda MAPPOS_X
  9604 3C8D 18 6D F9 A7			add DIR_X
  9605 3C91 8D B0 EA			sta MAPPOS_X
  9606
  9607 				; optimize OK (sprites.pas), line = 378
  9608
  9609 3C94 AD B1 EA			lda MAPPOS_Y
  9610 3C97 18 6D FA A7			add DIR_Y
  9611 3C9B 8D B1 EA			sta MAPPOS_Y
  9612
  9613 				; optimize OK (sprites.pas), line = 383
  9614
  9615 3C9E A9 0E			lda #$0E
  9616 3CA0 8D 14 9E			sta RMT.TRMT.INIT.A
  9617 3CA3 AD 1F 9A			lda MSX
  9618 3CA6 AC 20 9A			ldy MSX+1
  9619 3CA9 20 05 15			jsr RMT.TRMT.INIT
  9620
  9621 				; optimize FAIL ('RMT.TRMT.PLAY', sprites.pas), line = 384
  9622
  9623 3CAC AD 1F 9A			lda MSX
  9624 3CAF AC 20 9A			ldy MSX+1
  9625 3CB2 20 41 15			jsr RMT.TRMT.PLAY
  9626
  9627 				; optimize OK (sprites.pas), line = 385
  9628
  9629 3CB5 A9 01			lda #$01
  9630 3CB7 8D 11 CA			sta PLAYMUSIC
  9631
  9632 				; optimize OK (sprites.pas), line = 392
  9633
  9634 3CBA AD FA A7			lda DIR_Y
  9635 3CBD F0 28			jeq l_1DA2
  9636
  9637 				; optimize OK (sprites.pas), line = 394
  9638
  9639 3CBF A9 00			lda #$00
  9640 3CC1 8D F8 A7			sta J
  9641
  9642 3CC4			l_1DAC
  9643 				; --- ForToDoCondition
  9644 3CC4 AD F8 A7			lda J
  9645 3CC7 C9 08			cmp #$08
  9646 3CC9 B0 1C			jcs l_1DBA
  9647
  9648 				; optimize OK (sprites.pas), line = 397
  9649
  9650 3CCB 8D ED A4			sta SPRITEOFFSET
  9651
  9652 				; optimize OK (sprites.pas), line = 398
  9653
  9654 3CCE AD AF EA			lda PLAYERPOS_Y
  9655 3CD1 18 6D FA A7			add DIR_Y
  9656 3CD5 8D AF EA			sta PLAYERPOS_Y
  9657
  9658 				; optimize OK (sprites.pas), line = 399
  9659
  9660 3CD8 A9 01			lda #$01
  9661 3CDA 20 84 38			jsr PAINTPLAYER
  9662
  9663 				; optimize OK (sprites.pas), line = 400
  9664
  9665 3CDD A9 01			lda #$01
  9666 3CDF 20 7C 27			jsr WAITFRAMES
  9667
  9668 				; --- ForToDoEpilog
  9669 3CE2 EE F8 A7			inc J
  9670 3CE5 D0 DD			jne l_1DAC
  9671 3CE7			l_1DBA
  9672 3CE7			l_1DA2
  9673
  9674 				; optimize OK (sprites.pas), line = 404
  9675
  9676 3CE7 AD F9 A7			lda DIR_X
  9677 3CEA F0 28			jeq l_1DE9
  9678
  9679 				; optimize OK (sprites.pas), line = 406
  9680
  9681 3CEC A9 00			lda #$00
  9682 3CEE 8D F8 A7			sta J
  9683
  9684 3CF1			l_1DF3
  9685 				; --- ForToDoCondition
  9686 3CF1 AD F8 A7			lda J
  9687 3CF4 C9 08			cmp #$08
  9688 3CF6 B0 1C			jcs l_1E01
  9689
  9690 				; optimize OK (sprites.pas), line = 408
  9691
  9692 3CF8 8D ED A4			sta SPRITEOFFSET
  9693
  9694 				; optimize OK (sprites.pas), line = 409
  9695
  9696 3CFB AD AE EA			lda PLAYERPOS_X
  9697 3CFE 18 6D F9 A7			add DIR_X
  9698 3D02 8D AE EA			sta PLAYERPOS_X
  9699
  9700 				; optimize OK (sprites.pas), line = 410
  9701
  9702 3D05 A9 00			lda #$00
  9703 3D07 20 84 38			jsr PAINTPLAYER
  9704
  9705 				; optimize OK (sprites.pas), line = 411
  9706
  9707 3D0A A9 01			lda #$01
  9708 3D0C 20 7C 27			jsr WAITFRAMES
  9709
  9710 				; --- ForToDoEpilog
  9711 3D0F EE F8 A7			inc J
  9712 3D12 D0 DD			jne l_1DF3
  9713 3D14			l_1E01
  9714 3D14			l_1DE9
  9715
  9716 				; optimize FAIL ('RMT.TRMT.STOP', sprites.pas), line = 416
  9717
  9718 3D14 AD 1F 9A			lda MSX
  9719 3D17 AC 20 9A			ldy MSX+1
  9720 3D1A 20 81 15			jsr RMT.TRMT.STOP
  9721
  9722 				; optimize OK (sprites.pas), line = 417
  9723
  9724 3D1D A9 00			lda #$00
  9725 3D1F 8D 11 CA			sta PLAYMUSIC
  9726
  9727 				; optimize OK (sprites.pas), line = 425
  9728
  9729 3D22 AD FD A7			lda CURLOC
  9730 3D25 C9 10			cmp #$10
  9731 3D27 D0 2F			jne l_1E35
  9732
  9733 				; optimize FAIL ('ROADBLOCK', sprites.pas), line = 428
  9734
  9735 3D29 20 D7 37			jsr ROADBLOCK
  9736 3D2C AD F0 A7			lda ROADBLOCK.RESULT
  9737 3D2F 8D F8 A7			sta J
  9738
  9739 				; optimize OK (sprites.pas), line = 429
  9740
  9741 3D32 F0 21			jeq l_1E4C
  9742
  9743 				; optimize FAIL ('GOTCAUGHT', sprites.pas), line = 432
  9744
  9745 3D34 20 32 36			jsr GOTCAUGHT
  9746 3D37 AD EB A7			lda GOTCAUGHT.RESULT
  9747 3D3A 8D FE A7			sta R
  9748
  9749 				; optimize OK (sprites.pas), line = 433
  9750
  9751 3D3D D0 0B			jne l_1E63
  9752
  9753 				; optimize OK (sprites.pas), line = 435
  9754
  9755 3D3F A9 10			lda #$10
  9756 3D41 8D F7 A7			sta RESULT
  9757
  9758 				; optimize FAIL ('ENABLEMAPCONSOLE', sprites.pas), line = 436
  9759
  9760 3D44 20 F0 27			jsr ENABLEMAPCONSOLE
  9761 3D47 4C 52 3D			jmp l_1E72
  9762 3D4A			l_1E63
  9763
  9764 				; optimize OK (sprites.pas), line = 441
  9765
  9766 3D4A A9 11			lda #$11
  9767 3D4C 8D F7 A7			sta RESULT
  9768 3D4F 4C 5E 3D			jmp @exit
  9769 3D52			l_1E72
  9770 3D52 4C 58 3D			jmp l_1E7F
  9771 3D55			l_1E4C
  9772
  9773 				; optimize FAIL ('ENABLEMAPCONSOLE', sprites.pas), line = 447
  9774
  9775 3D55 20 F0 27			jsr ENABLEMAPCONSOLE
  9776 3D58			l_1E7F
  9777 3D58			l_1E35
  9778
  9779 				; optimize OK (sprites.pas), line = 450
  9780
  9781 3D58 AD FD A7			lda CURLOC
  9782 3D5B 8D F7 A7			sta RESULT
  9783 3D5E			@exit
  9784
  9785 				; ------------------------------------------------------------
  9786
  9787 = A7F6			CH	= DATAORIGIN+$0BA0
  9788 = A7F7			RESULT	= DATAORIGIN+$0BA1
  9789 = A7F8			J	= DATAORIGIN+$0BA2
  9790 = A7F9			DIR_X	= DATAORIGIN+$0BA3
  9791 = A7FA			DIR_Y	= DATAORIGIN+$0BA4
  9792 = A7FB			LENCID	= DATAORIGIN+$0BA5
  9793 = A7FC			LEAVEMAP	= DATAORIGIN+$0BA6
  9794 = A7FD			CURLOC	= DATAORIGIN+$0BA7
  9795 = A7FE			R	= DATAORIGIN+$0BA8
  9796 = A7FF			@CASETMP_000B	= DATAORIGIN+$0BA9
  9797 = A800			@CASETMP_000C	= DATAORIGIN+$0BAA
  9798
  9799 = A7F6			@VarData	= CH
  9800 = 000A			@VarDataSize	= 10
  9801
  9802 3D5E 60				rts						; ret
  9803 				.endl
  9804
  9805 3D5F			.local	CLEARSPRITES					; PROCEDURE
  9806
  9807 				; optimize OK (sprites.pas), line = 457
  9808
  9809 3D5F A9 00			lda #$00
  9810 3D61 85 88			sta SYSTEM.FILLCHAR.@03018000001810000188000.A
  9811 3D63 A9 BB			lda #$BB
  9812 3D65 85 89			sta SYSTEM.FILLCHAR.@03018000001810000188000.A+1
  9813 3D67 A9 D0			lda #$D0
  9814 3D69 85 8C			sta SYSTEM.FILLCHAR.@03018000001810000188000.COUNT
  9815 3D6B A9 04			lda #$04
  9816 3D6D 85 8D			sta SYSTEM.FILLCHAR.@03018000001810000188000.COUNT+1
  9817 3D6F A9 00			lda #$00
  9818 3D71 85 84			sta SYSTEM.FILLCHAR.@03018000001810000188000.VALUE
  9819 3D73				.LOCAL +MAIN.SYSTEM.FILLCHAR.@03018000001810000188000
  9820 3D73				m@INLINE
Macro: MAIN.SYSTEM.FILLCHAR.@03018000001810000188000.M@INLINE [Source: main_PL.a65]
     4 3D73 20 2C 0F			jsr @fill
Source: main_PL.a65
  9821 					.ENDL
  9822
  9823 3D76			@exit
  9824 					.ifdef @new
  9825 					lda <@VarData
  9826 					sta :ztmp
  9827 					lda >@VarData
  9828 					ldy #@VarDataSize-1
  9829 					jmp @FreeMem
  9830 					els
  9831 3D76 60				rts						; ret
  9832 					eif
  9833 				.endl
  9834
  9835 3D77			.local	ENABLESPRITES					; PROCEDURE
  9836
  9837 				; optimize FAIL ('CLEARSPRITES', sprites.pas), line = 464
  9838
  9839 3D77 20 5F 3D			jsr CLEARSPRITES
  9840
  9841 				; optimize OK (sprites.pas), line = 465
  9842
  9843 3D7A A9 01			lda #$01
  9844 3D7C 8D F8 EA			sta SPRITEMOVEDIR
  9845
  9846 				; -------------------  ASM Block 00000158  -------------------
  9847
  9848
  9849 				        // we need to put it into registers directly,  because we do not have
  9850 				        // the OS activated, so we have no routine that copies shadow to registers.
  9851 3D7F A9 3E		        lda #$3e        // single line, both players & missiles
  9852 3D81 8D 2F 02		        sta SDMCTL      // shadow of DMACTL
  9853 3D84 8D 00 D4		        sta DMACTL
  9854 3D87 A9 01		        lda #1          // players in front of playfields
  9855 3D89 8D 6F 02		        sta $26f        // shadow of PRIOR WHY GPRIOR DOES NOT EXIST?
  9856 3D8C 8D 1B D0		        sta $D01B
  9857 3D8F A9 03		        lda #3          // turn on missiles & players
  9858 3D91 8D 1D D0		        sta GRACTL      // no shadow for this one
  9859 3D94 A9 B8		        lda #>PMG_BASE_ADR      // high byte of player storage
  9860 3D96 8D 07 D4		        sta PMBASE      // missiles = $7b00, player0 = $7c00
  9861
  9862 3D99 A9 00		        lda #$00     // eyes and tie
  9863 3D9B 8D 12 D0		        sta PCOLR0
  9864 3D9E A9 F4		        lda #$f4   // face/beard
  9865 3DA0 8D 13 D0		        sta PCOLR1
  9866 3DA3 A9 74		        lda #$74        // main player color
  9867 3DA5 8D 14 D0		        sta PCOLR2
  9868 3DA8 A9 0E		        lda #$0e   //face and shirt
  9869 3DAA 8D 15 D0		        sta PCOLR3
  9870 				    
  9871 3DAD			@exit
  9872 					.ifdef @new
  9873 					lda <@VarData
  9874 					sta :ztmp
  9875 					lda >@VarData
  9876 					ldy #@VarDataSize-1
  9877 					jmp @FreeMem
  9878 					els
  9879 3DAD 60				rts						; ret
  9880 					eif
  9881 				.endl
  9882
  9883 3DAE			.local	FIGHT_DISPLAYSTATS				; PROCEDURE
  9884
  9885 				; optimize OK (fight_utils.pas), line = 4
  9886
  9887 3DAE AD E6 E6			lda FP_CURRENTSITE
  9888 3DB1 F0 03 4C 48 3E		jne l_1EAF
  9889
  9890 				; optimize OK (fight_utils.pas), line = 6
  9891
  9892 3DB6 A9 00			lda #$00
  9893 3DB8 A0 13			ldy #$13
  9894 3DBA 99 48 DF 88 10 FA		sta:rpl $DF48,y-
  9895
  9896 				; optimize OK (fight_utils.pas), line = 7
  9897
  9898 3DC0 A9 00			lda #$00
  9899 3DC2 A0 13			ldy #$13
  9900 3DC4 99 70 DF 88 10 FA		sta:rpl $DF70,y-
  9901
  9902 				; optimize OK (fight_utils.pas), line = 8
  9903
  9904 3DCA A9 00			lda #$00
  9905 3DCC A0 13			ldy #$13
  9906 3DCE 99 98 DF 88 10 FA		sta:rpl $DF98,y-
  9907
  9908 				; optimize OK (fight_utils.pas), line = 9
  9909
  9910 3DD4 A9 00			lda #$00
  9911 3DD6 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
  9912 3DD9 A9 15			lda #$15
  9913 3DDB 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
  9914 3DDE 20 AC 17			jsr B_CRT.CRT_GOTOXY
  9915
  9916 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', fight_utils.pas), line = 10
  9917
  9918 3DE1 E8				inx
  9919 3DE2 AD E5 E6			lda FP_CURRENTPLAYER
  9920 3DE5 0A				asl @
  9921 3DE6 A8				tay
  9922 3DE7 B9 AE A3			lda adr.FP_NAME,y
  9923 3DEA 95 94			sta :STACKORIGIN,x
  9924 3DEC B9 AF A3			lda adr.FP_NAME+1,y
  9925 3DEF 95 A4			sta :STACKORIGIN+STACKWIDTH,x
  9926 3DF1 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
  9927
  9928 				; optimize OK (fight_utils.pas), line = 11
  9929
  9930 3DF4 A9 00			lda #$00
  9931 3DF6 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
  9932 3DF9 A9 16			lda #$16
  9933 3DFB 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
  9934 3DFE 20 AC 17			jsr B_CRT.CRT_GOTOXY
  9935
  9936 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', fight_utils.pas), line = 12
  9937
  9938 3E01 E8				inx
  9939 3E02 A9 65 95 94			mva #$65 :STACKORIGIN,x
  9940 3E06 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
  9941 3E0A 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
  9942
  9943 				; optimize OK (fight_utils.pas), line = 13
  9944
  9945 3E0D AC E5 E6			ldy FP_CURRENTPLAYER
  9946 3E10 B9 85 E4			lda adr.FP_ENERGY,y
  9947 3E13 20 7E 18			jsr B_CRT.CRT_WRITE.@010180000
  9948
  9949 				; optimize OK (fight_utils.pas), line = 14
  9950
  9951 3E16 A9 00			lda #$00
  9952 3E18 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
  9953 3E1B A9 17			lda #$17
  9954 3E1D 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
  9955 3E20 20 AC 17			jsr B_CRT.CRT_GOTOXY
  9956
  9957 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', fight_utils.pas), line = 15
  9958
  9959 3E23 E8				inx
  9960 3E24 A9 68 95 94			mva #$68 :STACKORIGIN,x
  9961 3E28 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
  9962 3E2C 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
  9963
  9964 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', fight_utils.pas), line = 16
  9965
  9966 3E2F E8				inx
  9967 3E30 AC E5 E6			ldy FP_CURRENTPLAYER
  9968 3E33 B9 45 E4			lda adr.FP_WEAPON,y
  9969 3E36 0A				asl @
  9970 3E37 A8				tay
  9971 3E38 B9 6B A4			lda adr.WEAPONNAMES,y
  9972 3E3B 95 94			sta :STACKORIGIN,x
  9973 3E3D B9 6C A4			lda adr.WEAPONNAMES+1,y
  9974 3E40 95 A4			sta :STACKORIGIN+STACKWIDTH,x
  9975 3E42 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
  9976 3E45 4C 13 3F			jmp l_1EE8
  9977 3E48			l_1EAF
  9978
  9979 				; optimize OK (fight_utils.pas), line = 20
  9980
  9981 3E48 A9 00			lda #$00
  9982 3E4A A0 13			ldy #$13
  9983 3E4C 99 5C DF 88 10 FA		sta:rpl $DF5C,y-
  9984
  9985 				; optimize OK (fight_utils.pas), line = 21
  9986
  9987 3E52 A9 00			lda #$00
  9988 3E54 A0 13			ldy #$13
  9989 3E56 99 84 DF 88 10 FA		sta:rpl $DF84,y-
  9990
  9991 				; optimize OK (fight_utils.pas), line = 22
  9992
  9993 3E5C A9 00			lda #$00
  9994 3E5E A0 13			ldy #$13
  9995 3E60 99 AC DF 88 10 FA		sta:rpl $DFAC,y-
  9996
  9997 				; optimize FAIL ('B_CRT.CRT_WRITERIGHTALIGNED.@02018986000001000180000', fight_utils.pas), line = 23
  9998
  9999 3E66 E8				inx
 10000 3E67 AD E5 E6			lda FP_CURRENTPLAYER
 10001 3E6A 0A				asl @
 10002 3E6B A8				tay
 10003 3E6C B9 AE A3			lda adr.FP_NAME,y
 10004 3E6F 85 82			sta :bp2
 10005 3E71 B9 AF A3			lda adr.FP_NAME+1,y
 10006 3E74 85 83			sta :bp2+1
 10007 3E76 A0 00			ldy #$00
 10008 3E78 B1 82 99 9F A2 C8 + 	mva:rne (:bp2),y B_CRT.CRT_WRITERIGHTALIGNED.@02018986000001000180000.adr.S,y+
 10009 3E80 E8				inx
 10010 3E81 A9 15 95 94			mva #$15 :STACKORIGIN,x
 10011 3E85 20 2E 1A			jsr B_CRT.CRT_WRITERIGHTALIGNED.@02018986000001000180000
 10012
 10013 				; optimize FAIL ('SYSUTILS.INTTOSTR.@010182000', fight_utils.pas), line = 24
 10014
 10015 3E88 E8				inx
 10016 3E89 AC E5 E6			ldy FP_CURRENTPLAYER
 10017 3E8C B9 85 E4			lda adr.FP_ENERGY,y
 10018 3E8F 95 94			sta :STACKORIGIN,x
 10019 3E91 A9 00 95 A4			mva #$00 :STACKORIGIN+STACKWIDTH,x
 10020 3E95 95 B4			sta :STACKORIGIN+STACKWIDTH*2,x
 10021 3E97 95 C4			sta :STACKORIGIN+STACKWIDTH*3,x
 10022 3E99 20 FF 15			jsr SYSUTILS.INTTOSTR.@010182000
 10023 3E9C 20 F7 16			jsr B_CRT.ATASCII2ANTIC.@0101898600000100
 10024 3E9F A9 65			lda #$65
 10025 3EA1 8D 67 9C			sta SYSTEM.CONCAT.@0201898600189860.A
 10026 3EA4 A9 0C			lda #$0C
 10027 3EA6 8D 68 9C			sta SYSTEM.CONCAT.@0201898600189860.A+1
 10028 3EA9 AD 46 17			lda B_CRT.ATASCII2ANTIC.@0101898600000100.RESULT
 10029 3EAC 8D 69 9C			sta SYSTEM.CONCAT.@0201898600189860.B
 10030 3EAF AD 47 17			lda B_CRT.ATASCII2ANTIC.@0101898600000100.RESULT+1
 10031 3EB2 8D 6A 9C			sta SYSTEM.CONCAT.@0201898600189860.B+1
 10032 3EB5 20 3A 14			jsr SYSTEM.CONCAT.@0201898600189860
 10033 3EB8 E8				inx
 10034 3EB9 AC 6B 14 84 82 AC + 	mwy SYSTEM.CONCAT.@0201898600189860.RESULT :bp2
 10035 3EC3 A0 00			ldy #$00
 10036 3EC5 B1 82 99 9F A2 C8 + 	mva:rne (:bp2),y B_CRT.CRT_WRITERIGHTALIGNED.@02018986000001000180000.adr.S,y+
 10037 3ECD E8				inx
 10038 3ECE A9 16 95 94			mva #$16 :STACKORIGIN,x
 10039 3ED2 20 2E 1A			jsr B_CRT.CRT_WRITERIGHTALIGNED.@02018986000001000180000
 10040
 10041 				; optimize OK (fight_utils.pas), line = 25
 10042
 10043 3ED5 AC E5 E6			ldy FP_CURRENTPLAYER
 10044 3ED8 B9 45 E4			lda adr.FP_WEAPON,y
 10045 3EDB 0A				asl @
 10046 3EDC A8				tay
 10047 3EDD B9 6B A4			lda adr.WEAPONNAMES,y
 10048 3EE0 8D 69 9C			sta SYSTEM.CONCAT.@0201898600189860.B
 10049 3EE3 B9 6C A4			lda adr.WEAPONNAMES+1,y
 10050 3EE6 8D 6A 9C			sta SYSTEM.CONCAT.@0201898600189860.B+1
 10051 3EE9 A9 68			lda #$68
 10052 3EEB 8D 67 9C			sta SYSTEM.CONCAT.@0201898600189860.A
 10053 3EEE A9 0C			lda #$0C
 10054 3EF0 8D 68 9C			sta SYSTEM.CONCAT.@0201898600189860.A+1
 10055 3EF3 20 3A 14			jsr SYSTEM.CONCAT.@0201898600189860
 10056 3EF6 E8				inx
 10057 3EF7 AC 6B 14 84 82 AC + 	mwy SYSTEM.CONCAT.@0201898600189860.RESULT :bp2
 10058 3F01 A0 00			ldy #$00
 10059 3F03 B1 82 99 9F A2 C8 + 	mva:rne (:bp2),y B_CRT.CRT_WRITERIGHTALIGNED.@02018986000001000180000.adr.S,y+
 10060 3F0B E8				inx
 10061 3F0C A9 17 95 94			mva #$17 :STACKORIGIN,x
 10062 3F10 20 2E 1A			jsr B_CRT.CRT_WRITERIGHTALIGNED.@02018986000001000180000
 10063 3F13			l_1EE8
 10064
 10065 3F13			@exit
 10066 					.ifdef @new
 10067 					lda <@VarData
 10068 					sta :ztmp
 10069 					lda >@VarData
 10070 					ldy #@VarDataSize-1
 10071 					jmp @FreeMem
 10072 					els
 10073 3F13 60				rts						; ret
 10074 					eif
 10075 				.endl
 10076
 10077 3F14			.local	FIGHT_PUTPLAYER					; PROCEDURE
 10078
 10079 				; optimize OK (fight_utils.pas), line = 37
 10080
 10081 3F14 AD 03 A8			lda S
 10082 3F17 0A				asl @
 10083 3F18 0A				asl @
 10084 3F19 0A				asl @
 10085 3F1A 0A				asl @
 10086 3F1B 0A				asl @
 10087 3F1C 0A				asl @
 10088 3F1D 0A				asl @
 10089 3F1E 85 9D			sta :STACKORIGIN+9
 10090 3F20 AD 04 A8			lda D
 10091 3F23 0A				asl @
 10092 3F24 18 65 9D			add :STACKORIGIN+9
 10093 3F27 8D 03 A8			sta S
 10094
 10095 				; optimize OK (fight_utils.pas), line = 38
 10096
 10097 3F2A AD 05 A8			lda X
 10098 3F2D C9 01			cmp #$01
 10099 3F2F D0 09			jne l_1F3D
 10100
 10101 				; optimize OK (fight_utils.pas), line = 39
 10102
 10103 3F31 AD 03 A8			lda S
 10104 3F34 18 69 04			add #$04
 10105 3F37 8D 03 A8			sta S
 10106 3F3A			l_1F3D
 10107
 10108 				; optimize OK (fight_utils.pas), line = 40
 10109
 10110 3F3A AD 03 A8			lda S
 10111 3F3D 18 69 02			add #$02
 10112 3F40 85 9D			sta :STACKORIGIN+9
 10113 3F42 A9 DC			lda #$DC
 10114 3F44 18 6D 02 A8			add P+1
 10115 3F48 85 81			sta :bp+1
 10116 3F4A AC 01 A8			ldy P
 10117 3F4D A5 9D			lda :STACKORIGIN+9
 10118 3F4F 91 80			sta (:bp),y
 10119
 10120 				; optimize OK (fight_utils.pas), line = 41
 10121
 10122 3F51 AD 03 A8			lda S
 10123 3F54 18 69 03			add #$03
 10124 3F57 85 9D			sta :STACKORIGIN+9
 10125 3F59 A9 01			lda #$01
 10126 3F5B 18 6D 01 A8			add P
 10127 3F5F A8				tay
 10128 3F60 A9 DC			lda #$DC
 10129 3F62 6D 02 A8			adc P+1
 10130 3F65 85 81			sta :bp+1
 10131 3F67 A5 9D			lda :STACKORIGIN+9
 10132 3F69 91 80			sta (:bp),y
 10133
 10134 				; optimize OK (fight_utils.pas), line = 42
 10135
 10136 3F6B AD 03 A8			lda S
 10137 3F6E 18 69 0A			add #$0A
 10138 3F71 85 9D			sta :STACKORIGIN+9
 10139 3F73 A9 28			lda #$28
 10140 3F75 18 6D 01 A8			add P
 10141 3F79 A8				tay
 10142 3F7A A9 DC			lda #$DC
 10143 3F7C 6D 02 A8			adc P+1
 10144 3F7F 85 81			sta :bp+1
 10145 3F81 A5 9D			lda :STACKORIGIN+9
 10146 3F83 91 80			sta (:bp),y
 10147
 10148 				; optimize OK (fight_utils.pas), line = 43
 10149
 10150 3F85 AD 03 A8			lda S
 10151 3F88 18 69 0B			add #$0B
 10152 3F8B 85 9D			sta :STACKORIGIN+9
 10153 3F8D A9 29			lda #$29
 10154 3F8F 18 6D 01 A8			add P
 10155 3F93 A8				tay
 10156 3F94 A9 DC			lda #$DC
 10157 3F96 6D 02 A8			adc P+1
 10158 3F99 85 81			sta :bp+1
 10159 3F9B A5 9D			lda :STACKORIGIN+9
 10160 3F9D 91 80			sta (:bp),y
 10161
 10162 				; ------------------------------------------------------------
 10163
 10164 = A801			P	= DATAORIGIN+$0BAB
 10165 = A803			S	= DATAORIGIN+$0BAD
 10166 = A804			D	= DATAORIGIN+$0BAE
 10167 = A805			X	= DATAORIGIN+$0BAF
 10168
 10169 = A801			@VarData	= P
 10170 = 0005			@VarDataSize	= 5
 10171
 10172 3F9F			@exit
 10173 					.ifdef @new
 10174 					lda <@VarData
 10175 					sta :ztmp
 10176 					lda >@VarData
 10177 					ldy #@VarDataSize-1
 10178 					jmp @FreeMem
 10179 					els
 10180 3F9F 60				rts						; ret
 10181 					eif
 10182 				.endl
 10183
 10184 3FA0			.local	FIGHT_DRAWCURRENTPLAYER				; PROCEDURE
 10185
 10186 				; optimize OK (fight_utils.pas), line = 52
 10187
 10188 3FA0 AD E6 E6			lda FP_CURRENTSITE
 10189 3FA3 0A				asl @
 10190 3FA4 0A				asl @
 10191 3FA5 0A				asl @
 10192 3FA6 0A				asl @
 10193 3FA7 0A				asl @
 10194 3FA8 0A				asl @
 10195 3FA9 0A				asl @
 10196 3FAA 85 9D			sta :STACKORIGIN+9
 10197 3FAC AD E6 E6			lda FP_CURRENTSITE
 10198 3FAF 0A				asl @
 10199 3FB0 18 65 9D			add :STACKORIGIN+9
 10200 3FB3 8D 08 A8			sta S
 10201
 10202 				; optimize OK (fight_utils.pas), line = 53
 10203
 10204 3FB6 AC E5 E6			ldy FP_CURRENTPLAYER
 10205 3FB9 B9 45 E5			lda adr.FP_SEX,y
 10206 3FBC C9 01			cmp #$01
 10207 3FBE D0 09			jne l_1FBB
 10208
 10209 				; optimize OK (fight_utils.pas), line = 54
 10210
 10211 3FC0 AD 08 A8			lda S
 10212 3FC3 18 69 04			add #$04
 10213 3FC6 8D 08 A8			sta S
 10214 3FC9			l_1FBB
 10215
 10216 				; optimize OK (fight_utils.pas), line = 55
 10217
 10218 3FC9 AD E5 E6			lda FP_CURRENTPLAYER
 10219 3FCC 0A				asl @
 10220 3FCD A8				tay
 10221 3FCE B9 05 E4			lda adr.FP_POSW,y
 10222 3FD1 8D 06 A8			sta P
 10223 3FD4 B9 06 E4			lda adr.FP_POSW+1,y
 10224 3FD7 8D 07 A8			sta P+1
 10225
 10226 				; optimize OK (fight_utils.pas), line = 56
 10227
 10228 3FDA AD 08 A8			lda S
 10229 3FDD 18 69 02			add #$02
 10230 3FE0 85 9D			sta :STACKORIGIN+9
 10231 3FE2 A9 DC			lda #$DC
 10232 3FE4 18 6D 07 A8			add P+1
 10233 3FE8 85 81			sta :bp+1
 10234 3FEA AC 06 A8			ldy P
 10235 3FED A5 9D			lda :STACKORIGIN+9
 10236 3FEF 91 80			sta (:bp),y
 10237
 10238 				; optimize OK (fight_utils.pas), line = 57
 10239
 10240 3FF1 AD 08 A8			lda S
 10241 3FF4 18 69 03			add #$03
 10242 3FF7 85 9D			sta :STACKORIGIN+9
 10243 3FF9 A9 01			lda #$01
 10244 3FFB 18 6D 06 A8			add P
 10245 3FFF A8				tay
 10246 4000 A9 DC			lda #$DC
 10247 4002 6D 07 A8			adc P+1
 10248 4005 85 81			sta :bp+1
 10249 4007 A5 9D			lda :STACKORIGIN+9
 10250 4009 91 80			sta (:bp),y
 10251
 10252 				; optimize OK (fight_utils.pas), line = 58
 10253
 10254 400B AD 08 A8			lda S
 10255 400E 18 69 0A			add #$0A
 10256 4011 85 9D			sta :STACKORIGIN+9
 10257 4013 A9 28			lda #$28
 10258 4015 18 6D 06 A8			add P
 10259 4019 A8				tay
 10260 401A A9 DC			lda #$DC
 10261 401C 6D 07 A8			adc P+1
 10262 401F 85 81			sta :bp+1
 10263 4021 A5 9D			lda :STACKORIGIN+9
 10264 4023 91 80			sta (:bp),y
 10265
 10266 				; optimize OK (fight_utils.pas), line = 59
 10267
 10268 4025 AD 08 A8			lda S
 10269 4028 18 69 0B			add #$0B
 10270 402B 85 9D			sta :STACKORIGIN+9
 10271 402D A9 29			lda #$29
 10272 402F 18 6D 06 A8			add P
 10273 4033 A8				tay
 10274 4034 A9 DC			lda #$DC
 10275 4036 6D 07 A8			adc P+1
 10276 4039 85 81			sta :bp+1
 10277 403B A5 9D			lda :STACKORIGIN+9
 10278 403D 91 80			sta (:bp),y
 10279
 10280 				; ------------------------------------------------------------
 10281
 10282 = A806			P	= DATAORIGIN+$0BB0
 10283 = A808			S	= DATAORIGIN+$0BB2
 10284
 10285 = A806			@VarData	= P
 10286 = 0003			@VarDataSize	= 3
 10287
 10288 403F			@exit
 10289 					.ifdef @new
 10290 					lda <@VarData
 10291 					sta :ztmp
 10292 					lda >@VarData
 10293 					ldy #@VarDataSize-1
 10294 					jmp @FreeMem
 10295 					els
 10296 403F 60				rts						; ret
 10297 					eif
 10298 				.endl
 10299
 10300 4040			.local	FIGHT_CLEARPLAYER				; PROCEDURE
 10301
 10302 				; optimize OK (fight_utils.pas), line = 65
 10303
 10304 4040 A9 DC			lda #$DC
 10305 4042 18 6D 0A A8			add P+1
 10306 4046 85 81			sta :bp+1
 10307 4048 AC 09 A8			ldy P
 10308 404B A9 00			lda #$00
 10309 404D 91 80			sta (:bp),y
 10310
 10311 				; optimize OK (fight_utils.pas), line = 66
 10312
 10313 404F A9 01			lda #$01
 10314 4051 18 6D 09 A8			add P
 10315 4055 A8				tay
 10316 4056 A9 DC			lda #$DC
 10317 4058 6D 0A A8			adc P+1
 10318 405B 85 81			sta :bp+1
 10319 405D A9 00			lda #$00
 10320 405F 91 80			sta (:bp),y
 10321
 10322 				; optimize OK (fight_utils.pas), line = 67
 10323
 10324 4061 A9 28			lda #$28
 10325 4063 18 6D 09 A8			add P
 10326 4067 A8				tay
 10327 4068 A9 DC			lda #$DC
 10328 406A 6D 0A A8			adc P+1
 10329 406D 85 81			sta :bp+1
 10330 406F A9 00			lda #$00
 10331 4071 91 80			sta (:bp),y
 10332
 10333 				; optimize OK (fight_utils.pas), line = 68
 10334
 10335 4073 A9 29			lda #$29
 10336 4075 18 6D 09 A8			add P
 10337 4079 A8				tay
 10338 407A A9 DC			lda #$DC
 10339 407C 6D 0A A8			adc P+1
 10340 407F 85 81			sta :bp+1
 10341 4081 A9 00			lda #$00
 10342 4083 91 80			sta (:bp),y
 10343
 10344 				; ------------------------------------------------------------
 10345
 10346 = A809			P	= DATAORIGIN+$0BB3
 10347
 10348 = A809			@VarData	= P
 10349 = 0002			@VarDataSize	= 2
 10350
 10351 4085			@exit
 10352 					.ifdef @new
 10353 					lda <@VarData
 10354 					sta :ztmp
 10355 					lda >@VarData
 10356 					ldy #@VarDataSize-1
 10357 					jmp @FreeMem
 10358 					els
 10359 4085 60				rts						; ret
 10360 					eif
 10361 				.endl
 10362
 10363 4086			.local	FIGHT_CLEARCURRENTPLAYER			; PROCEDURE
 10364
 10365 				; optimize OK (fight_utils.pas), line = 75
 10366
 10367 4086 AD E5 E6			lda FP_CURRENTPLAYER
 10368 4089 0A				asl @
 10369 408A A8				tay
 10370 408B B9 05 E4			lda adr.FP_POSW,y
 10371 408E 8D 0B A8			sta P
 10372 4091 B9 06 E4			lda adr.FP_POSW+1,y
 10373 4094 8D 0C A8			sta P+1
 10374
 10375 				; optimize OK (fight_utils.pas), line = 76
 10376
 10377 4097 A9 DC			lda #$DC
 10378 4099 18 6D 0C A8			add P+1
 10379 409D 85 81			sta :bp+1
 10380 409F AC 0B A8			ldy P
 10381 40A2 A9 00			lda #$00
 10382 40A4 91 80			sta (:bp),y
 10383
 10384 				; optimize OK (fight_utils.pas), line = 77
 10385
 10386 40A6 A9 01			lda #$01
 10387 40A8 18 6D 0B A8			add P
 10388 40AC A8				tay
 10389 40AD A9 DC			lda #$DC
 10390 40AF 6D 0C A8			adc P+1
 10391 40B2 85 81			sta :bp+1
 10392 40B4 A9 00			lda #$00
 10393 40B6 91 80			sta (:bp),y
 10394
 10395 				; optimize OK (fight_utils.pas), line = 78
 10396
 10397 40B8 A9 28			lda #$28
 10398 40BA 18 6D 0B A8			add P
 10399 40BE A8				tay
 10400 40BF A9 DC			lda #$DC
 10401 40C1 6D 0C A8			adc P+1
 10402 40C4 85 81			sta :bp+1
 10403 40C6 A9 00			lda #$00
 10404 40C8 91 80			sta (:bp),y
 10405
 10406 				; optimize OK (fight_utils.pas), line = 79
 10407
 10408 40CA A9 29			lda #$29
 10409 40CC 18 6D 0B A8			add P
 10410 40D0 A8				tay
 10411 40D1 A9 DC			lda #$DC
 10412 40D3 6D 0C A8			adc P+1
 10413 40D6 85 81			sta :bp+1
 10414 40D8 A9 00			lda #$00
 10415 40DA 91 80			sta (:bp),y
 10416
 10417 				; ------------------------------------------------------------
 10418
 10419 = A80B			P	= DATAORIGIN+$0BB5
 10420
 10421 = A80B			@VarData	= P
 10422 = 0002			@VarDataSize	= 2
 10423
 10424 40DC			@exit
 10425 					.ifdef @new
 10426 					lda <@VarData
 10427 					sta :ztmp
 10428 					lda >@VarData
 10429 					ldy #@VarDataSize-1
 10430 					jmp @FreeMem
 10431 					els
 10432 40DC 60				rts						; ret
 10433 					eif
 10434 				.endl
 10435
 10436 40DD			.local	FIGHT_DRAWPLAYERS				; PROCEDURE
 10437
 10438 				; optimize OK (fight_utils.pas), line = 88
 10439
 10440 40DD A9 00			lda #$00
 10441 40DF 8D 0E A8			sta S
 10442
 10443 40E2			l_2089
 10444 				; --- ForToDoCondition
 10445 40E2 AD 0E A8			lda S
 10446 40E5 C9 02			cmp #$02
 10447 40E7 B0 59			jcs l_2097
 10448
 10449 				; optimize OK (fight_utils.pas), line = 89
 10450
 10451 40E9 A9 00			lda #$00
 10452 40EB 8D 0D A8			sta I
 10453 40EE AC 0E A8			ldy S
 10454 40F1 B9 03 E4			lda adr.FP_N,y
 10455 40F4 38 E9 01			sub #$01
 10456 40F7 8D FB 40			sta @FORTMP_20A6_0
 10457
 10458 40FA			l_20A9
 10459 				; --- ForToDoCondition
 10460 40FA A9 00			lda @FORTMP_20A6_0::#$00
 10461 40FC CD 0D A8			cmp I
 10462 40FF 90 3C			jcc l_20B7
 10463
 10464 				; optimize OK (fight_utils.pas), line = 91
 10465
 10466 4101 AD 0E A8			lda S
 10467 4104 0A				asl @
 10468 4105 0A				asl @
 10469 4106 0A				asl @
 10470 4107 0A				asl @
 10471 4108 18 6D 0D A8			add I
 10472 410C 8D 0F A8			sta Q
 10473
 10474 				; optimize OK (fight_utils.pas), line = 92
 10475
 10476 410F A8				tay
 10477 4110 B9 85 E4			lda adr.FP_ENERGY,y
 10478 4113 F0 23			jeq l_20DC
 10479
 10480 				; optimize OK (fight_utils.pas), line = 94
 10481
 10482 4115 B9 45 E5			lda adr.FP_SEX,y
 10483 4118 8D 05 A8			sta FIGHT_PUTPLAYER.X
 10484 411B AD 0F A8			lda Q
 10485 411E 0A				asl @
 10486 411F A8				tay
 10487 4120 B9 05 E4			lda adr.FP_POSW,y
 10488 4123 8D 01 A8			sta FIGHT_PUTPLAYER.P
 10489 4126 B9 06 E4			lda adr.FP_POSW+1,y
 10490 4129 8D 02 A8			sta FIGHT_PUTPLAYER.P+1
 10491 412C AD 0E A8			lda S
 10492 412F 8D 03 A8			sta FIGHT_PUTPLAYER.S
 10493 4132 8D 04 A8			sta FIGHT_PUTPLAYER.D
 10494 4135 20 14 3F			jsr FIGHT_PUTPLAYER
 10495 4138			l_20DC
 10496
 10497 				; --- ForToDoEpilog
 10498 4138 EE 0D A8			inc I
 10499 413B D0 BD			jne l_20A9
 10500 413D			l_20B7
 10501
 10502 				; --- ForToDoEpilog
 10503 413D EE 0E A8			inc S
 10504 4140 D0 A0			jne l_2089
 10505 4142			l_2097
 10506
 10507 				; ------------------------------------------------------------
 10508
 10509 = A80D			I	= DATAORIGIN+$0BB7
 10510 = A80E			S	= DATAORIGIN+$0BB8
 10511 = A80F			Q	= DATAORIGIN+$0BB9
 10512
 10513 = A80D			@VarData	= I
 10514 = 0003			@VarDataSize	= 3
 10515
 10516 4142			@exit
 10517 					.ifdef @new
 10518 					lda <@VarData
 10519 					sta :ztmp
 10520 					lda >@VarData
 10521 					ldy #@VarDataSize-1
 10522 					jmp @FreeMem
 10523 					els
 10524 4142 60				rts						; ret
 10525 					eif
 10526 				.endl
 10527
 10528 4143			.local	CHECKHIT					; FUNCTION
 10529
 10530 				; optimize OK (fight_utils.pas), line = 106
 10531
 10532 4143 A9 00			lda #$00
 10533 4145 8D 16 A8			sta S
 10534
 10535 4148			l_2108
 10536 				; --- ForToDoCondition
 10537 4148 AD 16 A8			lda S
 10538 414B C9 02			cmp #$02
 10539 414D 90 03 4C 19 42		jcs l_2116
 10540
 10541 				; optimize OK (fight_utils.pas), line = 107
 10542
 10543 4152 A9 00			lda #$00
 10544 4154 8D 17 A8			sta I
 10545 4157 AC 16 A8			ldy S
 10546 415A B9 03 E4			lda adr.FP_N,y
 10547 415D 38 E9 01			sub #$01
 10548 4160 8D 64 41			sta @FORTMP_2125_0
 10549
 10550 4163			l_2128
 10551 				; --- ForToDoCondition
 10552 4163 A9 00			lda @FORTMP_2125_0::#$00
 10553 4165 CD 17 A8			cmp I
 10554 4168 B0 03 4C 11 42		jcc l_2136
 10555
 10556 				; optimize OK (fight_utils.pas), line = 110
 10557
 10558 416D AD 16 A8			lda S
 10559 4170 0A				asl @
 10560 4171 0A				asl @
 10561 4172 0A				asl @
 10562 4173 0A				asl @
 10563 4174 18 6D 17 A8			add I
 10564 4178 A8				tay
 10565 4179 B9 85 E4			lda adr.FP_ENERGY,y
 10566 417C D0 03			jne l_2155
 10567 417E 4C 09 42			jmp c_2128
 10568 4181			l_2155
 10569
 10570 				; optimize OK (fight_utils.pas), line = 112
 10571
 10572 4181 AD 16 A8			lda S
 10573 4184 0A				asl @
 10574 4185 0A				asl @
 10575 4186 0A				asl @
 10576 4187 0A				asl @
 10577 4188 18 6D 17 A8			add I
 10578 418C 0A				asl @
 10579 418D A8				tay
 10580 418E B9 05 E4			lda adr.FP_POSW,y
 10581 4191 8D 14 A8			sta Z
 10582 4194 A9 DC			lda #$DC
 10583 4196 18 79 06 E4			add adr.FP_POSW+1,y
 10584 419A 8D 15 A8			sta Z+1
 10585
 10586 				; optimize OK (fight_utils.pas), line = 113
 10587
 10588 419D AD 16 A8			lda S
 10589 41A0 0A				asl @
 10590 41A1 0A				asl @
 10591 41A2 0A				asl @
 10592 41A3 0A				asl @
 10593 41A4 18 6D 17 A8			add I
 10594 41A8 8D 13 A8			sta RESULT
 10595
 10596 				; optimize OK (fight_utils.pas), line = 114
 10597
 10598 41AB AD 12 A8			lda K+1
 10599 41AE CD 15 A8			cmp Z+1
 10600 41B1 D0 06			bne @+
 10601 41B3 AD 11 A8			lda K
 10602 41B6 CD 14 A8			cmp Z
 10603 				@
 10604 41B9 F0 63			jeq @exit
 10605 41BB			l_2190
 10606
 10607 				; optimize OK (fight_utils.pas), line = 115
 10608
 10609 41BB EE 14 A8			inc Z
 10610 41BE D0 03			sne
 10611 41C0 EE 15 A8			inc Z+1
 10612
 10613 				; optimize OK (fight_utils.pas), line = 116
 10614
 10615 41C3 AD 12 A8			lda K+1
 10616 41C6 CD 15 A8			cmp Z+1
 10617 41C9 D0 06			bne @+
 10618 41CB AD 11 A8			lda K
 10619 41CE CD 14 A8			cmp Z
 10620 				@
 10621 41D1 F0 4B			jeq @exit
 10622 41D3			l_21AE
 10623
 10624 				; optimize OK (fight_utils.pas), line = 117
 10625
 10626 41D3 AD 14 A8			lda Z
 10627 41D6 18 69 27			add #$27
 10628 41D9 8D 14 A8			sta Z
 10629 41DC 90 03			scc
 10630 41DE EE 15 A8			inc Z+1
 10631
 10632 				; optimize OK (fight_utils.pas), line = 118
 10633
 10634 41E1 AD 12 A8			lda K+1
 10635 41E4 CD 15 A8			cmp Z+1
 10636 41E7 D0 06			bne @+
 10637 41E9 AD 11 A8			lda K
 10638 41EC CD 14 A8			cmp Z
 10639 				@
 10640 41EF F0 2D			jeq @exit
 10641 41F1			l_21CC
 10642
 10643 				; optimize OK (fight_utils.pas), line = 119
 10644
 10645 41F1 EE 14 A8			inc Z
 10646 41F4 D0 03			sne
 10647 41F6 EE 15 A8			inc Z+1
 10648
 10649 				; optimize OK (fight_utils.pas), line = 120
 10650
 10651 41F9 AD 12 A8			lda K+1
 10652 41FC CD 15 A8			cmp Z+1
 10653 41FF D0 06			bne @+
 10654 4201 AD 11 A8			lda K
 10655 4204 CD 14 A8			cmp Z
 10656 				@
 10657 4207 F0 15			jeq @exit
 10658 4209			l_21EA
 10659
 10660 				; --- ForToDoEpilog
 10661 4209			c_2128
 10662 4209 EE 17 A8			inc I
 10663 420C F0 03 4C 63 41		jne l_2128
 10664 4211			l_2136
 10665
 10666 				; --- ForToDoEpilog
 10667 4211 EE 16 A8			inc S
 10668 4214 F0 03 4C 48 41		jne l_2108
 10669 4219			l_2116
 10670
 10671 				; optimize OK (fight_utils.pas), line = 122
 10672
 10673 4219 A9 80			lda #$80
 10674 421B 8D 13 A8			sta RESULT
 10675 421E			@exit
 10676
 10677 				; ------------------------------------------------------------
 10678
 10679 = A811			K	= DATAORIGIN+$0BBB
 10680 = A813			RESULT	= DATAORIGIN+$0BBD
 10681 = A814			Z	= DATAORIGIN+$0BBE
 10682 = A816			S	= DATAORIGIN+$0BC0
 10683 = A817			I	= DATAORIGIN+$0BC1
 10684
 10685 = A811			@VarData	= K
 10686 = 0006			@VarDataSize	= 6
 10687
 10688 421E 60				rts						; ret
 10689 				.endl
 10690
 10691 421F			.local	FIGHT_SETSHOOTSTART				; PROCEDURE
 10692
 10693 				; optimize OK (fight_utils.pas), line = 129
 10694
 10695 421F AD E9 E6			lda SHOOT_DIFF
 10696 4222 8D 19 A8			sta @CASETMP_000D
 10697 4225 C9 FF			cmp #$FF
 10698 4227 D0 05			jne l_220A
 10699 				@
 10700
 10701 				; optimize OK (fight_utils.pas), line = 130
 10702
 10703 4229 A9 28			lda #$28
 10704 422B 4C 34 42			jmp s_2219
 10705 422E			l_220A
 10706 422E C9 01			cmp #$01
 10707 4230 D0 0D			jne l_2215
 10708
 10709 				; optimize OK (fight_utils.pas), line = 131
 10710
 10711 4232 A9 29			lda #$29
 10712 4234			s_2219
 10713 4234 8D EA E6			sta SHOOT_START
 10714 4237 A9 00			lda #$00
 10715 4239 8D EB E6			sta SHOOT_START+1
 10716 423C 4C 5C 42			jmp a_000D
 10717 423F			l_2215
 10718 423F C9 D8			cmp #$D8
 10719 4241 D0 0B			jne l_2220
 10720
 10721 				; optimize OK (fight_utils.pas), line = 132
 10722
 10723 4243 A9 00			lda #$00
 10724 4245 8D EA E6			sta SHOOT_START
 10725 4248 8D EB E6			sta SHOOT_START+1
 10726 424B 4C 5C 42			jmp a_000D
 10727 424E			l_2220
 10728 424E C9 28			cmp #$28
 10729 4250 D0 0A			jne l_222B
 10730
 10731 				; optimize OK (fight_utils.pas), line = 133
 10732
 10733 4252 A9 28			lda #$28
 10734 4254 8D EA E6			sta SHOOT_START
 10735 4257 A9 00			lda #$00
 10736 4259 8D EB E6			sta SHOOT_START+1
 10737 425C			l_222B
 10738 425C			a_000D
 10739
 10740 				; ------------------------------------------------------------
 10741
 10742 = A819			@CASETMP_000D	= DATAORIGIN+$0BC3
 10743
 10744 = A819			@VarData	= @CASETMP_000D
 10745 = 0001			@VarDataSize	= 1
 10746
 10747 425C			@exit
 10748 					.ifdef @new
 10749 					lda <@VarData
 10750 					sta :ztmp
 10751 					lda >@VarData
 10752 					ldy #@VarDataSize-1
 10753 					jmp @FreeMem
 10754 					els
 10755 425C 60				rts						; ret
 10756 					eif
 10757 				.endl
 10758
 10759 425D			.local	FIGHT_SHOOT					; FUNCTION
 10760
 10761 				; optimize FAIL ('FIGHT_SETSHOOTSTART', fight_utils.pas), line = 147
 10762
 10763 425D 20 1F 42			jsr FIGHT_SETSHOOTSTART
 10764
 10765 				; optimize OK (fight_utils.pas), line = 148
 10766
 10767 4260 AD E5 E6			lda FP_CURRENTPLAYER
 10768 4263 0A				asl @
 10769 4264 A8				tay
 10770 4265 B9 05 E4			lda adr.FP_POSW,y
 10771 4268 8D EF E6			sta F_CURPOS
 10772 426B A9 DC			lda #$DC
 10773 426D 18 79 06 E4			add adr.FP_POSW+1,y
 10774 4271 8D F0 E6			sta F_CURPOS+1
 10775
 10776 				; optimize OK (fight_utils.pas), line = 149
 10777
 10778 4274 AC E5 E6			ldy FP_CURRENTPLAYER
 10779 4277 B9 45 E4			lda adr.FP_WEAPON,y
 10780 427A 8D 1D A8			sta E
 10781
 10782 				; optimize OK (fight_utils.pas), line = 150
 10783
 10784 427D A8				tay
 10785 427E B9 2A E7			lda adr.WEAPONREACH,y
 10786 4281 8D 1E A8			sta R
 10787
 10788 				; optimize OK (fight_utils.pas), line = 151
 10789
 10790 4284 A9 00			lda #$00
 10791 4286 8D 23 A8			sta HITPLAYER
 10792
 10793 				; optimize OK (fight_utils.pas), line = 152
 10794
 10795 4289 8D 1F A8			sta V
 10796
 10797 428C			l_2265
 10798 				; --- ForToDoCondition
 10799 428C AD 1F A8			lda V
 10800 428F C9 29			cmp #$29
 10801 4291 90 03 4C 14 45		jcs l_2273
 10802
 10803 				; optimize OK (fight_utils.pas), line = 155
 10804
 10805 4296 CD 1E A8			cmp R
 10806 4299 D0 03 4C 3A 45		jeq @exit
 10807 429E			l_2287
 10808
 10809 				; optimize OK (fight_utils.pas), line = 158
 10810
 10811 429E AD EF E6			lda F_CURPOS
 10812 42A1 18 6D EA E6			add SHOOT_START
 10813 42A5 85 9D			sta :STACKORIGIN+9
 10814 42A7 AD F0 E6			lda F_CURPOS+1
 10815 42AA 6D EB E6			adc SHOOT_START+1
 10816 42AD 85 AD			sta :STACKORIGIN+STACKWIDTH+9
 10817 42AF A0 00			ldy #$00
 10818 42B1 AD E9 E6			lda SHOOT_DIFF
 10819 42B4 10 01			spl
 10820 42B6 88				dey
 10821 42B7 18 65 9D			add :STACKORIGIN+9
 10822 42BA 8D 1B A8			sta K
 10823 42BD 98				tya
 10824 42BE 65 AD			adc :STACKORIGIN+STACKWIDTH+9
 10825 42C0 8D 1C A8			sta K+1
 10826
 10827 				; optimize OK (fight_utils.pas), line = 159
 10828
 10829 42C3 85 81			sta :bp+1
 10830 42C5 AC 1B A8			ldy K
 10831 42C8 B1 80			lda (:bp),y
 10832 42CA 8D 20 A8			sta W
 10833
 10834 				; optimize OK (fight_utils.pas), line = 160
 10835
 10836 42CD AD E9 E6			lda SHOOT_DIFF
 10837 42D0 C9 01			cmp #$01
 10838 42D2 F0 04			jeq l_22BEx
 10839 42D4 C9 FF			cmp #$FF
 10840 42D6 D0 0D			jne l_22BE
 10841 42D8			l_22BEx
 10842
 10843 				; optimize OK (fight_utils.pas), line = 161
 10844
 10845 42D8 AC 1C A8			ldy K+1
 10846 42DB 84 81			sty :bp+1
 10847 42DD AC 1B A8			ldy K
 10848 42E0 A9 12			lda #$12
 10849 42E2 4C EF 42			jmp l_22CC
 10850 42E5			l_22BE
 10851
 10852 				; optimize OK (fight_utils.pas), line = 163
 10853
 10854 42E5 AC 1C A8			ldy K+1
 10855 42E8 84 81			sty :bp+1
 10856 42EA AC 1B A8			ldy K
 10857 42ED A9 13			lda #$13
 10858 42EF			l_22CC
 10859 42EF 91 80			sta (:bp),y
 10860
 10861 				; optimize OK (fight_utils.pas), line = 164
 10862
 10863 42F1 A9 03			lda #$03
 10864 42F3 20 7C 27			jsr WAITFRAMES
 10865
 10866 				; optimize OK (fight_utils.pas), line = 165
 10867
 10868 42F6 AD EF E6			lda F_CURPOS
 10869 42F9 18 6D EA E6			add SHOOT_START
 10870 42FD 85 9E			sta :STACKORIGIN+10
 10871 42FF AD F0 E6			lda F_CURPOS+1
 10872 4302 6D EB E6			adc SHOOT_START+1
 10873 4305 85 AE			sta :STACKORIGIN+STACKWIDTH+10
 10874 4307 A0 00			ldy #$00
 10875 4309 AD E9 E6			lda SHOOT_DIFF
 10876 430C 10 01			spl
 10877 430E 88				dey
 10878 430F 84 AF			sty :STACKORIGIN+STACKWIDTH+11
 10879 4311 18 65 9E			add :STACKORIGIN+10
 10880 4314 A8				tay
 10881 4315 A5 AE			lda :STACKORIGIN+STACKWIDTH+10
 10882 4317 65 AF			adc :STACKORIGIN+STACKWIDTH+11
 10883 4319 85 81			sta :bp+1
 10884 431B AD 20 A8			lda W
 10885 431E 91 80			sta (:bp),y
 10886
 10887 				; optimize OK (fight_utils.pas), line = 167
 10888
 10889 4320 AD 20 A8			lda W
 10890 4323 D0 19			jne l_22F5
 10891
 10892 				; optimize OK (fight_utils.pas), line = 169
 10893
 10894 4325 A0 00			ldy #$00
 10895 4327 AD E9 E6			lda SHOOT_DIFF
 10896 432A 10 01			spl
 10897 432C 88				dey
 10898 432D 18 6D EA E6			add SHOOT_START
 10899 4331 8D EA E6			sta SHOOT_START
 10900 4334 98				tya
 10901 4335 6D EB E6			adc SHOOT_START+1
 10902 4338 8D EB E6			sta SHOOT_START+1
 10903 433B 4C 0C 45			jmp c_2265
 10904 433E			l_22F5
 10905
 10906 				; optimize OK (fight_utils.pas), line = 172
 10907
 10908 433E AD 20 A8			lda W
 10909 4341 C9 01			cmp #$01
 10910 4343 D0 03			jne l_2315
 10911 4345 4C 14 45			jmp b_2265
 10912 4348			l_2315
 10913
 10914 				; optimize OK (fight_utils.pas), line = 175
 10915
 10916 4348 AD 1B A8			lda K
 10917 434B 8D 11 A8			sta CHECKHIT.K
 10918 434E AD 1C A8			lda K+1
 10919 4351 8D 12 A8			sta CHECKHIT.K+1
 10920 4354 20 43 41			jsr CHECKHIT
 10921 4357 AD 13 A8			lda CHECKHIT.RESULT
 10922 435A 8D 21 A8			sta T
 10923
 10924 				; optimize OK (fight_utils.pas), line = 176
 10925
 10926 435D 10 03 4C 0C 45		jmi l_2330
 10927
 10928 				; optimize OK (fight_utils.pas), line = 179
 10929
 10930 4362 AC 1D A8			ldy E
 10931 4365 B9 45 E7			lda adr.WEAPONSOUND,y
 10932 4368 8D 14 9E			sta RMT.TRMT.INIT.A
 10933 436B AD 1F 9A			lda MSX
 10934 436E AC 20 9A			ldy MSX+1
 10935 4371 20 05 15			jsr RMT.TRMT.INIT
 10936
 10937 				; optimize FAIL ('RMT.TRMT.PLAY', fight_utils.pas), line = 180
 10938
 10939 4374 AD 1F 9A			lda MSX
 10940 4377 AC 20 9A			ldy MSX+1
 10941 437A 20 41 15			jsr RMT.TRMT.PLAY
 10942
 10943 				; optimize OK (fight_utils.pas), line = 181
 10944
 10945 437D A9 01			lda #$01
 10946 437F 8D 11 CA			sta PLAYMUSIC
 10947
 10948 				; optimize OK (fight_utils.pas), line = 187
 10949
 10950 4382 A9 14			lda #$14
 10951 4384 20 7C 27			jsr WAITFRAMES
 10952
 10953 				; optimize OK (fight_utils.pas), line = 192
 10954
 10955 4387 A9 08			lda #$08
 10956 4389 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 10957 438C AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 10958 438F 8D 24 A8			sta T1
 10959
 10960 				; optimize OK (fight_utils.pas), line = 193
 10961
 10962 4392 AC 1D A8			ldy E
 10963 4395 B9 33 E7			lda adr.WEAPONPRECISION,y
 10964 4398 0A				asl @
 10965 4399 8D 25 A8			sta T2
 10966
 10967 				; optimize OK (fight_utils.pas), line = 194
 10968
 10969 439C A9 0C			lda #$0C
 10970 439E 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 10971 43A1 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 10972 43A4 8D 26 A8			sta T3
 10973
 10974 				; optimize OK (fight_utils.pas), line = 195
 10975
 10976 43A7 AC E5 E6			ldy FP_CURRENTPLAYER
 10977 43AA B9 C5 E4			lda adr.FP_STRENGTH,y
 10978 43AD 4A				lsr @
 10979 43AE 4A				lsr @
 10980 43AF 4A				lsr @
 10981 43B0 18 69 01			add #$01
 10982 43B3 8D 27 A8			sta T4
 10983
 10984 				; optimize OK (fight_utils.pas), line = 196
 10985
 10986 43B6 AD 25 A8			lda T2
 10987 43B9 CD 24 A8			cmp T1
 10988 43BC B0 0B			jcs l_2389
 10989 43BE AD 27 A8			lda T4
 10990 43C1 CD 26 A8			cmp T3
 10991 43C4 B0 03			jcs l_2389
 10992 43C6 4C 14 45			jmp b_2265
 10993 43C9			l_2389
 10994
 10995 				; optimize OK (fight_utils.pas), line = 198
 10996
 10997 43C9 AC 1D A8			ldy E
 10998 43CC B9 3C E7			lda adr.WEAPONEFFECT,y
 10999 43CF 85 9D			sta :STACKORIGIN+9
 11000 43D1 AC E5 E6			ldy FP_CURRENTPLAYER
 11001 43D4 B9 05 E5			lda adr.FP_BRUTALITY,y
 11002 43D7 4A				lsr @
 11003 43D8 4A				lsr @
 11004 43D9 4A				lsr @
 11005 43DA 18 65 9D			add :STACKORIGIN+9
 11006 43DD 8D 22 A8			sta HIT
 11007
 11008 				; optimize FAIL ('RMT.TRMT.STOP', fight_utils.pas), line = 201
 11009
 11010 43E0 AD 1F 9A			lda MSX
 11011 43E3 AC 20 9A			ldy MSX+1
 11012 43E6 20 81 15			jsr RMT.TRMT.STOP
 11013
 11014 				; optimize OK (fight_utils.pas), line = 202
 11015
 11016 43E9 A9 00			lda #$00
 11017 43EB 8D 11 CA			sta PLAYMUSIC
 11018
 11019 				; optimize OK (fight_utils.pas), line = 210
 11020
 11021 43EE AD 22 A8			lda HIT
 11022 43F1 D0 03			jne l_23B9
 11023 43F3 4C 14 45			jmp b_2265
 11024 43F6			l_23B9
 11025
 11026 				; optimize OK (fight_utils.pas), line = 212
 11027
 11028 43F6 A9 00			lda #$00
 11029 43F8 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
 11030 43FB A9 14			lda #$14
 11031 43FD 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
 11032 4400 20 AC 17			jsr B_CRT.CRT_GOTOXY
 11033
 11034 				; optimize OK (fight_utils.pas), line = 213
 11035
 11036 4403 AD E6 E6			lda FP_CURRENTSITE
 11037 4406 D0 0E			jne l_23D1
 11038
 11039 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', fight_utils.pas), line = 214
 11040
 11041 4408 E8				inx
 11042 4409 AD 01 9C 95 94		mva FIGHT_STRING_1 :STACKORIGIN,x
 11043 440E AD 02 9C 95 A4		mva FIGHT_STRING_1+1 :STACKORIGIN+STACKWIDTH,x
 11044 4413 4C 21 44			jmp l_23DE
 11045 4416			l_23D1
 11046
 11047 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', fight_utils.pas), line = 216
 11048
 11049 4416 E8				inx
 11050 4417 AD 2B 9C 95 94		mva FIGHT_STRING_7 :STACKORIGIN,x
 11051 441C AD 2C 9C 95 A4		mva FIGHT_STRING_7+1 :STACKORIGIN+STACKWIDTH,x
 11052 4421			l_23DE
 11053 4421 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 11054
 11055 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', fight_utils.pas), line = 217
 11056
 11057 4424 E8				inx
 11058 4425 AD 21 A8			lda T
 11059 4428 0A				asl @
 11060 4429 A8				tay
 11061 442A B9 AE A3			lda adr.FP_NAME,y
 11062 442D 95 94			sta :STACKORIGIN,x
 11063 442F B9 AF A3			lda adr.FP_NAME+1,y
 11064 4432 95 A4			sta :STACKORIGIN+STACKWIDTH,x
 11065 4434 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 11066
 11067 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', fight_utils.pas), line = 219
 11068
 11069 4437 E8				inx
 11070 4438 AD 03 9C 95 94		mva FIGHT_STRING_2 :STACKORIGIN,x
 11071 443D AD 04 9C 95 A4		mva FIGHT_STRING_2+1 :STACKORIGIN+STACKWIDTH,x
 11072 4442 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 11073
 11074 				; optimize OK (fight_utils.pas), line = 224
 11075
 11076 4445 A9 32			lda #$32
 11077 4447 20 7C 27			jsr WAITFRAMES
 11078
 11079 				; optimize OK (fight_utils.pas), line = 225
 11080
 11081 444A AC 21 A8			ldy T
 11082 444D AD 22 A8			lda HIT
 11083 4450 D9 85 E4			cmp adr.FP_ENERGY,y
 11084 4453 B0 03 4C EC 44		jcc l_2403
 11085
 11086 				; optimize OK (fight_utils.pas), line = 227
 11087
 11088 4458 A9 00			lda #$00
 11089 445A 99 85 E4			sta adr.FP_ENERGY,y
 11090
 11091 				; optimize OK (fight_utils.pas), line = 229
 11092
 11093 445D A9 00			lda #$00
 11094 445F A0 60			ldy #256-160
 11095 4461 99 C0 DE C8 D0 FA		sta:rne $DF20+160-256,y+
 11096
 11097 				; optimize FAIL ('B_CRT.CRT_WRITECENTERED.@02018986000001000180000', fight_utils.pas), line = 230
 11098
 11099 4467 E8				inx
 11100 4468 AC 05 9C 84 82 AC + 	mwy FIGHT_STRING_3 :bp2
 11101 4472 A0 00			ldy #$00
 11102 4474 B1 82 99 9D A1 C8 + 	mva:rne (:bp2),y B_CRT.CRT_WRITECENTERED.@02018986000001000180000.adr.S,y+
 11103 447C E8				inx
 11104 447D A9 15 95 94			mva #$15 :STACKORIGIN,x
 11105 4481 20 DF 19			jsr B_CRT.CRT_WRITECENTERED.@02018986000001000180000
 11106
 11107 				; optimize FAIL ('B_CRT.CRT_WRITECENTERED.@02018986000001000180000', fight_utils.pas), line = 231
 11108
 11109 4484 E8				inx
 11110 4485 AD 21 A8			lda T
 11111 4488 0A				asl @
 11112 4489 A8				tay
 11113 448A B9 AE A3			lda adr.FP_NAME,y
 11114 448D 85 82			sta :bp2
 11115 448F B9 AF A3			lda adr.FP_NAME+1,y
 11116 4492 85 83			sta :bp2+1
 11117 4494 A0 00			ldy #$00
 11118 4496 B1 82 99 9D A1 C8 + 	mva:rne (:bp2),y B_CRT.CRT_WRITECENTERED.@02018986000001000180000.adr.S,y+
 11119 449E E8				inx
 11120 449F A9 16 95 94			mva #$16 :STACKORIGIN,x
 11121 44A3 20 DF 19			jsr B_CRT.CRT_WRITECENTERED.@02018986000001000180000
 11122
 11123 				; optimize FAIL ('B_CRT.CRT_WRITECENTERED.@02018986000001000180000', fight_utils.pas), line = 232
 11124
 11125 44A6 E8				inx
 11126 44A7 AC 07 9C 84 82 AC + 	mwy FIGHT_STRING_4 :bp2
 11127 44B1 A0 00			ldy #$00
 11128 44B3 B1 82 99 9D A1 C8 + 	mva:rne (:bp2),y B_CRT.CRT_WRITECENTERED.@02018986000001000180000.adr.S,y+
 11129 44BB E8				inx
 11130 44BC A9 17 95 94			mva #$17 :STACKORIGIN,x
 11131 44C0 20 DF 19			jsr B_CRT.CRT_WRITECENTERED.@02018986000001000180000
 11132
 11133 				; optimize OK (fight_utils.pas), line = 233
 11134
 11135 44C3 A9 46			lda #$46
 11136 44C5 20 7C 27			jsr WAITFRAMES
 11137
 11138 				; optimize OK (fight_utils.pas), line = 234
 11139
 11140 44C8 A9 00			lda #$00
 11141 44CA A0 60			ldy #256-160
 11142 44CC 99 C0 DE C8 D0 FA		sta:rne $DF20+160-256,y+
 11143
 11144 				; optimize OK (fight_utils.pas), line = 235
 11145
 11146 44D2 AD 21 A8			lda T
 11147 44D5 0A				asl @
 11148 44D6 A8				tay
 11149 44D7 B9 05 E4			lda adr.FP_POSW,y
 11150 44DA 8D 09 A8			sta FIGHT_CLEARPLAYER.P
 11151 44DD B9 06 E4			lda adr.FP_POSW+1,y
 11152 44E0 8D 0A A8			sta FIGHT_CLEARPLAYER.P+1
 11153 44E3 20 40 40			jsr FIGHT_CLEARPLAYER
 11154
 11155 				; optimize FAIL ('FIGHT_DISPLAYSTATS', fight_utils.pas), line = 236
 11156
 11157 44E6 20 AE 3D			jsr FIGHT_DISPLAYSTATS
 11158 44E9 4C F9 44			jmp l_2434
 11159 44EC			l_2403
 11160
 11161 				; optimize OK (fight_utils.pas), line = 239
 11162
 11163 44EC AC 21 A8			ldy T
 11164 44EF B9 85 E4			lda adr.FP_ENERGY,y
 11165 44F2 38 ED 22 A8			sub HIT
 11166 44F6 99 85 E4			sta adr.FP_ENERGY,y
 11167 44F9			l_2434
 11168
 11169 				; optimize OK (fight_utils.pas), line = 240
 11170
 11171 44F9 AD 21 A8			lda T
 11172 44FC 8D 1A A8			sta RESULT
 11173
 11174 				; optimize OK (fight_utils.pas), line = 242
 11175
 11176 44FF A9 00			lda #$00
 11177 4501 A0 27			ldy #$27
 11178 4503 99 20 DF 88 10 FA		sta:rpl $DF20,y-
 11179 4509 4C 3A 45			jmp @exit
 11180 450C			l_2330
 11181
 11182 				; --- ForToDoEpilog
 11183 450C			c_2265
 11184 450C EE 1F A8			inc V
 11185 450F F0 03 4C 8C 42		jne l_2265
 11186 4514			l_2273
 11187 4514			b_2265
 11188
 11189 				; optimize OK (fight_utils.pas), line = 247
 11190
 11191 4514 A9 00			lda #$00
 11192 4516 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
 11193 4519 A9 14			lda #$14
 11194 451B 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
 11195 451E 20 AC 17			jsr B_CRT.CRT_GOTOXY
 11196
 11197 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', fight_utils.pas), line = 248
 11198
 11199 4521 E8				inx
 11200 4522 AD 09 9C 95 94		mva FIGHT_STRING_5 :STACKORIGIN,x
 11201 4527 AD 0A 9C 95 A4		mva FIGHT_STRING_5+1 :STACKORIGIN+STACKWIDTH,x
 11202 452C 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 11203
 11204 				; optimize OK (fight_utils.pas), line = 249
 11205
 11206 452F A9 32			lda #$32
 11207 4531 20 7C 27			jsr WAITFRAMES
 11208
 11209 				; optimize OK (fight_utils.pas), line = 250
 11210
 11211 4534 AD 23 A8			lda HITPLAYER
 11212 4537 8D 1A A8			sta RESULT
 11213 453A			@exit
 11214
 11215 				; ------------------------------------------------------------
 11216
 11217 = A81A			RESULT	= DATAORIGIN+$0BC4
 11218 = A81B			K	= DATAORIGIN+$0BC5
 11219 = A81D			E	= DATAORIGIN+$0BC7
 11220 = A81E			R	= DATAORIGIN+$0BC8
 11221 = A81F			V	= DATAORIGIN+$0BC9
 11222 = A820			W	= DATAORIGIN+$0BCA
 11223 = A821			T	= DATAORIGIN+$0BCB
 11224 = A822			HIT	= DATAORIGIN+$0BCC
 11225 = A823			HITPLAYER	= DATAORIGIN+$0BCD
 11226 = A824			T1	= DATAORIGIN+$0BCE
 11227 = A825			T2	= DATAORIGIN+$0BCF
 11228 = A826			T3	= DATAORIGIN+$0BD0
 11229 = A827			T4	= DATAORIGIN+$0BD1
 11230
 11231 = A81B			@VarData	= K
 11232 = 000D			@VarDataSize	= 13
 11233
 11234 453A 60				rts						; ret
 11235 				.endl
 11236
 11237 453B			.local	FIGHT_CHECKWINNER				; PROCEDURE
 11238
 11239 				; optimize OK (fight_utils.pas), line = 260
 11240
 11241 453B A9 00			lda #$00
 11242 453D 8D 28 A8			sta S
 11243
 11244 4540			l_2472
 11245 				; --- ForToDoCondition
 11246 4540 AD 28 A8			lda S
 11247 4543 C9 02			cmp #$02
 11248 4545 B0 51			jcs l_2480
 11249
 11250 				; optimize OK (fight_utils.pas), line = 262
 11251
 11252 4547 A9 01			lda #$01
 11253 4549 8D 2A A8			sta PARTYDEAD
 11254
 11255 				; optimize OK (fight_utils.pas), line = 263
 11256
 11257 454C A9 00			lda #$00
 11258 454E 8D 29 A8			sta I
 11259 4551 AC 28 A8			ldy S
 11260 4554 B9 03 E4			lda adr.FP_N,y
 11261 4557 38 E9 01			sub #$01
 11262 455A 8D 5E 45			sta @FORTMP_2493_0
 11263
 11264 455D			l_2496
 11265 				; --- ForToDoCondition
 11266 455D A9 00			lda @FORTMP_2493_0::#$00
 11267 455F CD 29 A8			cmp I
 11268 4562 90 1E			jcc l_24A4
 11269
 11270 				; optimize OK (fight_utils.pas), line = 265
 11271
 11272 4564 AD 28 A8			lda S
 11273 4567 0A				asl @
 11274 4568 0A				asl @
 11275 4569 0A				asl @
 11276 456A 0A				asl @
 11277 456B 18 6D 29 A8			add I
 11278 456F A8				tay
 11279 4570 B9 85 E4			lda adr.FP_ENERGY,y
 11280 4573 D0 03			jne l_24C3
 11281 4575 4C 7D 45			jmp c_2496
 11282 4578			l_24C3
 11283
 11284 				; optimize OK (fight_utils.pas), line = 267
 11285
 11286 4578 A9 00			lda #$00
 11287 457A 8D 2A A8			sta PARTYDEAD
 11288
 11289 				; --- ForToDoEpilog
 11290 457D			c_2496
 11291 457D EE 29 A8			inc I
 11292 4580 D0 DB			jne l_2496
 11293 4582			l_24A4
 11294
 11295 				; optimize OK (fight_utils.pas), line = 269
 11296
 11297 4582 AD 2A A8			lda PARTYDEAD
 11298 4585 F0 0C			jeq l_24E1
 11299
 11300 				; optimize OK (fight_utils.pas), line = 271
 11301
 11302 4587 A9 01			lda #$01
 11303 4589 38 ED 28 A8			sub S
 11304 458D 8D 00 E4			sta FP_WINNER
 11305 4590 4C 98 45			jmp @exit
 11306 4593			l_24E1
 11307
 11308 				; --- ForToDoEpilog
 11309 4593 EE 28 A8			inc S
 11310 4596 D0 A8			jne l_2472
 11311 4598			l_2480
 11312
 11313 				; ------------------------------------------------------------
 11314
 11315 = A828			S	= DATAORIGIN+$0BD2
 11316 = A829			I	= DATAORIGIN+$0BD3
 11317 = A82A			PARTYDEAD	= DATAORIGIN+$0BD4
 11318
 11319 = A828			@VarData	= S
 11320 = 0003			@VarDataSize	= 3
 11321
 11322 4598			@exit
 11323 					.ifdef @new
 11324 					lda <@VarData
 11325 					sta :ztmp
 11326 					lda >@VarData
 11327 					ldy #@VarDataSize-1
 11328 					jmp @FreeMem
 11329 					els
 11330 4598 60				rts						; ret
 11331 					eif
 11332 				.endl
 11333
 11334 4599			.local	FIGHT_MOVECURRENTPLAYER				; PROCEDURE
 11335
 11336 				; optimize OK (fight_utils.pas), line = 282
 11337
 11338 4599 A9 00			lda #$00
 11339 459B 8D E8 E6			sta FP_VALIDCMD
 11340
 11341 				; optimize OK (fight_utils.pas), line = 283
 11342
 11343 459E AD E5 E6			lda FP_CURRENTPLAYER
 11344 45A1 0A				asl @
 11345 45A2 A8				tay
 11346 45A3 B9 05 E4			lda adr.FP_POSW,y
 11347 45A6 8D EF E6			sta F_CURPOS
 11348 45A9 A9 DC			lda #$DC
 11349 45AB 18 79 06 E4			add adr.FP_POSW+1,y
 11350 45AF 8D F0 E6			sta F_CURPOS+1
 11351
 11352 				; optimize OK (fight_utils.pas), line = 284
 11353
 11354 45B2 A9 06			lda #$06
 11355 45B4 CD E7 E6			cmp FP_CURRENTCOMMAND
 11356 45B7 D0 2A			jne l_2519
 11357
 11358 				; optimize OK (fight_utils.pas), line = 285
 11359
 11360 45B9 AD EF E6			lda F_CURPOS
 11361 45BC 38 E9 01			sub #$01
 11362 45BF 85 9D			sta :STACKORIGIN+9
 11363 45C1 AD F0 E6			lda F_CURPOS+1
 11364 45C4 E9 00			sbc #$00
 11365 45C6 85 81			sta :bp+1
 11366 45C8 A4 9D			ldy :STACKORIGIN+9
 11367 45CA B1 80			lda (:bp),y
 11368 45CC D0 15			jne l_2530
 11369
 11370 				; optimize OK (fight_utils.pas), line = 286
 11371
 11372 45CE AC EF E6 84 82 AC + 	mwy F_CURPOS :bp2
 11373 45D8 A0 27			ldy #$27
 11374 45DA B1 82			lda (:bp2),y
 11375 45DC D0 05			jne l_254B
 11376
 11377 				; optimize OK (fight_utils.pas), line = 287
 11378
 11379 45DE A9 FF			lda #$FF
 11380 45E0 8D E8 E6			sta FP_VALIDCMD
 11381 45E3			l_254B
 11382 45E3			l_2530
 11383 45E3			l_2519
 11384
 11385 				; optimize OK (fight_utils.pas), line = 289
 11386
 11387 45E3 A9 07			lda #$07
 11388 45E5 CD E7 E6			cmp FP_CURRENTCOMMAND
 11389 45E8 D0 1B			jne l_2568
 11390
 11391 				; optimize OK (fight_utils.pas), line = 290
 11392
 11393 45EA AC EF E6 84 82 AC + 	mwy F_CURPOS :bp2
 11394 45F4 A0 02			ldy #$02
 11395 45F6 B1 82			lda (:bp2),y
 11396 45F8 D0 0B			jne l_257F
 11397
 11398 				; optimize OK (fight_utils.pas), line = 291
 11399
 11400 45FA A0 2A			ldy #$2A
 11401 45FC B1 82			lda (:bp2),y
 11402 45FE D0 05			jne l_259A
 11403
 11404 				; optimize OK (fight_utils.pas), line = 292
 11405
 11406 4600 A9 01			lda #$01
 11407 4602 8D E8 E6			sta FP_VALIDCMD
 11408 4605			l_259A
 11409 4605			l_257F
 11410 4605			l_2568
 11411
 11412 				; optimize OK (fight_utils.pas), line = 294
 11413
 11414 4605 A9 0E			lda #$0E
 11415 4607 CD E7 E6			cmp FP_CURRENTCOMMAND
 11416 460A D0 2F			jne l_25B7
 11417
 11418 				; optimize OK (fight_utils.pas), line = 295
 11419
 11420 460C AD EF E6			lda F_CURPOS
 11421 460F 38 E9 28			sub #$28
 11422 4612 85 9D			sta :STACKORIGIN+9
 11423 4614 AD F0 E6			lda F_CURPOS+1
 11424 4617 E9 00			sbc #$00
 11425 4619 85 81			sta :bp+1
 11426 461B A4 9D			ldy :STACKORIGIN+9
 11427 461D B1 80			lda (:bp),y
 11428 461F D0 1A			jne l_25CE
 11429
 11430 				; optimize OK (fight_utils.pas), line = 296
 11431
 11432 4621 AD EF E6			lda F_CURPOS
 11433 4624 18 69 D9			add #$D9
 11434 4627 85 9D			sta :STACKORIGIN+9
 11435 4629 AD F0 E6			lda F_CURPOS+1
 11436 462C 69 FF			adc #$FF
 11437 462E 85 81			sta :bp+1
 11438 4630 A4 9D			ldy :STACKORIGIN+9
 11439 4632 B1 80			lda (:bp),y
 11440 4634 D0 05			jne l_25E9
 11441
 11442 				; optimize OK (fight_utils.pas), line = 297
 11443
 11444 4636 A9 D8			lda #$D8
 11445 4638 8D E8 E6			sta FP_VALIDCMD
 11446 463B			l_25E9
 11447 463B			l_25CE
 11448 463B			l_25B7
 11449
 11450 				; optimize OK (fight_utils.pas), line = 299
 11451
 11452 463B A9 0F			lda #$0F
 11453 463D CD E7 E6			cmp FP_CURRENTCOMMAND
 11454 4640 D0 1A			jne l_2606
 11455
 11456 				; optimize OK (fight_utils.pas), line = 300
 11457
 11458 4642 AC EF E6 84 82 AC + 	mwy F_CURPOS :bp2
 11459 464C A0 50			ldy #$50
 11460 464E B1 82			lda (:bp2),y
 11461 4650 D0 0A			jne l_261D
 11462
 11463 				; optimize OK (fight_utils.pas), line = 301
 11464
 11465 4652 C8				iny
 11466 4653 B1 82			lda (:bp2),y
 11467 4655 D0 05			jne l_2638
 11468
 11469 				; optimize OK (fight_utils.pas), line = 302
 11470
 11471 4657 A9 28			lda #$28
 11472 4659 8D E8 E6			sta FP_VALIDCMD
 11473 465C			l_2638
 11474 465C			l_261D
 11475 465C			l_2606
 11476
 11477 				; optimize OK (fight_utils.pas), line = 304
 11478
 11479 465C AD E8 E6			lda FP_VALIDCMD
 11480 465F F0 36			jeq l_2655
 11481
 11482 				; optimize FAIL ('FIGHT_CLEARCURRENTPLAYER', fight_utils.pas), line = 306
 11483
 11484 4661 20 86 40			jsr FIGHT_CLEARCURRENTPLAYER
 11485
 11486 				; optimize OK (fight_utils.pas), line = 307
 11487
 11488 4664 AD E5 E6			lda FP_CURRENTPLAYER
 11489 4667 0A				asl @
 11490 4668 A8				tay
 11491 4669 B9 05 E4			lda adr.FP_POSW,y
 11492 466C 85 9E			sta :STACKORIGIN+10
 11493 466E B9 06 E4			lda adr.FP_POSW+1,y
 11494 4671 85 AE			sta :STACKORIGIN+STACKWIDTH+10
 11495 4673 A0 00			ldy #$00
 11496 4675 AD E8 E6			lda FP_VALIDCMD
 11497 4678 10 01			spl
 11498 467A 88				dey
 11499 467B 84 AF			sty :STACKORIGIN+STACKWIDTH+11
 11500 467D 18 65 9E			add :STACKORIGIN+10
 11501 4680 85 9E			sta :STACKORIGIN+10
 11502 4682 A5 AE			lda :STACKORIGIN+STACKWIDTH+10
 11503 4684 65 AF			adc :STACKORIGIN+STACKWIDTH+11
 11504 4686 85 AE			sta :STACKORIGIN+STACKWIDTH+10
 11505 4688 AD E5 E6			lda FP_CURRENTPLAYER
 11506 468B 0A				asl @
 11507 468C A8				tay
 11508 468D A5 9E			lda :STACKORIGIN+10
 11509 468F 99 05 E4			sta adr.FP_POSW,y
 11510 4692 A5 AE			lda :STACKORIGIN+STACKWIDTH+10
 11511 4694 99 06 E4			sta adr.FP_POSW+1,y
 11512 4697			l_2655
 11513
 11514 4697			@exit
 11515 					.ifdef @new
 11516 					lda <@VarData
 11517 					sta :ztmp
 11518 					lda >@VarData
 11519 					ldy #@VarDataSize-1
 11520 					jmp @FreeMem
 11521 					els
 11522 4697 60				rts						; ret
 11523 					eif
 11524 				.endl
 11525
 11526 4698			.local	FIGHT_ATTACKCURRENTPLAYER			; PROCEDURE
 11527
 11528 				; optimize OK (fight_utils.pas), line = 318
 11529
 11530 4698 AD E7 E6			lda FP_CURRENTCOMMAND
 11531 469B C9 0C			cmp #$0C
 11532 469D F0 03 4C 39 47		jne l_2680
 11533
 11534 				; optimize FAIL ('FIGHT_DRAWCURRENTPLAYER', fight_utils.pas), line = 321
 11535
 11536 46A2 20 A0 3F			jsr FIGHT_DRAWCURRENTPLAYER
 11537
 11538 				; optimize OK (fight_utils.pas), line = 324
 11539
 11540 46A5 A9 00			lda #$00
 11541 46A7 8D 2D A8			sta CURRENTBLINK
 11542
 11543 				; --- RepeatUntilProlog
 11544 46AA			l_2687
 11545
 11546 				; optimize FAIL ('B_SYSTEM.WAITFRAME', fight_utils.pas), line = 326
 11547
 11548 46AA 20 BF 16			jsr B_SYSTEM.WAITFRAME
 11549
 11550 				; optimize OK (fight_utils.pas), line = 327
 11551
 11552 46AD AD 2D A8			lda CURRENTBLINK
 11553 46B0 C9 05			cmp #$05
 11554 46B2 D0 03			jne l_269A
 11555
 11556 				; optimize FAIL ('FIGHT_CLEARCURRENTPLAYER', fight_utils.pas), line = 328
 11557
 11558 46B4 20 86 40			jsr FIGHT_CLEARCURRENTPLAYER
 11559 46B7			l_269A
 11560
 11561 				; optimize OK (fight_utils.pas), line = 329
 11562
 11563 46B7 AD 2D A8			lda CURRENTBLINK
 11564 46BA C9 0A			cmp #$0A
 11565 46BC D0 08			jne l_26B0
 11566
 11567 				; optimize OK (fight_utils.pas), line = 331
 11568
 11569 46BE A9 00			lda #$00
 11570 46C0 8D 2D A8			sta CURRENTBLINK
 11571
 11572 				; optimize FAIL ('FIGHT_DRAWCURRENTPLAYER', fight_utils.pas), line = 332
 11573
 11574 46C3 20 A0 3F			jsr FIGHT_DRAWCURRENTPLAYER
 11575 46C6			l_26B0
 11576
 11577 				; optimize OK (fight_utils.pas), line = 334
 11578
 11579 46C6 EE 2D A8			inc CURRENTBLINK
 11580
 11581 				; optimize FAIL ('CHECKKEYANDSTICK', fight_utils.pas), line = 335
 11582
 11583 46C9 20 54 1C			jsr CHECKKEYANDSTICK
 11584 46CC AD F1 A4			lda CHECKKEYANDSTICK.RESULT
 11585 46CF 8D 2C A8			sta CH
 11586
 11587 				; optimize OK (fight_utils.pas), line = 336
 11588
 11589 46D2 C9 0F			cmp #$0F
 11590 46D4 F0 10			jeq l_2687x
 11591 46D6 C9 0E			cmp #$0E
 11592 46D8 F0 0C			jeq l_2687x
 11593 46DA C9 07			cmp #$07
 11594 46DC F0 08			jeq l_2687x
 11595 46DE C9 06			cmp #$06
 11596 46E0 F0 04			jeq l_2687x
 11597 46E2 C9 0C			cmp #$0C
 11598 46E4 D0 C4			jne l_2687
 11599 46E6			l_2687x
 11600
 11601 				; optimize FAIL ('FIGHT_DRAWPLAYERS', fight_utils.pas), line = 338
 11602
 11603 46E6 20 DD 40			jsr FIGHT_DRAWPLAYERS
 11604
 11605 				; optimize OK (fight_utils.pas), line = 339
 11606
 11607 46E9 AD 2C A8			lda CH
 11608 46EC 8D 2E A8			sta @CASETMP_000E
 11609 46EF C9 06			cmp #$06
 11610 46F1 D0 08			jne l_270F
 11611 				@
 11612
 11613 				; optimize OK (fight_utils.pas), line = 340
 11614
 11615 46F3 A9 FF			lda #$FF
 11616 46F5 8D E9 E6			sta SHOOT_DIFF
 11617 46F8 4C 2E 47			jmp a_000E
 11618 46FB			l_270F
 11619 46FB C9 07			cmp #$07
 11620 46FD D0 08			jne l_271A
 11621
 11622 				; optimize OK (fight_utils.pas), line = 341
 11623
 11624 46FF A9 01			lda #$01
 11625 4701 8D E9 E6			sta SHOOT_DIFF
 11626 4704 4C 2E 47			jmp a_000E
 11627 4707			l_271A
 11628 4707 C9 0E			cmp #$0E
 11629 4709 D0 08			jne l_2725
 11630
 11631 				; optimize OK (fight_utils.pas), line = 342
 11632
 11633 470B A9 D8			lda #$D8
 11634 470D 8D E9 E6			sta SHOOT_DIFF
 11635 4710 4C 2E 47			jmp a_000E
 11636 4713			l_2725
 11637 4713 C9 0F			cmp #$0F
 11638 4715 D0 08			jne l_2730
 11639
 11640 				; optimize OK (fight_utils.pas), line = 343
 11641
 11642 4717 A9 28			lda #$28
 11643 4719 8D E9 E6			sta SHOOT_DIFF
 11644 471C 4C 2E 47			jmp a_000E
 11645 471F			l_2730
 11646 471F C9 0C			cmp #$0C
 11647 4721 D0 0B			jne l_273B
 11648
 11649 				; optimize FAIL ('WAITFORKEYRELEASE', fight_utils.pas), line = 346
 11650
 11651 4723 20 AE 1C			jsr WAITFORKEYRELEASE
 11652
 11653 				; optimize OK (fight_utils.pas), line = 347
 11654
 11655 4726 A9 00			lda #$00
 11656 4728 8D E8 E6			sta FP_VALIDCMD
 11657 472B 4C 3E 47			jmp @exit
 11658 472E			l_273B
 11659 472E			a_000E
 11660
 11661 				; optimize FAIL ('FIGHT_SHOOT', fight_utils.pas), line = 351
 11662
 11663 472E 20 5D 42			jsr FIGHT_SHOOT
 11664
 11665 				; optimize OK (fight_utils.pas), line = 352
 11666
 11667 4731 A9 01			lda #$01
 11668 4733 8D E8 E6			sta FP_VALIDCMD
 11669 4736 4C 3E 47			jmp @exit
 11670 4739			l_2680
 11671
 11672 				; optimize OK (fight_utils.pas), line = 355
 11673
 11674 4739 A9 00			lda #$00
 11675 473B 8D E8 E6			sta FP_VALIDCMD
 11676
 11677 				; ------------------------------------------------------------
 11678
 11679 = A82C			CH	= DATAORIGIN+$0BD6
 11680 = A82D			CURRENTBLINK	= DATAORIGIN+$0BD7
 11681 = A82E			@CASETMP_000E	= DATAORIGIN+$0BD8
 11682
 11683 = A82C			@VarData	= CH
 11684 = 0003			@VarDataSize	= 3
 11685
 11686 473E			@exit
 11687 					.ifdef @new
 11688 					lda <@VarData
 11689 					sta :ztmp
 11690 					lda >@VarData
 11691 					ldy #@VarDataSize-1
 11692 					jmp @FreeMem
 11693 					els
 11694 473E 60				rts						; ret
 11695 					eif
 11696 				.endl
 11697
 11698 473F			.local	FIGHT_WAITFORCOMMAND				; PROCEDURE
 11699
 11700 				; optimize OK (fight_utils.pas), line = 365
 11701
 11702 473F A9 00			lda #$00
 11703 4741 8D 30 A8			sta CURRENTBLINK
 11704
 11705 				; --- RepeatUntilProlog
 11706 4744			l_275B
 11707
 11708 				; optimize FAIL ('B_SYSTEM.WAITFRAME', fight_utils.pas), line = 367
 11709
 11710 4744 20 BF 16			jsr B_SYSTEM.WAITFRAME
 11711
 11712 				; optimize OK (fight_utils.pas), line = 368
 11713
 11714 4747 AD 30 A8			lda CURRENTBLINK
 11715 474A C9 1E			cmp #$1E
 11716 474C D0 03			jne l_276E
 11717
 11718 				; optimize FAIL ('FIGHT_CLEARCURRENTPLAYER', fight_utils.pas), line = 369
 11719
 11720 474E 20 86 40			jsr FIGHT_CLEARCURRENTPLAYER
 11721 4751			l_276E
 11722
 11723 				; optimize OK (fight_utils.pas), line = 370
 11724
 11725 4751 AD 30 A8			lda CURRENTBLINK
 11726 4754 C9 3C			cmp #$3C
 11727 4756 D0 08			jne l_2784
 11728
 11729 				; optimize OK (fight_utils.pas), line = 372
 11730
 11731 4758 A9 00			lda #$00
 11732 475A 8D 30 A8			sta CURRENTBLINK
 11733
 11734 				; optimize FAIL ('FIGHT_DRAWCURRENTPLAYER', fight_utils.pas), line = 373
 11735
 11736 475D 20 A0 3F			jsr FIGHT_DRAWCURRENTPLAYER
 11737 4760			l_2784
 11738
 11739 				; optimize OK (fight_utils.pas), line = 375
 11740
 11741 4760 EE 30 A8			inc CURRENTBLINK
 11742
 11743 				; optimize FAIL ('CHECKKEYANDSTICK', fight_utils.pas), line = 376
 11744
 11745 4763 20 54 1C			jsr CHECKKEYANDSTICK
 11746 4766 AD F1 A4			lda CHECKKEYANDSTICK.RESULT
 11747 4769 8D 2F A8			sta CH
 11748
 11749 				; optimize OK (fight_utils.pas), line = 377
 11750
 11751 476C F0 D6			jeq l_275B
 11752
 11753 				; optimize OK (fight_utils.pas), line = 378
 11754
 11755 476E 8D E7 E6			sta FP_CURRENTCOMMAND
 11756
 11757 				; ------------------------------------------------------------
 11758
 11759 = A82F			CH	= DATAORIGIN+$0BD9
 11760 = A830			CURRENTBLINK	= DATAORIGIN+$0BDA
 11761
 11762 = A82F			@VarData	= CH
 11763 = 0002			@VarDataSize	= 2
 11764
 11765 4771			@exit
 11766 					.ifdef @new
 11767 					lda <@VarData
 11768 					sta :ztmp
 11769 					lda >@VarData
 11770 					ldy #@VarDataSize-1
 11771 					jmp @FreeMem
 11772 					els
 11773 4771 60				rts						; ret
 11774 					eif
 11775 				.endl
 11776
 11777 4772			.local	FIGHT_PLAYERMOVE				; PROCEDURE
 11778
 11779 				; --- RepeatUntilProlog
 11780 4772			l_27B2
 11781
 11782 				; optimize FAIL ('FIGHT_WAITFORCOMMAND', fight_utils.pas), line = 387
 11783
 11784 4772 20 3F 47			jsr FIGHT_WAITFORCOMMAND
 11785
 11786 				; optimize OK (fight_utils.pas), line = 389
 11787
 11788 4775 A9 0A			lda #$0A
 11789 4777 20 7C 27			jsr WAITFRAMES
 11790
 11791 				; --- RepeatUntilProlog
 11792 477A			l_27B6
 11793
 11794 				; optimize FAIL ('CHECKKEYANDSTICK', fight_utils.pas), line = 391
 11795
 11796 477A 20 54 1C			jsr CHECKKEYANDSTICK
 11797 477D AD F1 A4			lda CHECKKEYANDSTICK.RESULT
 11798 4780 8D 31 A8			sta TMPCH
 11799
 11800 				; optimize OK (fight_utils.pas), line = 392
 11801
 11802 4783 CD E7 E6			cmp FP_CURRENTCOMMAND
 11803 4786 F0 F2			jeq l_27B6
 11804
 11805 				; optimize OK (fight_utils.pas), line = 395
 11806
 11807 4788 AD E7 E6			lda FP_CURRENTCOMMAND
 11808 478B C9 21			cmp #$21
 11809 478D F0 42			jeq @exit
 11810 478F			l_27DB
 11811
 11812 				; optimize OK (fight_utils.pas), line = 398
 11813
 11814 478F AD E7 E6			lda FP_CURRENTCOMMAND
 11815 4792 C9 2F			cmp #$2F
 11816 4794 D0 0C			jne l_27F0
 11817
 11818 				; optimize OK (fight_utils.pas), line = 400
 11819
 11820 4796 A9 01			lda #$01
 11821 4798 38 ED E6 E6			sub FP_CURRENTSITE
 11822 479C 8D 00 E4			sta FP_WINNER
 11823 479F 4C D1 47			jmp @exit
 11824 47A2			l_27F0
 11825
 11826 				; optimize OK (fight_utils.pas), line = 405
 11827
 11828 47A2 AD E7 E6			lda FP_CURRENTCOMMAND
 11829 47A5 C9 0D			cmp #$0D
 11830 47A7 D0 08			jne l_280F
 11831
 11832 				; optimize OK (fight_utils.pas), line = 406
 11833
 11834 47A9 AC E6 E6			ldy FP_CURRENTSITE
 11835 47AC A9 01			lda #$01
 11836 47AE 99 01 E4			sta adr.FP_AI,y
 11837 47B1			l_280F
 11838
 11839 				; optimize OK (fight_utils.pas), line = 409
 11840
 11841 47B1 AD E7 E6			lda FP_CURRENTCOMMAND
 11842 47B4 C9 05			cmp #$05
 11843 47B6 D0 09			jne l_282B
 11844
 11845 				; optimize OK (fight_utils.pas), line = 410
 11846
 11847 47B8 AD E6 E6			lda FP_CURRENTSITE
 11848 47BB 8D 00 E4			sta FP_WINNER
 11849 47BE 4C D1 47			jmp @exit
 11850 47C1			l_282B
 11851
 11852 				; optimize FAIL ('FIGHT_MOVECURRENTPLAYER', fight_utils.pas), line = 415
 11853
 11854 47C1 20 99 45			jsr FIGHT_MOVECURRENTPLAYER
 11855
 11856 				; optimize OK (fight_utils.pas), line = 417
 11857
 11858 47C4 AD E8 E6			lda FP_VALIDCMD
 11859 47C7 D0 03			jne l_2847
 11860
 11861 				; optimize FAIL ('FIGHT_ATTACKCURRENTPLAYER', fight_utils.pas), line = 418
 11862
 11863 47C9 20 98 46			jsr FIGHT_ATTACKCURRENTPLAYER
 11864 47CC			l_2847
 11865
 11866 				; optimize OK (fight_utils.pas), line = 419
 11867
 11868 47CC AD E8 E6			lda FP_VALIDCMD
 11869 47CF F0 A1			jeq l_27B2
 11870
 11871 				; ------------------------------------------------------------
 11872
 11873 = A831			TMPCH	= DATAORIGIN+$0BDB
 11874
 11875 = A831			@VarData	= TMPCH
 11876 = 0001			@VarDataSize	= 1
 11877
 11878 47D1			@exit
 11879 					.ifdef @new
 11880 					lda <@VarData
 11881 					sta :ztmp
 11882 					lda >@VarData
 11883 					ldy #@VarDataSize-1
 11884 					jmp @FreeMem
 11885 					els
 11886 47D1 60				rts						; ret
 11887 					eif
 11888 				.endl
 11889
 11890 47D2			.local	FIGHT_CHECKSHOOT				; FUNCTION
 11891
 11892 				; optimize OK (fight_ai.pas), line = 8
 11893
 11894 47D2 A9 00			lda #$00
 11895 47D4 8D 32 A8			sta RESULT
 11896
 11897 				; optimize FAIL ('FIGHT_SETSHOOTSTART', fight_ai.pas), line = 9
 11898
 11899 47D7 20 1F 42			jsr FIGHT_SETSHOOTSTART
 11900
 11901 				; optimize OK (fight_ai.pas), line = 10
 11902
 11903 47DA AD E5 E6			lda FP_CURRENTPLAYER
 11904 47DD 0A				asl @
 11905 47DE A8				tay
 11906 47DF B9 05 E4			lda adr.FP_POSW,y
 11907 47E2 8D EF E6			sta F_CURPOS
 11908 47E5 A9 DC			lda #$DC
 11909 47E7 18 79 06 E4			add adr.FP_POSW+1,y
 11910 47EB 8D F0 E6			sta F_CURPOS+1
 11911
 11912 				; optimize OK (fight_ai.pas), line = 11
 11913
 11914 47EE AC E5 E6			ldy FP_CURRENTPLAYER
 11915 47F1 B9 45 E4			lda adr.FP_WEAPON,y
 11916 47F4 A8				tay
 11917 47F5 B9 2A E7			lda adr.WEAPONREACH,y
 11918 47F8 8D 35 A8			sta R
 11919
 11920 				; optimize OK (fight_ai.pas), line = 14
 11921
 11922 47FB A9 00			lda #$00
 11923 47FD 8D 36 A8			sta V
 11924
 11925 4800			l_2882
 11926 				; --- ForToDoCondition
 11927 4800 AD 36 A8			lda V
 11928 4803 C9 29			cmp #$29
 11929 4805 90 03 4C CD 48		jcs l_2890
 11930
 11931 				; optimize OK (fight_ai.pas), line = 17
 11932
 11933 480A CD 35 A8			cmp R
 11934 480D D0 03 4C D2 48		jeq @exit
 11935 4812			l_28A4
 11936
 11937 				; optimize OK (fight_ai.pas), line = 19
 11938
 11939 4812 AD EF E6			lda F_CURPOS
 11940 4815 18 6D EA E6			add SHOOT_START
 11941 4819 85 9D			sta :STACKORIGIN+9
 11942 481B AD F0 E6			lda F_CURPOS+1
 11943 481E 6D EB E6			adc SHOOT_START+1
 11944 4821 85 AD			sta :STACKORIGIN+STACKWIDTH+9
 11945 4823 A0 00			ldy #$00
 11946 4825 AD E9 E6			lda SHOOT_DIFF
 11947 4828 10 01			spl
 11948 482A 88				dey
 11949 482B 18 65 9D			add :STACKORIGIN+9
 11950 482E 8D 33 A8			sta K
 11951 4831 98				tya
 11952 4832 65 AD			adc :STACKORIGIN+STACKWIDTH+9
 11953 4834 8D 34 A8			sta K+1
 11954
 11955 				; optimize OK (fight_ai.pas), line = 20
 11956
 11957 4837 85 81			sta :bp+1
 11958 4839 AC 33 A8			ldy K
 11959 483C B1 80			lda (:bp),y
 11960 483E 8D 37 A8			sta W
 11961
 11962 				; optimize OK (fight_ai.pas), line = 21
 11963
 11964 4841 D0 19			jne l_28CF
 11965
 11966 				; optimize OK (fight_ai.pas), line = 23
 11967
 11968 4843 A0 00			ldy #$00
 11969 4845 AD E9 E6			lda SHOOT_DIFF
 11970 4848 10 01			spl
 11971 484A 88				dey
 11972 484B 18 6D EA E6			add SHOOT_START
 11973 484F 8D EA E6			sta SHOOT_START
 11974 4852 98				tya
 11975 4853 6D EB E6			adc SHOOT_START+1
 11976 4856 8D EB E6			sta SHOOT_START+1
 11977 4859 4C C5 48			jmp c_2882
 11978 485C			l_28CF
 11979
 11980 				; optimize OK (fight_ai.pas), line = 26
 11981
 11982 485C AD 37 A8			lda W
 11983 485F C9 01			cmp #$01
 11984 4861 D0 03			jne l_28EF
 11985 4863 4C CD 48			jmp b_2882
 11986 4866			l_28EF
 11987
 11988 				; optimize OK (fight_ai.pas), line = 29
 11989
 11990 4866 AD 33 A8			lda K
 11991 4869 8D 11 A8			sta CHECKHIT.K
 11992 486C AD 34 A8			lda K+1
 11993 486F 8D 12 A8			sta CHECKHIT.K+1
 11994 4872 20 43 41			jsr CHECKHIT
 11995 4875 AD 13 A8			lda CHECKHIT.RESULT
 11996 4878 8D 38 A8			sta T
 11997
 11998 				; optimize OK (fight_ai.pas), line = 30
 11999
 12000 487B C9 80			cmp #$80
 12001 487D D0 03			jne l_290A
 12002 487F 4C C5 48			jmp c_2882
 12003 4882			l_290A
 12004
 12005 				; optimize OK (fight_ai.pas), line = 33
 12006
 12007 4882 A0 01			ldy #1
 12008 4884 AD E6 E6			lda FP_CURRENTSITE
 12009 4887 F0 01			beq @+
 12010 4889 88				dey
 12011 				@
 12012 488A 84 9D			sty :STACKORIGIN+9
 12013 488C A0 01			ldy #1
 12014 488E AD 38 A8			lda T
 12015 4891 C9 10			cmp #$10
 12016 4893 90 01			bcc @+
 12017 4895 88				dey
 12018 				@
 12019 4896 98				tya
 12020 4897 25 9D			and :STACKORIGIN+9
 12021 4899 85 9D			sta :STACKORIGIN+9
 12022 489B A0 01			ldy #1
 12023 489D AD E6 E6			lda FP_CURRENTSITE
 12024 48A0 C9 01			cmp #$01
 12025 48A2 F0 01			beq @+
 12026 48A4 88				dey
 12027 				@
 12028 48A5 84 9E			sty :STACKORIGIN+10
 12029
 12030 48A7 AD 38 A8			lda T
 12031 48AA C9 10			cmp #$10
 12032 48AC A9 00			lda #$00
 12033 48AE 2A				rol @
 12034 48AF 25 9E			and :STACKORIGIN+10
 12035 48B1 05 9D			ora :STACKORIGIN+9
 12036 48B3 F0 08			jeq l_2943
 12037
 12038 				; optimize OK (fight_ai.pas), line = 35
 12039
 12040 48B5 A9 00			lda #$00
 12041 48B7 8D 32 A8			sta RESULT
 12042 48BA 4C D2 48			jmp @exit
 12043 48BD			l_2943
 12044
 12045 				; optimize OK (fight_ai.pas), line = 40
 12046
 12047 48BD A9 01			lda #$01
 12048 48BF 8D 32 A8			sta RESULT
 12049 48C2 4C D2 48			jmp @exit
 12050
 12051 				; --- ForToDoEpilog
 12052 48C5			c_2882
 12053 48C5 EE 36 A8			inc V
 12054 48C8 F0 03 4C 00 48		jne l_2882
 12055 48CD			l_2890
 12056 48CD			b_2882
 12057
 12058 				; optimize OK (fight_ai.pas), line = 44
 12059
 12060 48CD A9 00			lda #$00
 12061 48CF 8D 32 A8			sta RESULT
 12062 48D2			@exit
 12063
 12064 				; ------------------------------------------------------------
 12065
 12066 = A832			RESULT	= DATAORIGIN+$0BDC
 12067 = A833			K	= DATAORIGIN+$0BDD
 12068 = A835			R	= DATAORIGIN+$0BDF
 12069 = A836			V	= DATAORIGIN+$0BE0
 12070 = A837			W	= DATAORIGIN+$0BE1
 12071 = A838			T	= DATAORIGIN+$0BE2
 12072
 12073 = A833			@VarData	= K
 12074 = 0006			@VarDataSize	= 6
 12075
 12076 48D2 60				rts						; ret
 12077 				.endl
 12078
 12079 48D3			.local	FIGHT_AIMOVE					; PROCEDURE
 12080
 12081 				; optimize OK (fight_ai.pas), line = 54
 12082
 12083 48D3 A9 00			lda #$00
 12084 48D5 8D 39 A8			sta S
 12085
 12086 48D8			l_2964
 12087 				; --- ForToDoCondition
 12088 48D8 AD 39 A8			lda S
 12089 48DB C9 04			cmp #$04
 12090 48DD B0 43			jcs l_2972
 12091
 12092 				; optimize OK (fight_ai.pas), line = 56
 12093
 12094 48DF 8D 47 A8			sta @CASETMP_000F
 12095 48E2 C9 00			cmp #$00
 12096 48E4 D0 08			jne l_297D
 12097 				@
 12098
 12099 				; optimize OK (fight_ai.pas), line = 57
 12100
 12101 48E6 A9 FF			lda #$FF
 12102 48E8 8D E9 E6			sta SHOOT_DIFF
 12103 48EB 4C 0F 49			jmp a_000F
 12104 48EE			l_297D
 12105 48EE C9 01			cmp #$01
 12106 48F0 D0 08			jne l_2988
 12107
 12108 				; optimize OK (fight_ai.pas), line = 58
 12109
 12110 48F2 A9 01			lda #$01
 12111 48F4 8D E9 E6			sta SHOOT_DIFF
 12112 48F7 4C 0F 49			jmp a_000F
 12113 48FA			l_2988
 12114 48FA C9 02			cmp #$02
 12115 48FC D0 08			jne l_2993
 12116
 12117 				; optimize OK (fight_ai.pas), line = 59
 12118
 12119 48FE A9 D8			lda #$D8
 12120 4900 8D E9 E6			sta SHOOT_DIFF
 12121 4903 4C 0F 49			jmp a_000F
 12122 4906			l_2993
 12123 4906 C9 03			cmp #$03
 12124 4908 D0 05			jne l_299E
 12125
 12126 				; optimize OK (fight_ai.pas), line = 60
 12127
 12128 490A A9 28			lda #$28
 12129 490C 8D E9 E6			sta SHOOT_DIFF
 12130 490F			l_299E
 12131 490F			a_000F
 12132
 12133 				; optimize FAIL ('FIGHT_CHECKSHOOT', fight_ai.pas), line = 62
 12134
 12135 490F 20 D2 47			jsr FIGHT_CHECKSHOOT
 12136 4912 AD 32 A8			lda FIGHT_CHECKSHOOT.RESULT
 12137 4915 F0 06			jeq l_29B8
 12138
 12139 				; optimize FAIL ('FIGHT_SHOOT', fight_ai.pas), line = 64
 12140
 12141 4917 20 5D 42			jsr FIGHT_SHOOT
 12142 491A 4C 01 4C			jmp @exit
 12143 491D			l_29B8
 12144
 12145 				; --- ForToDoEpilog
 12146 491D EE 39 A8			inc S
 12147 4920 D0 B6			jne l_2964
 12148 4922			l_2972
 12149
 12150 				; optimize OK (fight_ai.pas), line = 71
 12151
 12152 4922 A9 00			lda #$00
 12153 4924 8D 43 A8			sta NE
 12154 4927 8D 44 A8			sta NE+1
 12155
 12156 				; optimize OK (fight_ai.pas), line = 72
 12157
 12158 492A A9 E7			lda #$E7
 12159 492C 8D 45 A8			sta ND
 12160 492F A9 03			lda #$03
 12161 4931 8D 46 A8			sta ND+1
 12162
 12163 				; optimize OK (fight_ai.pas), line = 73
 12164
 12165 4934 AD E5 E6			lda FP_CURRENTPLAYER
 12166 4937 0A				asl @
 12167 4938 A8				tay
 12168 4939 B9 05 E4			lda adr.FP_POSW,y
 12169 493C 8D 3D A8			sta CP
 12170 493F B9 06 E4			lda adr.FP_POSW+1,y
 12171 4942 8D 3E A8			sta CP+1
 12172
 12173 				; optimize OK (fight_ai.pas), line = 74
 12174
 12175 4945 A9 00			lda #$00
 12176 4947 8D 3C A8			sta II
 12177 494A A9 01			lda #$01
 12178 494C 38 ED E6 E6			sub FP_CURRENTSITE
 12179 4950 A8				tay
 12180 4951 B9 03 E4			lda adr.FP_N,y
 12181 4954 38 E9 01			sub #$01
 12182 4957 8D 5B 49			sta @FORTMP_29E4_0
 12183
 12184 495A			l_29E7
 12185 				; --- ForToDoCondition
 12186 495A A9 00			lda @FORTMP_29E4_0::#$00
 12187 495C CD 3C A8			cmp II
 12188 495F B0 03 4C C4 4A		jcc l_29F5
 12189
 12190 				; optimize OK (fight_ai.pas), line = 77
 12191
 12192 4964 A9 01			lda #$01
 12193 4966 ED E6 E6			sbc FP_CURRENTSITE
 12194 4969 0A				asl @
 12195 496A 0A				asl @
 12196 496B 0A				asl @
 12197 496C 0A				asl @
 12198 496D 8D 3A A8			sta DX
 12199
 12200 				; optimize OK (fight_ai.pas), line = 78
 12201
 12202 4970 18 6D 3C A8			add II
 12203 4974 A8				tay
 12204 4975 B9 85 E4			lda adr.FP_ENERGY,y
 12205 4978 D0 03			jne l_2A1E
 12206 497A 4C BC 4A			jmp c_29E7
 12207 497D			l_2A1E
 12208
 12209 				; optimize OK (fight_ai.pas), line = 79
 12210
 12211 497D A0 00			ldy #$00
 12212 497F AD 3A A8			lda DX
 12213 4982 10 01			spl
 12214 4984 88				dey
 12215 4985 84 AD			sty :STACKORIGIN+STACKWIDTH+9
 12216 4987 18 6D 3C A8			add II
 12217 498B 85 9D			sta :STACKORIGIN+9
 12218 498D A5 AD			lda :STACKORIGIN+STACKWIDTH+9
 12219 498F 69 00			adc #$00
 12220 4991 06 9D			asl :STACKORIGIN+9
 12221 4993 2A				rol @
 12222 4994 85 AD			sta :STACKORIGIN+STACKWIDTH+9
 12223 4996 A5 9D			lda :STACKORIGIN+9
 12224 4998 18 69 00			add #$00
 12225 499B A8				tay
 12226 499C A5 AD			lda :STACKORIGIN+STACKWIDTH+9
 12227 499E 69 00			adc #$00
 12228 49A0 85 AD			sta :STACKORIGIN+STACKWIDTH+9
 12229 49A2 B9 05 E4			lda adr.FP_POSW,y
 12230 49A5 8D 3F A8			sta EP
 12231 49A8 B9 06 E4			lda adr.FP_POSW+1,y
 12232 49AB 8D 40 A8			sta EP+1
 12233
 12234 				; optimize OK (fight_ai.pas), line = 81
 12235
 12236 49AE A9 28			lda #$28
 12237 49B0 85 8C			sta @SMALLINT.MOD.B
 12238 49B2 A9 00			lda #$00
 12239 49B4 85 8D			sta @SMALLINT.MOD.B+1
 12240 49B6 AD 3D A8			lda CP
 12241 49B9 85 84			sta @SMALLINT.MOD.A
 12242 49BB AD 3E A8			lda CP+1
 12243 49BE 85 85			sta @SMALLINT.MOD.A+1
 12244 49C0 20 E0 0F			jsr @SMALLINT.MOD
 12245 49C3 A5 90			lda @SMALLINT.MOD.RESULT
 12246 49C5 85 9D			sta :STACKORIGIN+9
 12247 49C7 A9 28			lda #$28
 12248 49C9 85 8C			sta @SMALLINT.MOD.B
 12249 49CB A9 00			lda #$00
 12250 49CD 85 8D			sta @SMALLINT.MOD.B+1
 12251 49CF AD 3F A8			lda EP
 12252 49D2 85 84			sta @SMALLINT.MOD.A
 12253 49D4 AD 40 A8			lda EP+1
 12254 49D7 85 85			sta @SMALLINT.MOD.A+1
 12255 49D9 20 E0 0F			jsr @SMALLINT.MOD
 12256 49DC A5 9D			lda :STACKORIGIN+9
 12257 49DE 38 E5 90			sub @SMALLINT.MOD.RESULT
 12258 49E1 8D 3A A8			sta DX
 12259
 12260 				; optimize OK (fight_ai.pas), line = 82
 12261
 12262 49E4 A9 28			lda #$28
 12263 49E6 85 8C			sta @SMALLINT.DIV.B
 12264 49E8 A9 00			lda #$00
 12265 49EA 85 8D			sta @SMALLINT.DIV.B+1
 12266 49EC AD 3D A8			lda CP
 12267 49EF 85 84			sta @SMALLINT.DIV.A
 12268 49F1 AD 3E A8			lda CP+1
 12269 49F4 85 85			sta @SMALLINT.DIV.A+1
 12270 49F6 20 C3 0F			jsr @SMALLINT.DIV
 12271 49F9 A5 84			lda :eax
 12272 49FB 85 9D			sta :STACKORIGIN+9
 12273 49FD A9 28			lda #$28
 12274 49FF 85 8C			sta @SMALLINT.DIV.B
 12275 4A01 A9 00			lda #$00
 12276 4A03 85 8D			sta @SMALLINT.DIV.B+1
 12277 4A05 AD 3F A8			lda EP
 12278 4A08 85 84			sta @SMALLINT.DIV.A
 12279 4A0A AD 40 A8			lda EP+1
 12280 4A0D 85 85			sta @SMALLINT.DIV.A+1
 12281 4A0F 20 C3 0F			jsr @SMALLINT.DIV
 12282 4A12 A5 9D			lda :STACKORIGIN+9
 12283 4A14 38 E5 84			sub :eax
 12284 4A17 8D 3B A8			sta DY
 12285
 12286 				; optimize OK (fight_ai.pas), line = 83
 12287
 12288 4A1A AD 3A A8			lda DX
 12289 4A1D C9 80			cmp #$80
 12290 4A1F A9 00			lda #$00
 12291 4A21 2A				rol @
 12292 4A22 85 9F			sta :STACKORIGIN+11
 12293 4A24 A9 00			lda #$00
 12294 4A26 85 AF			sta :STACKORIGIN+STACKWIDTH+11
 12295 4A28 A5 9F			lda :STACKORIGIN+11
 12296 4A2A 0A				asl @
 12297 4A2B 26 AF			rol :STACKORIGIN+STACKWIDTH+11
 12298 4A2D 85 9F			sta :STACKORIGIN+11
 12299 4A2F A9 01			lda #$01
 12300 4A31 38 E5 9F			sub :STACKORIGIN+11
 12301 4A34 85 8C			sta :ecx
 12302 4A36 A9 00			lda #$00
 12303 4A38 E5 AF			sbc :STACKORIGIN+STACKWIDTH+11
 12304 4A3A 85 8D			sta :ecx+1
 12305 4A3C A0 00			ldy #$00
 12306 4A3E AD 3A A8			lda DX
 12307 4A41 10 01			spl
 12308 4A43 88				dey
 12309 4A44 84 85			sty :eax+1
 12310 4A46 85 84			sta :eax
 12311 					.ifdef fmulinit
 12312 					fmulu_16
 12313 					els
 12314 4A48 20 8F 10			imulCX
 12315 					eif
 12316 4A4B A5 84			lda :eax
 12317 4A4D 85 9D			sta :STACKORIGIN+9
 12318 4A4F A5 85			lda :eax+1
 12319 4A51 85 AD			sta :STACKORIGIN+STACKWIDTH+9
 12320 4A53 AD 3B A8			lda DY
 12321 4A56 C9 80			cmp #$80
 12322 4A58 A9 00			lda #$00
 12323 4A5A 2A				rol @
 12324 4A5B 85 A0			sta :STACKORIGIN+12
 12325 4A5D A9 00			lda #$00
 12326 4A5F 85 B0			sta :STACKORIGIN+STACKWIDTH+12
 12327 4A61 A5 A0			lda :STACKORIGIN+12
 12328 4A63 0A				asl @
 12329 4A64 26 B0			rol :STACKORIGIN+STACKWIDTH+12
 12330 4A66 85 A0			sta :STACKORIGIN+12
 12331 4A68 A9 01			lda #$01
 12332 4A6A 38 E5 A0			sub :STACKORIGIN+12
 12333 4A6D 85 8C			sta :ecx
 12334 4A6F A9 00			lda #$00
 12335 4A71 E5 B0			sbc :STACKORIGIN+STACKWIDTH+12
 12336 4A73 85 8D			sta :ecx+1
 12337 4A75 A0 00			ldy #$00
 12338 4A77 AD 3B A8			lda DY
 12339 4A7A 10 01			spl
 12340 4A7C 88				dey
 12341 4A7D 84 85			sty :eax+1
 12342 4A7F 85 84			sta :eax
 12343 					.ifdef fmulinit
 12344 					fmulu_16
 12345 					els
 12346 4A81 20 8F 10			imulCX
 12347 					eif
 12348 4A84 A5 84			lda :eax
 12349 4A86 18 65 9D			add :STACKORIGIN+9
 12350 4A89 8D 41 A8			sta DIST
 12351 4A8C A5 85			lda :eax+1
 12352 4A8E 65 AD			adc :STACKORIGIN+STACKWIDTH+9
 12353 4A90 8D 42 A8			sta DIST+1
 12354
 12355 				; optimize OK (fight_ai.pas), line = 84
 12356
 12357 4A93 AD 41 A8			lda DIST
 12358 4A96 CD 45 A8			cmp ND
 12359 4A99 AD 42 A8			lda DIST+1
 12360 4A9C ED 46 A8			sbc ND+1
 12361 4A9F 50 02			svc
 12362 4AA1 49 80			eor #$80
 12363 4AA3 10 17			jpl l_2A99
 12364
 12365 				; optimize OK (fight_ai.pas), line = 86
 12366
 12367 4AA5 AD 3C A8			lda II
 12368 4AA8 8D 43 A8			sta NE
 12369 4AAB A9 00			lda #$00
 12370 4AAD 8D 44 A8			sta NE+1
 12371
 12372 				; optimize OK (fight_ai.pas), line = 87
 12373
 12374 4AB0 AD 41 A8			lda DIST
 12375 4AB3 8D 45 A8			sta ND
 12376 4AB6 AD 42 A8			lda DIST+1
 12377 4AB9 8D 46 A8			sta ND+1
 12378 4ABC			l_2A99
 12379
 12380 				; --- ForToDoEpilog
 12381 4ABC			c_29E7
 12382 4ABC EE 3C A8			inc II
 12383 4ABF F0 03 4C 5A 49		jne l_29E7
 12384 4AC4			l_29F5
 12385
 12386 				; optimize OK (fight_ai.pas), line = 96
 12387
 12388 4AC4 A9 01			lda #$01
 12389 4AC6 38 ED E6 E6			sub FP_CURRENTSITE
 12390 4ACA 0A				asl @
 12391 4ACB 0A				asl @
 12392 4ACC 0A				asl @
 12393 4ACD 0A				asl @
 12394 4ACE 8D 3A A8			sta DX
 12395
 12396 				; optimize OK (fight_ai.pas), line = 97
 12397
 12398 4AD1 18 6D 43 A8			add NE
 12399 4AD5 8D 3A A8			sta DX
 12400
 12401 				; optimize OK (fight_ai.pas), line = 98
 12402
 12403 4AD8 0A				asl @
 12404 4AD9 A8				tay
 12405 4ADA B9 05 E4			lda adr.FP_POSW,y
 12406 4ADD 8D 3F A8			sta EP
 12407 4AE0 B9 06 E4			lda adr.FP_POSW+1,y
 12408 4AE3 8D 40 A8			sta EP+1
 12409
 12410 				; optimize OK (fight_ai.pas), line = 99
 12411
 12412 4AE6 A9 28			lda #$28
 12413 4AE8 85 8C			sta @SMALLINT.MOD.B
 12414 4AEA A9 00			lda #$00
 12415 4AEC 85 8D			sta @SMALLINT.MOD.B+1
 12416 4AEE AD 3D A8			lda CP
 12417 4AF1 85 84			sta @SMALLINT.MOD.A
 12418 4AF3 AD 3E A8			lda CP+1
 12419 4AF6 85 85			sta @SMALLINT.MOD.A+1
 12420 4AF8 20 E0 0F			jsr @SMALLINT.MOD
 12421 4AFB A5 90			lda @SMALLINT.MOD.RESULT
 12422 4AFD 85 9D			sta :STACKORIGIN+9
 12423 4AFF A9 28			lda #$28
 12424 4B01 85 8C			sta @SMALLINT.MOD.B
 12425 4B03 A9 00			lda #$00
 12426 4B05 85 8D			sta @SMALLINT.MOD.B+1
 12427 4B07 AD 3F A8			lda EP
 12428 4B0A 85 84			sta @SMALLINT.MOD.A
 12429 4B0C AD 40 A8			lda EP+1
 12430 4B0F 85 85			sta @SMALLINT.MOD.A+1
 12431 4B11 20 E0 0F			jsr @SMALLINT.MOD
 12432 4B14 A5 9D			lda :STACKORIGIN+9
 12433 4B16 38 E5 90			sub @SMALLINT.MOD.RESULT
 12434 4B19 8D 3A A8			sta DX
 12435
 12436 				; optimize OK (fight_ai.pas), line = 100
 12437
 12438 4B1C A9 28			lda #$28
 12439 4B1E 85 8C			sta @SMALLINT.DIV.B
 12440 4B20 A9 00			lda #$00
 12441 4B22 85 8D			sta @SMALLINT.DIV.B+1
 12442 4B24 AD 3D A8			lda CP
 12443 4B27 85 84			sta @SMALLINT.DIV.A
 12444 4B29 AD 3E A8			lda CP+1
 12445 4B2C 85 85			sta @SMALLINT.DIV.A+1
 12446 4B2E 20 C3 0F			jsr @SMALLINT.DIV
 12447 4B31 A5 84			lda :eax
 12448 4B33 85 9D			sta :STACKORIGIN+9
 12449 4B35 A9 28			lda #$28
 12450 4B37 85 8C			sta @SMALLINT.DIV.B
 12451 4B39 A9 00			lda #$00
 12452 4B3B 85 8D			sta @SMALLINT.DIV.B+1
 12453 4B3D AD 3F A8			lda EP
 12454 4B40 85 84			sta @SMALLINT.DIV.A
 12455 4B42 AD 40 A8			lda EP+1
 12456 4B45 85 85			sta @SMALLINT.DIV.A+1
 12457 4B47 20 C3 0F			jsr @SMALLINT.DIV
 12458 4B4A A5 9D			lda :STACKORIGIN+9
 12459 4B4C 38 E5 84			sub :eax
 12460 4B4F 8D 3B A8			sta DY
 12461
 12462 				; optimize OK (fight_ai.pas), line = 103
 12463
 12464 4B52 A9 02			lda #$02
 12465 4B54 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 12466 4B57 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 12467 4B5A C9 01			cmp #$01
 12468 4B5C D0 0F			jne l_2B02
 12469
 12470 				; optimize OK (fight_ai.pas), line = 105
 12471
 12472 4B5E AD 3A A8			lda DX
 12473 4B61 10 05			jpl l_2B15
 12474 4B63 A9 07			lda #$07
 12475 4B65 4C 6A 4B			jmp l_2B23
 12476 4B68			l_2B15
 12477 4B68 A9 06			lda #$06
 12478 4B6A			l_2B23
 12479 4B6A 4C 79 4B			jmp l_2B30
 12480 4B6D			l_2B02
 12481
 12482 				; optimize OK (fight_ai.pas), line = 109
 12483
 12484 4B6D AD 3B A8			lda DY
 12485 4B70 10 05			jpl l_2B42
 12486 4B72 A9 0F			lda #$0F
 12487 4B74 4C 79 4B			jmp l_2B50
 12488 4B77			l_2B42
 12489 4B77 A9 0E			lda #$0E
 12490 4B79			l_2B30
 12491 4B79			l_2B50
 12492 4B79 8D E7 E6			sta FP_CURRENTCOMMAND
 12493
 12494 				; optimize FAIL ('FIGHT_CLEARCURRENTPLAYER', fight_ai.pas), line = 113
 12495
 12496 4B7C 20 86 40			jsr FIGHT_CLEARCURRENTPLAYER
 12497
 12498 				; optimize FAIL ('FIGHT_MOVECURRENTPLAYER', fight_ai.pas), line = 114
 12499
 12500 4B7F 20 99 45			jsr FIGHT_MOVECURRENTPLAYER
 12501
 12502 				; optimize OK (fight_ai.pas), line = 116
 12503
 12504 4B82 AD E8 E6			lda FP_VALIDCMD
 12505 4B85 D0 7A			jne l_2B68
 12506
 12507 				; optimize OK (fight_ai.pas), line = 118
 12508
 12509 4B87 AD E7 E6			lda FP_CURRENTCOMMAND
 12510 4B8A 8D 49 A8			sta @CASETMP_0010
 12511 4B8D C9 0F			cmp #$0F
 12512 4B8F D0 19			jne l_2B74
 12513 				@
 12514
 12515 				; optimize OK (fight_ai.pas), line = 119
 12516
 12517 4B91 A9 02			lda #$02
 12518 4B93 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 12519 4B96 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 12520 4B99 C9 01			cmp #$01
 12521 4B9B D0 05			jne l_2B85
 12522 4B9D A9 06			lda #$06
 12523 4B9F 4C A4 4B			jmp l_2B93
 12524 4BA2			l_2B85
 12525 4BA2 A9 07			lda #$07
 12526 4BA4			l_2B93
 12527 4BA4 8D E7 E6			sta FP_CURRENTCOMMAND
 12528 4BA7 4C FE 4B			jmp a_0010
 12529 4BAA			l_2B74
 12530 4BAA C9 0E			cmp #$0E
 12531 4BAC D0 19			jne l_2B9E
 12532
 12533 				; optimize OK (fight_ai.pas), line = 120
 12534
 12535 4BAE A9 02			lda #$02
 12536 4BB0 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 12537 4BB3 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 12538 4BB6 C9 01			cmp #$01
 12539 4BB8 D0 05			jne l_2BAF
 12540 4BBA A9 06			lda #$06
 12541 4BBC 4C C1 4B			jmp l_2BBD
 12542 4BBF			l_2BAF
 12543 4BBF A9 07			lda #$07
 12544 4BC1			l_2BBD
 12545 4BC1 8D E7 E6			sta FP_CURRENTCOMMAND
 12546 4BC4 4C FE 4B			jmp a_0010
 12547 4BC7			l_2B9E
 12548 4BC7 C9 06			cmp #$06
 12549 4BC9 D0 19			jne l_2BC8
 12550
 12551 				; optimize OK (fight_ai.pas), line = 121
 12552
 12553 4BCB A9 02			lda #$02
 12554 4BCD 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 12555 4BD0 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 12556 4BD3 C9 01			cmp #$01
 12557 4BD5 D0 05			jne l_2BD9
 12558 4BD7 A9 0F			lda #$0F
 12559 4BD9 4C DE 4B			jmp l_2BE7
 12560 4BDC			l_2BD9
 12561 4BDC A9 0E			lda #$0E
 12562 4BDE			l_2BE7
 12563 4BDE 8D E7 E6			sta FP_CURRENTCOMMAND
 12564 4BE1 4C FE 4B			jmp a_0010
 12565 4BE4			l_2BC8
 12566 4BE4 C9 07			cmp #$07
 12567 4BE6 D0 16			jne l_2BF2
 12568
 12569 				; optimize OK (fight_ai.pas), line = 122
 12570
 12571 4BE8 A9 02			lda #$02
 12572 4BEA 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 12573 4BED AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 12574 4BF0 C9 01			cmp #$01
 12575 4BF2 D0 05			jne l_2C03
 12576 4BF4 A9 0F			lda #$0F
 12577 4BF6 4C FB 4B			jmp l_2C11
 12578 4BF9			l_2C03
 12579 4BF9 A9 0E			lda #$0E
 12580 4BFB			l_2C11
 12581 4BFB 8D E7 E6			sta FP_CURRENTCOMMAND
 12582 4BFE			l_2BF2
 12583 4BFE			a_0010
 12584
 12585 				; optimize FAIL ('FIGHT_MOVECURRENTPLAYER', fight_ai.pas), line = 124
 12586
 12587 4BFE 20 99 45			jsr FIGHT_MOVECURRENTPLAYER
 12588 4C01			l_2B68
 12589
 12590 				; ------------------------------------------------------------
 12591
 12592 = A839			S	= DATAORIGIN+$0BE3
 12593 = A83A			DX	= DATAORIGIN+$0BE4
 12594 = A83B			DY	= DATAORIGIN+$0BE5
 12595 = A83C			II	= DATAORIGIN+$0BE6
 12596 = A83D			CP	= DATAORIGIN+$0BE7
 12597 = A83F			EP	= DATAORIGIN+$0BE9
 12598 = A841			DIST	= DATAORIGIN+$0BEB
 12599 = A843			NE	= DATAORIGIN+$0BED
 12600 = A845			ND	= DATAORIGIN+$0BEF
 12601 = A847			@CASETMP_000F	= DATAORIGIN+$0BF1
 12602 = A849			@CASETMP_0010	= DATAORIGIN+$0BF3
 12603
 12604 = A839			@VarData	= S
 12605 = 0010			@VarDataSize	= 16
 12606
 12607 4C01			@exit
 12608 					.ifdef @new
 12609 					lda <@VarData
 12610 					sta :ztmp
 12611 					lda >@VarData
 12612 					ldy #@VarDataSize-1
 12613 					jmp @FreeMem
 12614 					els
 12615 4C01 60				rts						; ret
 12616 					eif
 12617 				.endl
 12618
 12619 4C02			.local	SETUPFIGHTARENA					; FUNCTION
 12620
 12621 				; optimize OK (fight.pas), line = 7
 12622
 12623 4C02 A9 00			lda #$00
 12624 4C04 8D AE EA			sta PLAYERPOS_X
 12625
 12626 				; optimize OK (fight.pas), line = 8
 12627
 12628 4C07 8D AF EA			sta PLAYERPOS_Y
 12629
 12630 				; optimize FAIL ('BLACKCONSOLE', fight.pas), line = 10
 12631
 12632 4C0A 20 8E 27			jsr BLACKCONSOLE
 12633
 12634 				; optimize OK (fight.pas), line = 11
 12635
 12636 4C0D A9 00			lda #$00
 12637 4C0F 85 88			sta SYSTEM.FILLCHAR.@03018000001810000188000.A
 12638 4C11 A9 DC			lda #$DC
 12639 4C13 85 89			sta SYSTEM.FILLCHAR.@03018000001810000188000.A+1
 12640 4C15 A9 C0			lda #$C0
 12641 4C17 85 8C			sta SYSTEM.FILLCHAR.@03018000001810000188000.COUNT
 12642 4C19 A9 03			lda #$03
 12643 4C1B 85 8D			sta SYSTEM.FILLCHAR.@03018000001810000188000.COUNT+1
 12644 4C1D A9 00			lda #$00
 12645 4C1F 85 84			sta SYSTEM.FILLCHAR.@03018000001810000188000.VALUE
 12646 4C21				.LOCAL +MAIN.SYSTEM.FILLCHAR.@03018000001810000188000
 12647 4C21				m@INLINE
Macro: MAIN.SYSTEM.FILLCHAR.@03018000001810000188000.M@INLINE [Source: main_PL.a65]
     4 4C21 20 2C 0F			jsr @fill
Source: main_PL.a65
 12648 					.ENDL
 12649
 12650 				; optimize OK (fight.pas), line = 12
 12651
 12652 4C24 AD 99 9B			lda FIGHT_MAP_FNAME
 12653 4C27 8D 36 A7			sta LOADXAPL.FNAME
 12654 4C2A AD 9A 9B			lda FIGHT_MAP_FNAME+1
 12655 4C2D 8D 37 A7			sta LOADXAPL.FNAME+1
 12656 4C30 A9 00			lda #$00
 12657 4C32 8D 38 A7			sta LOADXAPL.OUTPUTPOINTER
 12658 4C35 A9 D8			lda #$D8
 12659 4C37 8D 39 A7			sta LOADXAPL.OUTPUTPOINTER+1
 12660 4C3A 20 60 27			jsr LOADXAPL
 12661
 12662 				; optimize OK (fight.pas), line = 14
 12663
 12664 4C3D A9 00			lda #$00
 12665 4C3F A0 38			ldy #256-200
 12666 4C41 99 C0 DE C8 D0 FA		sta:rne $DEF8+200-256,y+
 12667
 12668 				; optimize FAIL ('ENABLEMAPCONSOLE', fight.pas), line = 15
 12669
 12670 4C47 20 F0 27			jsr ENABLEMAPCONSOLE
 12671
 12672 				; optimize OK (fight.pas), line = 16
 12673
 12674 4C4A A9 F4			lda #$F4
 12675 4C4C 8D F7 EA			sta MAPCOLORB
 12676
 12677 				; optimize OK (fight.pas), line = 18
 12678
 12679 4C4F A9 01			lda #$01
 12680 4C51 8D B5 CD			sta DIDFIGHT
 12681
 12682 				; optimize OK (fight.pas), line = 27
 12683
 12684 4C54 A9 00			lda #$00
 12685 4C56 8D 4B A8			sta I
 12686
 12687 4C59			l_2C49
 12688 				; --- ForToDoCondition
 12689 4C59 AD 4B A8			lda I
 12690 4C5C C9 20			cmp #$20
 12691 4C5E B0 13			jcs l_2C57
 12692
 12693 				; optimize OK (fight.pas), line = 28
 12694
 12695 4C60 0A				asl @
 12696 4C61 A8				tay
 12697 4C62 B9 B6 EA			lda adr.FPPOSSTART,y
 12698 4C65 99 05 E4			sta adr.FP_POSW,y
 12699 4C68 B9 B7 EA			lda adr.FPPOSSTART+1,y
 12700 4C6B 99 06 E4			sta adr.FP_POSW+1,y
 12701
 12702 				; --- ForToDoEpilog
 12703 4C6E EE 4B A8			inc I
 12704 4C71 D0 E6			jne l_2C49
 12705 4C73			l_2C57
 12706
 12707 				; optimize OK (fight.pas), line = 30
 12708
 12709 4C73 A9 00			lda #$00
 12710 4C75 8D 4C A8			sta C
 12711
 12712 				; optimize FAIL ('B_CRT.CRT_WRITERIGHTALIGNED.@02018986000001000180000', fight.pas), line = 31
 12713
 12714 4C78 E8				inx
 12715 4C79 AD AC A3			lda adr.FP_GANG+$02
 12716 4C7C 85 82			sta :bp2
 12717 4C7E AD AD A3			lda adr.FP_GANG+1+$02
 12718 4C81 85 83			sta :bp2+1
 12719 4C83 A0 00			ldy #$00
 12720 4C85 B1 82 99 9F A2 C8 + 	mva:rne (:bp2),y B_CRT.CRT_WRITERIGHTALIGNED.@02018986000001000180000.adr.S,y+
 12721 4C8D E8				inx
 12722 4C8E A9 13 95 94			mva #$13 :STACKORIGIN,x
 12723 4C92 20 2E 1A			jsr B_CRT.CRT_WRITERIGHTALIGNED.@02018986000001000180000
 12724
 12725 				; optimize OK (fight.pas), line = 32
 12726
 12727 4C95 A9 00			lda #$00
 12728 4C97 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
 12729 4C9A A9 13			lda #$13
 12730 4C9C 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
 12731 4C9F 20 AC 17			jsr B_CRT.CRT_GOTOXY
 12732
 12733 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', fight.pas), line = 33
 12734
 12735 4CA2 E8				inx
 12736 4CA3 AD AA A3			lda adr.FP_GANG+$00
 12737 4CA6 95 94			sta :STACKORIGIN,x
 12738 4CA8 AD AB A3			lda adr.FP_GANG+1+$00
 12739 4CAB 95 A4			sta :STACKORIGIN+STACKWIDTH,x
 12740 4CAD 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 12741
 12742 				; optimize OK (fight.pas), line = 34
 12743
 12744 4CB0 A9 00			lda #$00
 12745 4CB2 8D A0 A3			sta B_CRT.CRT_INVERT.X
 12746 4CB5 A9 13			lda #$13
 12747 4CB7 8D A1 A3			sta B_CRT.CRT_INVERT.Y
 12748 4CBA AD 7D 9E			lda B_CRT.CRT_SCREENWIDTH
 12749 4CBD 8D A2 A3			sta B_CRT.CRT_INVERT.WIDTH
 12750 4CC0 20 70 1A			jsr B_CRT.CRT_INVERT
 12751
 12752 				; optimize OK (fight.pas), line = 36
 12753
 12754 4CC3 A9 63			lda #$63
 12755 4CC5 8D 00 E4			sta FP_WINNER
 12756
 12757 				; --- RepeatUntilProlog
 12758 4CC8			l_2C82
 12759
 12760 				; optimize OK (fight.pas), line = 38
 12761
 12762 4CC8 A9 00			lda #$00
 12763 4CCA 8D E6 E6			sta FP_CURRENTSITE
 12764
 12765 4CCD			l_2C8B
 12766 				; --- ForToDoCondition
 12767 4CCD AD E6 E6			lda FP_CURRENTSITE
 12768 4CD0 C9 02			cmp #$02
 12769 4CD2 B0 6E			jcs l_2C99
 12770
 12771 				; optimize OK (fight.pas), line = 40
 12772
 12773 4CD4 A9 00			lda #$00
 12774 4CD6 8D 4B A8			sta I
 12775 4CD9 AC E6 E6			ldy FP_CURRENTSITE
 12776 4CDC B9 03 E4			lda adr.FP_N,y
 12777 4CDF 38 E9 01			sub #$01
 12778 4CE2 8D E6 4C			sta @FORTMP_2CA8_0
 12779
 12780 4CE5			l_2CAB
 12781 				; --- ForToDoCondition
 12782 4CE5 A9 00			lda @FORTMP_2CA8_0::#$00
 12783 4CE7 CD 4B A8			cmp I
 12784 4CEA 90 47			jcc l_2CB9
 12785
 12786 				; optimize OK (fight.pas), line = 42
 12787
 12788 4CEC AD E6 E6			lda FP_CURRENTSITE
 12789 4CEF 0A				asl @
 12790 4CF0 0A				asl @
 12791 4CF1 0A				asl @
 12792 4CF2 0A				asl @
 12793 4CF3 18 6D 4B A8			add I
 12794 4CF7 8D E5 E6			sta FP_CURRENTPLAYER
 12795
 12796 				; optimize OK (fight.pas), line = 43
 12797
 12798 4CFA A8				tay
 12799 4CFB B9 85 E4			lda adr.FP_ENERGY,y
 12800 4CFE D0 03			jne l_2CDE
 12801 4D00 4C 2E 4D			jmp c_2CAB
 12802 4D03			l_2CDE
 12803
 12804 				; optimize FAIL ('FIGHT_DISPLAYSTATS', fight.pas), line = 44
 12805
 12806 4D03 20 AE 3D			jsr FIGHT_DISPLAYSTATS
 12807
 12808 				; optimize FAIL ('FIGHT_DRAWPLAYERS', fight.pas), line = 45
 12809
 12810 4D06 20 DD 40			jsr FIGHT_DRAWPLAYERS
 12811
 12812 				; optimize OK (fight.pas), line = 46
 12813
 12814 4D09 A9 05			lda #$05
 12815 4D0B 20 7C 27			jsr WAITFRAMES
 12816
 12817 				; optimize OK (fight.pas), line = 48
 12818
 12819 4D0E AC E6 E6			ldy FP_CURRENTSITE
 12820 4D11 B9 01 E4			lda adr.FP_AI,y
 12821 4D14 C9 01			cmp #$01
 12822 4D16 D0 06			jne l_2CFA
 12823 4D18 20 D3 48			jsr FIGHT_AIMOVE
 12824 4D1B 4C 21 4D			jmp l_2D05
 12825 4D1E			l_2CFA
 12826
 12827 				; optimize FAIL ('FIGHT_PLAYERMOVE', fight.pas), line = 49
 12828
 12829 4D1E 20 72 47			jsr FIGHT_PLAYERMOVE
 12830 4D21			l_2D05
 12831
 12832 				; optimize FAIL ('FIGHT_CHECKWINNER', fight.pas), line = 51
 12833
 12834 4D21 20 3B 45			jsr FIGHT_CHECKWINNER
 12835
 12836 				; optimize OK (fight.pas), line = 52
 12837
 12838 4D24 AD 00 E4			lda FP_WINNER
 12839 4D27 C9 63			cmp #$63
 12840 4D29 F0 03			jeq l_2D19
 12841 4D2B 4C 33 4D			jmp b_2CAB
 12842 4D2E			l_2D19
 12843
 12844 				; --- ForToDoEpilog
 12845 4D2E			c_2CAB
 12846 4D2E EE 4B A8			inc I
 12847 4D31 D0 B2			jne l_2CAB
 12848 4D33			l_2CB9
 12849 4D33			b_2CAB
 12850
 12851 				; optimize OK (fight.pas), line = 54
 12852
 12853 4D33 AD 00 E4			lda FP_WINNER
 12854 4D36 C9 63			cmp #$63
 12855 4D38 F0 03			jeq l_2D33
 12856 4D3A 4C 42 4D			jmp b_2C8B
 12857 4D3D			l_2D33
 12858
 12859 				; --- ForToDoEpilog
 12860 4D3D EE E6 E6			inc FP_CURRENTSITE
 12861 4D40 D0 8B			jne l_2C8B
 12862 4D42			l_2C99
 12863 4D42			b_2C8B
 12864
 12865 				; optimize OK (fight.pas), line = 56
 12866
 12867 4D42 AD 00 E4			lda FP_WINNER
 12868 4D45 C9 63			cmp #$63
 12869 4D47 D0 03 4C C8 4C		jeq l_2C82
 12870
 12871 				; optimize OK (fight.pas), line = 59
 12872
 12873 4D4C A9 00			lda #$00
 12874 4D4E A0 38			ldy #256-200
 12875 4D50 99 C0 DE C8 D0 FA		sta:rne $DEF8+200-256,y+
 12876
 12877 				; optimize FAIL ('B_CRT.CRT_WRITECENTERED.@02018986000001000180000', fight.pas), line = 60
 12878
 12879 4D56 E8				inx
 12880 4D57 AC 0B 9C 84 82 AC + 	mwy FIGHT_STRING_6 :bp2
 12881 4D61 A0 00			ldy #$00
 12882 4D63 B1 82 99 9D A1 C8 + 	mva:rne (:bp2),y B_CRT.CRT_WRITECENTERED.@02018986000001000180000.adr.S,y+
 12883 4D6B E8				inx
 12884 4D6C A9 15 95 94			mva #$15 :STACKORIGIN,x
 12885 4D70 20 DF 19			jsr B_CRT.CRT_WRITECENTERED.@02018986000001000180000
 12886
 12887 				; optimize FAIL ('B_CRT.CRT_WRITECENTERED.@02018986000001000180000', fight.pas), line = 61
 12888
 12889 4D73 E8				inx
 12890 4D74 AD 00 E4			lda FP_WINNER
 12891 4D77 0A				asl @
 12892 4D78 A8				tay
 12893 4D79 B9 AA A3			lda adr.FP_GANG,y
 12894 4D7C 85 82			sta :bp2
 12895 4D7E B9 AB A3			lda adr.FP_GANG+1,y
 12896 4D81 85 83			sta :bp2+1
 12897 4D83 A0 00			ldy #$00
 12898 4D85 B1 82 99 9D A1 C8 + 	mva:rne (:bp2),y B_CRT.CRT_WRITECENTERED.@02018986000001000180000.adr.S,y+
 12899 4D8D E8				inx
 12900 4D8E A9 16 95 94			mva #$16 :STACKORIGIN,x
 12901 4D92 20 DF 19			jsr B_CRT.CRT_WRITECENTERED.@02018986000001000180000
 12902
 12903 				; optimize FAIL ('CRT_READKEYORFIRE', fight.pas), line = 62
 12904
 12905 4D95 20 04 1E			jsr CRT_READKEYORFIRE
 12906
 12907 				; optimize OK (fight.pas), line = 63
 12908
 12909 4D98 AD 00 E4			lda FP_WINNER
 12910 4D9B 8D 4A A8			sta RESULT
 12911 4D9E			@exit
 12912
 12913 				; ------------------------------------------------------------
 12914
 12915 = A84A			RESULT	= DATAORIGIN+$0BF4
 12916 = A84B			I	= DATAORIGIN+$0BF5
 12917 = A84C			C	= DATAORIGIN+$0BF6
 12918
 12919 = A84B			@VarData	= I
 12920 = 0002			@VarDataSize	= 2
 12921
 12922 4D9E 60				rts						; ret
 12923 				.endl
 12924
 12925 4D9F			.local	DOFIGHT						; FUNCTION
 12926
 12927 				; optimize OK (fight.pas), line = 71
 12928
 12929 4D9F A9 01			lda #$01
 12930 4DA1 8D 4E A8			sta RESULT
 12931
 12932 				; optimize OK (fight.pas), line = 74
 12933
 12934 4DA4 A9 00			lda #$00
 12935 4DA6 8D 4F A8			sta J
 12936
 12937 4DA9			l_2D6F
 12938 				; --- ForToDoCondition
 12939 4DA9 AC 4F A8			ldy J
 12940 4DAC C0 02			cpy #$02
 12941 4DAE B0 48			jcs l_2D7D
 12942
 12943 				; optimize OK (fight.pas), line = 75
 12944
 12945 4DB0 B9 01 E4			lda adr.FP_AI,y
 12946 4DB3 C9 01			cmp #$01
 12947 4DB5 D0 3C			jne l_2D92
 12948
 12949 				; optimize OK (fight.pas), line = 77
 12950
 12951 4DB7 A9 00			lda #$00
 12952 4DB9 8D 50 A8			sta K
 12953 4DBC B9 03 E4			lda adr.FP_N,y
 12954 4DBF 38 E9 01			sub #$01
 12955 4DC2 8D C6 4D			sta @FORTMP_2DA2_0
 12956
 12957 4DC5			l_2DA5
 12958 				; --- ForToDoCondition
 12959 4DC5 A9 00			lda @FORTMP_2DA2_0::#$00
 12960 4DC7 CD 50 A8			cmp K
 12961 4DCA 90 27			jcc l_2DB3
 12962
 12963 				; optimize OK (fight.pas), line = 78
 12964
 12965 4DCC AD 4F A8			lda J
 12966 4DCF 0A				asl @
 12967 4DD0 0A				asl @
 12968 4DD1 0A				asl @
 12969 4DD2 0A				asl @
 12970 4DD3 18 6D 50 A8			add K
 12971 4DD7 A8				tay
 12972 4DD8 A9 1E			lda #$1E
 12973 4DDA 99 C5 E4			sta adr.FP_STRENGTH,y
 12974
 12975 				; optimize OK (fight.pas), line = 79
 12976
 12977 4DDD AD 4F A8			lda J
 12978 4DE0 0A				asl @
 12979 4DE1 0A				asl @
 12980 4DE2 0A				asl @
 12981 4DE3 0A				asl @
 12982 4DE4 18 6D 50 A8			add K
 12983 4DE8 A8				tay
 12984 4DE9 A9 1E			lda #$1E
 12985 4DEB 99 05 E5			sta adr.FP_BRUTALITY,y
 12986
 12987 				; --- ForToDoEpilog
 12988 4DEE EE 50 A8			inc K
 12989 4DF1 D0 D2			jne l_2DA5
 12990 4DF3			l_2DB3
 12991 4DF3			l_2D92
 12992
 12993 				; --- ForToDoEpilog
 12994 4DF3 EE 4F A8			inc J
 12995 4DF6 D0 B1			jne l_2D6F
 12996 4DF8			l_2D7D
 12997
 12998 				; optimize OK (fight.pas), line = 84
 12999
 13000 4DF8 AC 8A CD			ldy CURRENTPLAYER
 13001 4DFB B9 B1 CD			lda adr.PLNGANGSTERS,y
 13002 4DFE 8D 03 E4			sta adr.FP_N
 13003
 13004 				; optimize OK (fight.pas), line = 85
 13005
 13006 4E01 98				tya
 13007 4E02 0A				asl @
 13008 4E03 A8				tay
 13009 4E04 B9 0D A4			lda adr.PLGANG,y
 13010 4E07 85 88			sta @move.src
 13011 4E09 B9 0E A4			lda adr.PLGANG+1,y
 13012 4E0C 85 89			sta @move.src+1
 13013 4E0E AD AA A3			lda adr.FP_GANG
 13014 4E11 85 8C			sta @move.dst
 13015 4E13 AD AB A3			lda adr.FP_GANG+1
 13016 4E16 85 8D			sta @move.dst+1
 13017 4E18 A0 00			ldy #$00
 13018 4E1A B1 88			lda (@move.src),y
 13019 4E1C 18 69 01			add #1
 13020 4E1F 85 84			sta @move.cnt
 13021 4E21 90 01			scc
 13022 4E23 C8				iny
 13023 4E24 84 85			sty @move.cnt+1
 13024 4E26 20 D7 0E			jsr @move
 13025
 13026 				; optimize OK (fight.pas), line = 86
 13027
 13028 4E29 A9 00			lda #$00
 13029 4E2B 8D 01 E4			sta adr.FP_AI
 13030
 13031 				; optimize OK (fight.pas), line = 88
 13032
 13033 4E2E 8D 50 A8			sta K
 13034
 13035 				; optimize OK (fight.pas), line = 89
 13036
 13037 4E31 8D 4F A8			sta J
 13038
 13039 4E34			l_2E06
 13040 				; --- ForToDoCondition
 13041 4E34 AC 4F A8			ldy J
 13042 4E37 C0 20			cpy #$20
 13043 4E39 90 03 4C BC 4E		jcs l_2E14
 13044
 13045 				; optimize OK (fight.pas), line = 91
 13046
 13047 4E3E B9 91 CD			lda adr.PLGANGSTERS,y
 13048 4E41 CD 8A CD			cmp CURRENTPLAYER
 13049 4E44 D0 6E			jne l_2E2B
 13050
 13051 				; optimize OK (fight.pas), line = 93
 13052
 13053 4E46 AD 4F A8			lda J
 13054 4E49 0A				asl @
 13055 4E4A A8				tay
 13056 4E4B B9 15 A4			lda adr.GANGSTERNAMES,y
 13057 4E4E 85 88			sta @move.src
 13058 4E50 B9 16 A4			lda adr.GANGSTERNAMES+1,y
 13059 4E53 85 89			sta @move.src+1
 13060 4E55 AD 50 A8			lda K
 13061 4E58 0A				asl @
 13062 4E59 A8				tay
 13063 4E5A B9 AE A3			lda adr.FP_NAME,y
 13064 4E5D 85 8C			sta @move.dst
 13065 4E5F B9 AF A3			lda adr.FP_NAME+1,y
 13066 4E62 85 8D			sta @move.dst+1
 13067 4E64 A0 00			ldy #$00
 13068 4E66 B1 88			lda (@move.src),y
 13069 4E68 18 69 01			add #1
 13070 4E6B 85 84			sta @move.cnt
 13071 4E6D 90 01			scc
 13072 4E6F C8				iny
 13073 4E70 84 85			sty @move.cnt+1
 13074 4E72 20 D7 0E			jsr @move
 13075
 13076 				; optimize OK (fight.pas), line = 94
 13077
 13078 4E75 AC 4F A8			ldy J
 13079 4E78 B9 28 CD			lda adr.GANGSTERHEALTH,y
 13080 4E7B AC 50 A8			ldy K
 13081 4E7E 99 85 E4			sta adr.FP_ENERGY,y
 13082
 13083 				; optimize OK (fight.pas), line = 95
 13084
 13085 4E81 AC 4F A8			ldy J
 13086 4E84 B9 48 CD			lda adr.GANGSTERWEAPON,y
 13087 4E87 AC 50 A8			ldy K
 13088 4E8A 99 45 E4			sta adr.FP_WEAPON,y
 13089
 13090 				; optimize OK (fight.pas), line = 96
 13091
 13092 4E8D AC 4F A8			ldy J
 13093 4E90 B9 C8 CC			lda adr.GANGSTERSTR,y
 13094 4E93 AC 50 A8			ldy K
 13095 4E96 99 C5 E4			sta adr.FP_STRENGTH,y
 13096
 13097 				; optimize OK (fight.pas), line = 97
 13098
 13099 4E99 AC 4F A8			ldy J
 13100 4E9C B9 08 CD			lda adr.GANGSTERBRUT,y
 13101 4E9F AC 50 A8			ldy K
 13102 4EA2 99 05 E5			sta adr.FP_BRUTALITY,y
 13103
 13104 				; optimize OK (fight.pas), line = 98
 13105
 13106 4EA5 AC 4F A8			ldy J
 13107 4EA8 B9 68 CD			lda adr.GANGSTERSEX,y
 13108 4EAB AC 50 A8			ldy K
 13109 4EAE 99 45 E5			sta adr.FP_SEX,y
 13110
 13111 				; optimize OK (fight.pas), line = 99
 13112
 13113 4EB1 EE 50 A8			inc K
 13114 4EB4			l_2E2B
 13115
 13116 				; --- ForToDoEpilog
 13117 4EB4 EE 4F A8			inc J
 13118 4EB7 F0 03 4C 34 4E		jne l_2E06
 13119 4EBC			l_2E14
 13120
 13121 				; optimize FAIL ('SETUPFIGHTARENA', fight.pas), line = 104
 13122
 13123 4EBC 20 02 4C			jsr SETUPFIGHTARENA
 13124 4EBF AD 4A A8			lda SETUPFIGHTARENA.RESULT
 13125 4EC2 8D 51 A8			sta W
 13126
 13127 				; optimize OK (fight.pas), line = 107
 13128
 13129 4EC5 A9 00			lda #$00
 13130 4EC7 8D 50 A8			sta K
 13131
 13132 				; optimize OK (fight.pas), line = 108
 13133
 13134 4ECA 8D 4F A8			sta J
 13135
 13136 4ECD			l_2E95
 13137 				; --- ForToDoCondition
 13138 4ECD AC 4F A8			ldy J
 13139 4ED0 C0 20			cpy #$20
 13140 4ED2 B0 25			jcs l_2EA3
 13141
 13142 				; optimize OK (fight.pas), line = 110
 13143
 13144 4ED4 B9 91 CD			lda adr.PLGANGSTERS,y
 13145 4ED7 CD 8A CD			cmp CURRENTPLAYER
 13146 4EDA D0 18			jne l_2EBA
 13147
 13148 				; optimize OK (fight.pas), line = 112
 13149
 13150 4EDC AC 50 A8			ldy K
 13151 4EDF B9 85 E4			lda adr.FP_ENERGY,y
 13152 4EE2 AC 4F A8			ldy J
 13153 4EE5 99 28 CD			sta adr.GANGSTERHEALTH,y
 13154
 13155 				; optimize OK (fight.pas), line = 114
 13156
 13157 4EE8 C9 05			cmp #$05
 13158 4EEA B0 05			jcs l_2EDC
 13159 4EEC A9 05			lda #$05
 13160 4EEE 99 28 CD			sta adr.GANGSTERHEALTH,y
 13161 4EF1			l_2EDC
 13162
 13163 				; optimize OK (fight.pas), line = 115
 13164
 13165 4EF1 EE 50 A8			inc K
 13166 4EF4			l_2EBA
 13167
 13168 				; --- ForToDoEpilog
 13169 4EF4 EE 4F A8			inc J
 13170 4EF7 D0 D4			jne l_2E95
 13171 4EF9			l_2EA3
 13172
 13173 				; optimize OK (fight.pas), line = 119
 13174
 13175 4EF9 AD 51 A8			lda W
 13176 4EFC 8D 4E A8			sta RESULT
 13177
 13178 				; optimize FAIL ('ENABLEMAPCONSOLE', fight.pas), line = 121
 13179
 13180 4EFF 20 F0 27			jsr ENABLEMAPCONSOLE
 13181 4F02			@exit
 13182
 13183 				; ------------------------------------------------------------
 13184
 13185 = A84E			RESULT	= DATAORIGIN+$0BF8
 13186 = A84F			J	= DATAORIGIN+$0BF9
 13187 = A850			K	= DATAORIGIN+$0BFA
 13188 = A851			W	= DATAORIGIN+$0BFB
 13189
 13190 = A84F			@VarData	= J
 13191 = 0003			@VarDataSize	= 3
 13192
 13193 4F02 60				rts						; ret
 13194 				.endl
 13195
 13196 4F03			.local	FIGHTPOLICE					; FUNCTION
 13197
 13198 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', helpers_fight.pas), line = 4
 13199
 13200 4F03 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 13201
 13202 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', helpers_fight.pas), line = 5
 13203
 13204 4F06 E8				inx
 13205 4F07 AD 29 9C 95 94		mva POLICE_STRING_1 :STACKORIGIN,x
 13206 4F0C AD 2A 9C 95 A4		mva POLICE_STRING_1+1 :STACKORIGIN+STACKWIDTH,x
 13207 4F11 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 13208
 13209 				; optimize FAIL ('WAITFORKEY', helpers_fight.pas), line = 6
 13210
 13211 4F14 20 4A 1E			jsr WAITFORKEY
 13212
 13213 				; optimize FAIL ('PREPAREFIGHTAGAINSTPOLICE', helpers_fight.pas), line = 7
 13214
 13215 4F17 20 22 31			jsr PREPAREFIGHTAGAINSTPOLICE
 13216
 13217 				; optimize FAIL ('DOFIGHT', helpers_fight.pas), line = 8
 13218
 13219 4F1A 20 9F 4D			jsr DOFIGHT
 13220 4F1D AD 4E A8			lda DOFIGHT.RESULT
 13221 4F20 C9 01			cmp #$01
 13222 4F22 D0 0B			jne l_2F18
 13223
 13224 				; optimize FAIL ('GOTCAUGHT', helpers_fight.pas), line = 10
 13225
 13226 4F24 20 32 36			jsr GOTCAUGHT
 13227
 13228 				; optimize OK (helpers_fight.pas), line = 11
 13229
 13230 4F27 A9 11			lda #$11
 13231 4F29 8D 53 A8			sta RESULT
 13232 4F2C 4C 34 4F			jmp @exit
 13233 4F2F			l_2F18
 13234
 13235 				; optimize OK (helpers_fight.pas), line = 14
 13236
 13237 4F2F A9 01			lda #$01
 13238 4F31 20 EC 2F			jsr ADDPOINTS
 13239 4F34			@exit
 13240
 13241 				; ------------------------------------------------------------
 13242
 13243 = A853			RESULT	= DATAORIGIN+$0BFD
 13244
 13245 4F34 60				rts						; ret
 13246 				.endl
 13247
 13248 4F35			.local	INCREASECURRENTGANGSTER				; PROCEDURE
 13249
 13250 				; optimize OK (armsdealer.pas), line = 4
 13251
 13252 4F35 AC 88 CD			ldy CURRENTGANGSTER
 13253 4F38 B9 C8 CC			lda adr.GANGSTERSTR,y
 13254 4F3B 18 6D 54 A8			add INC_ST
 13255 4F3F 99 C8 CC			sta adr.GANGSTERSTR,y
 13256
 13257 				; optimize OK (armsdealer.pas), line = 5
 13258
 13259 4F42 C9 64			cmp #$64
 13260 4F44 90 05			jcc l_2F4D
 13261
 13262 				; optimize OK (armsdealer.pas), line = 6
 13263
 13264 4F46 A9 63			lda #$63
 13265 4F48 99 C8 CC			sta adr.GANGSTERSTR,y
 13266 4F4B			l_2F4D
 13267
 13268 				; optimize OK (armsdealer.pas), line = 8
 13269
 13270 4F4B AC 88 CD			ldy CURRENTGANGSTER
 13271 4F4E B9 E8 CC			lda adr.GANGSTERINT,y
 13272 4F51 18 6D 55 A8			add INC_IN
 13273 4F55 99 E8 CC			sta adr.GANGSTERINT,y
 13274
 13275 				; optimize OK (armsdealer.pas), line = 9
 13276
 13277 4F58 C9 64			cmp #$64
 13278 4F5A 90 05			jcc l_2F7E
 13279
 13280 				; optimize OK (armsdealer.pas), line = 10
 13281
 13282 4F5C A9 63			lda #$63
 13283 4F5E 99 E8 CC			sta adr.GANGSTERINT,y
 13284 4F61			l_2F7E
 13285
 13286 				; optimize OK (armsdealer.pas), line = 12
 13287
 13288 4F61 AC 88 CD			ldy CURRENTGANGSTER
 13289 4F64 B9 08 CD			lda adr.GANGSTERBRUT,y
 13290 4F67 18 6D 56 A8			add INC_BT
 13291 4F6B 99 08 CD			sta adr.GANGSTERBRUT,y
 13292
 13293 				; optimize OK (armsdealer.pas), line = 13
 13294
 13295 4F6E C9 64			cmp #$64
 13296 4F70 90 05			jcc l_2FAF
 13297
 13298 				; optimize OK (armsdealer.pas), line = 14
 13299
 13300 4F72 A9 63			lda #$63
 13301 4F74 99 08 CD			sta adr.GANGSTERBRUT,y
 13302 4F77			l_2FAF
 13303
 13304 				; optimize OK (armsdealer.pas), line = 17
 13305
 13306 4F77 A9 13			lda #$13
 13307 4F79 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 13308
 13309 				; optimize OK (armsdealer.pas), line = 18
 13310
 13311 4F7C A9 14			lda #$14
 13312 4F7E 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 13313
 13314 				; ------------------------------------------------------------
 13315
 13316 = A854			INC_ST	= DATAORIGIN+$0BFE
 13317 = A855			INC_IN	= DATAORIGIN+$0BFF
 13318 = A856			INC_BT	= DATAORIGIN+$0C00
 13319
 13320 = A854			@VarData	= INC_ST
 13321 = 0003			@VarDataSize	= 3
 13322
 13323 4F81			@exit
 13324 					.ifdef @new
 13325 					lda <@VarData
 13326 					sta :ztmp
 13327 					lda >@VarData
 13328 					ldy #@VarDataSize-1
 13329 					jmp @FreeMem
 13330 					els
 13331 4F81 60				rts						; ret
 13332 					eif
 13333 				.endl
 13334
 13335 4F82			.local	ARMSDEALERCHOICES				; FUNCTION
 13336
 13337 				; optimize OK (armsdealer.pas), line = 35
 13338
 13339 4F82 AD 22 C9			lda CURRENTCHOICE
 13340 4F85 C9 01			cmp #$01
 13341 4F87 F0 03 4C 42 52		jne l_2FD3
 13342
 13343 				; optimize FAIL ('SHOWLOCATIONHEADER', armsdealer.pas), line = 37
 13344
 13345 4F8C 20 7A 28			jsr SHOWLOCATIONHEADER
 13346
 13347 				; optimize OK (armsdealer.pas), line = 39
 13348
 13349 4F8F A9 01			lda #$01
 13350 4F91 20 15 1D			jsr CRT_WRITELN2_LOCSTR
 13351
 13352 				; optimize OK (armsdealer.pas), line = 40
 13353
 13354 4F94 A9 01			lda #$01
 13355 4F96 8D 5A A8			sta MINWEAPON
 13356
 13357 				; optimize OK (armsdealer.pas), line = 41
 13358
 13359 4F99 A9 05			lda #$05
 13360 4F9B 8D 59 A8			sta MAXWEAPON
 13361
 13362 				; optimize OK (armsdealer.pas), line = 42
 13363
 13364 4F9E AD 3D A7			lda CURRENTSUBLOCATION
 13365 4FA1 C9 02			cmp #$02
 13366 4FA3 D0 3F			jne l_2FF1
 13367
 13368 				; optimize OK (armsdealer.pas), line = 45
 13369
 13370 4FA5 A9 07			lda #$07
 13371 4FA7 8D 59 A8			sta MAXWEAPON
 13372
 13373 				; optimize FAIL (1, armsdealer.pas), line = 46
 13374
 13375 4FAA E8				inx
 13376 4FAB AC 8A CD			ldy CURRENTPLAYER
 13377 4FAE B9 98 C9			lda adr.PLRANK,y
 13378 4FB1 A0 01			ldy #1
 13379 4FB3 C9 06			cmp #$06
 13380 4FB5 B0 01			bcs @+
 13381 4FB7 88				dey
 13382 				@
 13383 4FB8 94 94			sty :STACKORIGIN,x
 13384 4FBA A9 04			lda #$04
 13385 4FBC 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 13386 4FBF CA				dex
 13387 4FC0 A0 01			ldy #1
 13388 4FC2 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 13389 4FC5 F0 01			beq @+
 13390 4FC7 88				dey
 13391 				@
 13392 4FC8 98				tya
 13393 4FC9 35 95			and :STACKORIGIN+1,x
 13394 4FCB F0 12			jeq l_3016
 13395
 13396 				; optimize OK (armsdealer.pas), line = 48
 13397
 13398 4FCD A9 02			lda #$02
 13399 4FCF 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 13400
 13401 				; optimize OK (armsdealer.pas), line = 49
 13402
 13403 4FD2 A9 03			lda #$03
 13404 4FD4 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 13405
 13406 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', armsdealer.pas), line = 50
 13407
 13408 4FD7 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 13409
 13410 				; optimize OK (armsdealer.pas), line = 51
 13411
 13412 4FDA A9 08			lda #$08
 13413 4FDC 8D 59 A8			sta MAXWEAPON
 13414 4FDF			l_3016
 13415
 13416 				; optimize OK (armsdealer.pas), line = 53
 13417
 13418 4FDF A9 03			lda #$03
 13419 4FE1 8D 5A A8			sta MINWEAPON
 13420 4FE4			l_2FF1
 13421
 13422 				; optimize OK (armsdealer.pas), line = 56
 13423
 13424 4FE4 AD 3D A7			lda CURRENTSUBLOCATION
 13425 4FE7 C9 01			cmp #$01
 13426 4FE9 D0 05			jne l_303A
 13427 4FEB A9 05			lda #$05
 13428 4FED 8D 59 A8			sta MAXWEAPON
 13429 4FF0			l_303A
 13430
 13431 				; optimize OK (armsdealer.pas), line = 57
 13432
 13433 4FF0 AD 3D A7			lda CURRENTSUBLOCATION
 13434 4FF3 C9 04			cmp #$04
 13435 4FF5 D0 0A			jne l_3053
 13436
 13437 				; optimize OK (armsdealer.pas), line = 59
 13438
 13439 4FF7 A9 02			lda #$02
 13440 4FF9 8D 5A A8			sta MINWEAPON
 13441
 13442 				; optimize OK (armsdealer.pas), line = 60
 13443
 13444 4FFC A9 06			lda #$06
 13445 4FFE 8D 59 A8			sta MAXWEAPON
 13446 5001			l_3053
 13447
 13448 				; optimize OK (armsdealer.pas), line = 64
 13449
 13450 5001 AD 5A A8			lda MINWEAPON
 13451 5004 8D 58 A8			sta R
 13452
 13453 5007			l_306B
 13454 				; --- ForToDoCondition
 13455 5007 AD 58 A8			lda R
 13456 500A CD 59 A8			cmp MAXWEAPON
 13457 500D 90 02			scc
 13458 500F D0 59			jne l_3079
 13459
 13460 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', armsdealer.pas), line = 66
 13461
 13462 5011 E8				inx
 13463 5012 A9 6B 95 94			mva #$6B :STACKORIGIN,x
 13464 5016 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 13465 501A 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 13466
 13467 				; optimize OK (armsdealer.pas), line = 67
 13468
 13469 501D AD 58 A8			lda R
 13470 5020 20 7E 18			jsr B_CRT.CRT_WRITE.@010180000
 13471
 13472 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', armsdealer.pas), line = 68
 13473
 13474 5023 E8				inx
 13475 5024 A9 76 95 94			mva #$76 :STACKORIGIN,x
 13476 5028 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 13477 502C 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 13478
 13479 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', armsdealer.pas), line = 69
 13480
 13481 502F E8				inx
 13482 5030 AD 58 A8			lda R
 13483 5033 0A				asl @
 13484 5034 A8				tay
 13485 5035 B9 6B A4			lda adr.WEAPONNAMES,y
 13486 5038 95 94			sta :STACKORIGIN,x
 13487 503A B9 6C A4			lda adr.WEAPONNAMES+1,y
 13488 503D 95 A4			sta :STACKORIGIN+STACKWIDTH,x
 13489 503F 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 13490
 13491 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', armsdealer.pas), line = 70
 13492
 13493 5042 E8				inx
 13494 5043 A9 85 95 94			mva #$85 :STACKORIGIN,x
 13495 5047 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 13496 504B 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 13497
 13498 				; optimize OK (armsdealer.pas), line = 71
 13499
 13500 504E AD 58 A8			lda R
 13501 5051 0A				asl @
 13502 5052 A8				tay
 13503 5053 B9 18 E7			lda adr.WEAPONPRICES,y
 13504 5056 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 13505 5059 B9 19 E7			lda adr.WEAPONPRICES+1,y
 13506 505C 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 13507 505F 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 13508
 13509 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', armsdealer.pas), line = 72
 13510
 13511 5062 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 13512
 13513 				; --- ForToDoEpilog
 13514 5065 EE 58 A8			inc R
 13515 5068 D0 9D			jne l_306B
 13516 506A			l_3079
 13517
 13518 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', armsdealer.pas), line = 74
 13519
 13520 506A 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 13521
 13522 				; optimize OK (armsdealer.pas), line = 75
 13523
 13524 506D A9 04			lda #$04
 13525 506F 20 C6 1C			jsr CRT_WRITE_LOCSTR
 13526
 13527 				; optimize OK (armsdealer.pas), line = 76
 13528
 13529 5072 AD 5A A8			lda MINWEAPON
 13530 5075 8D 1C A7			sta READVALUE.MINVALUE
 13531 5078 A9 00			lda #$00
 13532 507A 8D 1D A7			sta READVALUE.MINVALUE+1
 13533 507D AD 59 A8			lda MAXWEAPON
 13534 5080 8D 1E A7			sta READVALUE.MAXVALUE
 13535 5083 A9 00			lda #$00
 13536 5085 8D 1F A7			sta READVALUE.MAXVALUE+1
 13537 5088 20 26 20			jsr READVALUE
 13538 508B AD 20 A7			lda READVALUE.RESULT
 13539 508E 8D 5B A8			sta SELECTEDWEAPON
 13540
 13541 				; optimize OK (armsdealer.pas), line = 77
 13542
 13543 5091 D0 03 4C 21 54		jeq @exit
 13544 5096			l_30B4
 13545
 13546 				; optimize FAIL ('SHOWLOCATIONHEADER', armsdealer.pas), line = 81
 13547
 13548 5096 20 7A 28			jsr SHOWLOCATIONHEADER
 13549
 13550 				; optimize OK (armsdealer.pas), line = 82
 13551
 13552 5099 A9 17			lda #$17
 13553 509B 20 C6 1C			jsr CRT_WRITE_LOCSTR
 13554
 13555 				; optimize OK (armsdealer.pas), line = 83
 13556
 13557 509E A9 00			lda #$00
 13558 50A0 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
 13559 50A3 A9 03			lda #$03
 13560 50A5 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
 13561 50A8 20 AC 17			jsr B_CRT.CRT_GOTOXY
 13562
 13563 				; optimize OK (armsdealer.pas), line = 85
 13564
 13565 50AB A9 01			lda #$01
 13566 50AD 8D 23 C9			sta SHOWWEAPONS
 13567
 13568 				; optimize FAIL ('SELECTGANGSTER', armsdealer.pas), line = 86
 13569
 13570 50B0 20 11 34			jsr SELECTGANGSTER
 13571
 13572 				; optimize OK (armsdealer.pas), line = 87
 13573
 13574 50B3 AD 88 CD			lda CURRENTGANGSTER
 13575 50B6 C9 63			cmp #$63
 13576 50B8 D0 03 4C 21 54		jeq @exit
 13577 50BD			l_30D4
 13578
 13579 				; optimize FAIL ('SHOWLOCATIONHEADER', armsdealer.pas), line = 88
 13580
 13581 50BD 20 7A 28			jsr SHOWLOCATIONHEADER
 13582
 13583 				; optimize OK (armsdealer.pas), line = 90
 13584
 13585 50C0 A9 00			lda #$00
 13586 50C2 8D 5C A8			sta GA
 13587
 13588 				; optimize OK (armsdealer.pas), line = 93
 13589
 13590 50C5 AC 5B A8			ldy SELECTEDWEAPON
 13591 50C8 B9 2A E7			lda adr.WEAPONREACH,y
 13592 50CB C9 0C			cmp #$0C
 13593 50CD 90 14			jcc l_30F1
 13594
 13595 				; optimize OK (armsdealer.pas), line = 94
 13596
 13597 50CF AC 88 CD			ldy CURRENTGANGSTER
 13598 50D2 B9 C8 CC			lda adr.GANGSTERSTR,y
 13599 50D5 C9 28			cmp #$28
 13600 50D7 B0 0A			jcs l_3107
 13601
 13602 				; optimize OK (armsdealer.pas), line = 95
 13603
 13604 50D9 A9 06			lda #$06
 13605 50DB 20 C6 1C			jsr CRT_WRITE_LOCSTR
 13606
 13607 				; optimize OK (armsdealer.pas), line = 96
 13608
 13609 50DE A9 FF			lda #$FF
 13610 50E0 8D 5C A8			sta GA
 13611 50E3			l_3107
 13612 50E3			l_30F1
 13613
 13614 				; optimize OK (armsdealer.pas), line = 101
 13615
 13616 50E3 AC 5B A8			ldy SELECTEDWEAPON
 13617 50E6 B9 33 E7			lda adr.WEAPONPRECISION,y
 13618 50E9 C9 05			cmp #$05
 13619 50EB 90 14			jcc l_3127
 13620
 13621 				; optimize OK (armsdealer.pas), line = 102
 13622
 13623 50ED AC 88 CD			ldy CURRENTGANGSTER
 13624 50F0 B9 E8 CC			lda adr.GANGSTERINT,y
 13625 50F3 C9 28			cmp #$28
 13626 50F5 B0 0A			jcs l_313D
 13627
 13628 				; optimize OK (armsdealer.pas), line = 103
 13629
 13630 50F7 A9 05			lda #$05
 13631 50F9 20 C6 1C			jsr CRT_WRITE_LOCSTR
 13632
 13633 				; optimize OK (armsdealer.pas), line = 104
 13634
 13635 50FC A9 FF			lda #$FF
 13636 50FE 8D 5C A8			sta GA
 13637 5101			l_313D
 13638 5101			l_3127
 13639
 13640 				; optimize OK (armsdealer.pas), line = 109
 13641
 13642 5101 AC 5B A8			ldy SELECTEDWEAPON
 13643 5104 B9 3C E7			lda adr.WEAPONEFFECT,y
 13644 5107 C9 0A			cmp #$0A
 13645 5109 90 14			jcc l_315D
 13646
 13647 				; optimize OK (armsdealer.pas), line = 110
 13648
 13649 510B AC 88 CD			ldy CURRENTGANGSTER
 13650 510E B9 08 CD			lda adr.GANGSTERBRUT,y
 13651 5111 C9 28			cmp #$28
 13652 5113 B0 0A			jcs l_3173
 13653
 13654 				; optimize OK (armsdealer.pas), line = 111
 13655
 13656 5115 A9 07			lda #$07
 13657 5117 20 C6 1C			jsr CRT_WRITE_LOCSTR
 13658
 13659 				; optimize OK (armsdealer.pas), line = 112
 13660
 13661 511A A9 FF			lda #$FF
 13662 511C 8D 5C A8			sta GA
 13663 511F			l_3173
 13664 511F			l_315D
 13665
 13666 				; optimize OK (armsdealer.pas), line = 117
 13667
 13668 511F AD 5C A8			lda GA
 13669 5122 10 06			jpl l_3190
 13670
 13671 				; optimize FAIL ('WAITFORKEY', armsdealer.pas), line = 119
 13672
 13673 5124 20 4A 1E			jsr WAITFORKEY
 13674 5127 4C 21 54			jmp @exit
 13675 512A			l_3190
 13676
 13677 				; optimize OK (armsdealer.pas), line = 149
 13678
 13679 512A AD 5B A8			lda SELECTEDWEAPON
 13680 512D 0A				asl @
 13681 512E A8				tay
 13682 512F B9 18 E7			lda adr.WEAPONPRICES,y
 13683 5132 8D D8 A7			sta PAYMONEY.PRICE
 13684 5135 B9 19 E7			lda adr.WEAPONPRICES+1,y
 13685 5138 8D D9 A7			sta PAYMONEY.PRICE+1
 13686 513B 20 3B 32			jsr PAYMONEY
 13687 513E AD DA A7			lda PAYMONEY.RESULT
 13688 5141 D0 03 4C 21 54		jeq @exit
 13689 5146			l_31A9
 13690
 13691 				; optimize OK (armsdealer.pas), line = 151
 13692
 13693 5146 AC 88 CD			ldy CURRENTGANGSTER
 13694 5149 B9 48 CD			lda adr.GANGSTERWEAPON,y
 13695 514C 8D 5C A8			sta GA
 13696
 13697 				; optimize OK (armsdealer.pas), line = 152
 13698
 13699 514F D0 03 4C 07 52		jeq l_31C7
 13700
 13701 				; optimize FAIL (1, armsdealer.pas), line = 154
 13702
 13703 5154 E8				inx
 13704 5155 AD 5C A8			lda GA
 13705 5158 0A				asl @
 13706 5159 A8				tay
 13707 515A B9 18 E7			lda adr.WEAPONPRICES,y
 13708 515D 95 94			sta :STACKORIGIN,x
 13709 515F B9 19 E7			lda adr.WEAPONPRICES+1,y
 13710 5162 95 A4			sta :STACKORIGIN+STACKWIDTH,x
 13711 5164 E8				inx
 13712 5165 A9 02 95 94			mva #$02 :STACKORIGIN,x
 13713 5169 20 2D 0E			jsr @shrAX_CL
 13714 516C CA				dex
 13715 516D A9 F4			lda #$F4
 13716 516F 8D 63 9C			sta SYSTEM.RANDOM.@010184000.RANGE
 13717 5172 A9 01			lda #$01
 13718 5174 8D 64 9C			sta SYSTEM.RANDOM.@010184000.RANGE+1
 13719 5177 20 C4 13			jsr SYSTEM.RANDOM.@010184000
 13720 517A B5 94			lda :STACKORIGIN,x
 13721 517C 18 6D 65 9C			add SYSTEM.RANDOM.@010184000.RESULT
 13722 5180 8D 62 A8			sta OLDWEAPONPRICE
 13723 5183 B5 A4			lda :STACKORIGIN+STACKWIDTH,x
 13724 5185 6D 66 9C			adc SYSTEM.RANDOM.@010184000.RESULT+1
 13725 5188 8D 63 A8			sta OLDWEAPONPRICE+1
 13726 518B CA				dex
 13727
 13728 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', armsdealer.pas), line = 155
 13729
 13730 518C 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 13731
 13732 				; optimize OK (armsdealer.pas), line = 156
 13733
 13734 518F A9 08			lda #$08
 13735 5191 20 C6 1C			jsr CRT_WRITE_LOCSTR
 13736
 13737 				; optimize OK (armsdealer.pas), line = 157
 13738
 13739 5194 AD 62 A8			lda OLDWEAPONPRICE
 13740 5197 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 13741 519A AD 63 A8			lda OLDWEAPONPRICE+1
 13742 519D 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 13743 51A0 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 13744
 13745 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', armsdealer.pas), line = 158
 13746
 13747 51A3 E8				inx
 13748 51A4 A9 88 95 94			mva #$88 :STACKORIGIN,x
 13749 51A8 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 13750 51AC 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 13751
 13752 				; optimize OK (armsdealer.pas), line = 159
 13753
 13754 51AF A9 09			lda #$09
 13755 51B1 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 13756
 13757 				; optimize OK (armsdealer.pas), line = 160
 13758
 13759 51B4 A9 0A			lda #$0A
 13760 51B6 20 C6 1C			jsr CRT_WRITE_LOCSTR
 13761
 13762 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', armsdealer.pas), line = 161
 13763
 13764 51B9 E8				inx
 13765 51BA AD 5C A8			lda GA
 13766 51BD 0A				asl @
 13767 51BE A8				tay
 13768 51BF B9 6B A4			lda adr.WEAPONNAMES,y
 13769 51C2 95 94			sta :STACKORIGIN,x
 13770 51C4 B9 6C A4			lda adr.WEAPONNAMES+1,y
 13771 51C7 95 A4			sta :STACKORIGIN+STACKWIDTH,x
 13772 51C9 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 13773
 13774 				; optimize FAIL ('CRT_WRITELN', armsdealer.pas), line = 162
 13775
 13776 51CC E8				inx
 13777 51CD A9 8B 95 94			mva #$8B :STACKORIGIN,x
 13778 51D1 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 13779 51D5 20 A9 1E			jsr CRT_WRITELN
 13780
 13781 				; optimize OK (armsdealer.pas), line = 163
 13782
 13783 51D8 A9 0B			lda #$0B
 13784 51DA 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 13785
 13786 				; optimize FAIL ('GETYESNO', armsdealer.pas), line = 165
 13787
 13788 51DD 20 08 20			jsr GETYESNO
 13789 51E0 AD 1B A7			lda GETYESNO.RESULT
 13790 51E3 8D 58 A8			sta R
 13791
 13792 				; optimize OK (armsdealer.pas), line = 166
 13793
 13794 51E6 D0 1F			jne l_3205
 13795
 13796 				; optimize OK (armsdealer.pas), line = 169
 13797
 13798 51E8 AD 5B A8			lda SELECTEDWEAPON
 13799 51EB 0A				asl @
 13800 51EC A8				tay
 13801 51ED B9 18 E7			lda adr.WEAPONPRICES,y
 13802 51F0 8D CB A7			sta ADDMONEY.AMOUNT
 13803 51F3 B9 19 E7			lda adr.WEAPONPRICES+1,y
 13804 51F6 8D CC A7			sta ADDMONEY.AMOUNT+1
 13805 51F9 20 98 2F			jsr ADDMONEY
 13806
 13807 				; optimize OK (armsdealer.pas), line = 170
 13808
 13809 51FC A9 16			lda #$16
 13810 51FE 20 C6 1C			jsr CRT_WRITE_LOCSTR
 13811
 13812 				; optimize FAIL ('WAITFORKEY', armsdealer.pas), line = 171
 13813
 13814 5201 20 4A 1E			jsr WAITFORKEY
 13815 5204 4C 21 54			jmp @exit
 13816 5207			l_3205
 13817 5207			l_31C7
 13818
 13819 				; optimize OK (armsdealer.pas), line = 178
 13820
 13821 5207 AC 88 CD			ldy CURRENTGANGSTER
 13822 520A B9 48 CD			lda adr.GANGSTERWEAPON,y
 13823 520D CD 5B A8			cmp SELECTEDWEAPON
 13824 5210 B0 08			jcs l_322A
 13825
 13826 				; optimize OK (armsdealer.pas), line = 179
 13827
 13828 5212 A9 01			lda #$01
 13829 5214 20 EC 2F			jsr ADDPOINTS
 13830 5217 4C 1F 52			jmp l_3236
 13831 521A			l_322A
 13832
 13833 				; optimize OK (armsdealer.pas), line = 181
 13834
 13835 521A A9 01			lda #$01
 13836 521C 20 FD 2F			jsr REMOVEPOINTS
 13837 521F			l_3236
 13838
 13839 				; optimize OK (armsdealer.pas), line = 183
 13840
 13841 521F AD 62 A8			lda OLDWEAPONPRICE
 13842 5222 8D CB A7			sta ADDMONEY.AMOUNT
 13843 5225 AD 63 A8			lda OLDWEAPONPRICE+1
 13844 5228 8D CC A7			sta ADDMONEY.AMOUNT+1
 13845 522B 20 98 2F			jsr ADDMONEY
 13846
 13847 				; optimize OK (armsdealer.pas), line = 184
 13848
 13849 522E AC 88 CD			ldy CURRENTGANGSTER
 13850 5231 AD 5B A8			lda SELECTEDWEAPON
 13851 5234 99 48 CD			sta adr.GANGSTERWEAPON,y
 13852
 13853 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', armsdealer.pas), line = 185
 13854
 13855 5237 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 13856
 13857 				; optimize OK (armsdealer.pas), line = 186
 13858
 13859 523A A9 0C			lda #$0C
 13860 523C 20 C6 1C			jsr CRT_WRITE_LOCSTR
 13861
 13862 				; optimize FAIL ('WAITFORKEY', armsdealer.pas), line = 187
 13863
 13864 523F 20 4A 1E			jsr WAITFORKEY
 13865 5242			l_2FD3
 13866
 13867 				; optimize OK (armsdealer.pas), line = 191
 13868
 13869 5242 AD 22 C9			lda CURRENTCHOICE
 13870 5245 C9 02			cmp #$02
 13871 5247 F0 03 4C 21 54		jne l_325C
 13872
 13873 				; optimize FAIL ('SHOWLOCATIONHEADER', armsdealer.pas), line = 193
 13874
 13875 524C 20 7A 28			jsr SHOWLOCATIONHEADER
 13876
 13877 				; optimize OK (armsdealer.pas), line = 195
 13878
 13879 524F AD C7 CA			lda LASTACTION
 13880 5252 C9 02			cmp #$02
 13881 5254 D0 0B			jne l_3270
 13882
 13883 				; optimize OK (armsdealer.pas), line = 197
 13884
 13885 5256 A9 18			lda #$18
 13886 5258 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 13887
 13888 				; optimize FAIL ('WAITFORKEY', armsdealer.pas), line = 198
 13889
 13890 525B 20 4A 1E			jsr WAITFORKEY
 13891 525E 4C 21 54			jmp @exit
 13892 5261			l_3270
 13893
 13894 				; optimize OK (armsdealer.pas), line = 202
 13895
 13896 5261 AC 8A CD			ldy CURRENTPLAYER
 13897 5264 B9 B1 CD			lda adr.PLNGANGSTERS,y
 13898 5267 C9 02			cmp #$02
 13899 5269 90 05			jcc l_328B
 13900
 13901 				; optimize OK (armsdealer.pas), line = 203
 13902
 13903 526B A9 0D			lda #$0D
 13904 526D 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 13905 5270			l_328B
 13906
 13907 				; optimize OK (armsdealer.pas), line = 205
 13908
 13909 5270 A9 00			lda #$00
 13910 5272 8D 23 C9			sta SHOWWEAPONS
 13911
 13912 				; optimize FAIL ('SELECTGANGSTER', armsdealer.pas), line = 206
 13913
 13914 5275 20 11 34			jsr SELECTGANGSTER
 13915
 13916 				; optimize OK (armsdealer.pas), line = 207
 13917
 13918 5278 AD 88 CD			lda CURRENTGANGSTER
 13919 527B C9 63			cmp #$63
 13920 527D D0 03 4C 21 54		jeq @exit
 13921 5282			l_32A7
 13922
 13923 				; optimize FAIL ('SHOWLOCATIONHEADER', armsdealer.pas), line = 209
 13924
 13925 5282 20 7A 28			jsr SHOWLOCATIONHEADER
 13926
 13927 				; optimize OK (armsdealer.pas), line = 210
 13928
 13929 5285 A9 00			lda #$00
 13930 5287 8D 64 A8			sta CAMP
 13931
 13932 				; optimize OK (armsdealer.pas), line = 212
 13933
 13934 528A AC 8A CD			ldy CURRENTPLAYER
 13935 528D B9 98 C9			lda adr.PLRANK,y
 13936 5290 C9 05			cmp #$05
 13937 5292 90 30			jcc l_32C4
 13938
 13939 				; optimize OK (armsdealer.pas), line = 214
 13940
 13941 5294 A9 0E			lda #$0E
 13942 5296 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 13943
 13944 				; optimize OK (armsdealer.pas), line = 215
 13945
 13946 5299 A9 15			lda #$15
 13947 529B 20 C6 1C			jsr CRT_WRITE_LOCSTR
 13948
 13949 				; optimize OK (armsdealer.pas), line = 216
 13950
 13951 529E A9 3E			lda #$3E
 13952 52A0 8D 12 A7			sta GETANSWERCHAR.AKEY
 13953 52A3 A9 08			lda #$08
 13954 52A5 8D 13 A7			sta GETANSWERCHAR.BKEY
 13955 52A8 A9 33			lda #$33
 13956 52AA 8D 14 A7			sta GETANSWERCHAR.A
 13957 52AD A9 2F			lda #$2F
 13958 52AF 8D 15 A7			sta GETANSWERCHAR.B
 13959 52B2 20 8C 1F			jsr GETANSWERCHAR
 13960 52B5 AD 16 A7			lda GETANSWERCHAR.RESULT
 13961 52B8 8D 58 A8			sta R
 13962
 13963 				; optimize OK (armsdealer.pas), line = 217
 13964
 13965 52BB C9 01			cmp #$01
 13966 52BD D0 05			jne l_32E3
 13967 52BF A9 01			lda #$01
 13968 52C1 8D 64 A8			sta CAMP
 13969 52C4			l_32E3
 13970 52C4			l_32C4
 13971
 13972 				; optimize OK (armsdealer.pas), line = 221
 13973
 13974 52C4 AD 64 A8			lda CAMP
 13975 52C7 D0 1E			jne l_32FE
 13976
 13977 				; optimize OK (armsdealer.pas), line = 222
 13978
 13979 52C9 AC 8A CD			ldy CURRENTPLAYER
 13980 52CC B9 98 C9			lda adr.PLRANK,y
 13981 52CF 85 8C			sta :ecx
 13982 52D1 A9 C8			lda #$C8
 13983 52D3 85 84			sta :eax
 13984 					.ifdef fmulinit
 13985 					fmulu_8
 13986 					els
 13987 52D5 20 43 10			imulCL
 13988 					eif
 13989 52D8 A5 84			lda :eax
 13990 52DA 18 69 20			add #$20
 13991 52DD 8D 5D A8			sta PRICE
 13992 52E0 A5 85			lda :eax+1
 13993 52E2 69 03			adc #$03
 13994 52E4 4C 0A 53			jmp l_3319
 13995 52E7			l_32FE
 13996
 13997 				; optimize OK (armsdealer.pas), line = 224
 13998
 13999 52E7 AC 8A CD			ldy CURRENTPLAYER
 14000 52EA B9 98 C9			lda adr.PLRANK,y
 14001 52ED 85 84			sta :eax
 14002 52EF A9 00			lda #$00
 14003 52F1 85 85			sta :eax+1
 14004 52F3 A9 F4			lda #$F4
 14005 52F5 85 8C			sta :ecx
 14006 52F7 A9 01			lda #$01
 14007 52F9 85 8D			sta :ecx+1
 14008 					.ifdef fmulinit
 14009 					fmulu_16
 14010 					els
 14011 52FB 20 D3 10			imulCX_AL
 14012 					eif
 14013 52FE A5 84			lda :eax
 14014 5300 18 69 C4			add #$C4
 14015 5303 8D 5D A8			sta PRICE
 14016 5306 A5 85			lda :eax+1
 14017 5308 69 09			adc #$09
 14018 530A			l_3319
 14019 530A 8D 5E A8			sta PRICE+1
 14020
 14021 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', armsdealer.pas), line = 226
 14022
 14023 530D 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 14024
 14025 				; optimize OK (armsdealer.pas), line = 227
 14026
 14027 5310 A9 0F			lda #$0F
 14028 5312 20 C6 1C			jsr CRT_WRITE_LOCSTR
 14029
 14030 				; optimize OK (armsdealer.pas), line = 228
 14031
 14032 5315 AD 5D A8			lda PRICE
 14033 5318 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 14034 531B AD 5E A8			lda PRICE+1
 14035 531E 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 14036 5321 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 14037
 14038 				; optimize OK (armsdealer.pas), line = 229
 14039
 14040 5324 A9 10			lda #$10
 14041 5326 20 C6 1C			jsr CRT_WRITE_LOCSTR
 14042
 14043 				; optimize FAIL ('GETYESNO', armsdealer.pas), line = 230
 14044
 14045 5329 20 08 20			jsr GETYESNO
 14046 532C AD 1B A7			lda GETYESNO.RESULT
 14047 532F 8D 5C A8			sta GA
 14048
 14049 				; optimize OK (armsdealer.pas), line = 231
 14050
 14051 5332 D0 03 4C 21 54		jeq @exit
 14052 5337			l_3348
 14053
 14054 				; optimize OK (armsdealer.pas), line = 232
 14055
 14056 5337 AD 5D A8			lda PRICE
 14057 533A 8D D8 A7			sta PAYMONEY.PRICE
 14058 533D AD 5E A8			lda PRICE+1
 14059 5340 8D D9 A7			sta PAYMONEY.PRICE+1
 14060 5343 20 3B 32			jsr PAYMONEY
 14061 5346 AD DA A7			lda PAYMONEY.RESULT
 14062 5349 D0 03 4C 21 54		jeq @exit
 14063 534E			l_335D
 14064
 14065 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', armsdealer.pas), line = 234
 14066
 14067 534E 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 14068
 14069 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', armsdealer.pas), line = 235
 14070
 14071 5351 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 14072
 14073 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', armsdealer.pas), line = 236
 14074
 14075 5354 E8				inx
 14076 5355 AD 88 CD			lda CURRENTGANGSTER
 14077 5358 0A				asl @
 14078 5359 A8				tay
 14079 535A B9 15 A4			lda adr.GANGSTERNAMES,y
 14080 535D 95 94			sta :STACKORIGIN,x
 14081 535F B9 16 A4			lda adr.GANGSTERNAMES+1,y
 14082 5362 95 A4			sta :STACKORIGIN+STACKWIDTH,x
 14083 5364 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 14084
 14085 				; optimize OK (armsdealer.pas), line = 237
 14086
 14087 5367 AD 64 A8			lda CAMP
 14088 536A D0 3B			jne l_337A
 14089
 14090 				; optimize OK (armsdealer.pas), line = 239
 14091
 14092 536C A9 11			lda #$11
 14093 536E 20 C6 1C			jsr CRT_WRITE_LOCSTR
 14094
 14095 				; optimize OK (armsdealer.pas), line = 240
 14096
 14097 5371 A9 05			lda #$05
 14098 5373 8D 61 A8			sta INC_ST
 14099
 14100 				; optimize OK (armsdealer.pas), line = 241
 14101
 14102 5376 A0 01			ldy #1
 14103 5378 AD 3D A7			lda CURRENTSUBLOCATION
 14104 537B C9 01			cmp #$01
 14105 537D F0 01			beq @+
 14106 537F 88				dey
 14107 				@
 14108 5380 98				tya
 14109 5381 0A				asl @
 14110 5382 18 69 03			add #$03
 14111 5385 8D 5F A8			sta INC_IN
 14112
 14113 				; optimize OK (armsdealer.pas), line = 242
 14114
 14115 5388 A0 01			ldy #1
 14116 538A AD 3D A7			lda CURRENTSUBLOCATION
 14117 538D C9 03			cmp #$03
 14118 538F F0 01			beq @+
 14119 5391 88				dey
 14120 				@
 14121 5392 98				tya
 14122 5393 85 9E			sta :STACKORIGIN+10
 14123 5395 0A				asl @
 14124 5396 18 65 9E			add :STACKORIGIN+10
 14125 5399 18 69 02			add #$02
 14126 539C 8D 60 A8			sta INC_BT
 14127
 14128 				; optimize OK (armsdealer.pas), line = 243
 14129
 14130 539F A9 01			lda #$01
 14131 53A1 20 EC 2F			jsr ADDPOINTS
 14132 53A4 4C D6 53			jmp l_33B4
 14133 53A7			l_337A
 14134
 14135 				; optimize OK (armsdealer.pas), line = 248
 14136
 14137 53A7 A9 12			lda #$12
 14138 53A9 20 C6 1C			jsr CRT_WRITE_LOCSTR
 14139
 14140 				; optimize OK (armsdealer.pas), line = 249
 14141
 14142 53AC A9 08			lda #$08
 14143 53AE 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 14144 53B1 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 14145 53B4 18 69 08			add #$08
 14146 53B7 8D 61 A8			sta INC_ST
 14147
 14148 				; optimize OK (armsdealer.pas), line = 250
 14149
 14150 53BA A9 08			lda #$08
 14151 53BC 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 14152 53BF AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 14153 53C2 18 69 08			add #$08
 14154 53C5 8D 5F A8			sta INC_IN
 14155
 14156 				; optimize OK (armsdealer.pas), line = 251
 14157
 14158 53C8 A9 08			lda #$08
 14159 53CA 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 14160 53CD AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 14161 53D0 18 69 08			add #$08
 14162 53D3 8D 60 A8			sta INC_BT
 14163 53D6			l_33B4
 14164
 14165 				; optimize FAIL ('EFFECTWAIT', armsdealer.pas), line = 254
 14166
 14167 53D6 20 74 1D			jsr EFFECTWAIT
 14168
 14169 				; optimize OK (armsdealer.pas), line = 255
 14170
 14171 53D9 A9 02			lda #$02
 14172 53DB 8D C7 CA			sta LASTACTION
 14173
 14174 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', armsdealer.pas), line = 257
 14175
 14176 53DE 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 14177
 14178 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', armsdealer.pas), line = 258
 14179
 14180 53E1 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 14181
 14182 				; optimize OK (armsdealer.pas), line = 259
 14183
 14184 53E4 AC 88 CD			ldy CURRENTGANGSTER
 14185 53E7 B9 C8 CC			lda adr.GANGSTERSTR,y
 14186 53EA C9 63			cmp #$63
 14187 53EC D0 16			jne l_340B
 14188 53EE B9 E8 CC			lda adr.GANGSTERINT,y
 14189 53F1 C9 63			cmp #$63
 14190 53F3 D0 0F			jne l_340B
 14191 53F5 B9 08 CD			lda adr.GANGSTERBRUT,y
 14192 53F8 C9 63			cmp #$63
 14193 53FA D0 08			jne l_340B
 14194
 14195 				; optimize OK (armsdealer.pas), line = 261
 14196
 14197 53FC A9 19			lda #$19
 14198 53FE 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 14199 5401 4C 1E 54			jmp l_3417
 14200 5404			l_340B
 14201
 14202 				; optimize OK (armsdealer.pas), line = 265
 14203
 14204 5404 AD 61 A8			lda INC_ST
 14205 5407 8D 54 A8			sta INCREASECURRENTGANGSTER.INC_ST
 14206 540A AD 5F A8			lda INC_IN
 14207 540D 8D 55 A8			sta INCREASECURRENTGANGSTER.INC_IN
 14208 5410 AD 60 A8			lda INC_BT
 14209 5413 8D 56 A8			sta INCREASECURRENTGANGSTER.INC_BT
 14210 5416 20 35 4F			jsr INCREASECURRENTGANGSTER
 14211
 14212 				; optimize OK (armsdealer.pas), line = 266
 14213
 14214 5419 A9 01			lda #$01
 14215 541B 20 EC 2F			jsr ADDPOINTS
 14216 541E			l_3417
 14217
 14218 				; optimize FAIL ('WAITFORKEY', armsdealer.pas), line = 268
 14219
 14220 541E 20 4A 1E			jsr WAITFORKEY
 14221 5421			l_325C
 14222 5421			@exit
 14223
 14224 				; ------------------------------------------------------------
 14225
 14226 = A857			RESULT	= DATAORIGIN+$0C01
 14227 = A858			R	= DATAORIGIN+$0C02
 14228 = A859			MAXWEAPON	= DATAORIGIN+$0C03
 14229 = A85A			MINWEAPON	= DATAORIGIN+$0C04
 14230 = A85B			SELECTEDWEAPON	= DATAORIGIN+$0C05
 14231 = A85C			GA	= DATAORIGIN+$0C06
 14232 = A85D			PRICE	= DATAORIGIN+$0C07
 14233 = A85F			INC_IN	= DATAORIGIN+$0C09
 14234 = A860			INC_BT	= DATAORIGIN+$0C0A
 14235 = A861			INC_ST	= DATAORIGIN+$0C0B
 14236 = A862			OLDWEAPONPRICE	= DATAORIGIN+$0C0C
 14237 = A864			CAMP	= DATAORIGIN+$0C0E
 14238
 14239 = A858			@VarData	= R
 14240 = 000D			@VarDataSize	= 13
 14241
 14242 5421 60				rts						; ret
 14243 				.endl
 14244
 14245 5422			.local	BANKCHOICES					; FUNCTION
 14246
 14247 				; optimize OK (bank.pas), line = 18
 14248
 14249 5422 AC 8A CD			ldy CURRENTPLAYER
 14250 5425 B9 60 C9			lda adr.PLOPPORTUNITY,y
 14251 5428 29 02			and #$02
 14252 542A 8D 0B CA			sta TMPOPPORTUNITY
 14253
 14254 				; optimize OK (bank.pas), line = 20
 14255
 14256 542D B9 60 C9			lda adr.PLOPPORTUNITY,y
 14257 5430 29 FD			and #$FD
 14258 5432 99 60 C9			sta adr.PLOPPORTUNITY,y
 14259
 14260 				; optimize OK (bank.pas), line = 22
 14261
 14262 5435 A9 01			lda #$01
 14263 5437 8D 86 A8			sta RESULT
 14264
 14265 				; optimize OK (bank.pas), line = 23
 14266
 14267 543A 20 1F 29			jsr LOADLOCATION
 14268
 14269 				; optimize FAIL ('SHOWLOCATIONHEADER', bank.pas), line = 24
 14270
 14271 543D 20 7A 28			jsr SHOWLOCATIONHEADER
 14272
 14273 				; optimize OK (bank.pas), line = 26
 14274
 14275 5440 AC 8A CD			ldy CURRENTPLAYER
 14276 5443 B9 98 C9			lda adr.PLRANK,y
 14277 5446 C9 01			cmp #$01
 14278 5448 B0 0B			jcs l_3463
 14279
 14280 				; optimize OK (bank.pas), line = 28
 14281
 14282 544A A9 0D			lda #$0D
 14283 544C 20 C6 1C			jsr CRT_WRITE_LOCSTR
 14284
 14285 				; optimize FAIL ('WAITFORKEY', bank.pas), line = 29
 14286
 14287 544F 20 4A 1E			jsr WAITFORKEY
 14288 5452 4C B5 59			jmp @exit
 14289 5455			l_3463
 14290
 14291 				; optimize OK (bank.pas), line = 36
 14292
 14293 5455 AD A5 A3			lda LASTLOCATION
 14294 5458 C9 01			cmp #$01
 14295 545A D0 1B			jne l_347B
 14296
 14297 				; optimize FAIL ('PREPAREFIGHTAGAINSTPOLICE', bank.pas), line = 38
 14298
 14299 545C 20 22 31			jsr PREPAREFIGHTAGAINSTPOLICE
 14300
 14301 				; optimize FAIL ('DOFIGHT', bank.pas), line = 39
 14302
 14303 545F 20 9F 4D			jsr DOFIGHT
 14304 5462 AD 4E A8			lda DOFIGHT.RESULT
 14305 5465 C9 01			cmp #$01
 14306 5467 D0 0B			jne l_348D
 14307
 14308 				; optimize FAIL ('GOTCAUGHT', bank.pas), line = 41
 14309
 14310 5469 20 32 36			jsr GOTCAUGHT
 14311
 14312 				; optimize OK (bank.pas), line = 42
 14313
 14314 546C A9 11			lda #$11
 14315 546E 8D 86 A8			sta RESULT
 14316 5471 4C B5 59			jmp @exit
 14317 5474			l_348D
 14318 5474 4C B5 59			jmp @exit
 14319 5477			l_347B
 14320
 14321 				; optimize OK (bank.pas), line = 48
 14322
 14323 5477 AC 8A CD			ldy CURRENTPLAYER
 14324 547A B9 B1 CD			lda adr.PLNGANGSTERS,y
 14325 547D C9 02			cmp #$02
 14326 547F B0 18			jcs l_34AC
 14327
 14328 				; optimize OK (bank.pas), line = 50
 14329
 14330 5481 A9 06			lda #$06
 14331 5483 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 14332 5486 A9 01			lda #$01
 14333 5488 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 14334 548B 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 14335
 14336 				; optimize FAIL ('WAITFORKEY', bank.pas), line = 51
 14337
 14338 548E 20 4A 1E			jsr WAITFORKEY
 14339
 14340 				; optimize OK (bank.pas), line = 52
 14341
 14342 5491 A9 0F			lda #$0F
 14343 5493 8D A5 A3			sta LASTLOCATION
 14344 5496 4C B5 59			jmp @exit
 14345 5499			l_34AC
 14346
 14347 				; optimize OK (bank.pas), line = 57
 14348
 14349 5499 AD 22 C9			lda CURRENTCHOICE
 14350 549C C9 01			cmp #$01
 14351 549E F0 03 4C 20 55		jne l_34C9
 14352
 14353 				; optimize OK (bank.pas), line = 59
 14354
 14355 54A3 A9 03			lda #$03
 14356 54A5 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 14357 54A8 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 14358 54AB D0 66			jne l_34DB
 14359
 14360 				; optimize OK (bank.pas), line = 61
 14361
 14362 54AD A9 02			lda #$02
 14363 54AF 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 14364
 14365 				; optimize OK (bank.pas), line = 62
 14366
 14367 54B2 A9 03			lda #$03
 14368 54B4 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 14369
 14370 				; optimize FAIL ('WAITFORKEY', bank.pas), line = 63
 14371
 14372 54B7 20 4A 1E			jsr WAITFORKEY
 14373
 14374 				; -------------------  ASM Block 00000159  -------------------
 14375
 14376 				 
 14377 54BA AD C3 9A		                lda loc_string_4
 14378 54BD 8D AC A3		                sta adr.FP_GANG+$02
 14379 54C0 AD C4 9A		                lda loc_string_4+1
 14380 54C3 8D AD A3		                sta adr.FP_GANG+1+$02
 14381 				            
 14382 				; optimize OK (bank.pas), line = 73
 14383
 14384 54C6 A9 01			lda #$01
 14385 54C8 8D 02 E4			sta adr.FP_AI+$01
 14386
 14387 				; optimize OK (bank.pas), line = 74
 14388
 14389 54CB A9 03			lda #$03
 14390 54CD 8D 04 E4			sta adr.FP_N+$01
 14391
 14392 				; optimize OK (bank.pas), line = 75
 14393
 14394 54D0 AD 90 CD			lda CURRENTMAP
 14395 54D3 C9 01			cmp #$01
 14396 54D5 D0 03			jne l_34FD
 14397
 14398 				; optimize OK (bank.pas), line = 76
 14399
 14400 54D7 EE 04 E4			inc adr.FP_N+$01
 14401 54DA			l_34FD
 14402
 14403 				; -------------------  ASM Block 00000160  -------------------
 14404
 14405 54DA A0 00		                ldy #$00
 14406 				            @:
 14407 54DC 98			                tya 
 14408 54DD 0A			                asl 
 14409 54DE A8			                tay
 14410
 14411 54DF AD C3 9A		                lda loc_string_4
 14412 54E2 99 CE A3		                sta adr.FP_NAME+$20,y
 14413 54E5 AD C4 9A		                lda loc_string_4+1
 14414 54E8 99 CF A3		                sta adr.FP_NAME+1+$20,y
 14415
 14416 54EB 98			                tya
 14417 54EC 4A			                lsr 
 14418 54ED A8			                tay
 14419
 14420 54EE A9 1E		                lda #$1E
 14421 54F0 99 95 E4		                sta adr.FP_ENERGY+$10,y
 14422 54F3 A9 06		                lda #$06
 14423 54F5 99 55 E4		                sta adr.FP_WEAPON+$10,y
 14424 54F8 C8			                iny
 14425 54F9 CC 04 E4		                cpy adr.FP_N+$01
 14426 54FC D0 DE		                bne @- 
 14427 				            
 14428 				; optimize FAIL ('DOFIGHT', bank.pas), line = 108
 14429
 14430 54FE 20 9F 4D			jsr DOFIGHT
 14431 5501 AD 4E A8			lda DOFIGHT.RESULT
 14432 5504 C9 01			cmp #$01
 14433 5506 D0 0B			jne l_351C
 14434
 14435 				; optimize FAIL ('GOTCAUGHT', bank.pas), line = 110
 14436
 14437 5508 20 32 36			jsr GOTCAUGHT
 14438
 14439 				; optimize OK (bank.pas), line = 111
 14440
 14441 550B A9 11			lda #$11
 14442 550D 8D 86 A8			sta RESULT
 14443 5510 4C B5 59			jmp @exit
 14444 5513			l_351C
 14445 5513			l_34DB
 14446
 14447 				; optimize OK (bank.pas), line = 115
 14448
 14449 5513 A9 01			lda #$01
 14450 5515 8D D1 A7			sta CRACKEDBANK.P
 14451 5518 A9 00			lda #$00
 14452 551A 8D D2 A7			sta CRACKEDBANK.P+1
 14453 551D 20 37 30			jsr CRACKEDBANK
 14454 5520			l_34C9
 14455
 14456 				; optimize OK (bank.pas), line = 119
 14457
 14458 5520 AD 22 C9			lda CURRENTCHOICE
 14459 5523 C9 02			cmp #$02
 14460 5525 F0 03 4C B5 59		jne l_353C
 14461
 14462 				; optimize FAIL ('SHOWLOCATIONHEADER', bank.pas), line = 121
 14463
 14464 552A 20 7A 28			jsr SHOWLOCATIONHEADER
 14465
 14466 				; optimize OK (bank.pas), line = 122
 14467
 14468 552D AD 8A CD			lda CURRENTPLAYER
 14469 5530 0A				asl @
 14470 5531 0A				asl @
 14471 5532 0A				asl @
 14472 5533 8D 87 A8			sta K
 14473
 14474 				; optimize OK (bank.pas), line = 123
 14475
 14476 5536 A8				tay
 14477 5537 B9 08 CD			lda adr.GANGSTERBRUT,y
 14478 553A C9 19			cmp #$19
 14479 553C 90 0E			jcc l_357Bx
 14480 553E B9 C8 CC			lda adr.GANGSTERSTR,y
 14481 5541 C9 19			cmp #$19
 14482 5543 90 07			jcc l_357Bx
 14483 5545 B9 E8 CC			lda adr.GANGSTERINT,y
 14484 5548 C9 28			cmp #$28
 14485 554A B0 13			jcs l_357B
 14486 554C			l_357Bx
 14487
 14488 				; optimize OK (bank.pas), line = 125
 14489
 14490 554C A9 06			lda #$06
 14491 554E 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 14492 5551 A9 05			lda #$05
 14493 5553 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 14494 5556 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 14495
 14496 				; optimize FAIL ('WAITFORKEY', bank.pas), line = 126
 14497
 14498 5559 20 4A 1E			jsr WAITFORKEY
 14499 555C 4C B5 59			jmp @exit
 14500 555F			l_357B
 14501
 14502 				; optimize OK (bank.pas), line = 130
 14503
 14504 555F A9 06			lda #$06
 14505 5561 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 14506
 14507 				; optimize OK (bank.pas), line = 131
 14508
 14509 5564 A9 00			lda #$00
 14510 5566 8D 23 C9			sta SHOWWEAPONS
 14511
 14512 				; optimize FAIL ('SELECTGANGSTER', bank.pas), line = 132
 14513
 14514 5569 20 11 34			jsr SELECTGANGSTER
 14515
 14516 				; optimize OK (bank.pas), line = 133
 14517
 14518 556C AD 88 CD			lda CURRENTGANGSTER
 14519 556F C9 63			cmp #$63
 14520 5571 D0 03 4C B5 59		jeq @exit
 14521 5576			l_359B
 14522
 14523 				; optimize FAIL ('SHOWLOCATIONHEADER', bank.pas), line = 135
 14524
 14525 5576 20 7A 28			jsr SHOWLOCATIONHEADER
 14526
 14527 				; optimize OK (bank.pas), line = 136
 14528
 14529 5579 A9 07			lda #$07
 14530 557B 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 14531
 14532 				; optimize OK (bank.pas), line = 137
 14533
 14534 557E A9 08			lda #$08
 14535 5580 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 14536
 14537 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', bank.pas), line = 138
 14538
 14539 5583 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 14540
 14541 				; optimize OK (bank.pas), line = 141
 14542
 14543 5586 AD 8A CD			lda CURRENTPLAYER
 14544 5589 85 9E			sta :STACKORIGIN+10
 14545 558B A9 00			lda #$00
 14546 558D 06 9E			asl :STACKORIGIN+10
 14547 558F 2A				rol @
 14548 5590 06 9E			asl :STACKORIGIN+10
 14549 5592 2A				rol @
 14550 5593 06 9E			asl :STACKORIGIN+10
 14551 5595 2A				rol @
 14552 5596 85 AE			sta :STACKORIGIN+STACKWIDTH+10
 14553 5598 A5 9E			lda :STACKORIGIN+10
 14554 559A 18 69 00			add #$00
 14555 559D A8				tay
 14556 559E A5 AE			lda :STACKORIGIN+STACKWIDTH+10
 14557 55A0 69 00			adc #$00
 14558 55A2 85 AE			sta :STACKORIGIN+STACKWIDTH+10
 14559 55A4 B9 E8 CC			lda adr.GANGSTERINT,y
 14560 55A7 4A				lsr @
 14561 55A8 4A				lsr @
 14562 55A9 4A				lsr @
 14563 55AA 4A				lsr @
 14564 55AB 18 69 0D			add #$0D
 14565 55AE 85 9D			sta :STACKORIGIN+9
 14566 55B0 AD 3D A7			lda CURRENTSUBLOCATION
 14567 55B3 0A				asl @
 14568 55B4 18 65 9D			add :STACKORIGIN+9
 14569 55B7 8D 88 A8			sta NATTEMPTS
 14570
 14571 				; optimize OK (bank.pas), line = 142
 14572
 14573 55BA AC 8A CD			ldy CURRENTPLAYER
 14574 55BD B9 24 C9			lda adr.PLSTUFF,y
 14575 55C0 29 20			and #$20
 14576 55C2 F0 11			jeq l_35DC
 14577
 14578 				; optimize OK (bank.pas), line = 144
 14579
 14580 55C4 AD 88 A8			lda NATTEMPTS
 14581 55C7 18 69 09			add #$09
 14582 55CA 8D 88 A8			sta NATTEMPTS
 14583
 14584 				; optimize OK (bank.pas), line = 145
 14585
 14586 55CD B9 24 C9			lda adr.PLSTUFF,y
 14587 55D0 29 DF			and #$DF
 14588 55D2 99 24 C9			sta adr.PLSTUFF,y
 14589 55D5			l_35DC
 14590
 14591 				; optimize FAIL ('WAITFORKEY', bank.pas), line = 148
 14592
 14593 55D5 20 4A 1E			jsr WAITFORKEY
 14594
 14595 				; optimize FAIL ('BLACKCONSOLE', bank.pas), line = 151
 14596
 14597 55D8 20 8E 27			jsr BLACKCONSOLE
 14598
 14599 				; optimize OK (bank.pas), line = 152
 14600
 14601 55DB A9 00			lda #$00
 14602 55DD 85 88			sta SYSTEM.FILLCHAR.@03018000001810000188000.A
 14603 55DF A9 DC			lda #$DC
 14604 55E1 85 89			sta SYSTEM.FILLCHAR.@03018000001810000188000.A+1
 14605 55E3 A9 C0			lda #$C0
 14606 55E5 85 8C			sta SYSTEM.FILLCHAR.@03018000001810000188000.COUNT
 14607 55E7 A9 03			lda #$03
 14608 55E9 85 8D			sta SYSTEM.FILLCHAR.@03018000001810000188000.COUNT+1
 14609 55EB A9 00			lda #$00
 14610 55ED 85 84			sta SYSTEM.FILLCHAR.@03018000001810000188000.VALUE
 14611 55EF				.LOCAL +MAIN.SYSTEM.FILLCHAR.@03018000001810000188000
 14612 55EF				m@INLINE
Macro: MAIN.SYSTEM.FILLCHAR.@03018000001810000188000.M@INLINE [Source: main_PL.a65]
     4 55EF 20 2C 0F			jsr @fill
Source: main_PL.a65
 14613 					.ENDL
 14614
 14615 				; optimize OK (bank.pas), line = 153
 14616
 14617 55F2 AD 3F 9C			lda SAFECLMFNAME
 14618 55F5 8D 36 A7			sta LOADXAPL.FNAME
 14619 55F8 AD 40 9C			lda SAFECLMFNAME+1
 14620 55FB 8D 37 A7			sta LOADXAPL.FNAME+1
 14621 55FE A9 00			lda #$00
 14622 5600 8D 38 A7			sta LOADXAPL.OUTPUTPOINTER
 14623 5603 A9 D8			lda #$D8
 14624 5605 8D 39 A7			sta LOADXAPL.OUTPUTPOINTER+1
 14625 5608 20 60 27			jsr LOADXAPL
 14626
 14627 				; optimize OK (bank.pas), line = 154
 14628
 14629 560B A9 00			lda #$00
 14630 560D A0 4F			ldy #$4F
 14631 560F 99 A8 DE 88 10 FA		sta:rpl $DEA8,y-
 14632
 14633 				; optimize FAIL ('ENABLEMAPCONSOLE', bank.pas), line = 155
 14634
 14635 5615 20 F0 27			jsr ENABLEMAPCONSOLE
 14636
 14637 				; optimize OK (bank.pas), line = 156
 14638
 14639 5618 A9 04			lda #$04
 14640 561A 8D F6 EA			sta MAPCOLORA
 14641
 14642 				; optimize OK (bank.pas), line = 157
 14643
 14644 561D A9 0A			lda #$0A
 14645 561F 8D F7 EA			sta MAPCOLORB
 14646
 14647 				; optimize OK (bank.pas), line = 158
 14648
 14649 5622 A9 01			lda #$01
 14650 5624 8D B5 CD			sta DIDFIGHT
 14651
 14652 				; optimize FAIL (1, bank.pas), line = 159
 14653
 14654 5627 E8				inx
 14655 5628 A9 00 95 94			mva #$00 :STACKORIGIN,x
 14656 562C 95 A4			sta :STACKORIGIN+STACKWIDTH,x
 14657 562E A9 0A			lda #$0A
 14658 5630 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 14659 5633 B4 94			ldy :STACKORIGIN,x
 14660 5635 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 14661 5638 99 89 A8			sta adr.T,y
 14662
 14663 				; optimize FAIL (1, bank.pas), line = 160
 14664
 14665 563B A9 01 95 94			mva #$01 :STACKORIGIN,x
 14666 563F A9 00 95 A4			mva #$00 :STACKORIGIN+STACKWIDTH,x
 14667 5643 A9 0A			lda #$0A
 14668 5645 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 14669 5648 B4 94			ldy :STACKORIGIN,x
 14670 564A AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 14671 564D 99 89 A8			sta adr.T,y
 14672
 14673 				; optimize FAIL (1, bank.pas), line = 161
 14674
 14675 5650 A9 02 95 94			mva #$02 :STACKORIGIN,x
 14676 5654 A9 00 95 A4			mva #$00 :STACKORIGIN+STACKWIDTH,x
 14677 5658 A9 0A			lda #$0A
 14678 565A 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 14679 565D B4 94			ldy :STACKORIGIN,x
 14680 565F AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 14681 5662 99 89 A8			sta adr.T,y
 14682
 14683 				; optimize FAIL (1, bank.pas), line = 162
 14684
 14685 5665 A9 00 95 94			mva #$00 :STACKORIGIN,x
 14686 5669 95 A4			sta :STACKORIGIN+STACKWIDTH,x
 14687 566B A9 0A			lda #$0A
 14688 566D 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 14689 5670 B4 94			ldy :STACKORIGIN,x
 14690 5672 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 14691 5675 99 8C A8			sta adr.C,y
 14692
 14693 				; optimize FAIL (1, bank.pas), line = 163
 14694
 14695 5678 A9 01 95 94			mva #$01 :STACKORIGIN,x
 14696 567C A9 00 95 A4			mva #$00 :STACKORIGIN+STACKWIDTH,x
 14697 5680 A9 0A			lda #$0A
 14698 5682 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 14699 5685 B4 94			ldy :STACKORIGIN,x
 14700 5687 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 14701 568A 99 8C A8			sta adr.C,y
 14702
 14703 				; optimize FAIL (1, bank.pas), line = 164
 14704
 14705 568D A9 02 95 94			mva #$02 :STACKORIGIN,x
 14706 5691 A9 00 95 A4			mva #$00 :STACKORIGIN+STACKWIDTH,x
 14707 5695 A9 0A			lda #$0A
 14708 5697 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 14709 569A B4 94			ldy :STACKORIGIN,x
 14710 569C AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 14711 569F 99 8C A8			sta adr.C,y
 14712 56A2 CA				dex
 14713
 14714 				; optimize OK (bank.pas), line = 166
 14715
 14716 56A3 A9 00			lda #$00
 14717 56A5 8D 90 A8			sta SAFEOPEN
 14718
 14719 				; optimize OK (bank.pas), line = 167
 14720
 14721 56A8 8D 93 A8			sta WHPOS
 14722
 14723 				; optimize OK (bank.pas), line = 168
 14724
 14725 56AB 8D 91 A8			sta BASE
 14726 56AE A9 DD			lda #$DD
 14727 56B0 8D 92 A8			sta BASE+1
 14728
 14729 				; --- RepeatUntilProlog
 14730 56B3			l_3645
 14731
 14732 				; optimize OK (bank.pas), line = 171
 14733
 14734 56B3 A9 00			lda #$00
 14735 56B5 85 AF			sta :STACKORIGIN+STACKWIDTH+11
 14736 56B7 AD 93 A8			lda WHPOS
 14737 56BA 0A				asl @
 14738 56BB 26 AF			rol :STACKORIGIN+STACKWIDTH+11
 14739 56BD 18 6D 91 A8			add BASE
 14740 56C1 A8				tay
 14741 56C2 AD 92 A8			lda BASE+1
 14742 56C5 65 AF			adc :STACKORIGIN+STACKWIDTH+11
 14743 56C7 85 81			sta :bp+1
 14744 56C9 A9 6E			lda #$6E
 14745 56CB 91 80			sta (:bp),y
 14746
 14747 				; optimize OK (bank.pas), line = 172
 14748
 14749 56CD A9 00			lda #$00
 14750 56CF 85 AF			sta :STACKORIGIN+STACKWIDTH+11
 14751 56D1 AD 93 A8			lda WHPOS
 14752 56D4 0A				asl @
 14753 56D5 26 AF			rol :STACKORIGIN+STACKWIDTH+11
 14754 56D7 18 6D 91 A8			add BASE
 14755 56DB 85 9E			sta :STACKORIGIN+10
 14756 56DD AD 92 A8			lda BASE+1
 14757 56E0 65 AF			adc :STACKORIGIN+STACKWIDTH+11
 14758 56E2 85 AE			sta :STACKORIGIN+STACKWIDTH+10
 14759 56E4 A9 02			lda #$02
 14760 56E6 18 65 9E			add :STACKORIGIN+10
 14761 56E9 A8				tay
 14762 56EA A9 00			lda #$00
 14763 56EC 65 AE			adc :STACKORIGIN+STACKWIDTH+10
 14764 56EE 85 81			sta :bp+1
 14765 56F0 A9 6F			lda #$6F
 14766 56F2 91 80			sta (:bp),y
 14767
 14768 				; optimize OK (bank.pas), line = 173
 14769
 14770 56F4 A9 00			lda #$00
 14771 56F6 8D 87 A8			sta K
 14772
 14773 56F9			l_366E
 14774 				; --- ForToDoCondition
 14775 56F9 AC 87 A8			ldy K
 14776 56FC C0 03			cpy #$03
 14777 56FE B0 2D			jcs l_367C
 14778
 14779 				; optimize OK (bank.pas), line = 174
 14780
 14781 5700 A9 70			lda #$70
 14782 5702 79 8C A8			adc adr.C,y
 14783 5705 85 9D			sta :STACKORIGIN+9
 14784 5707 AD 91 A8			lda BASE
 14785 570A 18 69 01			add #$01
 14786 570D 85 9E			sta :STACKORIGIN+10
 14787 570F AD 92 A8			lda BASE+1
 14788 5712 69 00			adc #$00
 14789 5714 85 AE			sta :STACKORIGIN+STACKWIDTH+10
 14790 5716 AD 87 A8			lda K
 14791 5719 18 65 9E			add :STACKORIGIN+10
 14792 571C 85 82			sta :bp2
 14793 571E A9 00			lda #$00
 14794 5720 65 AE			adc :STACKORIGIN+STACKWIDTH+10
 14795 5722 85 83			sta :bp2+1
 14796 5724 A5 9D			lda :STACKORIGIN+9
 14797 5726 91 82			sta (:bp2),y
 14798 5728 EE 87 A8			inc K
 14799 572B D0 CC			jne l_366E
 14800 572D			l_367C
 14801
 14802 				; --- RepeatUntilProlog
 14803 572D			l_369F
 14804
 14805 				; optimize FAIL ('CHECKKEYANDSTICK', bank.pas), line = 176
 14806
 14807 572D 20 54 1C			jsr CHECKKEYANDSTICK
 14808 5730 AD F1 A4			lda CHECKKEYANDSTICK.RESULT
 14809 5733 8D 8F A8			sta CH
 14810
 14811 				; optimize OK (bank.pas), line = 177
 14812
 14813 5736 C9 0F			cmp #$0F
 14814 5738 F0 10			jeq l_369Fx
 14815 573A C9 0E			cmp #$0E
 14816 573C F0 0C			jeq l_369Fx
 14817 573E C9 07			cmp #$07
 14818 5740 F0 08			jeq l_369Fx
 14819 5742 C9 06			cmp #$06
 14820 5744 F0 04			jeq l_369Fx
 14821 5746 C9 2F			cmp #$2F
 14822 5748 D0 E3			jne l_369F
 14823 574A			l_369Fx
 14824
 14825 				; optimize FAIL ('WAITFORKEYRELEASE', bank.pas), line = 178
 14826
 14827 574A 20 AE 1C			jsr WAITFORKEYRELEASE
 14828
 14829 				; optimize OK (bank.pas), line = 179
 14830
 14831 574D A9 05			lda #$05
 14832 574F 20 7C 27			jsr WAITFRAMES
 14833
 14834 				; optimize OK (bank.pas), line = 180
 14835
 14836 5752 AD 8F A8			lda CH
 14837 5755 8D 95 A8			sta @CASETMP_0011
 14838 5758 C9 0F			cmp #$0F
 14839 575A D0 0F			jne l_36EE
 14840 				@
 14841
 14842 				; optimize OK (bank.pas), line = 181
 14843
 14844 575C AC 93 A8			ldy WHPOS
 14845 575F B9 8C A8			lda adr.C,y
 14846 5762 38 E9 01			sub #$01
 14847 5765 99 8C A8			sta adr.C,y
 14848 5768 4C 7B 57			jmp a_0011
 14849 576B			l_36EE
 14850 576B C9 0E			cmp #$0E
 14851 576D D0 0C			jne l_3705
 14852
 14853 				; optimize OK (bank.pas), line = 182
 14854
 14855 576F AC 93 A8			ldy WHPOS
 14856 5772 B9 8C A8			lda adr.C,y
 14857 5775 18 69 01			add #$01
 14858 5778 99 8C A8			sta adr.C,y
 14859 577B			l_3705
 14860 577B			a_0011
 14861
 14862 				; optimize OK (bank.pas), line = 185
 14863
 14864 577B AD 8F A8			lda CH
 14865 577E C9 07			cmp #$07
 14866 5780 F0 04			jeq l_3737x
 14867 5782 C9 06			cmp #$06
 14868 5784 D0 5F			jne l_3737
 14869 5786			l_3737x
 14870
 14871 				; optimize OK (bank.pas), line = 187
 14872
 14873 5786 A9 00			lda #$00
 14874 5788 85 AF			sta :STACKORIGIN+STACKWIDTH+11
 14875 578A AD 93 A8			lda WHPOS
 14876 578D 0A				asl @
 14877 578E 26 AF			rol :STACKORIGIN+STACKWIDTH+11
 14878 5790 18 6D 91 A8			add BASE
 14879 5794 A8				tay
 14880 5795 AD 92 A8			lda BASE+1
 14881 5798 65 AF			adc :STACKORIGIN+STACKWIDTH+11
 14882 579A 85 81			sta :bp+1
 14883 579C A9 00			lda #$00
 14884 579E 91 80			sta (:bp),y
 14885
 14886 				; optimize OK (bank.pas), line = 188
 14887
 14888 57A0 85 AF			sta :STACKORIGIN+STACKWIDTH+11
 14889 57A2 AD 93 A8			lda WHPOS
 14890 57A5 0A				asl @
 14891 57A6 26 AF			rol :STACKORIGIN+STACKWIDTH+11
 14892 57A8 18 6D 91 A8			add BASE
 14893 57AC 85 9E			sta :STACKORIGIN+10
 14894 57AE AD 92 A8			lda BASE+1
 14895 57B1 65 AF			adc :STACKORIGIN+STACKWIDTH+11
 14896 57B3 85 AE			sta :STACKORIGIN+STACKWIDTH+10
 14897 57B5 A9 02			lda #$02
 14898 57B7 18 65 9E			add :STACKORIGIN+10
 14899 57BA A8				tay
 14900 57BB A9 00			lda #$00
 14901 57BD 65 AE			adc :STACKORIGIN+STACKWIDTH+10
 14902 57BF 85 81			sta :bp+1
 14903 57C1 A9 00			lda #$00
 14904 57C3 91 80			sta (:bp),y
 14905
 14906 				; optimize OK (bank.pas), line = 189
 14907
 14908 57C5 AD 8F A8			lda CH
 14909 57C8 C9 07			cmp #$07
 14910 57CA D0 0A			jne l_376A
 14911
 14912 				; optimize OK (bank.pas), line = 191
 14913
 14914 57CC AD 93 A8			lda WHPOS
 14915 57CF C9 02			cmp #$02
 14916 57D1 B0 03			jcs l_377D
 14917 57D3 EE 93 A8			inc WHPOS
 14918 57D6			l_377D
 14919 57D6			l_376A
 14920
 14921 				; optimize OK (bank.pas), line = 193
 14922
 14923 57D6 AD 8F A8			lda CH
 14924 57D9 C9 06			cmp #$06
 14925 57DB D0 08			jne l_379E
 14926
 14927 				; optimize OK (bank.pas), line = 195
 14928
 14929 57DD AD 93 A8			lda WHPOS
 14930 57E0 F0 03			jeq l_37B1
 14931 57E2 CE 93 A8			dec WHPOS
 14932 57E5			l_37B1
 14933 57E5			l_379E
 14934 57E5			l_3737
 14935
 14936 				; optimize OK (bank.pas), line = 199
 14937
 14938 57E5 AD 8A CD			lda CURRENTPLAYER
 14939 57E8 0A				asl @
 14940 57E9 0A				asl @
 14941 57EA 0A				asl @
 14942 57EB A8				tay
 14943 57EC B9 E8 CC			lda adr.GANGSTERINT,y
 14944 57EF 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 14945 57F2 A0 01			ldy #1
 14946 57F4 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 14947 57F7 C9 04			cmp #$04
 14948 57F9 90 01			bcc @+
 14949 57FB 88				dey
 14950 				@
 14951 57FC 98				tya
 14952 57FD 8D 94 A8			sta HOPS
 14953
 14954 				; optimize OK (bank.pas), line = 200
 14955
 14956 5800 AD 8F A8			lda CH
 14957 5803 C9 0F			cmp #$0F
 14958 5805 F0 04			jeq l_37F4x
 14959 5807 C9 0E			cmp #$0E
 14960 5809 D0 68			jne l_37F4
 14961 580B			l_37F4x
 14962
 14963 				; optimize OK (bank.pas), line = 202
 14964
 14965 580B AC 93 A8			ldy WHPOS
 14966 580E B9 8C A8			lda adr.C,y
 14967 5811 38 E9 0A			sub #$0A
 14968 5814 50 02			svc
 14969 5816 49 80			eor #$80
 14970 5818 30 05			jmi l_380A
 14971 581A A9 00			lda #$00
 14972 581C 99 8C A8			sta adr.C,y
 14973 581F			l_380A
 14974
 14975 				; optimize OK (bank.pas), line = 203
 14976
 14977 581F AC 93 A8			ldy WHPOS
 14978 5822 B9 8C A8			lda adr.C,y
 14979 5825 10 05			jpl l_3829
 14980 5827 A9 09			lda #$09
 14981 5829 99 8C A8			sta adr.C,y
 14982 582C			l_3829
 14983
 14984 				; optimize OK (bank.pas), line = 204
 14985
 14986 582C CE 88 A8			dec NATTEMPTS
 14987
 14988 				; optimize OK (bank.pas), line = 207
 14989
 14990 582F AD 94 A8			lda HOPS
 14991 5832 D0 10			jne l_3863
 14992 5834 AC 93 A8			ldy WHPOS
 14993 5837 B9 89 A8			lda adr.T,y
 14994 583A D9 8C A8			cmp adr.C,y
 14995 583D D0 05			jne l_3863
 14996
 14997 				; optimize OK (bank.pas), line = 208
 14998
 14999 583F A9 0A			lda #$0A
 15000 5841 4C 46 58			jmp l_386F
 15001 5844			l_3863
 15002
 15003 				; optimize OK (bank.pas), line = 210
 15004
 15005 5844 A9 0C			lda #$0C
 15006 5846			l_386F
 15007 5846 8D 14 9E			sta RMT.TRMT.INIT.A
 15008 5849 AD 1F 9A			lda MSX
 15009 584C AC 20 9A			ldy MSX+1
 15010 584F 20 05 15			jsr RMT.TRMT.INIT
 15011
 15012 				; optimize FAIL ('RMT.TRMT.PLAY', bank.pas), line = 211
 15013
 15014 5852 AD 1F 9A			lda MSX
 15015 5855 AC 20 9A			ldy MSX+1
 15016 5858 20 41 15			jsr RMT.TRMT.PLAY
 15017
 15018 				; optimize OK (bank.pas), line = 212
 15019
 15020 585B A9 01			lda #$01
 15021 585D 8D 11 CA			sta PLAYMUSIC
 15022
 15023 				; optimize OK (bank.pas), line = 213
 15024
 15025 5860 A9 0A			lda #$0A
 15026 5862 20 7C 27			jsr WAITFRAMES
 15027
 15028 				; optimize FAIL ('RMT.TRMT.STOP', bank.pas), line = 214
 15029
 15030 5865 AD 1F 9A			lda MSX
 15031 5868 AC 20 9A			ldy MSX+1
 15032 586B 20 81 15			jsr RMT.TRMT.STOP
 15033
 15034 				; optimize OK (bank.pas), line = 215
 15035
 15036 586E A9 00			lda #$00
 15037 5870 8D 11 CA			sta PLAYMUSIC
 15038 5873			l_37F4
 15039
 15040 				; optimize OK (bank.pas), line = 228
 15041
 15042 5873 AD 94 A8			lda HOPS
 15043 5876 D0 1D			jne l_38C1
 15044 5878 AD 8C A8			lda adr.C
 15045 587B CD 89 A8			cmp adr.T
 15046 587E D0 15			jne l_38C1
 15047 5880 AD 8D A8			lda adr.C+$01
 15048 5883 CD 8A A8			cmp adr.T+$01
 15049 5886 D0 0D			jne l_38C1
 15050 5888 AD 8E A8			lda adr.C+$02
 15051 588B CD 8B A8			cmp adr.T+$02
 15052 588E D0 05			jne l_38C1
 15053 5890 A9 01			lda #$01
 15054 5892 8D 90 A8			sta SAFEOPEN
 15055 5895			l_38C1
 15056
 15057 				; optimize OK (bank.pas), line = 229
 15058
 15059 5895 AD 8F A8			lda CH
 15060 5898 C9 2F			cmp #$2F
 15061 589A F0 0F			jeq l_3645x
 15062 589C AD 88 A8			lda NATTEMPTS
 15063 589F F0 0A			jeq l_3645x
 15064 58A1 AD 90 A8			lda SAFEOPEN
 15065 58A4 C9 01			cmp #$01
 15066 58A6 F0 03 4C B3 56		jne l_3645
 15067 58AB			l_3645x
 15068
 15069 				; optimize OK (bank.pas), line = 231
 15070
 15071 58AB A9 00			lda #$00
 15072 58AD 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
 15073 58B0 A9 15			lda #$15
 15074 58B2 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
 15075 58B5 20 AC 17			jsr B_CRT.CRT_GOTOXY
 15076
 15077 				; optimize OK (bank.pas), line = 232
 15078
 15079 58B8 AD 8F A8			lda CH
 15080 58BB C9 2F			cmp #$2F
 15081 58BD D0 25			jne l_3902
 15082
 15083 				; optimize OK (bank.pas), line = 234
 15084
 15085 58BF A9 15			lda #$15
 15086 58C1 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 15087 58C4 A9 09			lda #$09
 15088 58C6 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 15089 58C9 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 15090
 15091 				; optimize OK (bank.pas), line = 235
 15092
 15093 58CC A9 64			lda #$64
 15094 58CE 20 7C 27			jsr WAITFRAMES
 15095
 15096 				; optimize FAIL ('WAITFORKEY', bank.pas), line = 236
 15097
 15098 58D1 20 4A 1E			jsr WAITFORKEY
 15099
 15100 				; optimize FAIL ('ENABLECONSOLE', bank.pas), line = 237
 15101
 15102 58D4 20 B0 27			jsr ENABLECONSOLE
 15103
 15104 				; optimize OK (bank.pas), line = 238
 15105
 15106 58D7 A9 88			lda #$88
 15107 58D9 8D F6 EA			sta MAPCOLORA
 15108
 15109 				; optimize OK (bank.pas), line = 239
 15110
 15111 58DC A9 06			lda #$06
 15112 58DE 8D F7 EA			sta MAPCOLORB
 15113 58E1 4C B5 59			jmp @exit
 15114 58E4			l_3902
 15115
 15116 				; optimize OK (bank.pas), line = 243
 15117
 15118 58E4 AD 90 A8			lda SAFEOPEN
 15119 58E7 C9 01			cmp #$01
 15120 58E9 D0 2F			jne l_3926
 15121
 15122 				; optimize OK (bank.pas), line = 244
 15123
 15124 58EB A9 15			lda #$15
 15125 58ED 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 15126 58F0 A9 0A			lda #$0A
 15127 58F2 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 15128 58F5 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 15129
 15130 				; optimize OK (bank.pas), line = 246
 15131
 15132 58F8 A9 3C			lda #$3C
 15133 58FA 20 7C 27			jsr WAITFRAMES
 15134
 15135 				; optimize FAIL ('WAITFORKEY', bank.pas), line = 247
 15136
 15137 58FD 20 4A 1E			jsr WAITFORKEY
 15138
 15139 				; optimize OK (bank.pas), line = 248
 15140
 15141 5900 A9 88			lda #$88
 15142 5902 8D F6 EA			sta MAPCOLORA
 15143
 15144 				; optimize OK (bank.pas), line = 249
 15145
 15146 5905 A9 06			lda #$06
 15147 5907 8D F7 EA			sta MAPCOLORB
 15148
 15149 				; optimize OK (bank.pas), line = 250
 15150
 15151 590A A9 01			lda #$01
 15152 590C 8D D1 A7			sta CRACKEDBANK.P
 15153 590F A9 00			lda #$00
 15154 5911 8D D2 A7			sta CRACKEDBANK.P+1
 15155 5914 20 37 30			jsr CRACKEDBANK
 15156 5917 4C B5 59			jmp @exit
 15157 591A			l_3926
 15158
 15159 				; optimize OK (bank.pas), line = 255
 15160
 15161 591A A9 14			lda #$14
 15162 591C 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 15163 591F A9 0B			lda #$0B
 15164 5921 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 15165 5924 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 15166
 15167 				; optimize OK (bank.pas), line = 256
 15168
 15169 5927 A9 15			lda #$15
 15170 5929 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 15171 592C A9 0C			lda #$0C
 15172 592E 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 15173 5931 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 15174
 15175 				; optimize OK (bank.pas), line = 257
 15176
 15177 5934 A9 00			lda #$00
 15178 5936 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
 15179 5939 A9 15			lda #$15
 15180 593B 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
 15181 593E 20 AC 17			jsr B_CRT.CRT_GOTOXY
 15182
 15183 				; optimize OK (bank.pas), line = 259
 15184
 15185 5941 A9 01			lda #$01
 15186 5943 8D 11 CA			sta PLAYMUSIC
 15187
 15188 				; optimize OK (bank.pas), line = 260
 15189
 15190 5946 A9 08			lda #$08
 15191 5948 8D 14 9E			sta RMT.TRMT.INIT.A
 15192 594B AD 1F 9A			lda MSX
 15193 594E AC 20 9A			ldy MSX+1
 15194 5951 20 05 15			jsr RMT.TRMT.INIT
 15195
 15196 				; optimize FAIL ('RMT.TRMT.PLAY', bank.pas), line = 261
 15197
 15198 5954 AD 1F 9A			lda MSX
 15199 5957 AC 20 9A			ldy MSX+1
 15200 595A 20 41 15			jsr RMT.TRMT.PLAY
 15201
 15202 				; optimize OK (bank.pas), line = 262
 15203
 15204 595D A9 00			lda #$00
 15205 595F 8D 87 A8			sta K
 15206
 15207 5962			l_3952
 15208 				; --- ForToDoCondition
 15209 5962 AD 87 A8			lda K
 15210 5965 C9 07			cmp #$07
 15211 5967 B0 19			jcs l_3960
 15212
 15213 				; optimize OK (bank.pas), line = 264
 15214
 15215 5969 A9 34			lda #$34
 15216 596B 8D 18 C9			sta LOCCOLBK
 15217
 15218 				; optimize OK (bank.pas), line = 265
 15219
 15220 596E A9 0F			lda #$0F
 15221 5970 20 7C 27			jsr WAITFRAMES
 15222
 15223 				; optimize OK (bank.pas), line = 266
 15224
 15225 5973 A9 00			lda #$00
 15226 5975 8D 18 C9			sta LOCCOLBK
 15227
 15228 				; optimize OK (bank.pas), line = 267
 15229
 15230 5978 A9 0F			lda #$0F
 15231 597A 20 7C 27			jsr WAITFRAMES
 15232
 15233 				; --- ForToDoEpilog
 15234 597D EE 87 A8			inc K
 15235 5980 D0 E0			jne l_3952
 15236 5982			l_3960
 15237
 15238 				; optimize FAIL ('RMT.TRMT.STOP', bank.pas), line = 269
 15239
 15240 5982 AD 1F 9A			lda MSX
 15241 5985 AC 20 9A			ldy MSX+1
 15242 5988 20 81 15			jsr RMT.TRMT.STOP
 15243
 15244 				; optimize OK (bank.pas), line = 270
 15245
 15246 598B A9 00			lda #$00
 15247 598D 8D 11 CA			sta PLAYMUSIC
 15248
 15249 				; optimize FAIL ('WAITFORKEY', bank.pas), line = 272
 15250
 15251 5990 20 4A 1E			jsr WAITFORKEY
 15252
 15253 				; optimize OK (bank.pas), line = 273
 15254
 15255 5993 A9 88			lda #$88
 15256 5995 8D F6 EA			sta MAPCOLORA
 15257
 15258 				; optimize OK (bank.pas), line = 274
 15259
 15260 5998 A9 06			lda #$06
 15261 599A 8D F7 EA			sta MAPCOLORB
 15262
 15263 				; optimize FAIL ('PREPAREFIGHTAGAINSTPOLICE', bank.pas), line = 275
 15264
 15265 599D 20 22 31			jsr PREPAREFIGHTAGAINSTPOLICE
 15266
 15267 				; optimize FAIL ('DOFIGHT', bank.pas), line = 276
 15268
 15269 59A0 20 9F 4D			jsr DOFIGHT
 15270 59A3 AD 4E A8			lda DOFIGHT.RESULT
 15271 59A6 C9 01			cmp #$01
 15272 59A8 D0 0B			jne l_3990
 15273
 15274 				; optimize FAIL ('GOTCAUGHT', bank.pas), line = 278
 15275
 15276 59AA 20 32 36			jsr GOTCAUGHT
 15277
 15278 				; optimize OK (bank.pas), line = 279
 15279
 15280 59AD A9 11			lda #$11
 15281 59AF 8D 86 A8			sta RESULT
 15282 59B2 4C B5 59			jmp @exit
 15283 59B5			l_3990
 15284 59B5			l_353C
 15285 59B5			@exit
 15286
 15287 				; ------------------------------------------------------------
 15288
 15289 = A886			RESULT	= DATAORIGIN+$0C30
 15290 = A887			K	= DATAORIGIN+$0C31
 15291 = A888			NATTEMPTS	= DATAORIGIN+$0C32
 15292 = A889			adr.T	= [DATAORIGIN+$0C33] .array [3]
 15293 59B5			.var T	= adr.T .word
 15294 = A88C			adr.C	= [DATAORIGIN+$0C36] .array [3]
 15295 59B5			.var C	= adr.C .word
 15296 = A88F			CH	= DATAORIGIN+$0C39
 15297 = A890			SAFEOPEN	= DATAORIGIN+$0C3A
 15298 = A891			BASE	= DATAORIGIN+$0C3B
 15299 = A893			WHPOS	= DATAORIGIN+$0C3D
 15300 = A894			HOPS	= DATAORIGIN+$0C3E
 15301 = A895			@CASETMP_0011	= DATAORIGIN+$0C3F
 15302
 15303 = A887			@VarData	= K
 15304 = 000F			@VarDataSize	= 15
 15305
 15306 59B5 60				rts						; ret
 15307 = 59B6 89 A8		T
 15307 = 59B8 8C A8		C
 15307 				.endl
 15308
 15309 59BA			.local	CHECKBOOZE					; PROCEDURE
 15310
 15311 				; optimize OK (cardealer.pas), line = 6
 15312
 15313 59BA AC 8A CD			ldy CURRENTPLAYER
 15314 59BD B9 4C C9			lda adr.PLCAR,y
 15315 59C0 8D 96 A8			sta R
 15316
 15317 				; optimize OK (cardealer.pas), line = 7
 15318
 15319 59C3 B9 44 C9			lda adr.PLALCOHOL,y
 15320 59C6 85 9D			sta :STACKORIGIN+9
 15321 59C8 AC 96 A8			ldy R
 15322 59CB B9 0C E7			lda adr.CARCARGO,y
 15323 59CE C5 9D			cmp :STACKORIGIN+9
 15324 59D0 B0 13			jcs l_39C1
 15325
 15326 				; optimize OK (cardealer.pas), line = 9
 15327
 15328 59D2 AC 8A CD			ldy CURRENTPLAYER
 15329 59D5 99 44 C9			sta adr.PLALCOHOL,y
 15330
 15331 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', cardealer.pas), line = 10
 15332
 15333 59D8 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 15334
 15335 				; optimize OK (cardealer.pas), line = 11
 15336
 15337 59DB A9 14			lda #$14
 15338 59DD 20 C6 1C			jsr CRT_WRITE_LOCSTR
 15339
 15340 				; optimize OK (cardealer.pas), line = 12
 15341
 15342 59E0 A9 15			lda #$15
 15343 59E2 20 C6 1C			jsr CRT_WRITE_LOCSTR
 15344 59E5			l_39C1
 15345
 15346 				; ------------------------------------------------------------
 15347
 15348 = A896			R	= DATAORIGIN+$0C40
 15349
 15350 = A896			@VarData	= R
 15351 = 0001			@VarDataSize	= 1
 15352
 15353 59E5			@exit
 15354 					.ifdef @new
 15355 					lda <@VarData
 15356 					sta :ztmp
 15357 					lda >@VarData
 15358 					ldy #@VarDataSize-1
 15359 					jmp @FreeMem
 15360 					els
 15361 59E5 60				rts						; ret
 15362 					eif
 15363 				.endl
 15364
 15365 59E6			.local	CARDEALERCHOICES				; FUNCTION
 15366
 15367 				; optimize OK (cardealer.pas), line = 26
 15368
 15369 59E6 AD 22 C9			lda CURRENTCHOICE
 15370 59E9 C9 01			cmp #$01
 15371 59EB F0 03 4C A6 5B		jne l_39EB
 15372
 15373 				; optimize FAIL ('SHOWLOCATIONHEADER', cardealer.pas), line = 28
 15374
 15375 59F0 20 7A 28			jsr SHOWLOCATIONHEADER
 15376
 15377 				; optimize OK (cardealer.pas), line = 29
 15378
 15379 59F3 A9 01			lda #$01
 15380 59F5 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 15381
 15382 				; optimize OK (cardealer.pas), line = 30
 15383
 15384 59F8 A9 02			lda #$02
 15385 59FA 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 15386
 15387 				; optimize OK (cardealer.pas), line = 33
 15388
 15389 59FD A9 04			lda #$04
 15390 59FF 8D 99 A8			sta MAXCAR
 15391
 15392 				; optimize OK (cardealer.pas), line = 34
 15393
 15394 5A02 AD 3D A7			lda CURRENTSUBLOCATION
 15395 5A05 C9 03			cmp #$03
 15396 5A07 90 05			jcc l_3A07
 15397
 15398 				; optimize OK (cardealer.pas), line = 35
 15399
 15400 5A09 A9 05			lda #$05
 15401 5A0B 8D 99 A8			sta MAXCAR
 15402 5A0E			l_3A07
 15403
 15404 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', cardealer.pas), line = 38
 15405
 15406 5A0E 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 15407
 15408 				; optimize OK (cardealer.pas), line = 39
 15409
 15410 5A11 A9 01			lda #$01
 15411 5A13 8D 98 A8			sta R
 15412
 15413 5A16			l_3A1A
 15414 				; --- ForToDoCondition
 15415 5A16 AD 98 A8			lda R
 15416 5A19 CD 99 A8			cmp MAXCAR
 15417 5A1C 90 02			scc
 15418 5A1E D0 62			jne l_3A28
 15419
 15420 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', cardealer.pas), line = 41
 15421
 15422 5A20 E8				inx
 15423 5A21 A9 6B 95 94			mva #$6B :STACKORIGIN,x
 15424 5A25 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 15425 5A29 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 15426
 15427 				; optimize OK (cardealer.pas), line = 42
 15428
 15429 5A2C AD 98 A8			lda R
 15430 5A2F 20 7E 18			jsr B_CRT.CRT_WRITE.@010180000
 15431
 15432 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', cardealer.pas), line = 43
 15433
 15434 5A32 E8				inx
 15435 5A33 A9 76 95 94			mva #$76 :STACKORIGIN,x
 15436 5A37 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 15437 5A3B 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 15438
 15439 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', cardealer.pas), line = 44
 15440
 15441 5A3E E8				inx
 15442 5A3F AD 98 A8			lda R
 15443 5A42 0A				asl @
 15444 5A43 A8				tay
 15445 5A44 B9 7D A4			lda adr.CARNAMES,y
 15446 5A47 95 94			sta :STACKORIGIN,x
 15447 5A49 B9 7E A4			lda adr.CARNAMES+1,y
 15448 5A4C 95 A4			sta :STACKORIGIN+STACKWIDTH,x
 15449 5A4E 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 15450
 15451 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', cardealer.pas), line = 45
 15452
 15453 5A51 E8				inx
 15454 5A52 A9 9A 95 94			mva #$9A :STACKORIGIN,x
 15455 5A56 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 15456 5A5A 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 15457
 15458 				; optimize OK (cardealer.pas), line = 46
 15459
 15460 5A5D AD 98 A8			lda R
 15461 5A60 0A				asl @
 15462 5A61 A8				tay
 15463 5A62 B9 00 E7			lda adr.CARPRICES,y
 15464 5A65 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 15465 5A68 B9 01 E7			lda adr.CARPRICES+1,y
 15466 5A6B 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 15467 5A6E 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 15468
 15469 				; optimize FAIL ('CRT_WRITELN', cardealer.pas), line = 47
 15470
 15471 5A71 E8				inx
 15472 5A72 A9 9D 95 94			mva #$9D :STACKORIGIN,x
 15473 5A76 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 15474 5A7A 20 A9 1E			jsr CRT_WRITELN
 15475
 15476 				; --- ForToDoEpilog
 15477 5A7D EE 98 A8			inc R
 15478 5A80 D0 94			jne l_3A1A
 15479 5A82			l_3A28
 15480
 15481 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', cardealer.pas), line = 50
 15482
 15483 5A82 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 15484
 15485 				; optimize OK (cardealer.pas), line = 51
 15486
 15487 5A85 A9 03			lda #$03
 15488 5A87 20 C6 1C			jsr CRT_WRITE_LOCSTR
 15489
 15490 				; optimize OK (cardealer.pas), line = 52
 15491
 15492 5A8A A9 00			lda #$00
 15493 5A8C 8D 1C A7			sta READVALUE.MINVALUE
 15494 5A8F 8D 1D A7			sta READVALUE.MINVALUE+1
 15495 5A92 AD 99 A8			lda MAXCAR
 15496 5A95 8D 1E A7			sta READVALUE.MAXVALUE
 15497 5A98 A9 00			lda #$00
 15498 5A9A 8D 1F A7			sta READVALUE.MAXVALUE+1
 15499 5A9D 20 26 20			jsr READVALUE
 15500 5AA0 AD 20 A7			lda READVALUE.RESULT
 15501 5AA3 8D 9E A8			sta NEWCAR
 15502
 15503 				; optimize OK (cardealer.pas), line = 53
 15504
 15505 5AA6 D0 03 4C EC 5C		jeq @exit
 15506 5AAB			l_3A62
 15507
 15508 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', cardealer.pas), line = 54
 15509
 15510 5AAB 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 15511
 15512 				; optimize OK (cardealer.pas), line = 55
 15513
 15514 5AAE AD 9E A8			lda NEWCAR
 15515 5AB1 0A				asl @
 15516 5AB2 A8				tay
 15517 5AB3 B9 00 E7			lda adr.CARPRICES,y
 15518 5AB6 8D 9A A8			sta PRICE
 15519 5AB9 B9 01 E7			lda adr.CARPRICES+1,y
 15520 5ABC 8D 9B A8			sta PRICE+1
 15521
 15522 				; optimize OK (cardealer.pas), line = 56
 15523
 15524 5ABF AD 9A A8			lda PRICE
 15525 5AC2 8D D8 A7			sta PAYMONEY.PRICE
 15526 5AC5 AD 9B A8			lda PRICE+1
 15527 5AC8 8D D9 A7			sta PAYMONEY.PRICE+1
 15528 5ACB 20 3B 32			jsr PAYMONEY
 15529 5ACE AD DA A7			lda PAYMONEY.RESULT
 15530 5AD1 D0 03 4C EC 5C		jeq @exit
 15531 5AD6			l_3A80
 15532
 15533 				; optimize OK (cardealer.pas), line = 58
 15534
 15535 5AD6 AC 8A CD			ldy CURRENTPLAYER
 15536 5AD9 B9 4C C9			lda adr.PLCAR,y
 15537 5ADC 8D 98 A8			sta R
 15538
 15539 				; optimize OK (cardealer.pas), line = 59
 15540
 15541 5ADF D0 03 4C 6E 5B		jeq l_3A9E
 15542
 15543 				; optimize OK (cardealer.pas), line = 61
 15544
 15545 5AE4 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 15546 5AE7 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 15547 5AEA 8D F0 A3			sta TMP
 15548
 15549 				; optimize OK (cardealer.pas), line = 62
 15550
 15551 5AED A9 00			lda #$00
 15552 5AEF 85 CE			sta :STACKORIGIN+STACKWIDTH*3+10
 15553 5AF1 85 BE			sta :STACKORIGIN+STACKWIDTH*2+10
 15554 5AF3 85 AE			sta :STACKORIGIN+STACKWIDTH+10
 15555 5AF5 AD F0 A3			lda TMP
 15556 5AF8 A0 09			ldy #$09
 15557 5AFA F0 0A			beq l_0000_e
 15558 5AFC			l_0000_b
 15559 5AFC 0A				asl @
 15560 5AFD 26 AE			rol :STACKORIGIN+STACKWIDTH+10
 15561 5AFF 26 BE			rol :STACKORIGIN+STACKWIDTH*2+10
 15562 5B01 26 CE			rol :STACKORIGIN+STACKWIDTH*3+10
 15563 5B03 88				dey
 15564 5B04 D0 F6			bne l_0000_b
 15565 5B06			l_0000_e
 15566 5B06 18 69 E8			add #$E8
 15567 5B09 8D 9C A8			sta OLDPRICE
 15568 5B0C A9 03			lda #$03
 15569 5B0E 65 AE			adc :STACKORIGIN+STACKWIDTH+10
 15570 5B10 8D 9D A8			sta OLDPRICE+1
 15571
 15572 				; optimize OK (cardealer.pas), line = 63
 15573
 15574 5B13 A9 00			lda #$00
 15575 5B15 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 15576 5B18 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 15577 5B1B 8D F0 A3			sta TMP
 15578
 15579 				; optimize OK (cardealer.pas), line = 64
 15580
 15581 5B1E AD 9C A8			lda OLDPRICE
 15582 5B21 18 6D F0 A3			add TMP
 15583 5B25 8D 9C A8			sta OLDPRICE
 15584 5B28 90 03			scc
 15585 5B2A EE 9D A8			inc OLDPRICE+1
 15586
 15587 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', cardealer.pas), line = 66
 15588
 15589 5B2D 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 15590
 15591 				; optimize OK (cardealer.pas), line = 67
 15592
 15593 5B30 A9 04			lda #$04
 15594 5B32 20 C6 1C			jsr CRT_WRITE_LOCSTR
 15595
 15596 				; optimize OK (cardealer.pas), line = 68
 15597
 15598 5B35 AD 9C A8			lda OLDPRICE
 15599 5B38 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 15600 5B3B AD 9D A8			lda OLDPRICE+1
 15601 5B3E 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 15602 5B41 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 15603
 15604 				; optimize OK (cardealer.pas), line = 69
 15605
 15606 5B44 A9 05			lda #$05
 15607 5B46 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 15608
 15609 				; optimize OK (cardealer.pas), line = 70
 15610
 15611 5B49 A9 12			lda #$12
 15612 5B4B 20 C6 1C			jsr CRT_WRITE_LOCSTR
 15613
 15614 				; optimize FAIL ('GETYESNO', cardealer.pas), line = 72
 15615
 15616 5B4E 20 08 20			jsr GETYESNO
 15617 5B51 AD 1B A7			lda GETYESNO.RESULT
 15618 5B54 8D 98 A8			sta R
 15619
 15620 				; optimize OK (cardealer.pas), line = 73
 15621
 15622 5B57 D0 03 4C EC 5C		jeq @exit
 15623 5B5C			l_3AE4
 15624
 15625 				; optimize OK (cardealer.pas), line = 74
 15626
 15627 5B5C AD 9C A8			lda OLDPRICE
 15628 5B5F 8D CB A7			sta ADDMONEY.AMOUNT
 15629 5B62 AD 9D A8			lda OLDPRICE+1
 15630 5B65 8D CC A7			sta ADDMONEY.AMOUNT+1
 15631 5B68 20 98 2F			jsr ADDMONEY
 15632
 15633 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', cardealer.pas), line = 75
 15634
 15635 5B6B 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 15636 5B6E			l_3A9E
 15637
 15638 				; optimize OK (cardealer.pas), line = 78
 15639
 15640 5B6E A9 06			lda #$06
 15641 5B70 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 15642
 15643 				; optimize OK (cardealer.pas), line = 79
 15644
 15645 5B73 AD 9D A8			lda OLDPRICE+1
 15646 5B76 0D 9C A8			ora OLDPRICE
 15647 5B79 F0 19			jeq l_3B00
 15648
 15649 				; optimize OK (cardealer.pas), line = 81
 15650
 15651 5B7B A9 07			lda #$07
 15652 5B7D 20 C6 1C			jsr CRT_WRITE_LOCSTR
 15653
 15654 				; optimize OK (cardealer.pas), line = 82
 15655
 15656 5B80 AD 9C A8			lda OLDPRICE
 15657 5B83 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 15658 5B86 AD 9D A8			lda OLDPRICE+1
 15659 5B89 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 15660 5B8C 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 15661
 15662 				; optimize OK (cardealer.pas), line = 83
 15663
 15664 5B8F A9 05			lda #$05
 15665 5B91 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 15666 5B94			l_3B00
 15667
 15668 				; optimize OK (cardealer.pas), line = 86
 15669
 15670 5B94 AC 8A CD			ldy CURRENTPLAYER
 15671 5B97 AD 9E A8			lda NEWCAR
 15672 5B9A 99 4C C9			sta adr.PLCAR,y
 15673
 15674 				; optimize FAIL ('CHECKBOOZE', cardealer.pas), line = 87
 15675
 15676 5B9D 20 BA 59			jsr CHECKBOOZE
 15677
 15678 				; optimize FAIL ('WAITFORKEY', cardealer.pas), line = 88
 15679
 15680 5BA0 20 4A 1E			jsr WAITFORKEY
 15681 5BA3 4C EC 5C			jmp @exit
 15682 5BA6			l_39EB
 15683
 15684 				; optimize OK (cardealer.pas), line = 93
 15685
 15686 5BA6 AD 22 C9			lda CURRENTCHOICE
 15687 5BA9 C9 02			cmp #$02
 15688 5BAB F0 03 4C EC 5C		jne l_3B29
 15689
 15690 				; optimize FAIL ('SHOWLOCATIONHEADER', cardealer.pas), line = 95
 15691
 15692 5BB0 20 7A 28			jsr SHOWLOCATIONHEADER
 15693
 15694 				; optimize OK (cardealer.pas), line = 98
 15695
 15696 5BB3 A9 03			lda #$03
 15697 5BB5 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 15698 5BB8 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 15699 5BBB 8D F0 A3			sta TMP
 15700
 15701 				; optimize OK (cardealer.pas), line = 99
 15702
 15703 5BBE AD 3D A7			lda CURRENTSUBLOCATION
 15704 5BC1 C9 02			cmp #$02
 15705 5BC3 B0 15			jcs l_3B4E
 15706 5BC5 AD F0 A3			lda TMP
 15707 5BC8 F0 10			jeq l_3B4E
 15708
 15709 				; optimize OK (cardealer.pas), line = 101
 15710
 15711 5BCA A9 08			lda #$08
 15712 5BCC 20 C6 1C			jsr CRT_WRITE_LOCSTR
 15713
 15714 				; optimize FAIL ('WAITFORKEY', cardealer.pas), line = 102
 15715
 15716 5BCF 20 4A 1E			jsr WAITFORKEY
 15717
 15718 				; optimize OK (cardealer.pas), line = 103
 15719
 15720 5BD2 A9 06			lda #$06
 15721 5BD4 8D 97 A8			sta RESULT
 15722 5BD7 4C EC 5C			jmp @exit
 15723 5BDA			l_3B4E
 15724
 15725 				; optimize OK (cardealer.pas), line = 107
 15726
 15727 5BDA AC 8A CD			ldy CURRENTPLAYER
 15728 5BDD B9 B1 CD			lda adr.PLNGANGSTERS,y
 15729 5BE0 C9 02			cmp #$02
 15730 5BE2 90 05			jcc l_3B6D
 15731
 15732 				; optimize OK (cardealer.pas), line = 108
 15733
 15734 5BE4 A9 09			lda #$09
 15735 5BE6 20 C6 1C			jsr CRT_WRITE_LOCSTR
 15736 5BE9			l_3B6D
 15737
 15738 				; optimize OK (cardealer.pas), line = 109
 15739
 15740 5BE9 A9 00			lda #$00
 15741 5BEB 8D 23 C9			sta SHOWWEAPONS
 15742
 15743 				; optimize FAIL ('SELECTGANGSTER', cardealer.pas), line = 110
 15744
 15745 5BEE 20 11 34			jsr SELECTGANGSTER
 15746
 15747 				; optimize OK (cardealer.pas), line = 111
 15748
 15749 5BF1 AD 88 CD			lda CURRENTGANGSTER
 15750 5BF4 C9 63			cmp #$63
 15751 5BF6 D0 03 4C EC 5C		jeq @exit
 15752 5BFB			l_3B89
 15753
 15754 				; optimize OK (cardealer.pas), line = 114
 15755
 15756 5BFB AC 88 CD			ldy CURRENTGANGSTER
 15757 5BFE B9 E8 CC			lda adr.GANGSTERINT,y
 15758 5C01 4A				lsr @
 15759 5C02 4A				lsr @
 15760 5C03 8D 98 A8			sta R
 15761
 15762 				; optimize OK (cardealer.pas), line = 116
 15763
 15764 5C06 B9 C8 CC			lda adr.GANGSTERSTR,y
 15765 5C09 4A				lsr @
 15766 5C0A 4A				lsr @
 15767 5C0B 8D 99 A8			sta MAXCAR
 15768
 15769 				; optimize OK (cardealer.pas), line = 117
 15770
 15771 5C0E 18 6D 98 A8			add R
 15772 5C12 18 6D 98 A8			add R
 15773 5C16 18 6D 98 A8			add R
 15774 5C1A 8D 99 A8			sta MAXCAR
 15775
 15776 				; optimize OK (cardealer.pas), line = 118
 15777
 15778 5C1D A9 64			lda #$64
 15779 5C1F 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 15780 5C22 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 15781 5C25 CD 99 A8			cmp MAXCAR
 15782 5C28 B0 48			jcs l_3BD1
 15783
 15784 				; optimize OK (cardealer.pas), line = 121
 15785
 15786 5C2A A9 0A			lda #$0A
 15787 5C2C 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 15788
 15789 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', cardealer.pas), line = 122
 15790
 15791 5C2F 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 15792
 15793 				; optimize OK (cardealer.pas), line = 124
 15794
 15795 5C32 AC 8A CD			ldy CURRENTPLAYER
 15796 5C35 B9 4C C9			lda adr.PLCAR,y
 15797 5C38 D0 08			jne l_3BEA
 15798
 15799 				; optimize OK (cardealer.pas), line = 126
 15800
 15801 5C3A A9 0B			lda #$0B
 15802 5C3C 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 15803 5C3F 4C 4C 5C			jmp l_3BF6
 15804 5C42			l_3BEA
 15805
 15806 				; optimize OK (cardealer.pas), line = 130
 15807
 15808 5C42 A9 0C			lda #$0C
 15809 5C44 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 15810
 15811 				; optimize OK (cardealer.pas), line = 131
 15812
 15813 5C47 A9 0D			lda #$0D
 15814 5C49 20 C6 1C			jsr CRT_WRITE_LOCSTR
 15815 5C4C			l_3BF6
 15816
 15817 				; optimize FAIL (1, cardealer.pas), line = 134
 15818
 15819 5C4C E8				inx
 15820 5C4D A9 01 95 94			mva #$01 :STACKORIGIN,x
 15821 5C51 A9 05			lda #$05
 15822 5C53 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 15823 5C56 B5 94			lda :STACKORIGIN,x
 15824 5C58 18 6D 62 9C			add SYSTEM.RANDOM.@010180000.RESULT
 15825 5C5C 8D 98 A8			sta R
 15826 5C5F CA				dex
 15827
 15828 				; optimize OK (cardealer.pas), line = 135
 15829
 15830 5C60 AC 8A CD			ldy CURRENTPLAYER
 15831 5C63 AD 98 A8			lda R
 15832 5C66 99 4C C9			sta adr.PLCAR,y
 15833
 15834 				; optimize FAIL ('CHECKBOOZE', cardealer.pas), line = 136
 15835
 15836 5C69 20 BA 59			jsr CHECKBOOZE
 15837
 15838 				; optimize FAIL ('WAITFORKEY', cardealer.pas), line = 137
 15839
 15840 5C6C 20 4A 1E			jsr WAITFORKEY
 15841 5C6F 4C EC 5C			jmp @exit
 15842 5C72			l_3BD1
 15843
 15844 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', cardealer.pas), line = 142
 15845
 15846 5C72 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 15847
 15848 				; optimize OK (cardealer.pas), line = 143
 15849
 15850 5C75 A9 0E			lda #$0E
 15851 5C77 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 15852
 15853 				; optimize OK (cardealer.pas), line = 144
 15854
 15855 5C7A A9 11			lda #$11
 15856 5C7C 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 15857
 15858 				; optimize FAIL ('WAITFORKEY', cardealer.pas), line = 145
 15859
 15860 5C7F 20 4A 1E			jsr WAITFORKEY
 15861
 15862 				; optimize OK (cardealer.pas), line = 146
 15863
 15864 5C82 A9 00			lda #$00
 15865 5C84 8D 98 A8			sta R
 15866
 15867 				; -------------------  ASM Block 00000161  -------------------
 15868
 15869 				 
 15870 5C87 AD E1 9A		            lda loc_string_19
 15871 5C8A 8D AC A3		            sta adr.FP_GANG+$02
 15872 5C8D AD E2 9A		            lda loc_string_19+1
 15873 5C90 8D AD A3		            sta adr.FP_GANG+1+$02
 15874 				        
 15875 				; optimize OK (cardealer.pas), line = 156
 15876
 15877 5C93 A9 01			lda #$01
 15878 5C95 8D 02 E4			sta adr.FP_AI+$01
 15879
 15880 				; optimize OK (cardealer.pas), line = 157
 15881
 15882 5C98 8D 04 E4			sta adr.FP_N+$01
 15883
 15884 				; -------------------  ASM Block 00000162  -------------------
 15885
 15886 				 
 15887 5C9B AD E1 9A		            lda loc_string_19
 15888 5C9E 8D CE A3		            sta adr.fp_Name+16*2
 15889 5CA1 AD E2 9A		            lda loc_string_19+1
 15890 5CA4 8D CF A3		            sta adr.fp_Name+1+16*2
 15891 				        
 15892 				; optimize OK (cardealer.pas), line = 165
 15893
 15894 5CA7 A9 05			lda #$05
 15895 5CA9 8D 55 E4			sta adr.FP_WEAPON+$10
 15896
 15897 				; optimize OK (cardealer.pas), line = 166
 15898
 15899 5CAC A9 02			lda #$02
 15900 5CAE 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 15901 5CB1 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 15902 5CB4 8D F0 A3			sta TMP
 15903
 15904 				; optimize OK (cardealer.pas), line = 167
 15905
 15906 5CB7 8D 55 E5			sta adr.FP_SEX+$10
 15907
 15908 				; optimize OK (cardealer.pas), line = 168
 15909
 15910 5CBA A9 1E			lda #$1E
 15911 5CBC 8D 95 E4			sta adr.FP_ENERGY+$10
 15912
 15913 				; optimize FAIL ('DOFIGHT', cardealer.pas), line = 170
 15914
 15915 5CBF 20 9F 4D			jsr DOFIGHT
 15916 5CC2 AD 4E A8			lda DOFIGHT.RESULT
 15917 5CC5 C9 01			cmp #$01
 15918 5CC7 D0 0B			jne l_3C4A
 15919
 15920 				; optimize FAIL ('GOTCAUGHT', cardealer.pas), line = 172
 15921
 15922 5CC9 20 32 36			jsr GOTCAUGHT
 15923
 15924 				; optimize OK (cardealer.pas), line = 173
 15925
 15926 5CCC A9 11			lda #$11
 15927 5CCE 8D 97 A8			sta RESULT
 15928 5CD1 4C EC 5C			jmp @exit
 15929 5CD4			l_3C4A
 15930
 15931 				; optimize FAIL ('ENABLECONSOLE', cardealer.pas), line = 177
 15932
 15933 5CD4 20 B0 27			jsr ENABLECONSOLE
 15934
 15935 				; optimize FAIL ('SHOWLOCATIONHEADER', cardealer.pas), line = 178
 15936
 15937 5CD7 20 7A 28			jsr SHOWLOCATIONHEADER
 15938
 15939 				; optimize OK (cardealer.pas), line = 179
 15940
 15941 5CDA A9 0F			lda #$0F
 15942 5CDC 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 15943
 15944 				; optimize OK (cardealer.pas), line = 180
 15945
 15946 5CDF A9 10			lda #$10
 15947 5CE1 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 15948
 15949 				; optimize FAIL ('WAITFORKEY', cardealer.pas), line = 181
 15950
 15951 5CE4 20 4A 1E			jsr WAITFORKEY
 15952
 15953 				; optimize OK (cardealer.pas), line = 182
 15954
 15955 5CE7 A9 06			lda #$06
 15956 5CE9 8D 97 A8			sta RESULT
 15957 5CEC			l_3B29
 15958 5CEC			@exit
 15959
 15960 				; ------------------------------------------------------------
 15961
 15962 = A897			RESULT	= DATAORIGIN+$0C41
 15963 = A898			R	= DATAORIGIN+$0C42
 15964 = A899			MAXCAR	= DATAORIGIN+$0C43
 15965 = A89A			PRICE	= DATAORIGIN+$0C44
 15966 = A89C			OLDPRICE	= DATAORIGIN+$0C46
 15967 = A89E			NEWCAR	= DATAORIGIN+$0C48
 15968
 15969 = A898			@VarData	= R
 15970 = 0007			@VarDataSize	= 7
 15971
 15972 5CEC 60				rts						; ret
 15973 				.endl
 15974
 15975 5CED			.local	FORGERYCHOICES					; FUNCTION
 15976
 15977 				; optimize OK (forgery.pas), line = 13
 15978
 15979 5CED AD 22 C9			lda CURRENTCHOICE
 15980 5CF0 C9 01			cmp #$01
 15981 5CF2 F0 03 4C B0 5D		jne l_3C75
 15982
 15983 				; optimize FAIL ('SHOWLOCATIONHEADER', forgery.pas), line = 15
 15984
 15985 5CF7 20 7A 28			jsr SHOWLOCATIONHEADER
 15986
 15987 				; optimize OK (forgery.pas), line = 18
 15988
 15989 5CFA AC 8A CD			ldy CURRENTPLAYER
 15990 5CFD B9 48 C9			lda adr.PLFORGEDID,y
 15991 5D00 F0 0B			jeq l_3C8C
 15992
 15993 				; optimize OK (forgery.pas), line = 20
 15994
 15995 5D02 A9 01			lda #$01
 15996 5D04 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 15997
 15998 				; optimize FAIL ('WAITFORKEY', forgery.pas), line = 21
 15999
 16000 5D07 20 4A 1E			jsr WAITFORKEY
 16001 5D0A 4C CB 5E			jmp @exit
 16002 5D0D			l_3C8C
 16003
 16004 				; optimize OK (forgery.pas), line = 25
 16005
 16006 5D0D AC 8A CD			ldy CURRENTPLAYER
 16007 5D10 B9 B1 CD			lda adr.PLNGANGSTERS,y
 16008 5D13 8D A0 A8			sta R
 16009
 16010 				; optimize OK (forgery.pas), line = 26
 16011
 16012 5D16 A9 E8			lda #$E8
 16013 5D18 85 8C			sta :ecx
 16014 5D1A A9 03			lda #$03
 16015 5D1C 85 8D			sta :ecx+1
 16016 5D1E AD A0 A8			lda R
 16017 5D21 85 84			sta :eax
 16018 5D23 A9 00			lda #$00
 16019 5D25 85 85			sta :eax+1
 16020 					.ifdef fmulinit
 16021 					fmulu_16
 16022 					els
 16023 5D27 20 D3 10			imulCX_AL
 16024 					eif
 16025 5D2A A5 84			lda :eax
 16026 5D2C 8D A1 A8			sta C
 16027 5D2F A5 85			lda :eax+1
 16028 5D31 8D A2 A8			sta C+1
 16029
 16030 				; optimize OK (forgery.pas), line = 27
 16031
 16032 5D34 A9 02			lda #$02
 16033 5D36 20 C6 1C			jsr CRT_WRITE_LOCSTR
 16034
 16035 				; optimize OK (forgery.pas), line = 28
 16036
 16037 5D39 A9 03			lda #$03
 16038 5D3B 20 C6 1C			jsr CRT_WRITE_LOCSTR
 16039
 16040 				; optimize OK (forgery.pas), line = 29
 16041
 16042 5D3E AD A0 A8			lda R
 16043 5D41 C9 02			cmp #$02
 16044 5D43 90 05			jcc l_3CBB
 16045
 16046 				; optimize OK (forgery.pas), line = 30
 16047
 16048 5D45 A9 04			lda #$04
 16049 5D47 20 C6 1C			jsr CRT_WRITE_LOCSTR
 16050 5D4A			l_3CBB
 16051
 16052 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', forgery.pas), line = 31
 16053
 16054 5D4A 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 16055
 16056 				; optimize OK (forgery.pas), line = 32
 16057
 16058 5D4D A9 05			lda #$05
 16059 5D4F 20 C6 1C			jsr CRT_WRITE_LOCSTR
 16060
 16061 				; optimize OK (forgery.pas), line = 33
 16062
 16063 5D52 AD A1 A8			lda C
 16064 5D55 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 16065 5D58 AD A2 A8			lda C+1
 16066 5D5B 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 16067 5D5E 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 16068
 16069 				; optimize FAIL ('CRT_WRITELN', forgery.pas), line = 34
 16070
 16071 5D61 E8				inx
 16072 5D62 A9 A0 95 94			mva #$A0 :STACKORIGIN,x
 16073 5D66 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 16074 5D6A 20 A9 1E			jsr CRT_WRITELN
 16075
 16076 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', forgery.pas), line = 35
 16077
 16078 5D6D 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 16079
 16080 				; optimize OK (forgery.pas), line = 36
 16081
 16082 5D70 A9 06			lda #$06
 16083 5D72 20 C6 1C			jsr CRT_WRITE_LOCSTR
 16084
 16085 				; optimize FAIL ('GETYESNO', forgery.pas), line = 38
 16086
 16087 5D75 20 08 20			jsr GETYESNO
 16088 5D78 AD 1B A7			lda GETYESNO.RESULT
 16089 5D7B 8D A0 A8			sta R
 16090
 16091 				; optimize OK (forgery.pas), line = 39
 16092
 16093 5D7E D0 03 4C CB 5E		jeq @exit
 16094 5D83			l_3CE1
 16095
 16096 				; optimize OK (forgery.pas), line = 40
 16097
 16098 5D83 AD A1 A8			lda C
 16099 5D86 8D D8 A7			sta PAYMONEY.PRICE
 16100 5D89 AD A2 A8			lda C+1
 16101 5D8C 8D D9 A7			sta PAYMONEY.PRICE+1
 16102 5D8F 20 3B 32			jsr PAYMONEY
 16103 5D92 AD DA A7			lda PAYMONEY.RESULT
 16104 5D95 D0 03 4C CB 5E		jeq @exit
 16105 5D9A			l_3CF6
 16106
 16107 				; optimize FAIL ('CRT_NEWLINE2', forgery.pas), line = 42
 16108
 16109 5D9A 20 7B 1E			jsr CRT_NEWLINE2
 16110
 16111 				; optimize OK (forgery.pas), line = 43
 16112
 16113 5D9D A9 07			lda #$07
 16114 5D9F 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 16115
 16116 				; optimize OK (forgery.pas), line = 44
 16117
 16118 5DA2 AC 8A CD			ldy CURRENTPLAYER
 16119 5DA5 A9 01			lda #$01
 16120 5DA7 99 48 C9			sta adr.PLFORGEDID,y
 16121
 16122 				; optimize OK (forgery.pas), line = 45
 16123
 16124 5DAA 20 EC 2F			jsr ADDPOINTS
 16125
 16126 				; optimize FAIL ('WAITFORKEY', forgery.pas), line = 46
 16127
 16128 5DAD 20 4A 1E			jsr WAITFORKEY
 16129 5DB0			l_3C75
 16130
 16131 				; optimize OK (forgery.pas), line = 50
 16132
 16133 5DB0 AD 22 C9			lda CURRENTCHOICE
 16134 5DB3 C9 02			cmp #$02
 16135 5DB5 F0 03 4C CB 5E		jne l_3D1A
 16136
 16137 				; optimize FAIL ('SHOWLOCATIONHEADER', forgery.pas), line = 52
 16138
 16139 5DBA 20 7A 28			jsr SHOWLOCATIONHEADER
 16140
 16141 				; optimize OK (forgery.pas), line = 53
 16142
 16143 5DBD AC 8A CD			ldy CURRENTPLAYER
 16144 5DC0 B9 40 C9			lda adr.PLFAKEMONEY,y
 16145 5DC3 F0 0B			jeq l_3D31
 16146
 16147 				; optimize OK (forgery.pas), line = 55
 16148
 16149 5DC5 A9 08			lda #$08
 16150 5DC7 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 16151
 16152 				; optimize FAIL ('WAITFORKEY', forgery.pas), line = 56
 16153
 16154 5DCA 20 4A 1E			jsr WAITFORKEY
 16155 5DCD 4C CB 5E			jmp @exit
 16156 5DD0			l_3D31
 16157
 16158 				; optimize OK (forgery.pas), line = 60
 16159
 16160 5DD0 A9 09			lda #$09
 16161 5DD2 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 16162
 16163 				; optimize OK (forgery.pas), line = 61
 16164
 16165 5DD5 A9 0A			lda #$0A
 16166 5DD7 20 C6 1C			jsr CRT_WRITE_LOCSTR
 16167
 16168 				; optimize OK (forgery.pas), line = 63
 16169
 16170 5DDA A9 88			lda #$88
 16171 5DDC 8D A5 A8			sta M
 16172 5DDF A9 13			lda #$13
 16173 5DE1 8D A6 A8			sta M+1
 16174
 16175 				; optimize OK (forgery.pas), line = 65
 16176
 16177 5DE4 AD A5 A8			lda M
 16178 5DE7 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 16179 5DEA AD A6 A8			lda M+1
 16180 5DED 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 16181 5DF0 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 16182
 16183 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', forgery.pas), line = 66
 16184
 16185 5DF3 E8				inx
 16186 5DF4 A9 A3 95 94			mva #$A3 :STACKORIGIN,x
 16187 5DF8 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 16188 5DFC 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 16189
 16190 				; optimize OK (forgery.pas), line = 67
 16191
 16192 5DFF A9 00			lda #$00
 16193 5E01 8D 1C A7			sta READVALUE.MINVALUE
 16194 5E04 8D 1D A7			sta READVALUE.MINVALUE+1
 16195 5E07 AD A5 A8			lda M
 16196 5E0A 8D 1E A7			sta READVALUE.MAXVALUE
 16197 5E0D AD A6 A8			lda M+1
 16198 5E10 8D 1F A7			sta READVALUE.MAXVALUE+1
 16199 5E13 20 26 20			jsr READVALUE
 16200 5E16 AD 20 A7			lda READVALUE.RESULT
 16201 5E19 8D A1 A8			sta C
 16202 5E1C AD 21 A7			lda READVALUE.RESULT+1
 16203 5E1F 8D A2 A8			sta C+1
 16204
 16205 				; optimize OK (forgery.pas), line = 68
 16206
 16207 5E22 0D A1 A8			ora C
 16208 5E25 D0 03 4C CB 5E		jeq @exit
 16209 5E2A			l_3D5C
 16210
 16211 				; optimize OK (forgery.pas), line = 71
 16212
 16213 5E2A A9 00			lda #$00
 16214 5E2C 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 16215 5E2F AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 16216 5E32 8D F0 A3			sta TMP
 16217
 16218 				; optimize OK (forgery.pas), line = 72
 16219
 16220 5E35 AD A1 A8			lda C
 16221 5E38 18 6D A1 A8			add C
 16222 5E3C 85 9D			sta :STACKORIGIN+9
 16223 5E3E AD A2 A8			lda C+1
 16224 5E41 6D A2 A8			adc C+1
 16225 5E44 85 AD			sta :STACKORIGIN+STACKWIDTH+9
 16226 5E46 A5 9D			lda :STACKORIGIN+9
 16227 5E48 18 6D F0 A3			add TMP
 16228 5E4C 85 9D			sta :STACKORIGIN+9
 16229 5E4E A5 AD			lda :STACKORIGIN+STACKWIDTH+9
 16230 5E50 69 00			adc #$00
 16231 5E52 A8				tay
 16232 5E53 A5 9D			lda :STACKORIGIN+9
 16233 5E55 18 6D F0 A3			add TMP
 16234 5E59 90 01			scc
 16235 5E5B C8				iny
 16236 5E5C 18 6D F0 A3			add TMP
 16237 5E60 8D A3 A8			sta P
 16238 5E63 90 01			scc
 16239 5E65 C8				iny
 16240 5E66 8C A4 A8			sty P+1
 16241
 16242 				; optimize FAIL ('CRT_NEWLINE2', forgery.pas), line = 73
 16243
 16244 5E69 20 7B 1E			jsr CRT_NEWLINE2
 16245
 16246 				; optimize OK (forgery.pas), line = 74
 16247
 16248 5E6C A9 0B			lda #$0B
 16249 5E6E 20 C6 1C			jsr CRT_WRITE_LOCSTR
 16250
 16251 				; optimize OK (forgery.pas), line = 75
 16252
 16253 5E71 AD A3 A8			lda P
 16254 5E74 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 16255 5E77 AD A4 A8			lda P+1
 16256 5E7A 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 16257 5E7D 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 16258
 16259 				; optimize OK (forgery.pas), line = 76
 16260
 16261 5E80 A9 0C			lda #$0C
 16262 5E82 20 C6 1C			jsr CRT_WRITE_LOCSTR
 16263
 16264 				; optimize FAIL ('GETYESNO', forgery.pas), line = 78
 16265
 16266 5E85 20 08 20			jsr GETYESNO
 16267 5E88 AD 1B A7			lda GETYESNO.RESULT
 16268 5E8B 8D A0 A8			sta R
 16269
 16270 				; optimize OK (forgery.pas), line = 79
 16271
 16272 5E8E F0 3B			jeq @exit
 16273 5E90			l_3D9E
 16274
 16275 				; optimize OK (forgery.pas), line = 80
 16276
 16277 5E90 AD A1 A8			lda C
 16278 5E93 8D D8 A7			sta PAYMONEY.PRICE
 16279 5E96 AD A2 A8			lda C+1
 16280 5E99 8D D9 A7			sta PAYMONEY.PRICE+1
 16281 5E9C 20 3B 32			jsr PAYMONEY
 16282 5E9F AD DA A7			lda PAYMONEY.RESULT
 16283 5EA2 F0 27			jeq @exit
 16284 5EA4			l_3DB3
 16285
 16286 				; optimize FAIL ('CRT_NEWLINE2', forgery.pas), line = 82
 16287
 16288 5EA4 20 7B 1E			jsr CRT_NEWLINE2
 16289
 16290 				; optimize OK (forgery.pas), line = 83
 16291
 16292 5EA7 A9 0D			lda #$0D
 16293 5EA9 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 16294
 16295 				; optimize OK (forgery.pas), line = 85
 16296
 16297 5EAC AD A3 A8			lda P
 16298 5EAF 8D CB A7			sta ADDMONEY.AMOUNT
 16299 5EB2 AD A4 A8			lda P+1
 16300 5EB5 8D CC A7			sta ADDMONEY.AMOUNT+1
 16301 5EB8 20 98 2F			jsr ADDMONEY
 16302
 16303 				; optimize OK (forgery.pas), line = 86
 16304
 16305 5EBB AC 8A CD			ldy CURRENTPLAYER
 16306 5EBE A9 06			lda #$06
 16307 5EC0 99 40 C9			sta adr.PLFAKEMONEY,y
 16308
 16309 				; optimize OK (forgery.pas), line = 87
 16310
 16311 5EC3 A9 01			lda #$01
 16312 5EC5 20 EC 2F			jsr ADDPOINTS
 16313
 16314 				; optimize FAIL ('WAITFORKEY', forgery.pas), line = 88
 16315
 16316 5EC8 20 4A 1E			jsr WAITFORKEY
 16317 5ECB			l_3D1A
 16318 5ECB			@exit
 16319
 16320 				; ------------------------------------------------------------
 16321
 16322 = A89F			RESULT	= DATAORIGIN+$0C49
 16323 = A8A0			R	= DATAORIGIN+$0C4A
 16324 = A8A1			C	= DATAORIGIN+$0C4B
 16325 = A8A3			P	= DATAORIGIN+$0C4D
 16326 = A8A5			M	= DATAORIGIN+$0C4F
 16327
 16328 = A8A0			@VarData	= R
 16329 = 0007			@VarDataSize	= 7
 16330
 16331 5ECB 60				rts						; ret
 16332 				.endl
 16333
 16334 5ECC			.local	GAMBLINGCHOICES					; FUNCTION
 16335
 16336 				; optimize FAIL ('SHOWLOCATIONHEADER', gambling.pas), line = 9
 16337
 16338 5ECC 20 7A 28			jsr SHOWLOCATIONHEADER
 16339
 16340 				; optimize OK (gambling.pas), line = 11
 16341
 16342 5ECF A9 01			lda #$01
 16343 5ED1 20 15 1D			jsr CRT_WRITELN2_LOCSTR
 16344
 16345 				; optimize OK (gambling.pas), line = 13
 16346
 16347 5ED4 A9 02			lda #$02
 16348 5ED6 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 16349
 16350 				; optimize OK (gambling.pas), line = 14
 16351
 16352 5ED9 A9 03			lda #$03
 16353 5EDB 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 16354
 16355 				; optimize OK (gambling.pas), line = 15
 16356
 16357 5EDE A9 04			lda #$04
 16358 5EE0 20 15 1D			jsr CRT_WRITELN2_LOCSTR
 16359
 16360 				; optimize OK (gambling.pas), line = 17
 16361
 16362 5EE3 A9 05			lda #$05
 16363 5EE5 20 C6 1C			jsr CRT_WRITE_LOCSTR
 16364
 16365 				; optimize OK (gambling.pas), line = 18
 16366
 16367 5EE8 A9 00			lda #$00
 16368 5EEA 8D 1C A7			sta READVALUE.MINVALUE
 16369 5EED 8D 1D A7			sta READVALUE.MINVALUE+1
 16370 5EF0 A9 03			lda #$03
 16371 5EF2 8D 1E A7			sta READVALUE.MAXVALUE
 16372 5EF5 A9 00			lda #$00
 16373 5EF7 8D 1F A7			sta READVALUE.MAXVALUE+1
 16374 5EFA 20 26 20			jsr READVALUE
 16375 5EFD AD 20 A7			lda READVALUE.RESULT
 16376 5F00 8D A8 A8			sta GAME
 16377
 16378 				; optimize OK (gambling.pas), line = 19
 16379
 16380 5F03 D0 03 4C 55 60		jeq @exit
 16381 5F08			l_3DEF
 16382
 16383 				; optimize FAIL ('CRT_NEWLINE2', gambling.pas), line = 20
 16384
 16385 5F08 20 7B 1E			jsr CRT_NEWLINE2
 16386
 16387 				; optimize OK (gambling.pas), line = 21
 16388
 16389 5F0B A9 06			lda #$06
 16390 5F0D 20 C6 1C			jsr CRT_WRITE_LOCSTR
 16391
 16392 				; optimize OK (gambling.pas), line = 22
 16393
 16394 5F10 AD 8A CD			lda CURRENTPLAYER
 16395 5F13 0A				asl @
 16396 5F14 0A				asl @
 16397 5F15 A8				tay
 16398 5F16 B9 30 C9			lda adr.PLMONEY,y
 16399 5F19 8D 92 A1			sta B_CRT.CRT_WRITE.@010185000.NUM
 16400 5F1C B9 31 C9			lda adr.PLMONEY+1,y
 16401 5F1F 8D 93 A1			sta B_CRT.CRT_WRITE.@010185000.NUM+1
 16402 5F22 B9 32 C9			lda adr.PLMONEY+2,y
 16403 5F25 8D 94 A1			sta B_CRT.CRT_WRITE.@010185000.NUM+2
 16404 5F28 B9 33 C9			lda adr.PLMONEY+3,y
 16405 5F2B 8D 95 A1			sta B_CRT.CRT_WRITE.@010185000.NUM+3
 16406 5F2E 20 CA 18			jsr B_CRT.CRT_WRITE.@010185000
 16407
 16408 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', gambling.pas), line = 23
 16409
 16410 5F31 E8				inx
 16411 5F32 A9 A0 95 94			mva #$A0 :STACKORIGIN,x
 16412 5F36 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 16413 5F3A 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 16414
 16415 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', gambling.pas), line = 24
 16416
 16417 5F3D 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 16418
 16419 				; optimize OK (gambling.pas), line = 25
 16420
 16421 5F40 AD 8A CD			lda CURRENTPLAYER
 16422 5F43 0A				asl @
 16423 5F44 0A				asl @
 16424 5F45 A8				tay
 16425 5F46 B9 30 C9			lda adr.PLMONEY,y
 16426 5F49 8D A9 A8			sta EINSATZ
 16427 5F4C B9 31 C9			lda adr.PLMONEY+1,y
 16428 5F4F 8D AA A8			sta EINSATZ+1
 16429
 16430 				; optimize OK (gambling.pas), line = 27
 16431
 16432 5F52 C9 27			cmp #$27
 16433 5F54 D0 05			bne @+
 16434 5F56 AD A9 A8			lda EINSATZ
 16435 5F59 C9 11			cmp #$11
 16436 				@
 16437 5F5B 90 0A			jcc l_3E15
 16438
 16439 				; optimize OK (gambling.pas), line = 28
 16440
 16441 5F5D A9 10			lda #$10
 16442 5F5F 8D A9 A8			sta EINSATZ
 16443 5F62 A9 27			lda #$27
 16444 5F64 8D AA A8			sta EINSATZ+1
 16445 5F67			l_3E15
 16446
 16447 				; optimize OK (gambling.pas), line = 29
 16448
 16449 5F67 A9 07			lda #$07
 16450 5F69 20 C6 1C			jsr CRT_WRITE_LOCSTR
 16451
 16452 				; optimize OK (gambling.pas), line = 30
 16453
 16454 5F6C AD A9 A8			lda EINSATZ
 16455 5F6F 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 16456 5F72 AD AA A8			lda EINSATZ+1
 16457 5F75 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 16458 5F78 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 16459
 16460 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', gambling.pas), line = 31
 16461
 16462 5F7B E8				inx
 16463 5F7C A9 A6 95 94			mva #$A6 :STACKORIGIN,x
 16464 5F80 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 16465 5F84 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 16466
 16467 				; optimize OK (gambling.pas), line = 32
 16468
 16469 5F87 A9 00			lda #$00
 16470 5F89 8D 1C A7			sta READVALUE.MINVALUE
 16471 5F8C 8D 1D A7			sta READVALUE.MINVALUE+1
 16472 5F8F AD A9 A8			lda EINSATZ
 16473 5F92 8D 1E A7			sta READVALUE.MAXVALUE
 16474 5F95 AD AA A8			lda EINSATZ+1
 16475 5F98 8D 1F A7			sta READVALUE.MAXVALUE+1
 16476 5F9B 20 26 20			jsr READVALUE
 16477 5F9E AD 20 A7			lda READVALUE.RESULT
 16478 5FA1 8D A9 A8			sta EINSATZ
 16479 5FA4 AD 21 A7			lda READVALUE.RESULT+1
 16480 5FA7 8D AA A8			sta EINSATZ+1
 16481
 16482 				; optimize OK (gambling.pas), line = 33
 16483
 16484 5FAA 0D A9 A8			ora EINSATZ
 16485 5FAD D0 03 4C 55 60		jeq @exit
 16486 5FB2			l_3E3B
 16487
 16488 				; optimize OK (gambling.pas), line = 35
 16489
 16490 5FB2 AD A9 A8			lda EINSATZ
 16491 5FB5 8D D8 A7			sta PAYMONEY.PRICE
 16492 5FB8 AD AA A8			lda EINSATZ+1
 16493 5FBB 8D D9 A7			sta PAYMONEY.PRICE+1
 16494 5FBE 20 3B 32			jsr PAYMONEY
 16495 5FC1 AD DA A7			lda PAYMONEY.RESULT
 16496 5FC4 D0 03 4C 55 60		jeq @exit
 16497 5FC9			l_3E50
 16498
 16499 				; optimize FAIL ('CRT_NEWLINE2', gambling.pas), line = 37
 16500
 16501 5FC9 20 7B 1E			jsr CRT_NEWLINE2
 16502
 16503 				; optimize OK (gambling.pas), line = 38
 16504
 16505 5FCC A9 08			lda #$08
 16506 5FCE 20 15 1D			jsr CRT_WRITELN2_LOCSTR
 16507
 16508 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', gambling.pas), line = 39
 16509
 16510 5FD1 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 16511
 16512 				; optimize FAIL ('EFFECTWAIT', gambling.pas), line = 41
 16513
 16514 5FD4 20 74 1D			jsr EFFECTWAIT
 16515
 16516 				; optimize OK (gambling.pas), line = 42
 16517
 16518 5FD7 AD A8 A8			lda GAME
 16519 5FDA 18 69 02			add #$02
 16520 5FDD 8D A8 A8			sta GAME
 16521
 16522 				; optimize OK (gambling.pas), line = 43
 16523
 16524 5FE0 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 16525 5FE3 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 16526 5FE6 D0 65			jne l_3E75
 16527
 16528 				; optimize OK (gambling.pas), line = 46
 16529
 16530 5FE8 AD AA A8			lda EINSATZ+1
 16531 5FEB 85 AD			sta :STACKORIGIN+STACKWIDTH+9
 16532 5FED AD A9 A8			lda EINSATZ
 16533 5FF0 46 AD			lsr :STACKORIGIN+STACKWIDTH+9
 16534 5FF2 6A				ror @
 16535 5FF3 8D AB A8			sta GEWINN
 16536 5FF6 A5 AD			lda :STACKORIGIN+STACKWIDTH+9
 16537 5FF8 8D AC A8			sta GEWINN+1
 16538
 16539 				; optimize OK (gambling.pas), line = 47
 16540
 16541 5FFB AD A8 A8			lda GAME
 16542 5FFE 85 84			sta :eax
 16543 6000 A9 00			lda #$00
 16544 6002 85 85			sta :eax+1
 16545 6004 AD AB A8			lda GEWINN
 16546 6007 85 8C			sta :ecx
 16547 6009 AD AC A8			lda GEWINN+1
 16548 600C 85 8D			sta :ecx+1
 16549 					.ifdef fmulinit
 16550 					fmulu_16
 16551 					els
 16552 600E 20 D3 10			imulCX_AL
 16553 					eif
 16554 6011 A5 84			lda :eax
 16555 6013 18 6D A9 A8			add EINSATZ
 16556 6017 8D AB A8			sta GEWINN
 16557 601A A5 85			lda :eax+1
 16558 601C 6D AA A8			adc EINSATZ+1
 16559 601F 8D AC A8			sta GEWINN+1
 16560
 16561 				; optimize OK (gambling.pas), line = 48
 16562
 16563 6022 A9 09			lda #$09
 16564 6024 20 C6 1C			jsr CRT_WRITE_LOCSTR
 16565
 16566 				; optimize OK (gambling.pas), line = 49
 16567
 16568 6027 AD AB A8			lda GEWINN
 16569 602A 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 16570 602D AD AC A8			lda GEWINN+1
 16571 6030 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 16572 6033 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 16573
 16574 				; optimize OK (gambling.pas), line = 50
 16575
 16576 6036 A9 0A			lda #$0A
 16577 6038 20 C6 1C			jsr CRT_WRITE_LOCSTR
 16578
 16579 				; optimize OK (gambling.pas), line = 51
 16580
 16581 603B AD AB A8			lda GEWINN
 16582 603E 8D CB A7			sta ADDMONEY.AMOUNT
 16583 6041 AD AC A8			lda GEWINN+1
 16584 6044 8D CC A7			sta ADDMONEY.AMOUNT+1
 16585 6047 20 98 2F			jsr ADDMONEY
 16586 604A 4C 52 60			jmp l_3EA2
 16587 604D			l_3E75
 16588
 16589 				; optimize OK (gambling.pas), line = 54
 16590
 16591 604D A9 0B			lda #$0B
 16592 604F 20 C6 1C			jsr CRT_WRITE_LOCSTR
 16593 6052			l_3EA2
 16594
 16595 				; optimize FAIL ('WAITFORKEY', gambling.pas), line = 55
 16596
 16597 6052 20 4A 1E			jsr WAITFORKEY
 16598 6055			@exit
 16599
 16600 				; ------------------------------------------------------------
 16601
 16602 = A8A7			RESULT	= DATAORIGIN+$0C51
 16603 = A8A8			GAME	= DATAORIGIN+$0C52
 16604 = A8A9			EINSATZ	= DATAORIGIN+$0C53
 16605 = A8AB			GEWINN	= DATAORIGIN+$0C55
 16606 = A8AD			CH	= DATAORIGIN+$0C57
 16607
 16608 = A8A8			@VarData	= GAME
 16609 = 0006			@VarDataSize	= 6
 16610
 16611 6055 60				rts						; ret
 16612 				.endl
 16613
 16614 6056			.local	HIDEOUTCHOICES					; FUNCTION
 16615
 16616 				; optimize OK (hideout.pas), line = 9
 16617
 16618 6056 A9 0A			lda #$0A
 16619 6058 8D AE A8			sta RESULT
 16620
 16621 				; optimize FAIL ('SHOWLOCATIONHEADER', hideout.pas), line = 10
 16622
 16623 605B 20 7A 28			jsr SHOWLOCATIONHEADER
 16624
 16625 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', hideout.pas), line = 11
 16626
 16627 605E 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 16628
 16629 				; optimize OK (hideout.pas), line = 14
 16630
 16631 6061 AD 22 C9			lda CURRENTCHOICE
 16632 6064 C9 03			cmp #$03
 16633 6066 F0 03 4C DF 63		jne l_3EC1
 16634
 16635 				; optimize OK (hideout.pas), line = 16
 16636
 16637 606B AC 3D A7			ldy CURRENTSUBLOCATION
 16638 606E B9 8C CD			lda adr.PLRENT,y
 16639 6071 8D B5 A8			sta PL
 16640
 16641 				; optimize OK (hideout.pas), line = 18
 16642
 16643 6074 A9 04			lda #$04
 16644 6076 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 16645 6079 A9 0C			lda #$0C
 16646 607B 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 16647 607E 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 16648
 16649 				; optimize FAIL ('EFFECTWAIT', hideout.pas), line = 19
 16650
 16651 6081 20 74 1D			jsr EFFECTWAIT
 16652
 16653 				; optimize OK (hideout.pas), line = 21
 16654
 16655 6084 AD B5 A8			lda PL
 16656 6087 C9 63			cmp #$63
 16657 6089 F0 05			jeq l_3EEFx
 16658 608B CD 8A CD			cmp CURRENTPLAYER
 16659 608E D0 13			jne l_3EEF
 16660 6090			l_3EEFx
 16661
 16662 				; optimize OK (hideout.pas), line = 23
 16663
 16664 6090 A9 06			lda #$06
 16665 6092 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 16666 6095 A9 0D			lda #$0D
 16667 6097 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 16668 609A 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 16669
 16670 				; optimize FAIL ('WAITFORKEY', hideout.pas), line = 24
 16671
 16672 609D 20 4A 1E			jsr WAITFORKEY
 16673 60A0 4C 2D 65			jmp @exit
 16674 60A3			l_3EEF
 16675
 16676 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', hideout.pas), line = 28
 16677
 16678 60A3 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 16679
 16680 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', hideout.pas), line = 29
 16681
 16682 60A6 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 16683
 16684 				; optimize OK (hideout.pas), line = 30
 16685
 16686 60A9 A9 0E			lda #$0E
 16687 60AB 20 C6 1C			jsr CRT_WRITE_LOCSTR
 16688
 16689 				; optimize OK (hideout.pas), line = 31
 16690
 16691 60AE AD B5 A8			lda PL
 16692 60B1 0A				asl @
 16693 60B2 0A				asl @
 16694 60B3 0A				asl @
 16695 60B4 8D F0 A3			sta TMP
 16696
 16697 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', hideout.pas), line = 32
 16698
 16699 60B7 E8				inx
 16700 60B8 AD F0 A3			lda TMP
 16701 60BB 0A				asl @
 16702 60BC A8				tay
 16703 60BD B9 15 A4			lda adr.GANGSTERNAMES,y
 16704 60C0 95 94			sta :STACKORIGIN,x
 16705 60C2 B9 16 A4			lda adr.GANGSTERNAMES+1,y
 16706 60C5 95 A4			sta :STACKORIGIN+STACKWIDTH,x
 16707 60C7 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 16708
 16709 				; optimize FAIL ('CRT_WRITELN', hideout.pas), line = 33
 16710
 16711 60CA E8				inx
 16712 60CB A9 AB 95 94			mva #$AB :STACKORIGIN,x
 16713 60CF A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 16714 60D3 20 A9 1E			jsr CRT_WRITELN
 16715
 16716 				; optimize FAIL ('EFFECTWAIT', hideout.pas), line = 34
 16717
 16718 60D6 20 74 1D			jsr EFFECTWAIT
 16719
 16720 				; optimize OK (hideout.pas), line = 37
 16721
 16722 60D9 A9 03			lda #$03
 16723 60DB 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 16724 60DE AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 16725 60E1 8D F0 A3			sta TMP
 16726
 16727 				; optimize OK (hideout.pas), line = 38
 16728
 16729 60E4 AC B5 A8			ldy PL
 16730 60E7 AD F0 A3			lda TMP
 16731 60EA 18 79 80 C9			add adr.PLJOB,y
 16732 60EE 8D F0 A3			sta TMP
 16733
 16734 				; optimize OK (hideout.pas), line = 39
 16735
 16736 60F1 18 79 94 C9			add adr.PLPRISON,y
 16737 60F5 8D F0 A3			sta TMP
 16738
 16739 				; optimize OK (hideout.pas), line = 40
 16740
 16741 60F8 F0 0B			jeq l_3F42
 16742
 16743 				; optimize OK (hideout.pas), line = 42
 16744
 16745 60FA A9 0F			lda #$0F
 16746 60FC 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 16747
 16748 				; optimize FAIL ('WAITFORKEY', hideout.pas), line = 43
 16749
 16750 60FF 20 4A 1E			jsr WAITFORKEY
 16751 6102 4C 2D 65			jmp @exit
 16752 6105			l_3F42
 16753
 16754 				; optimize OK (hideout.pas), line = 49
 16755
 16756 6105 AC B5 A8			ldy PL
 16757 6108 B9 B1 CD			lda adr.PLNGANGSTERS,y
 16758 610B 8D 04 E4			sta adr.FP_N+$01
 16759
 16760 				; optimize OK (hideout.pas), line = 50
 16761
 16762 610E 98				tya
 16763 610F 0A				asl @
 16764 6110 A8				tay
 16765 6111 B9 0D A4			lda adr.PLGANG,y
 16766 6114 85 88			sta @move.src
 16767 6116 B9 0E A4			lda adr.PLGANG+1,y
 16768 6119 85 89			sta @move.src+1
 16769 611B AD AC A3			lda adr.FP_GANG+$02
 16770 611E 85 8C			sta @move.dst
 16771 6120 AD AD A3			lda adr.FP_GANG+1+$02
 16772 6123 85 8D			sta @move.dst+1
 16773 6125 A0 00			ldy #$00
 16774 6127 B1 88			lda (@move.src),y
 16775 6129 18 69 01			add #1
 16776 612C 85 84			sta @move.cnt
 16777 612E 90 01			scc
 16778 6130 C8				iny
 16779 6131 84 85			sty @move.cnt+1
 16780 6133 20 D7 0E			jsr @move
 16781
 16782 				; optimize OK (hideout.pas), line = 51
 16783
 16784 6136 A9 00			lda #$00
 16785 6138 8D 02 E4			sta adr.FP_AI+$01
 16786
 16787 				; optimize OK (hideout.pas), line = 53
 16788
 16789 613B 8D B0 A8			sta K
 16790
 16791 				; optimize OK (hideout.pas), line = 54
 16792
 16793 613E 8D B1 A8			sta J
 16794
 16795 6141			l_3F6D
 16796 				; --- ForToDoCondition
 16797 6141 AC B1 A8			ldy J
 16798 6144 C0 20			cpy #$20
 16799 6146 90 03 4C C9 61		jcs l_3F7B
 16800
 16801 				; optimize OK (hideout.pas), line = 56
 16802
 16803 614B B9 91 CD			lda adr.PLGANGSTERS,y
 16804 614E CD B5 A8			cmp PL
 16805 6151 D0 6E			jne l_3F92
 16806
 16807 				; optimize OK (hideout.pas), line = 58
 16808
 16809 6153 AD B1 A8			lda J
 16810 6156 0A				asl @
 16811 6157 A8				tay
 16812 6158 B9 15 A4			lda adr.GANGSTERNAMES,y
 16813 615B 85 88			sta @move.src
 16814 615D B9 16 A4			lda adr.GANGSTERNAMES+1,y
 16815 6160 85 89			sta @move.src+1
 16816 6162 AD B0 A8			lda K
 16817 6165 0A				asl @
 16818 6166 A8				tay
 16819 6167 B9 CE A3			lda adr.FP_NAME+$20,y
 16820 616A 85 8C			sta @move.dst
 16821 616C B9 CF A3			lda adr.FP_NAME+1+$20,y
 16822 616F 85 8D			sta @move.dst+1
 16823 6171 A0 00			ldy #$00
 16824 6173 B1 88			lda (@move.src),y
 16825 6175 18 69 01			add #1
 16826 6178 85 84			sta @move.cnt
 16827 617A 90 01			scc
 16828 617C C8				iny
 16829 617D 84 85			sty @move.cnt+1
 16830 617F 20 D7 0E			jsr @move
 16831
 16832 				; optimize OK (hideout.pas), line = 59
 16833
 16834 6182 AC B1 A8			ldy J
 16835 6185 B9 28 CD			lda adr.GANGSTERHEALTH,y
 16836 6188 AC B0 A8			ldy K
 16837 618B 99 95 E4			sta adr.FP_ENERGY+$10,y
 16838
 16839 				; optimize OK (hideout.pas), line = 60
 16840
 16841 618E AC B1 A8			ldy J
 16842 6191 B9 48 CD			lda adr.GANGSTERWEAPON,y
 16843 6194 AC B0 A8			ldy K
 16844 6197 99 55 E4			sta adr.FP_WEAPON+$10,y
 16845
 16846 				; optimize OK (hideout.pas), line = 61
 16847
 16848 619A AC B1 A8			ldy J
 16849 619D B9 68 CD			lda adr.GANGSTERSEX,y
 16850 61A0 AC B0 A8			ldy K
 16851 61A3 99 55 E5			sta adr.FP_SEX+$10,y
 16852
 16853 				; optimize OK (hideout.pas), line = 62
 16854
 16855 61A6 AC B1 A8			ldy J
 16856 61A9 B9 C8 CC			lda adr.GANGSTERSTR,y
 16857 61AC AC B0 A8			ldy K
 16858 61AF 99 D5 E4			sta adr.FP_STRENGTH+$10,y
 16859
 16860 				; optimize OK (hideout.pas), line = 63
 16861
 16862 61B2 AC B1 A8			ldy J
 16863 61B5 B9 08 CD			lda adr.GANGSTERBRUT,y
 16864 61B8 AC B0 A8			ldy K
 16865 61BB 99 15 E5			sta adr.FP_BRUTALITY+$10,y
 16866
 16867 				; optimize OK (hideout.pas), line = 64
 16868
 16869 61BE EE B0 A8			inc K
 16870 61C1			l_3F92
 16871
 16872 				; --- ForToDoEpilog
 16873 61C1 EE B1 A8			inc J
 16874 61C4 F0 03 4C 41 61		jne l_3F6D
 16875 61C9			l_3F7B
 16876
 16877 				; optimize FAIL ('DOFIGHT', hideout.pas), line = 68
 16878
 16879 61C9 20 9F 4D			jsr DOFIGHT
 16880 61CC AD 4E A8			lda DOFIGHT.RESULT
 16881 61CF 8D B2 A8			sta W
 16882
 16883 				; optimize FAIL ('ENABLECONSOLE', hideout.pas), line = 69
 16884
 16885 61D2 20 B0 27			jsr ENABLECONSOLE
 16886
 16887 				; optimize FAIL ('SHOWLOCATIONHEADER', hideout.pas), line = 71
 16888
 16889 61D5 20 7A 28			jsr SHOWLOCATIONHEADER
 16890
 16891 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', hideout.pas), line = 72
 16892
 16893 61D8 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 16894
 16895 				; optimize OK (hideout.pas), line = 73
 16896
 16897 61DB A9 04			lda #$04
 16898 61DD 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 16899 61E0 A9 0C			lda #$0C
 16900 61E2 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 16901 61E5 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 16902
 16903 				; optimize FAIL ('CRT_NEWLINE2', hideout.pas), line = 74
 16904
 16905 61E8 20 7B 1E			jsr CRT_NEWLINE2
 16906
 16907 				; optimize OK (hideout.pas), line = 76
 16908
 16909 61EB AD B5 A8			lda PL
 16910 61EE 4A				lsr @
 16911 61EF 4A				lsr @
 16912 61F0 4A				lsr @
 16913 61F1 8D F0 A3			sta TMP
 16914
 16915 				; optimize OK (hideout.pas), line = 77
 16916
 16917 61F4 AD B2 A8			lda W
 16918 61F7 C9 01			cmp #$01
 16919 61F9 D0 33			jne l_402A
 16920
 16921 				; optimize OK (hideout.pas), line = 80
 16922
 16923 61FB A9 10			lda #$10
 16924 61FD 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 16925
 16926 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', hideout.pas), line = 81
 16927
 16928 6200 E8				inx
 16929 6201 AD F0 A3			lda TMP
 16930 6204 0A				asl @
 16931 6205 A8				tay
 16932 6206 B9 15 A4			lda adr.GANGSTERNAMES,y
 16933 6209 95 94			sta :STACKORIGIN,x
 16934 620B B9 16 A4			lda adr.GANGSTERNAMES+1,y
 16935 620E 95 A4			sta :STACKORIGIN+STACKWIDTH,x
 16936 6210 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 16937
 16938 				; optimize OK (hideout.pas), line = 82
 16939
 16940 6213 A9 00			lda #$00
 16941 6215 20 65 18			jsr B_CRT.CRT_WRITE.@010186000
 16942
 16943 				; optimize OK (hideout.pas), line = 83
 16944
 16945 6218 A9 11			lda #$11
 16946 621A 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 16947
 16948 				; optimize OK (hideout.pas), line = 84
 16949
 16950 621D A9 12			lda #$12
 16951 621F 20 C6 1C			jsr CRT_WRITE_LOCSTR
 16952
 16953 				; optimize OK (hideout.pas), line = 85
 16954
 16955 6222 AD B5 A8			lda PL
 16956 6225 8D B3 A8			sta M
 16957
 16958 				; optimize OK (hideout.pas), line = 86
 16959
 16960 6228 AD 8A CD			lda CURRENTPLAYER
 16961 622B 4C 59 62			jmp l_404E
 16962 622E			l_402A
 16963
 16964 				; optimize OK (hideout.pas), line = 91
 16965
 16966 622E A9 13			lda #$13
 16967 6230 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 16968
 16969 				; optimize OK (hideout.pas), line = 92
 16970
 16971 6233 A9 14			lda #$14
 16972 6235 20 C6 1C			jsr CRT_WRITE_LOCSTR
 16973
 16974 				; optimize FAIL ('CRT_WRITELN', hideout.pas), line = 93
 16975
 16976 6238 E8				inx
 16977 6239 AD F0 A3			lda TMP
 16978 623C 0A				asl @
 16979 623D A8				tay
 16980 623E B9 15 A4			lda adr.GANGSTERNAMES,y
 16981 6241 95 94			sta :STACKORIGIN,x
 16982 6243 B9 16 A4			lda adr.GANGSTERNAMES+1,y
 16983 6246 95 A4			sta :STACKORIGIN+STACKWIDTH,x
 16984 6248 20 A9 1E			jsr CRT_WRITELN
 16985
 16986 				; optimize OK (hideout.pas), line = 94
 16987
 16988 624B A9 15			lda #$15
 16989 624D 20 C6 1C			jsr CRT_WRITE_LOCSTR
 16990
 16991 				; optimize OK (hideout.pas), line = 95
 16992
 16993 6250 AD 8A CD			lda CURRENTPLAYER
 16994 6253 8D B3 A8			sta M
 16995
 16996 				; optimize OK (hideout.pas), line = 96
 16997
 16998 6256 AD B5 A8			lda PL
 16999 6259			l_404E
 17000 6259 8D B0 A8			sta K
 17001
 17002 				; optimize OK (hideout.pas), line = 100
 17003
 17004 625C 0A				asl @
 17005 625D 0A				asl @
 17006 625E A8				tay
 17007 625F B9 30 C9			lda adr.PLMONEY,y
 17008 6262 85 9D			sta :STACKORIGIN+9
 17009 6264 B9 31 C9			lda adr.PLMONEY+1,y
 17010 6267 85 AD			sta :STACKORIGIN+STACKWIDTH+9
 17011 6269 B9 32 C9			lda adr.PLMONEY+2,y
 17012 626C 85 BD			sta :STACKORIGIN+STACKWIDTH*2+9
 17013 626E B9 33 C9			lda adr.PLMONEY+3,y
 17014 6271 46 BD			lsr :STACKORIGIN+STACKWIDTH*2+9
 17015 6273 66 AD			ror :STACKORIGIN+STACKWIDTH+9
 17016 6275 66 9D			ror :STACKORIGIN+9
 17017 6277 A5 9D			lda :STACKORIGIN+9
 17018 6279 8D B6 A8			sta Z
 17019 627C A5 AD			lda :STACKORIGIN+STACKWIDTH+9
 17020 627E 8D B7 A8			sta Z+1
 17021
 17022 				; optimize FAIL (1, hideout.pas), line = 101
 17023
 17024 6281 E8				inx
 17025 6282 AD B6 A8 95 94		mva Z :STACKORIGIN,x
 17026 6287 AD B7 A8 95 A4		mva Z+1 :STACKORIGIN+STACKWIDTH,x
 17027 628C A9 04			lda #$04
 17028 628E 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 17029 6291 E8				inx
 17030 6292 AD 62 9C 95 94		mva SYSTEM.RANDOM.@010180000.RESULT :STACKORIGIN,x
 17031 6297 E8				inx
 17032 6298 AD B6 A8 95 94		mva Z :STACKORIGIN,x
 17033 629D AD B7 A8 95 A4		mva Z+1 :STACKORIGIN+STACKWIDTH,x
 17034 62A2 E8				inx
 17035 62A3 A9 02 95 94			mva #$02 :STACKORIGIN,x
 17036 62A7 20 2D 0E			jsr @shrAX_CL
 17037 62AA CA				dex
 17038 62AB A9 00 95 A3			mva #$00 :STACKORIGIN-1+STACKWIDTH,x
 17039 62AF 20 7C 10			jsr imulWORD
 17040 62B2 CA				dex
 17041 62B3 CA				dex
 17042 62B4 B5 94			lda :STACKORIGIN,x
 17043 62B6 18 65 84			add :eax
 17044 62B9 8D B6 A8			sta Z
 17045 62BC B5 A4			lda :STACKORIGIN+STACKWIDTH,x
 17046 62BE 65 85			adc :eax+1
 17047 62C0 8D B7 A8			sta Z+1
 17048 62C3 CA				dex
 17049
 17050 				; optimize OK (hideout.pas), line = 102
 17051
 17052 62C4 AD B6 A8			lda Z
 17053 62C7 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 17054 62CA AD B7 A8			lda Z+1
 17055 62CD 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 17056 62D0 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 17057
 17058 				; optimize FAIL ('CRT_WRITELN', hideout.pas), line = 103
 17059
 17060 62D3 E8				inx
 17061 62D4 A9 73 95 94			mva #$73 :STACKORIGIN,x
 17062 62D8 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 17063 62DC 20 A9 1E			jsr CRT_WRITELN
 17064
 17065 				; optimize OK (hideout.pas), line = 104
 17066
 17067 62DF AD B3 A8			lda M
 17068 62E2 0A				asl @
 17069 62E3 0A				asl @
 17070 62E4 A8				tay
 17071 62E5 B9 30 C9			lda adr.PLMONEY,y
 17072 62E8 18 6D B6 A8			add Z
 17073 62EC 99 30 C9			sta adr.PLMONEY,y
 17074 62EF B9 31 C9			lda adr.PLMONEY+1,y
 17075 62F2 6D B7 A8			adc Z+1
 17076 62F5 99 31 C9			sta adr.PLMONEY+1,y
 17077 62F8 B9 32 C9			lda adr.PLMONEY+2,y
 17078 62FB 69 00			adc #$00
 17079 62FD 99 32 C9			sta adr.PLMONEY+2,y
 17080 6300 B9 33 C9			lda adr.PLMONEY+3,y
 17081 6303 69 00			adc #$00
 17082 6305 99 33 C9			sta adr.PLMONEY+3,y
 17083
 17084 				; optimize OK (hideout.pas), line = 105
 17085
 17086 6308 AD B0 A8			lda K
 17087 630B 0A				asl @
 17088 630C 0A				asl @
 17089 630D A8				tay
 17090 630E B9 30 C9			lda adr.PLMONEY,y
 17091 6311 38 ED B6 A8			sub Z
 17092 6315 99 30 C9			sta adr.PLMONEY,y
 17093 6318 B9 31 C9			lda adr.PLMONEY+1,y
 17094 631B ED B7 A8			sbc Z+1
 17095 631E 99 31 C9			sta adr.PLMONEY+1,y
 17096 6321 B9 32 C9			lda adr.PLMONEY+2,y
 17097 6324 E9 00			sbc #$00
 17098 6326 99 32 C9			sta adr.PLMONEY+2,y
 17099 6329 B9 33 C9			lda adr.PLMONEY+3,y
 17100 632C E9 00			sbc #$00
 17101 632E 99 33 C9			sta adr.PLMONEY+3,y
 17102
 17103 				; optimize OK (hideout.pas), line = 107
 17104
 17105 6331 AC B0 A8			ldy K
 17106 6334 B9 44 C9			lda adr.PLALCOHOL,y
 17107 6337 F0 56			jeq l_40BC
 17108
 17109 				; optimize OK (hideout.pas), line = 109
 17110
 17111 6339 AD B2 A8			lda W
 17112 633C C9 01			cmp #$01
 17113 633E D0 11			jne l_40CF
 17114
 17115 				; optimize FAIL ('CRT_WRITELN', hideout.pas), line = 110
 17116
 17117 6340 E8				inx
 17118 6341 AD E7 9A 95 94		mva LOC_STRING_22 :STACKORIGIN,x
 17119 6346 AD E8 9A 95 A4		mva LOC_STRING_22+1 :STACKORIGIN+STACKWIDTH,x
 17120 634B 20 A9 1E			jsr CRT_WRITELN
 17121 634E 4C 56 63			jmp l_40DC
 17122 6351			l_40CF
 17123
 17124 				; optimize OK (hideout.pas), line = 112
 17125
 17126 6351 A9 17			lda #$17
 17127 6353 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 17128 6356			l_40DC
 17129
 17130 				; optimize OK (hideout.pas), line = 113
 17131
 17132 6356 AC B3 A8			ldy M
 17133 6359 B9 44 C9			lda adr.PLALCOHOL,y
 17134 635C AC B0 A8			ldy K
 17135 635F 18 79 44 C9			add adr.PLALCOHOL,y
 17136 6363 AC B3 A8			ldy M
 17137 6366 99 44 C9			sta adr.PLALCOHOL,y
 17138
 17139 				; optimize OK (hideout.pas), line = 114
 17140
 17141 6369 AC B0 A8			ldy K
 17142 636C A9 00			lda #$00
 17143 636E 99 44 C9			sta adr.PLALCOHOL,y
 17144
 17145 				; optimize OK (hideout.pas), line = 115
 17146
 17147 6371 B9 4C C9			lda adr.PLCAR,y
 17148 6374 8D AF A8			sta R
 17149
 17150 				; optimize OK (hideout.pas), line = 116
 17151
 17152 6377 AC B3 A8			ldy M
 17153 637A B9 44 C9			lda adr.PLALCOHOL,y
 17154 637D 85 9D			sta :STACKORIGIN+9
 17155 637F AC AF A8			ldy R
 17156 6382 B9 0C E7			lda adr.CARCARGO,y
 17157 6385 C5 9D			cmp :STACKORIGIN+9
 17158 6387 B0 06			jcs l_411D
 17159 6389 AC B3 A8			ldy M
 17160 638C 99 44 C9			sta adr.PLALCOHOL,y
 17161 638F			l_411D
 17162 638F			l_40BC
 17163
 17164 				; optimize OK (hideout.pas), line = 119
 17165
 17166 638F AC B0 A8			ldy K
 17167 6392 B9 4C C9			lda adr.PLCAR,y
 17168 6395 F0 25			jeq l_4143
 17169
 17170 				; optimize OK (hideout.pas), line = 121
 17171
 17172 6397 AD B2 A8			lda W
 17173 639A C9 01			cmp #$01
 17174 639C D0 11			jne l_4156
 17175
 17176 				; optimize FAIL ('CRT_WRITELN', hideout.pas), line = 122
 17177
 17178 639E E8				inx
 17179 639F AD EB 9A 95 94		mva LOC_STRING_24 :STACKORIGIN,x
 17180 63A4 AD EC 9A 95 A4		mva LOC_STRING_24+1 :STACKORIGIN+STACKWIDTH,x
 17181 63A9 20 A9 1E			jsr CRT_WRITELN
 17182 63AC 4C B4 63			jmp l_4163
 17183 63AF			l_4156
 17184
 17185 				; optimize OK (hideout.pas), line = 124
 17186
 17187 63AF A9 19			lda #$19
 17188 63B1 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 17189 63B4			l_4163
 17190
 17191 				; optimize OK (hideout.pas), line = 125
 17192
 17193 63B4 AC B0 A8			ldy K
 17194 63B7 A9 00			lda #$00
 17195 63B9 99 4C C9			sta adr.PLCAR,y
 17196 63BC			l_4143
 17197
 17198 				; optimize OK (hideout.pas), line = 127
 17199
 17200 63BC AC B3 A8			ldy M
 17201 63BF B9 A0 C9			lda adr.PLNEWPOINTS,y
 17202 63C2 18 69 03			add #$03
 17203 63C5 99 A0 C9			sta adr.PLNEWPOINTS,y
 17204
 17205 				; optimize OK (hideout.pas), line = 128
 17206
 17207 63C8 AC B0 A8			ldy K
 17208 63CB B9 A0 C9			lda adr.PLNEWPOINTS,y
 17209 63CE 38 E9 01			sub #$01
 17210 63D1 99 A0 C9			sta adr.PLNEWPOINTS,y
 17211
 17212 				; optimize FAIL ('WAITFORKEY', hideout.pas), line = 129
 17213
 17214 63D4 20 4A 1E			jsr WAITFORKEY
 17215
 17216 				; optimize OK (hideout.pas), line = 130
 17217
 17218 63D7 A9 11			lda #$11
 17219 63D9 8D AE A8			sta RESULT
 17220 63DC 4C 2D 65			jmp @exit
 17221 63DF			l_3EC1
 17222
 17223 				; optimize OK (hideout.pas), line = 136
 17224
 17225 63DF AD 22 C9			lda CURRENTCHOICE
 17226 63E2 C9 01			cmp #$01
 17227 63E4 D0 58			jne l_41A7
 17228
 17229 				; optimize OK (hideout.pas), line = 138
 17230
 17231 63E6 AC 3D A7			ldy CURRENTSUBLOCATION
 17232 63E9 B9 8C CD			lda adr.PLRENT,y
 17233 63EC C9 63			cmp #$63
 17234 63EE F0 2A			jeq l_41BD
 17235
 17236 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', hideout.pas), line = 140
 17237
 17238 63F0 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 17239
 17240 				; optimize OK (hideout.pas), line = 141
 17241
 17242 63F3 AC 3D A7			ldy CURRENTSUBLOCATION
 17243 63F6 B9 8C CD			lda adr.PLRENT,y
 17244 63F9 CD 8A CD			cmp CURRENTPLAYER
 17245 63FC D0 11			jne l_41D6
 17246
 17247 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', hideout.pas), line = 142
 17248
 17249 63FE E8				inx
 17250 63FF AD BD 9A 95 94		mva LOC_STRING_1 :STACKORIGIN,x
 17251 6404 AD BE 9A 95 A4		mva LOC_STRING_1+1 :STACKORIGIN+STACKWIDTH,x
 17252 6409 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 17253 640C 4C 14 64			jmp l_41E3
 17254 640F			l_41D6
 17255
 17256 				; optimize OK (hideout.pas), line = 144
 17257
 17258 640F A9 02			lda #$02
 17259 6411 20 C6 1C			jsr CRT_WRITE_LOCSTR
 17260 6414			l_41E3
 17261
 17262 				; optimize FAIL ('WAITFORKEY', hideout.pas), line = 145
 17263
 17264 6414 20 4A 1E			jsr WAITFORKEY
 17265 6417 4C 2D 65			jmp @exit
 17266 641A			l_41BD
 17267
 17268 				; optimize OK (hideout.pas), line = 151
 17269
 17270 641A A9 00			lda #$00
 17271 641C 8D AF A8			sta R
 17272
 17273 641F			l_41F1
 17274 				; --- ForToDoCondition
 17275 641F AC AF A8			ldy R
 17276 6422 C0 04			cpy #$04
 17277 6424 B0 18			jcs l_41FF
 17278
 17279 				; optimize OK (hideout.pas), line = 152
 17280
 17281 6426 B9 8C CD			lda adr.PLRENT,y
 17282 6429 CD 8A CD			cmp CURRENTPLAYER
 17283 642C D0 0B			jne l_4216
 17284
 17285 				; optimize OK (hideout.pas), line = 154
 17286
 17287 642E A9 03			lda #$03
 17288 6430 20 C6 1C			jsr CRT_WRITE_LOCSTR
 17289
 17290 				; optimize FAIL ('WAITFORKEY', hideout.pas), line = 155
 17291
 17292 6433 20 4A 1E			jsr WAITFORKEY
 17293 6436 4C 2D 65			jmp @exit
 17294 6439			l_4216
 17295
 17296 				; --- ForToDoEpilog
 17297 6439 EE AF A8			inc R
 17298 643C D0 E1			jne l_41F1
 17299 643E			l_41FF
 17300 643E			l_41A7
 17301
 17302 				; optimize OK (hideout.pas), line = 160
 17303
 17304 643E AD 22 C9			lda CURRENTCHOICE
 17305 6441 C9 02			cmp #$02
 17306 6443 D0 16			jne l_4235
 17307
 17308 				; optimize OK (hideout.pas), line = 162
 17309
 17310 6445 AC 3D A7			ldy CURRENTSUBLOCATION
 17311 6448 B9 8C CD			lda adr.PLRENT,y
 17312 644B CD 8A CD			cmp CURRENTPLAYER
 17313 644E F0 0B			jeq l_424D
 17314
 17315 				; optimize OK (hideout.pas), line = 164
 17316
 17317 6450 A9 04			lda #$04
 17318 6452 20 C6 1C			jsr CRT_WRITE_LOCSTR
 17319
 17320 				; optimize FAIL ('WAITFORKEY', hideout.pas), line = 165
 17321
 17322 6455 20 4A 1E			jsr WAITFORKEY
 17323 6458 4C 2D 65			jmp @exit
 17324 645B			l_424D
 17325 645B			l_4235
 17326
 17327 				; optimize OK (hideout.pas), line = 170
 17328
 17329 645B A9 32			lda #$32
 17330 645D 8D B4 A8			sta PRICE
 17331
 17332 				; optimize OK (hideout.pas), line = 171
 17333
 17334 6460 AD 3D A7			lda CURRENTSUBLOCATION
 17335 6463 C9 02			cmp #$02
 17336 6465 90 09			jcc l_426B
 17337
 17338 				; optimize OK (hideout.pas), line = 172
 17339
 17340 6467 AD B4 A8			lda PRICE
 17341 646A 18 69 32			add #$32
 17342 646D 8D B4 A8			sta PRICE
 17343 6470			l_426B
 17344
 17345 				; optimize OK (hideout.pas), line = 173
 17346
 17347 6470 AD 3D A7			lda CURRENTSUBLOCATION
 17348 6473 C9 01			cmp #$01
 17349 6475 D0 09			jne l_428A
 17350
 17351 				; optimize OK (hideout.pas), line = 174
 17352
 17353 6477 AD B4 A8			lda PRICE
 17354 647A 18 69 32			add #$32
 17355 647D 8D B4 A8			sta PRICE
 17356 6480			l_428A
 17357
 17358 				; optimize OK (hideout.pas), line = 176
 17359
 17360 6480 A9 05			lda #$05
 17361 6482 20 C6 1C			jsr CRT_WRITE_LOCSTR
 17362
 17363 				; optimize OK (hideout.pas), line = 177
 17364
 17365 6485 AD B4 A8			lda PRICE
 17366 6488 20 7E 18			jsr B_CRT.CRT_WRITE.@010180000
 17367
 17368 				; optimize OK (hideout.pas), line = 178
 17369
 17370 648B A9 06			lda #$06
 17371 648D 20 C6 1C			jsr CRT_WRITE_LOCSTR
 17372
 17373 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', hideout.pas), line = 179
 17374
 17375 6490 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 17376
 17377 				; optimize OK (hideout.pas), line = 180
 17378
 17379 6493 A9 07			lda #$07
 17380 6495 20 C6 1C			jsr CRT_WRITE_LOCSTR
 17381
 17382 				; optimize FAIL ('CRT_NEWLINE2', hideout.pas), line = 181
 17383
 17384 6498 20 7B 1E			jsr CRT_NEWLINE2
 17385
 17386 				; optimize OK (hideout.pas), line = 183
 17387
 17388 649B AC 8A CD			ldy CURRENTPLAYER
 17389 649E B9 74 C9			lda adr.PLRENTMONTHS,y
 17390 64A1 F0 19			jeq l_42B8
 17391
 17392 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', hideout.pas), line = 185
 17393
 17394 64A3 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 17395
 17396 				; optimize OK (hideout.pas), line = 186
 17397
 17398 64A6 A9 08			lda #$08
 17399 64A8 20 C6 1C			jsr CRT_WRITE_LOCSTR
 17400
 17401 				; optimize OK (hideout.pas), line = 187
 17402
 17403 64AB AC 8A CD			ldy CURRENTPLAYER
 17404 64AE B9 74 C9			lda adr.PLRENTMONTHS,y
 17405 64B1 20 7E 18			jsr B_CRT.CRT_WRITE.@010180000
 17406
 17407 				; optimize OK (hideout.pas), line = 188
 17408
 17409 64B4 A9 09			lda #$09
 17410 64B6 20 C6 1C			jsr CRT_WRITE_LOCSTR
 17411
 17412 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', hideout.pas), line = 189
 17413
 17414 64B9 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 17415 64BC			l_42B8
 17416
 17417 				; optimize OK (hideout.pas), line = 191
 17418
 17419 64BC A9 0A			lda #$0A
 17420 64BE 20 C6 1C			jsr CRT_WRITE_LOCSTR
 17421
 17422 				; optimize OK (hideout.pas), line = 192
 17423
 17424 64C1 AC 8A CD			ldy CURRENTPLAYER
 17425 64C4 A9 24			lda #$24
 17426 64C6 38 F9 74 C9			sub adr.PLRENTMONTHS,y
 17427 64CA 8D 1E A7			sta READVALUE.MAXVALUE
 17428 64CD A9 00			lda #$00
 17429 64CF E9 00			sbc #$00
 17430 64D1 8D 1F A7			sta READVALUE.MAXVALUE+1
 17431 64D4 A9 00			lda #$00
 17432 64D6 8D 1C A7			sta READVALUE.MINVALUE
 17433 64D9 8D 1D A7			sta READVALUE.MINVALUE+1
 17434 64DC 20 26 20			jsr READVALUE
 17435 64DF AD 20 A7			lda READVALUE.RESULT
 17436 64E2 8D B3 A8			sta M
 17437
 17438 				; optimize OK (hideout.pas), line = 194
 17439
 17440 64E5 F0 46			jeq @exit
 17441 64E7			l_42EB
 17442
 17443 				; optimize OK (hideout.pas), line = 195
 17444
 17445 64E7 AD B3 A8			lda M
 17446 64EA 85 8C			sta :ecx
 17447 64EC AD B4 A8			lda PRICE
 17448 64EF 85 84			sta :eax
 17449 					.ifdef fmulinit
 17450 					fmulu_8
 17451 					els
 17452 64F1 20 43 10			imulCL
 17453 					eif
 17454 64F4 A5 84			lda :eax
 17455 64F6 8D D8 A7			sta PAYMONEY.PRICE
 17456 64F9 A5 85			lda :eax+1
 17457 64FB 8D D9 A7			sta PAYMONEY.PRICE+1
 17458 64FE 20 3B 32			jsr PAYMONEY
 17459 6501 AD DA A7			lda PAYMONEY.RESULT
 17460 6504 F0 27			jeq @exit
 17461 6506			l_4307
 17462
 17463 				; optimize OK (hideout.pas), line = 198
 17464
 17465 6506 AC 8A CD			ldy CURRENTPLAYER
 17466 6509 B9 74 C9			lda adr.PLRENTMONTHS,y
 17467 650C 18 6D B3 A8			add M
 17468 6510 99 74 C9			sta adr.PLRENTMONTHS,y
 17469
 17470 				; optimize OK (hideout.pas), line = 199
 17471
 17472 6513 AD B4 A8			lda PRICE
 17473 6516 99 78 C9			sta adr.PLRENTCOST,y
 17474
 17475 				; optimize OK (hideout.pas), line = 200
 17476
 17477 6519 AC 3D A7			ldy CURRENTSUBLOCATION
 17478 651C AD 8A CD			lda CURRENTPLAYER
 17479 651F 99 8C CD			sta adr.PLRENT,y
 17480
 17481 				; optimize FAIL ('CRT_NEWLINE2', hideout.pas), line = 202
 17482
 17483 6522 20 7B 1E			jsr CRT_NEWLINE2
 17484
 17485 				; optimize OK (hideout.pas), line = 203
 17486
 17487 6525 A9 0B			lda #$0B
 17488 6527 20 C6 1C			jsr CRT_WRITE_LOCSTR
 17489
 17490 				; optimize FAIL ('WAITFORKEY', hideout.pas), line = 204
 17491
 17492 652A 20 4A 1E			jsr WAITFORKEY
 17493 652D			@exit
 17494
 17495 				; ------------------------------------------------------------
 17496
 17497 = A8AE			RESULT	= DATAORIGIN+$0C58
 17498 = A8AF			R	= DATAORIGIN+$0C59
 17499 = A8B0			K	= DATAORIGIN+$0C5A
 17500 = A8B1			J	= DATAORIGIN+$0C5B
 17501 = A8B2			W	= DATAORIGIN+$0C5C
 17502 = A8B3			M	= DATAORIGIN+$0C5D
 17503 = A8B4			PRICE	= DATAORIGIN+$0C5E
 17504 = A8B5			PL	= DATAORIGIN+$0C5F
 17505 = A8B6			Z	= DATAORIGIN+$0C60
 17506
 17507 = A8AF			@VarData	= R
 17508 = 0009			@VarDataSize	= 9
 17509
 17510 652D 60				rts						; ret
 17511 				.endl
 17512
 17513 652E			.local	LOANSHARKCHOICES				; FUNCTION
 17514
 17515 				; optimize OK (loanshark.pas), line = 8
 17516
 17517 652E A9 04			lda #$04
 17518 6530 8D B8 A8			sta RESULT
 17519
 17520 				; optimize FAIL ('SHOWLOCATIONHEADER', loanshark.pas), line = 9
 17521
 17522 6533 20 7A 28			jsr SHOWLOCATIONHEADER
 17523
 17524 				; optimize OK (loanshark.pas), line = 11
 17525
 17526 6536 AD 22 C9			lda CURRENTCHOICE
 17527 6539 C9 01			cmp #$01
 17528 653B F0 03 4C 20 66		jne l_434D
 17529
 17530 				; optimize OK (loanshark.pas), line = 13
 17531
 17532 6540 AD 8A CD			lda CURRENTPLAYER
 17533 6543 0A				asl @
 17534 6544 A8				tay
 17535 6545 B9 65 C9			lda adr.PLLOAN+1,y
 17536 6548 30 10			jmi l_4362
 17537 654A 19 64 C9			ora adr.PLLOAN,y
 17538 654D F0 0B			jeq l_4362
 17539
 17540 				; optimize OK (loanshark.pas), line = 15
 17541
 17542 654F A9 01			lda #$01
 17543 6551 20 C6 1C			jsr CRT_WRITE_LOCSTR
 17544
 17545 				; optimize FAIL ('B_CRT.CRT_READCHAR', loanshark.pas), line = 16
 17546
 17547 6554 20 51 19			jsr B_CRT.CRT_READCHAR
 17548 6557 4C 03 6B			jmp @exit
 17549 655A			l_4362
 17550
 17551 				; optimize OK (loanshark.pas), line = 20
 17552
 17553 655A AC 8A CD			ldy CURRENTPLAYER
 17554 655D B9 70 C9			lda adr.PLLOANSHARK,y
 17555 6560 C9 63			cmp #$63
 17556 6562 F0 10			jeq l_437D
 17557
 17558 				; optimize OK (loanshark.pas), line = 22
 17559
 17560 6564 A9 25			lda #$25
 17561 6566 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 17562
 17563 				; optimize OK (loanshark.pas), line = 23
 17564
 17565 6569 A9 26			lda #$26
 17566 656B 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 17567
 17568 				; optimize FAIL ('WAITFORKEY', loanshark.pas), line = 24
 17569
 17570 656E 20 4A 1E			jsr WAITFORKEY
 17571 6571 4C 03 6B			jmp @exit
 17572 6574			l_437D
 17573
 17574 				; optimize OK (loanshark.pas), line = 28
 17575
 17576 6574 A9 02			lda #$02
 17577 6576 20 C6 1C			jsr CRT_WRITE_LOCSTR
 17578
 17579 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', loanshark.pas), line = 29
 17580
 17581 6579 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 17582
 17583 				; optimize OK (loanshark.pas), line = 30
 17584
 17585 657C A9 03			lda #$03
 17586 657E 20 C6 1C			jsr CRT_WRITE_LOCSTR
 17587
 17588 				; optimize OK (loanshark.pas), line = 31
 17589
 17590 6581 A9 00			lda #$00
 17591 6583 8D 1C A7			sta READVALUE.MINVALUE
 17592 6586 8D 1D A7			sta READVALUE.MINVALUE+1
 17593 6589 A9 88			lda #$88
 17594 658B 8D 1E A7			sta READVALUE.MAXVALUE
 17595 658E A9 13			lda #$13
 17596 6590 8D 1F A7			sta READVALUE.MAXVALUE+1
 17597 6593 20 26 20			jsr READVALUE
 17598 6596 AD 20 A7			lda READVALUE.RESULT
 17599 6599 8D BC A8			sta LOAN
 17600 659C AD 21 A7			lda READVALUE.RESULT+1
 17601 659F 8D BD A8			sta LOAN+1
 17602
 17603 				; optimize OK (loanshark.pas), line = 32
 17604
 17605 65A2 0D BC A8			ora LOAN
 17606 65A5 D0 03 4C 03 6B		jeq @exit
 17607 65AA			l_43A1
 17608
 17609 				; optimize FAIL ('CRT_NEWLINE2', loanshark.pas), line = 35
 17610
 17611 65AA 20 7B 1E			jsr CRT_NEWLINE2
 17612
 17613 				; optimize OK (loanshark.pas), line = 36
 17614
 17615 65AD A9 04			lda #$04
 17616 65AF 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 17617
 17618 				; optimize OK (loanshark.pas), line = 37
 17619
 17620 65B2 A9 05			lda #$05
 17621 65B4 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 17622
 17623 				; optimize OK (loanshark.pas), line = 38
 17624
 17625 65B7 AD BC A8			lda LOAN
 17626 65BA 8D BE A8			sta P
 17627 65BD AD BD A8			lda LOAN+1
 17628 65C0 8D BF A8			sta P+1
 17629
 17630 				; optimize OK (loanshark.pas), line = 39
 17631
 17632 65C3 85 AD			sta :STACKORIGIN+STACKWIDTH+9
 17633 65C5 AD BE A8			lda P
 17634 65C8 46 AD			lsr :STACKORIGIN+STACKWIDTH+9
 17635 65CA 6A				ror @
 17636 65CB 46 AD			lsr :STACKORIGIN+STACKWIDTH+9
 17637 65CD 6A				ror @
 17638 65CE 46 AD			lsr :STACKORIGIN+STACKWIDTH+9
 17639 65D0 6A				ror @
 17640 65D1 46 AD			lsr :STACKORIGIN+STACKWIDTH+9
 17641 65D3 6A				ror @
 17642 65D4 8D BE A8			sta P
 17643 65D7 A5 AD			lda :STACKORIGIN+STACKWIDTH+9
 17644 65D9 8D BF A8			sta P+1
 17645
 17646 				; optimize OK (loanshark.pas), line = 40
 17647
 17648 65DC AD 8A CD			lda CURRENTPLAYER
 17649 65DF 0A				asl @
 17650 65E0 A8				tay
 17651 65E1 AD BC A8			lda LOAN
 17652 65E4 18 6D BE A8			add P
 17653 65E8 99 64 C9			sta adr.PLLOAN,y
 17654 65EB AD BD A8			lda LOAN+1
 17655 65EE 6D BF A8			adc P+1
 17656 65F1 99 65 C9			sta adr.PLLOAN+1,y
 17657
 17658 				; optimize OK (loanshark.pas), line = 41
 17659
 17660 65F4 A9 04			lda #$04
 17661 65F6 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 17662 65F9 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 17663 65FC 8D F0 A3			sta TMP
 17664
 17665 				; optimize OK (loanshark.pas), line = 42
 17666
 17667 65FF 18 69 06			add #$06
 17668 6602 8D F0 A3			sta TMP
 17669
 17670 				; optimize OK (loanshark.pas), line = 43
 17671
 17672 6605 AC 8A CD			ldy CURRENTPLAYER
 17673 6608 99 6C C9			sta adr.PLLOANTIME,y
 17674
 17675 				; optimize OK (loanshark.pas), line = 44
 17676
 17677 660B AD BC A8			lda LOAN
 17678 660E 8D CB A7			sta ADDMONEY.AMOUNT
 17679 6611 AD BD A8			lda LOAN+1
 17680 6614 8D CC A7			sta ADDMONEY.AMOUNT+1
 17681 6617 20 98 2F			jsr ADDMONEY
 17682
 17683 				; optimize FAIL ('WAITFORKEY', loanshark.pas), line = 45
 17684
 17685 661A 20 4A 1E			jsr WAITFORKEY
 17686 661D 4C 03 6B			jmp @exit
 17687 6620			l_434D
 17688
 17689 				; optimize OK (loanshark.pas), line = 49
 17690
 17691 6620 AD 22 C9			lda CURRENTCHOICE
 17692 6623 C9 02			cmp #$02
 17693 6625 F0 03 4C 3E 67		jne l_43F4
 17694
 17695 				; optimize OK (loanshark.pas), line = 51
 17696
 17697 662A AD 8A CD			lda CURRENTPLAYER
 17698 662D 0A				asl @
 17699 662E A8				tay
 17700 662F B9 65 C9			lda adr.PLLOAN+1,y
 17701 6632 D0 03			bne @+
 17702 6634 B9 64 C9			lda adr.PLLOAN,y
 17703 				@
 17704 6637 D0 0B			jne l_4409
 17705
 17706 				; optimize OK (loanshark.pas), line = 53
 17707
 17708 6639 A9 06			lda #$06
 17709 663B 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 17710
 17711 				; optimize FAIL ('WAITFORKEY', loanshark.pas), line = 54
 17712
 17713 663E 20 4A 1E			jsr WAITFORKEY
 17714 6641 4C 03 6B			jmp @exit
 17715 6644			l_4409
 17716
 17717 				; optimize OK (loanshark.pas), line = 58
 17718
 17719 6644 A9 07			lda #$07
 17720 6646 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 17721
 17722 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', loanshark.pas), line = 59
 17723
 17724 6649 E8				inx
 17725 664A A9 AF 95 94			mva #$AF :STACKORIGIN,x
 17726 664E A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 17727 6652 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 17728
 17729 				; optimize OK (loanshark.pas), line = 60
 17730
 17731 6655 AD 8A CD			lda CURRENTPLAYER
 17732 6658 0A				asl @
 17733 6659 A8				tay
 17734 665A B9 64 C9			lda adr.PLLOAN,y
 17735 665D 8D 92 A1			sta B_CRT.CRT_WRITE.@010185000.NUM
 17736 6660 B9 65 C9			lda adr.PLLOAN+1,y
 17737 6663 85 AD			sta :STACKORIGIN+STACKWIDTH+9
 17738 6665 A0 00			ldy #$00
 17739 6667 A5 AD			lda :STACKORIGIN+STACKWIDTH+9
 17740 6669 10 01			spl
 17741 666B 88				dey
 17742 666C 8D 93 A1			sta B_CRT.CRT_WRITE.@010185000.NUM+1
 17743 666F 8C 94 A1			sty B_CRT.CRT_WRITE.@010185000.NUM+2
 17744 6672 8C 95 A1			sty B_CRT.CRT_WRITE.@010185000.NUM+3
 17745 6675 20 CA 18			jsr B_CRT.CRT_WRITE.@010185000
 17746
 17747 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', loanshark.pas), line = 61
 17748
 17749 6678 E8				inx
 17750 6679 A9 A6 95 94			mva #$A6 :STACKORIGIN,x
 17751 667D A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 17752 6681 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 17753
 17754 				; optimize OK (loanshark.pas), line = 62
 17755
 17756 6684 AD 8A CD			lda CURRENTPLAYER
 17757 6687 0A				asl @
 17758 6688 A8				tay
 17759 6689 B9 64 C9			lda adr.PLLOAN,y
 17760 668C 8D 1E A7			sta READVALUE.MAXVALUE
 17761 668F B9 65 C9			lda adr.PLLOAN+1,y
 17762 6692 8D 1F A7			sta READVALUE.MAXVALUE+1
 17763 6695 A9 00			lda #$00
 17764 6697 8D 1C A7			sta READVALUE.MINVALUE
 17765 669A 8D 1D A7			sta READVALUE.MINVALUE+1
 17766 669D 20 26 20			jsr READVALUE
 17767 66A0 AD 20 A7			lda READVALUE.RESULT
 17768 66A3 8D BC A8			sta LOAN
 17769 66A6 AD 21 A7			lda READVALUE.RESULT+1
 17770 66A9 8D BD A8			sta LOAN+1
 17771
 17772 				; optimize OK (loanshark.pas), line = 63
 17773
 17774 66AC 0D BC A8			ora LOAN
 17775 66AF D0 03 4C 03 6B		jeq @exit
 17776 66B4			l_4436
 17777
 17778 				; optimize OK (loanshark.pas), line = 66
 17779
 17780 66B4 AD BC A8			lda LOAN
 17781 66B7 8D D8 A7			sta PAYMONEY.PRICE
 17782 66BA AD BD A8			lda LOAN+1
 17783 66BD 8D D9 A7			sta PAYMONEY.PRICE+1
 17784 66C0 20 3B 32			jsr PAYMONEY
 17785 66C3 AD DA A7			lda PAYMONEY.RESULT
 17786 66C6 D0 03 4C 03 6B		jeq @exit
 17787 66CB			l_444B
 17788
 17789 				; optimize OK (loanshark.pas), line = 67
 17790
 17791 66CB AD 8A CD			lda CURRENTPLAYER
 17792 66CE 0A				asl @
 17793 66CF A8				tay
 17794 66D0 B9 64 C9			lda adr.PLLOAN,y
 17795 66D3 38 ED BC A8			sub LOAN
 17796 66D7 99 64 C9			sta adr.PLLOAN,y
 17797 66DA B9 65 C9			lda adr.PLLOAN+1,y
 17798 66DD ED BD A8			sbc LOAN+1
 17799 66E0 99 65 C9			sta adr.PLLOAN+1,y
 17800
 17801 				; optimize OK (loanshark.pas), line = 68
 17802
 17803 66E3 C9 00			cmp #$00
 17804 66E5 D0 03			bne @+
 17805 66E7 B9 64 C9			lda adr.PLLOAN,y
 17806 				@
 17807 66EA D0 13			jne l_4472
 17808
 17809 				; optimize FAIL ('CRT_NEWLINE2', loanshark.pas), line = 70
 17810
 17811 66EC 20 7B 1E			jsr CRT_NEWLINE2
 17812
 17813 				; optimize OK (loanshark.pas), line = 71
 17814
 17815 66EF AC 8A CD			ldy CURRENTPLAYER
 17816 66F2 A9 00			lda #$00
 17817 66F4 99 6C C9			sta adr.PLLOANTIME,y
 17818
 17819 				; optimize OK (loanshark.pas), line = 72
 17820
 17821 66F7 A9 08			lda #$08
 17822 66F9 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 17823 66FC 4C 3B 67			jmp l_4486
 17824 66FF			l_4472
 17825
 17826 				; optimize FAIL ('CRT_NEWLINE2', loanshark.pas), line = 76
 17827
 17828 66FF 20 7B 1E			jsr CRT_NEWLINE2
 17829
 17830 				; optimize OK (loanshark.pas), line = 77
 17831
 17832 6702 A9 09			lda #$09
 17833 6704 20 C6 1C			jsr CRT_WRITE_LOCSTR
 17834
 17835 				; optimize OK (loanshark.pas), line = 78
 17836
 17837 6707 AD 8A CD			lda CURRENTPLAYER
 17838 670A 0A				asl @
 17839 670B A8				tay
 17840 670C B9 64 C9			lda adr.PLLOAN,y
 17841 670F 8D 92 A1			sta B_CRT.CRT_WRITE.@010185000.NUM
 17842 6712 B9 65 C9			lda adr.PLLOAN+1,y
 17843 6715 85 AD			sta :STACKORIGIN+STACKWIDTH+9
 17844 6717 A0 00			ldy #$00
 17845 6719 A5 AD			lda :STACKORIGIN+STACKWIDTH+9
 17846 671B 10 01			spl
 17847 671D 88				dey
 17848 671E 8D 93 A1			sta B_CRT.CRT_WRITE.@010185000.NUM+1
 17849 6721 8C 94 A1			sty B_CRT.CRT_WRITE.@010185000.NUM+2
 17850 6724 8C 95 A1			sty B_CRT.CRT_WRITE.@010185000.NUM+3
 17851 6727 20 CA 18			jsr B_CRT.CRT_WRITE.@010185000
 17852
 17853 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', loanshark.pas), line = 79
 17854
 17855 672A E8				inx
 17856 672B A9 88 95 94			mva #$88 :STACKORIGIN,x
 17857 672F A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 17858 6733 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 17859
 17860 				; optimize OK (loanshark.pas), line = 80
 17861
 17862 6736 A9 0A			lda #$0A
 17863 6738 20 C6 1C			jsr CRT_WRITE_LOCSTR
 17864 673B			l_4486
 17865
 17866 				; optimize FAIL ('WAITFORKEY', loanshark.pas), line = 82
 17867
 17868 673B 20 4A 1E			jsr WAITFORKEY
 17869 673E			l_43F4
 17870
 17871 				; optimize OK (loanshark.pas), line = 86
 17872
 17873 673E AD 22 C9			lda CURRENTCHOICE
 17874 6741 C9 03			cmp #$03
 17875 6743 F0 03 4C B9 68		jne l_44A8
 17876
 17877 				; optimize OK (loanshark.pas), line = 89
 17878
 17879 6748 AD 8A CD			lda CURRENTPLAYER
 17880 674B 0A				asl @
 17881 674C A8				tay
 17882 674D B9 65 C9			lda adr.PLLOAN+1,y
 17883 6750 D0 03			bne @+
 17884 6752 B9 64 C9			lda adr.PLLOAN,y
 17885 				@
 17886 6755 F0 0B			jeq l_44BD
 17887
 17888 				; optimize OK (loanshark.pas), line = 90
 17889
 17890 6757 A9 15			lda #$15
 17891 6759 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 17892
 17893 				; optimize FAIL ('WAITFORKEY', loanshark.pas), line = 91
 17894
 17895 675C 20 4A 1E			jsr WAITFORKEY
 17896 675F 4C 03 6B			jmp @exit
 17897 6762			l_44BD
 17898
 17899 				; optimize OK (loanshark.pas), line = 95
 17900
 17901 6762 A9 0B			lda #$0B
 17902 6764 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 17903 6767 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 17904 676A 8D F0 A3			sta TMP
 17905
 17906 				; optimize OK (loanshark.pas), line = 96
 17907
 17908 676D 85 8C			sta :ecx
 17909 676F A9 64			lda #$64
 17910 6771 85 84			sta :eax
 17911 					.ifdef fmulinit
 17912 					fmulu_8
 17913 					els
 17914 6773 20 43 10			imulCL
 17915 					eif
 17916 6776 8D BF A8			sta P+1
 17917 6779 A5 84			lda :eax
 17918 677B 8D BE A8			sta P
 17919
 17920 				; optimize OK (loanshark.pas), line = 97
 17921
 17922 677E AC 8A CD			ldy CURRENTPLAYER
 17923 6781 B9 70 C9			lda adr.PLLOANSHARK,y
 17924 6784 CD 3D A7			cmp CURRENTSUBLOCATION
 17925 6787 D0 6A			jne l_44E9
 17926
 17927 				; optimize OK (loanshark.pas), line = 100
 17928
 17929 6789 AD BE A8			lda P
 17930 678C 18 69 94			add #$94
 17931 678F 8D BE A8			sta P
 17932 6792 AD BF A8			lda P+1
 17933 6795 69 11			adc #$11
 17934 6797 8D BF A8			sta P+1
 17935
 17936 				; optimize OK (loanshark.pas), line = 101
 17937
 17938 679A A9 16			lda #$16
 17939 679C 20 C6 1C			jsr CRT_WRITE_LOCSTR
 17940
 17941 				; optimize OK (loanshark.pas), line = 102
 17942
 17943 679F AD BE A8			lda P
 17944 67A2 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 17945 67A5 AD BF A8			lda P+1
 17946 67A8 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 17947 67AB 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 17948
 17949 				; optimize OK (loanshark.pas), line = 103
 17950
 17951 67AE A9 17			lda #$17
 17952 67B0 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 17953
 17954 				; optimize OK (loanshark.pas), line = 104
 17955
 17956 67B3 A9 18			lda #$18
 17957 67B5 20 C6 1C			jsr CRT_WRITE_LOCSTR
 17958
 17959 				; optimize FAIL ('GETYESNO', loanshark.pas), line = 105
 17960
 17961 67B8 20 08 20			jsr GETYESNO
 17962 67BB AD 1B A7			lda GETYESNO.RESULT
 17963 67BE D0 03 4C 03 6B		jeq @exit
 17964 67C3			l_450C
 17965
 17966 				; optimize OK (loanshark.pas), line = 106
 17967
 17968 67C3 AD BE A8			lda P
 17969 67C6 8D CB A7			sta ADDMONEY.AMOUNT
 17970 67C9 AD BF A8			lda P+1
 17971 67CC 8D CC A7			sta ADDMONEY.AMOUNT+1
 17972 67CF 20 98 2F			jsr ADDMONEY
 17973
 17974 				; optimize OK (loanshark.pas), line = 107
 17975
 17976 67D2 AC 8A CD			ldy CURRENTPLAYER
 17977 67D5 A9 63			lda #$63
 17978 67D7 99 70 C9			sta adr.PLLOANSHARK,y
 17979
 17980 				; optimize OK (loanshark.pas), line = 108
 17981
 17982 67DA 98				tya
 17983 67DB 0A				asl @
 17984 67DC A8				tay
 17985 67DD A9 00			lda #$00
 17986 67DF 99 A4 C9			sta adr.PLLOANINVEST,y
 17987 67E2 99 A5 C9			sta adr.PLLOANINVEST+1,y
 17988
 17989 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', loanshark.pas), line = 109
 17990
 17991 67E5 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 17992
 17993 				; optimize OK (loanshark.pas), line = 110
 17994
 17995 67E8 A9 19			lda #$19
 17996 67EA 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 17997
 17998 				; optimize FAIL ('WAITFORKEY', loanshark.pas), line = 111
 17999
 18000 67ED 20 4A 1E			jsr WAITFORKEY
 18001 67F0 4C 03 6B			jmp @exit
 18002 67F3			l_44E9
 18003
 18004 				; optimize OK (loanshark.pas), line = 116
 18005
 18006 67F3 AC 8A CD			ldy CURRENTPLAYER
 18007 67F6 B9 70 C9			lda adr.PLLOANSHARK,y
 18008 67F9 C9 63			cmp #$63
 18009 67FB F0 0B			jeq l_4542
 18010
 18011 				; optimize OK (loanshark.pas), line = 118
 18012
 18013 67FD A9 0B			lda #$0B
 18014 67FF 20 C6 1C			jsr CRT_WRITE_LOCSTR
 18015
 18016 				; optimize FAIL ('WAITFORKEY', loanshark.pas), line = 119
 18017
 18018 6802 20 4A 1E			jsr WAITFORKEY
 18019 6805 4C 03 6B			jmp @exit
 18020 6808			l_4542
 18021
 18022 				; optimize OK (loanshark.pas), line = 122
 18023
 18024 6808 A9 00			lda #$00
 18025 680A 8D B9 A8			sta R
 18026
 18027 680D			l_4551
 18028 				; --- ForToDoCondition
 18029 680D AC B9 A8			ldy R
 18030 6810 C0 04			cpy #$04
 18031 6812 B0 40			jcs l_455F
 18032
 18033 				; optimize OK (loanshark.pas), line = 124
 18034
 18035 6814 B9 70 C9			lda adr.PLLOANSHARK,y
 18036 6817 CD 3D A7			cmp CURRENTSUBLOCATION
 18037 681A D0 33			jne l_4576
 18038
 18039 				; optimize OK (loanshark.pas), line = 125
 18040
 18041 681C A9 1A			lda #$1A
 18042 681E 20 C6 1C			jsr CRT_WRITE_LOCSTR
 18043
 18044 				; optimize OK (loanshark.pas), line = 126
 18045
 18046 6821 AD B9 A8			lda R
 18047 6824 0A				asl @
 18048 6825 0A				asl @
 18049 6826 0A				asl @
 18050 6827 8D BA A8			sta K
 18051
 18052 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', loanshark.pas), line = 127
 18053
 18054 682A E8				inx
 18055 682B AD BA A8			lda K
 18056 682E 0A				asl @
 18057 682F A8				tay
 18058 6830 B9 15 A4			lda adr.GANGSTERNAMES,y
 18059 6833 95 94			sta :STACKORIGIN,x
 18060 6835 B9 16 A4			lda adr.GANGSTERNAMES+1,y
 18061 6838 95 A4			sta :STACKORIGIN+STACKWIDTH,x
 18062 683A 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 18063
 18064 				; optimize FAIL ('CRT_WRITELN', loanshark.pas), line = 128
 18065
 18066 683D E8				inx
 18067 683E A9 B3 95 94			mva #$B3 :STACKORIGIN,x
 18068 6842 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 18069 6846 20 A9 1E			jsr CRT_WRITELN
 18070
 18071 				; optimize FAIL ('WAITFORKEY', loanshark.pas), line = 129
 18072
 18073 6849 20 4A 1E			jsr WAITFORKEY
 18074 684C 4C 03 6B			jmp @exit
 18075 684F			l_4576
 18076
 18077 				; --- ForToDoEpilog
 18078 684F EE B9 A8			inc R
 18079 6852 D0 B9			jne l_4551
 18080 6854			l_455F
 18081
 18082 				; optimize OK (loanshark.pas), line = 135
 18083
 18084 6854 AD BE A8			lda P
 18085 6857 18 69 88			add #$88
 18086 685A 8D BE A8			sta P
 18087 685D AD BF A8			lda P+1
 18088 6860 69 13			adc #$13
 18089 6862 8D BF A8			sta P+1
 18090
 18091 				; optimize OK (loanshark.pas), line = 136
 18092
 18093 6865 A9 1B			lda #$1B
 18094 6867 20 C6 1C			jsr CRT_WRITE_LOCSTR
 18095
 18096 				; optimize OK (loanshark.pas), line = 137
 18097
 18098 686A AD BE A8			lda P
 18099 686D 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 18100 6870 AD BF A8			lda P+1
 18101 6873 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 18102 6876 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 18103
 18104 				; optimize OK (loanshark.pas), line = 138
 18105
 18106 6879 A9 1C			lda #$1C
 18107 687B 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 18108
 18109 				; optimize OK (loanshark.pas), line = 139
 18110
 18111 687E A9 1D			lda #$1D
 18112 6880 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 18113
 18114 				; optimize FAIL ('GETYESNO', loanshark.pas), line = 140
 18115
 18116 6883 20 08 20			jsr GETYESNO
 18117 6886 AD 1B A7			lda GETYESNO.RESULT
 18118 6889 D0 03 4C 03 6B		jeq @exit
 18119 688E			l_45B5
 18120
 18121 				; optimize OK (loanshark.pas), line = 141
 18122
 18123 688E AD BE A8			lda P
 18124 6891 8D D8 A7			sta PAYMONEY.PRICE
 18125 6894 AD BF A8			lda P+1
 18126 6897 8D D9 A7			sta PAYMONEY.PRICE+1
 18127 689A 20 3B 32			jsr PAYMONEY
 18128 689D AD DA A7			lda PAYMONEY.RESULT
 18129 68A0 D0 03 4C 03 6B		jeq @exit
 18130 68A5			l_45CA
 18131
 18132 				; optimize OK (loanshark.pas), line = 142
 18133
 18134 68A5 AC 8A CD			ldy CURRENTPLAYER
 18135 68A8 AD 3D A7			lda CURRENTSUBLOCATION
 18136 68AB 99 70 C9			sta adr.PLLOANSHARK,y
 18137
 18138 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', loanshark.pas), line = 143
 18139
 18140 68AE 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 18141
 18142 				; optimize OK (loanshark.pas), line = 144
 18143
 18144 68B1 A9 1E			lda #$1E
 18145 68B3 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 18146
 18147 				; optimize FAIL ('WAITFORKEY', loanshark.pas), line = 145
 18148
 18149 68B6 20 4A 1E			jsr WAITFORKEY
 18150 68B9			l_452D
 18151 68B9			l_44A8
 18152
 18153 				; optimize OK (loanshark.pas), line = 150
 18154
 18155 68B9 AD 22 C9			lda CURRENTCHOICE
 18156 68BC C9 04			cmp #$04
 18157 68BE F0 03 4C 9E 69		jne l_45EE
 18158
 18159 				; optimize OK (loanshark.pas), line = 152
 18160
 18161 68C3 AC 8A CD			ldy CURRENTPLAYER
 18162 68C6 B9 70 C9			lda adr.PLLOANSHARK,y
 18163 68C9 CD 3D A7			cmp CURRENTSUBLOCATION
 18164 68CC F0 0B			jeq l_4606
 18165
 18166 				; optimize OK (loanshark.pas), line = 154
 18167
 18168 68CE A9 0C			lda #$0C
 18169 68D0 20 C6 1C			jsr CRT_WRITE_LOCSTR
 18170
 18171 				; optimize FAIL ('WAITFORKEY', loanshark.pas), line = 155
 18172
 18173 68D3 20 4A 1E			jsr WAITFORKEY
 18174 68D6 4C 03 6B			jmp @exit
 18175 68D9			l_4606
 18176
 18177 				; optimize OK (loanshark.pas), line = 158
 18178
 18179 68D9 A9 1F			lda #$1F
 18180 68DB 20 C6 1C			jsr CRT_WRITE_LOCSTR
 18181
 18182 				; optimize OK (loanshark.pas), line = 159
 18183
 18184 68DE AD 8A CD			lda CURRENTPLAYER
 18185 68E1 0A				asl @
 18186 68E2 A8				tay
 18187 68E3 B9 A4 C9			lda adr.PLLOANINVEST,y
 18188 68E6 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 18189 68E9 B9 A5 C9			lda adr.PLLOANINVEST+1,y
 18190 68EC 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 18191 68EF 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 18192
 18193 				; optimize OK (loanshark.pas), line = 160
 18194
 18195 68F2 A9 20			lda #$20
 18196 68F4 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 18197
 18198 				; optimize OK (loanshark.pas), line = 161
 18199
 18200 68F7 A9 21			lda #$21
 18201 68F9 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 18202
 18203 				; optimize OK (loanshark.pas), line = 162
 18204
 18205 68FC A9 22			lda #$22
 18206 68FE 20 C6 1C			jsr CRT_WRITE_LOCSTR
 18207
 18208 				; optimize OK (loanshark.pas), line = 164
 18209
 18210 6901 AD 8A CD			lda CURRENTPLAYER
 18211 6904 0A				asl @
 18212 6905 A8				tay
 18213 6906 A9 88			lda #$88
 18214 6908 38 F9 A4 C9			sub adr.PLLOANINVEST,y
 18215 690C 8D 1E A7			sta READVALUE.MAXVALUE
 18216 690F A9 13			lda #$13
 18217 6911 F9 A5 C9			sbc adr.PLLOANINVEST+1,y
 18218 6914 8D 1F A7			sta READVALUE.MAXVALUE+1
 18219 6917 A9 00			lda #$00
 18220 6919 38 F9 A4 C9			sub adr.PLLOANINVEST,y
 18221 691D 8D 1C A7			sta READVALUE.MINVALUE
 18222 6920 A9 00			lda #$00
 18223 6922 F9 A5 C9			sbc adr.PLLOANINVEST+1,y
 18224 6925 8D 1D A7			sta READVALUE.MINVALUE+1
 18225 6928 20 26 20			jsr READVALUE
 18226 692B AD 20 A7			lda READVALUE.RESULT
 18227 692E 8D BC A8			sta LOAN
 18228 6931 AD 21 A7			lda READVALUE.RESULT+1
 18229 6934 8D BD A8			sta LOAN+1
 18230
 18231 				; optimize OK (loanshark.pas), line = 165
 18232
 18233 6937 0D BC A8			ora LOAN
 18234 693A D0 03 4C 03 6B		jeq @exit
 18235 693F			l_4640
 18236
 18237 				; optimize OK (loanshark.pas), line = 166
 18238
 18239 693F AD BC A8			lda LOAN
 18240 6942 8D D8 A7			sta PAYMONEY.PRICE
 18241 6945 AD BD A8			lda LOAN+1
 18242 6948 8D D9 A7			sta PAYMONEY.PRICE+1
 18243 694B 20 3B 32			jsr PAYMONEY
 18244 694E AD DA A7			lda PAYMONEY.RESULT
 18245 6951 D0 03 4C 03 6B		jeq @exit
 18246 6956			l_4655
 18247
 18248 				; optimize OK (loanshark.pas), line = 167
 18249
 18250 6956 AD 8A CD			lda CURRENTPLAYER
 18251 6959 0A				asl @
 18252 695A A8				tay
 18253 695B B9 A4 C9			lda adr.PLLOANINVEST,y
 18254 695E 18 6D BC A8			add LOAN
 18255 6962 99 A4 C9			sta adr.PLLOANINVEST,y
 18256 6965 B9 A5 C9			lda adr.PLLOANINVEST+1,y
 18257 6968 6D BD A8			adc LOAN+1
 18258 696B 99 A5 C9			sta adr.PLLOANINVEST+1,y
 18259
 18260 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', loanshark.pas), line = 168
 18261
 18262 696E 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 18263
 18264 				; optimize OK (loanshark.pas), line = 169
 18265
 18266 6971 A9 23			lda #$23
 18267 6973 20 C6 1C			jsr CRT_WRITE_LOCSTR
 18268
 18269 				; optimize OK (loanshark.pas), line = 170
 18270
 18271 6976 AD 8A CD			lda CURRENTPLAYER
 18272 6979 0A				asl @
 18273 697A A8				tay
 18274 697B B9 A4 C9			lda adr.PLLOANINVEST,y
 18275 697E 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 18276 6981 B9 A5 C9			lda adr.PLLOANINVEST+1,y
 18277 6984 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 18278 6987 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 18279
 18280 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', loanshark.pas), line = 171
 18281
 18282 698A E8				inx
 18283 698B A9 88 95 94			mva #$88 :STACKORIGIN,x
 18284 698F A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 18285 6993 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 18286
 18287 				; optimize OK (loanshark.pas), line = 172
 18288
 18289 6996 A9 24			lda #$24
 18290 6998 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 18291
 18292 				; optimize FAIL ('WAITFORKEY', loanshark.pas), line = 173
 18293
 18294 699B 20 4A 1E			jsr WAITFORKEY
 18295 699E			l_45EE
 18296
 18297 				; optimize OK (loanshark.pas), line = 176
 18298
 18299 699E AD 22 C9			lda CURRENTCHOICE
 18300 69A1 C9 05			cmp #$05
 18301 69A3 F0 03 4C 03 6B		jne l_468A
 18302
 18303 				; optimize OK (loanshark.pas), line = 178
 18304
 18305 69A8 AC 8A CD			ldy CURRENTPLAYER
 18306 69AB B9 70 C9			lda adr.PLLOANSHARK,y
 18307 69AE CD 3D A7			cmp CURRENTSUBLOCATION
 18308 69B1 F0 0B			jeq l_46A2
 18309
 18310 				; optimize OK (loanshark.pas), line = 180
 18311
 18312 69B3 A9 0C			lda #$0C
 18313 69B5 20 C6 1C			jsr CRT_WRITE_LOCSTR
 18314
 18315 				; optimize FAIL ('WAITFORKEY', loanshark.pas), line = 181
 18316
 18317 69B8 20 4A 1E			jsr WAITFORKEY
 18318 69BB 4C 03 6B			jmp @exit
 18319 69BE			l_46A2
 18320
 18321 				; optimize OK (loanshark.pas), line = 186
 18322
 18323 69BE A9 00			lda #$00
 18324 69C0 8D BB A8			sta ALLPAID
 18325
 18326 				; optimize OK (loanshark.pas), line = 187
 18327
 18328 69C3 A9 03			lda #$03
 18329 69C5 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 18330 69C8 E8				inx
 18331 69C9 E8				inx
 18332 69CA A0 01			ldy #1
 18333 69CC AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 18334 69CF D0 01			bne @+
 18335 69D1 88				dey
 18336 				@
 18337 69D2 94 93			sty :STACKORIGIN-1,x
 18338 69D4 AD 8A CD			lda CURRENTPLAYER
 18339 69D7 0A				asl @
 18340 69D8 A8				tay
 18341 69D9 B9 A4 C9			lda adr.PLLOANINVEST,y
 18342 69DC 95 94			sta :STACKORIGIN,x
 18343 69DE B9 A5 C9			lda adr.PLLOANINVEST+1,y
 18344 69E1 95 A4			sta :STACKORIGIN+STACKWIDTH,x
 18345 69E3 E8				inx
 18346 69E4 A0 01			ldy #1
 18347 69E6 B5 A3			lda :STACKORIGIN-1+STACKWIDTH,x
 18348 69E8 15 93			ora :STACKORIGIN-1,x
 18349 69EA D0 01			bne @+
 18350 69EC 88				dey
 18351 				@
 18352 69ED CA				dex
 18353 69EE 94 94			sty :STACKORIGIN,x
 18354 69F0 CA				dex
 18355 69F1 CA				dex
 18356 69F2 B5 95			lda :STACKORIGIN+1,x
 18357 69F4 35 96			and :STACKORIGIN+2,x
 18358 69F6 F0 05			jeq l_46CB
 18359 69F8 A9 01			lda #$01
 18360 69FA 8D BB A8			sta ALLPAID
 18361 69FD			l_46CB
 18362
 18363 				; optimize OK (loanshark.pas), line = 188
 18364
 18365 69FD AD BB A8			lda ALLPAID
 18366 6A00 D0 0B			jne l_46E4
 18367
 18368 				; optimize OK (loanshark.pas), line = 190
 18369
 18370 6A02 A9 0D			lda #$0D
 18371 6A04 20 C6 1C			jsr CRT_WRITE_LOCSTR
 18372
 18373 				; optimize FAIL ('WAITFORKEY', loanshark.pas), line = 191
 18374
 18375 6A07 20 4A 1E			jsr WAITFORKEY
 18376 6A0A 4C 03 6B			jmp @exit
 18377 6A0D			l_46E4
 18378
 18379 				; optimize OK (loanshark.pas), line = 195
 18380
 18381 6A0D A9 0E			lda #$0E
 18382 6A0F 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 18383
 18384 				; optimize OK (loanshark.pas), line = 196
 18385
 18386 6A12 A9 0F			lda #$0F
 18387 6A14 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 18388
 18389 				; optimize OK (loanshark.pas), line = 197
 18390
 18391 6A17 A9 10			lda #$10
 18392 6A19 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 18393
 18394 				; optimize FAIL ('WAITFORKEY', loanshark.pas), line = 198
 18395
 18396 6A1C 20 4A 1E			jsr WAITFORKEY
 18397
 18398 				; -------------------  ASM Block 00000163  -------------------
 18399
 18400 				 
 18401 6A1F AD DD 9A		            lda loc_string_17
 18402 6A22 8D AC A3		            sta adr.FP_GANG+$02
 18403 6A25 AD DE 9A		            lda loc_string_17+1
 18404 6A28 8D AD A3		            sta adr.FP_GANG+1+$02
 18405 				        
 18406 				; optimize OK (loanshark.pas), line = 206
 18407
 18408 6A2B A9 01			lda #$01
 18409 6A2D 8D 02 E4			sta adr.FP_AI+$01
 18410
 18411 				; optimize OK (loanshark.pas), line = 207
 18412
 18413 6A30 8D 04 E4			sta adr.FP_N+$01
 18414
 18415 				; optimize OK (loanshark.pas), line = 208
 18416
 18417 6A33 AD CE A3			lda adr.FP_NAME+$20
 18418 6A36 85 8C			sta @move.dst
 18419 6A38 AD CF A3			lda adr.FP_NAME+1+$20
 18420 6A3B 85 8D			sta @move.dst+1
 18421 6A3D AD DD 9A			lda LOC_STRING_17
 18422 6A40 85 88			sta @move.src
 18423 6A42 AD DE 9A			lda LOC_STRING_17+1
 18424 6A45 85 89			sta @move.src+1
 18425 6A47 A0 00			ldy #$00
 18426 6A49 B1 88			lda (@move.src),y
 18427 6A4B 18 69 01			add #1
 18428 6A4E 85 84			sta @move.cnt
 18429 6A50 90 01			scc
 18430 6A52 C8				iny
 18431 6A53 84 85			sty @move.cnt+1
 18432 6A55 20 D7 0E			jsr @move
 18433
 18434 				; optimize OK (loanshark.pas), line = 209
 18435
 18436 6A58 A9 06			lda #$06
 18437 6A5A 8D 55 E4			sta adr.FP_WEAPON+$10
 18438
 18439 				; optimize FAIL (1, loanshark.pas), line = 210
 18440
 18441 6A5D E8				inx
 18442 6A5E A9 10 95 94			mva #$10 :STACKORIGIN,x
 18443 6A62 A9 00 95 A4			mva #$00 :STACKORIGIN+STACKWIDTH,x
 18444 6A66 A9 02			lda #$02
 18445 6A68 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 18446 6A6B B4 94			ldy :STACKORIGIN,x
 18447 6A6D AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 18448 6A70 99 45 E5			sta adr.FP_SEX,y
 18449 6A73 CA				dex
 18450
 18451 				; optimize OK (loanshark.pas), line = 211
 18452
 18453 6A74 A9 23			lda #$23
 18454 6A76 8D 95 E4			sta adr.FP_ENERGY+$10
 18455
 18456 				; optimize FAIL ('DOFIGHT', loanshark.pas), line = 214
 18457
 18458 6A79 20 9F 4D			jsr DOFIGHT
 18459 6A7C AD 4E A8			lda DOFIGHT.RESULT
 18460 6A7F C9 01			cmp #$01
 18461 6A81 D0 08			jne l_4721
 18462
 18463 				; optimize OK (loanshark.pas), line = 215
 18464
 18465 6A83 A9 01			lda #$01
 18466 6A85 20 FD 2F			jsr REMOVEPOINTS
 18467 6A88 4C 03 6B			jmp @exit
 18468 6A8B			l_4721
 18469
 18470 				; optimize FAIL (1, loanshark.pas), line = 219
 18471
 18472 6A8B E8				inx
 18473 6A8C A9 F4 95 94			mva #$F4 :STACKORIGIN,x
 18474 6A90 A9 01 95 A4			mva #$01 :STACKORIGIN+STACKWIDTH,x
 18475 6A94 A9 00			lda #$00
 18476 6A96 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 18477 6A99 E8				inx
 18478 6A9A AD 62 9C 95 94		mva SYSTEM.RANDOM.@010180000.RESULT :STACKORIGIN,x
 18479 6A9F E8				inx
 18480 6AA0 A9 02 95 94			mva #$02 :STACKORIGIN,x
 18481 6AA4 20 10 0E			jsr @shlEAX_CL.BYTE
 18482 6AA7 CA				dex
 18483 6AA8 A9 00 95 B3			mva #$00 :STACKORIGIN-1+STACKWIDTH*2,x
 18484 6AAC 95 C3			sta :STACKORIGIN-1+STACKWIDTH*3,x
 18485 6AAE 20 F9 0D			jsr addAX_CX
 18486 6AB1 CA				dex
 18487 6AB2 B5 94			lda :STACKORIGIN,x
 18488 6AB4 8D BC A8			sta LOAN
 18489 6AB7 B5 A4			lda :STACKORIGIN+STACKWIDTH,x
 18490 6AB9 8D BD A8			sta LOAN+1
 18491 6ABC CA				dex
 18492
 18493 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', loanshark.pas), line = 220
 18494
 18495 6ABD 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 18496
 18497 				; optimize FAIL ('SHOWLOCATIONHEADER', loanshark.pas), line = 223
 18498
 18499 6AC0 20 7A 28			jsr SHOWLOCATIONHEADER
 18500
 18501 				; optimize OK (loanshark.pas), line = 224
 18502
 18503 6AC3 A9 12			lda #$12
 18504 6AC5 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 18505
 18506 				; optimize OK (loanshark.pas), line = 225
 18507
 18508 6AC8 A9 13			lda #$13
 18509 6ACA 20 C6 1C			jsr CRT_WRITE_LOCSTR
 18510
 18511 				; optimize OK (loanshark.pas), line = 226
 18512
 18513 6ACD AD BC A8			lda LOAN
 18514 6AD0 8D 92 A1			sta B_CRT.CRT_WRITE.@010185000.NUM
 18515 6AD3 A0 00			ldy #$00
 18516 6AD5 AD BD A8			lda LOAN+1
 18517 6AD8 10 01			spl
 18518 6ADA 88				dey
 18519 6ADB 8D 93 A1			sta B_CRT.CRT_WRITE.@010185000.NUM+1
 18520 6ADE 8C 94 A1			sty B_CRT.CRT_WRITE.@010185000.NUM+2
 18521 6AE1 8C 95 A1			sty B_CRT.CRT_WRITE.@010185000.NUM+3
 18522 6AE4 20 CA 18			jsr B_CRT.CRT_WRITE.@010185000
 18523
 18524 				; optimize OK (loanshark.pas), line = 227
 18525
 18526 6AE7 A9 14			lda #$14
 18527 6AE9 20 C6 1C			jsr CRT_WRITE_LOCSTR
 18528
 18529 				; optimize FAIL ('WAITFORKEY', loanshark.pas), line = 228
 18530
 18531 6AEC 20 4A 1E			jsr WAITFORKEY
 18532
 18533 				; optimize OK (loanshark.pas), line = 229
 18534
 18535 6AEF A9 02			lda #$02
 18536 6AF1 20 EC 2F			jsr ADDPOINTS
 18537
 18538 				; optimize OK (loanshark.pas), line = 230
 18539
 18540 6AF4 AD BC A8			lda LOAN
 18541 6AF7 8D CB A7			sta ADDMONEY.AMOUNT
 18542 6AFA AD BD A8			lda LOAN+1
 18543 6AFD 8D CC A7			sta ADDMONEY.AMOUNT+1
 18544 6B00 20 98 2F			jsr ADDMONEY
 18545 6B03			l_468A
 18546 6B03			@exit
 18547
 18548 				; ------------------------------------------------------------
 18549
 18550 = A8B8			RESULT	= DATAORIGIN+$0C62
 18551 = A8B9			R	= DATAORIGIN+$0C63
 18552 = A8BA			K	= DATAORIGIN+$0C64
 18553 = A8BB			ALLPAID	= DATAORIGIN+$0C65
 18554 = A8BC			LOAN	= DATAORIGIN+$0C66
 18555 = A8BE			P	= DATAORIGIN+$0C68
 18556
 18557 = A8B9			@VarData	= R
 18558 = 0007			@VarDataSize	= 7
 18559
 18560 6B03 60				rts						; ret
 18561 				.endl
 18562
 18563 6B04			.local	POLICECHOICES					; FUNCTION
 18564
 18565 				; optimize OK (police.pas), line = 9
 18566
 18567 6B04 A9 05			lda #$05
 18568 6B06 8D C0 A8			sta RESULT
 18569
 18570 				; optimize OK (police.pas), line = 10
 18571
 18572 6B09 AD 22 C9			lda CURRENTCHOICE
 18573 6B0C C9 01			cmp #$01
 18574 6B0E D0 0B			jne l_4760
 18575
 18576 				; optimize FAIL ('GOTOCOURT', police.pas), line = 12
 18577
 18578 6B10 20 6D 34			jsr GOTOCOURT
 18579
 18580 				; optimize OK (police.pas), line = 13
 18581
 18582 6B13 A9 11			lda #$11
 18583 6B15 8D C0 A8			sta RESULT
 18584 6B18 4C E6 6C			jmp @exit
 18585 6B1B			l_4760
 18586
 18587 				; optimize OK (police.pas), line = 17
 18588
 18589 6B1B AD 22 C9			lda CURRENTCHOICE
 18590 6B1E C9 02			cmp #$02
 18591 6B20 F0 03 4C A3 6B		jne l_477A
 18592
 18593 				; optimize FAIL ('SHOWLOCATIONHEADER', police.pas), line = 19
 18594
 18595 6B25 20 7A 28			jsr SHOWLOCATIONHEADER
 18596
 18597 				; optimize OK (police.pas), line = 20
 18598
 18599 6B28 A9 01			lda #$01
 18600 6B2A 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 18601
 18602 				; optimize OK (police.pas), line = 21
 18603
 18604 6B2D A9 02			lda #$02
 18605 6B2F 20 C6 1C			jsr CRT_WRITE_LOCSTR
 18606
 18607 				; optimize OK (police.pas), line = 22
 18608
 18609 6B32 A9 00			lda #$00
 18610 6B34 8D 1C A7			sta READVALUE.MINVALUE
 18611 6B37 8D 1D A7			sta READVALUE.MINVALUE+1
 18612 6B3A A9 0C			lda #$0C
 18613 6B3C 8D 1E A7			sta READVALUE.MAXVALUE
 18614 6B3F A9 00			lda #$00
 18615 6B41 8D 1F A7			sta READVALUE.MAXVALUE+1
 18616 6B44 20 26 20			jsr READVALUE
 18617 6B47 AD 20 A7			lda READVALUE.RESULT
 18618 6B4A 8D C2 A8			sta M
 18619
 18620 				; optimize OK (police.pas), line = 23
 18621
 18622 6B4D D0 03 4C E6 6C		jeq @exit
 18623 6B52			l_4798
 18624
 18625 				; optimize OK (police.pas), line = 24
 18626
 18627 6B52 A9 E8			lda #$E8
 18628 6B54 85 8C			sta :ecx
 18629 6B56 A9 03			lda #$03
 18630 6B58 85 8D			sta :ecx+1
 18631 6B5A AD C2 A8			lda M
 18632 6B5D 85 84			sta :eax
 18633 6B5F A9 00			lda #$00
 18634 6B61 85 85			sta :eax+1
 18635 					.ifdef fmulinit
 18636 					fmulu_16
 18637 					els
 18638 6B63 20 D3 10			imulCX_AL
 18639 					eif
 18640 6B66 A5 84			lda :eax
 18641 6B68 8D D8 A7			sta PAYMONEY.PRICE
 18642 6B6B A5 85			lda :eax+1
 18643 6B6D 8D D9 A7			sta PAYMONEY.PRICE+1
 18644 6B70 20 3B 32			jsr PAYMONEY
 18645 6B73 AD DA A7			lda PAYMONEY.RESULT
 18646 6B76 D0 03 4C E6 6C		jeq @exit
 18647 6B7B			l_47B2
 18648
 18649 				; optimize OK (police.pas), line = 27
 18650
 18651 6B7B AC 8A CD			ldy CURRENTPLAYER
 18652 6B7E B9 7C C9			lda adr.PLBRIBE,y
 18653 6B81 18 6D C2 A8			add M
 18654 6B85 99 7C C9			sta adr.PLBRIBE,y
 18655
 18656 				; optimize OK (police.pas), line = 28
 18657
 18658 6B88 A9 02			lda #$02
 18659 6B8A 20 EC 2F			jsr ADDPOINTS
 18660
 18661 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', police.pas), line = 30
 18662
 18663 6B8D 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 18664
 18665 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', police.pas), line = 31
 18666
 18667 6B90 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 18668
 18669 				; optimize OK (police.pas), line = 32
 18670
 18671 6B93 A9 03			lda #$03
 18672 6B95 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 18673
 18674 				; optimize OK (police.pas), line = 33
 18675
 18676 6B98 A9 04			lda #$04
 18677 6B9A 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 18678
 18679 				; optimize FAIL ('WAITFORKEY', police.pas), line = 34
 18680
 18681 6B9D 20 4A 1E			jsr WAITFORKEY
 18682 6BA0 4C E6 6C			jmp @exit
 18683 6BA3			l_477A
 18684
 18685 				; optimize OK (police.pas), line = 38
 18686
 18687 6BA3 AD 22 C9			lda CURRENTCHOICE
 18688 6BA6 C9 03			cmp #$03
 18689 6BA8 F0 03 4C E6 6C		jne l_47E4
 18690
 18691 				; optimize FAIL ('SHOWLOCATIONHEADER', police.pas), line = 40
 18692
 18693 6BAD 20 7A 28			jsr SHOWLOCATIONHEADER
 18694
 18695 				; optimize OK (police.pas), line = 42
 18696
 18697 6BB0 A9 05			lda #$05
 18698 6BB2 20 15 1D			jsr CRT_WRITELN2_LOCSTR
 18699
 18700 				; optimize OK (police.pas), line = 43
 18701
 18702 6BB5 A9 00			lda #$00
 18703 6BB7 8D C1 A8			sta R
 18704
 18705 				; optimize OK (police.pas), line = 44
 18706
 18707 6BBA 8D C2 A8			sta M
 18708 6BBD AC 20 C9			ldy NPLAYERS
 18709 6BC0 88				dey
 18710 6BC1 8C C5 6B			sty @FORTMP_47F8_0
 18711
 18712 6BC4			l_47FB
 18713 				; --- ForToDoCondition
 18714 6BC4 A9 00			lda @FORTMP_47F8_0::#$00
 18715 6BC6 CD C2 A8			cmp M
 18716 6BC9 90 50			jcc l_4809
 18717
 18718 				; optimize OK (police.pas), line = 46
 18719
 18720 6BCB AC C2 A8			ldy M
 18721 6BCE B9 94 C9			lda adr.PLPRISON,y
 18722 6BD1 F0 43			jeq l_481E
 18723
 18724 				; optimize OK (police.pas), line = 47
 18725
 18726 6BD3 A9 00			lda #$00
 18727 6BD5 20 65 18			jsr B_CRT.CRT_WRITE.@010186000
 18728
 18729 				; optimize OK (police.pas), line = 48
 18730
 18731 6BD8 AD C2 A8			lda M
 18732 6BDB 18 69 01			add #$01
 18733 6BDE 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 18734 6BE1 A9 00			lda #$00
 18735 6BE3 69 00			adc #$00
 18736 6BE5 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 18737 6BE8 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 18738
 18739 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', police.pas), line = 49
 18740
 18741 6BEB E8				inx
 18742 6BEC A9 76 95 94			mva #$76 :STACKORIGIN,x
 18743 6BF0 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 18744 6BF4 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 18745
 18746 				; optimize OK (police.pas), line = 50
 18747
 18748 6BF7 AD C2 A8			lda M
 18749 6BFA 0A				asl @
 18750 6BFB 0A				asl @
 18751 6BFC 0A				asl @
 18752 6BFD 8D C5 A8			sta TMP
 18753
 18754 				; optimize FAIL ('CRT_WRITELN', police.pas), line = 51
 18755
 18756 6C00 E8				inx
 18757 6C01 AD C5 A8			lda TMP
 18758 6C04 0A				asl @
 18759 6C05 A8				tay
 18760 6C06 B9 15 A4			lda adr.GANGSTERNAMES,y
 18761 6C09 95 94			sta :STACKORIGIN,x
 18762 6C0B B9 16 A4			lda adr.GANGSTERNAMES+1,y
 18763 6C0E 95 A4			sta :STACKORIGIN+STACKWIDTH,x
 18764 6C10 20 A9 1E			jsr CRT_WRITELN
 18765
 18766 				; optimize OK (police.pas), line = 52
 18767
 18768 6C13 EE C1 A8			inc R
 18769 6C16			l_481E
 18770
 18771 				; --- ForToDoEpilog
 18772 6C16 EE C2 A8			inc M
 18773 6C19 D0 A9			jne l_47FB
 18774 6C1B			l_4809
 18775
 18776 				; optimize OK (police.pas), line = 55
 18777
 18778 6C1B AD C1 A8			lda R
 18779 6C1E D0 0B			jne l_485E
 18780
 18781 				; optimize OK (police.pas), line = 56
 18782
 18783 6C20 A9 06			lda #$06
 18784 6C22 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 18785
 18786 				; optimize FAIL ('WAITFORKEY', police.pas), line = 57
 18787
 18788 6C25 20 4A 1E			jsr WAITFORKEY
 18789 6C28 4C E6 6C			jmp @exit
 18790 6C2B			l_485E
 18791
 18792 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', police.pas), line = 61
 18793
 18794 6C2B 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 18795
 18796 				; optimize OK (police.pas), line = 62
 18797
 18798 6C2E A9 07			lda #$07
 18799 6C30 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 18800
 18801 				; --- RepeatUntilProlog
 18802 6C33			l_4868
 18803
 18804 				; optimize OK (police.pas), line = 64
 18805
 18806 6C33 A9 01			lda #$01
 18807 6C35 8D 1C A7			sta READVALUE.MINVALUE
 18808 6C38 A9 00			lda #$00
 18809 6C3A 8D 1D A7			sta READVALUE.MINVALUE+1
 18810 6C3D AD 20 C9			lda NPLAYERS
 18811 6C40 8D 1E A7			sta READVALUE.MAXVALUE
 18812 6C43 A9 00			lda #$00
 18813 6C45 8D 1F A7			sta READVALUE.MAXVALUE+1
 18814 6C48 20 26 20			jsr READVALUE
 18815 6C4B AD 20 A7			lda READVALUE.RESULT
 18816 6C4E 8D C1 A8			sta R
 18817
 18818 				; optimize OK (police.pas), line = 66
 18819
 18820 6C51 A8				tay
 18821 6C52 B9 93 C9			lda adr.PLPRISON-$01,y
 18822 6C55 F0 DC			jeq l_4868
 18823
 18824 				; optimize OK (police.pas), line = 67
 18825
 18826 6C57 CE C1 A8			dec R
 18827
 18828 				; optimize OK (police.pas), line = 68
 18829
 18830 6C5A A9 05			lda #$05
 18831 6C5C 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 18832 6C5F E8				inx
 18833 6C60 AD 62 9C 95 94		mva SYSTEM.RANDOM.@010180000.RESULT :STACKORIGIN,x
 18834 6C65 E8				inx
 18835 6C66 A9 09 95 94			mva #$09 :STACKORIGIN,x
 18836 6C6A 20 10 0E			jsr @shlEAX_CL.BYTE
 18837 6C6D A9 B8 95 94			mva #$B8 :STACKORIGIN,x
 18838 6C71 A9 0B 95 A4			mva #$0B :STACKORIGIN+STACKWIDTH,x
 18839 6C75 A9 00 95 B4			mva #$00 :STACKORIGIN+STACKWIDTH*2,x
 18840 6C79 95 C4			sta :STACKORIGIN+STACKWIDTH*3,x
 18841 6C7B 20 F9 0D			jsr addAX_CX
 18842 6C7E CA				dex
 18843 6C7F B5 94			lda :STACKORIGIN,x
 18844 6C81 8D C3 A8			sta P
 18845 6C84 B5 A4			lda :STACKORIGIN+STACKWIDTH,x
 18846 6C86 8D C4 A8			sta P+1
 18847 6C89 CA				dex
 18848
 18849 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', police.pas), line = 69
 18850
 18851 6C8A 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 18852
 18853 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', police.pas), line = 70
 18854
 18855 6C8D 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 18856
 18857 				; optimize OK (police.pas), line = 71
 18858
 18859 6C90 A9 08			lda #$08
 18860 6C92 20 C6 1C			jsr CRT_WRITE_LOCSTR
 18861
 18862 				; optimize OK (police.pas), line = 72
 18863
 18864 6C95 AD C3 A8			lda P
 18865 6C98 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 18866 6C9B AD C4 A8			lda P+1
 18867 6C9E 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 18868 6CA1 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 18869
 18870 				; optimize OK (police.pas), line = 73
 18871
 18872 6CA4 A9 09			lda #$09
 18873 6CA6 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 18874
 18875 				; optimize OK (police.pas), line = 74
 18876
 18877 6CA9 A9 0A			lda #$0A
 18878 6CAB 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 18879
 18880 				; optimize FAIL ('WAITFORKEY', police.pas), line = 75
 18881
 18882 6CAE 20 4A 1E			jsr WAITFORKEY
 18883
 18884 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', police.pas), line = 76
 18885
 18886 6CB1 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 18887
 18888 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', police.pas), line = 77
 18889
 18890 6CB4 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 18891
 18892 				; optimize OK (police.pas), line = 78
 18893
 18894 6CB7 AD C3 A8			lda P
 18895 6CBA 8D D8 A7			sta PAYMONEY.PRICE
 18896 6CBD AD C4 A8			lda P+1
 18897 6CC0 8D D9 A7			sta PAYMONEY.PRICE+1
 18898 6CC3 20 3B 32			jsr PAYMONEY
 18899 6CC6 AD DA A7			lda PAYMONEY.RESULT
 18900 6CC9 F0 1B			jeq @exit
 18901 6CCB			l_48BB
 18902
 18903 				; optimize OK (police.pas), line = 79
 18904
 18905 6CCB A9 0B			lda #$0B
 18906 6CCD 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 18907
 18908 				; optimize OK (police.pas), line = 80
 18909
 18910 6CD0 A9 0C			lda #$0C
 18911 6CD2 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 18912
 18913 				; optimize FAIL ('WAITFORKEY', police.pas), line = 81
 18914
 18915 6CD5 20 4A 1E			jsr WAITFORKEY
 18916
 18917 				; optimize OK (police.pas), line = 82
 18918
 18919 6CD8 AC C1 A8			ldy R
 18920 6CDB AD 8A CD			lda CURRENTPLAYER
 18921 6CDE 99 AC C9			sta adr.PLFREED,y
 18922
 18923 				; optimize OK (police.pas), line = 83
 18924
 18925 6CE1 A9 00			lda #$00
 18926 6CE3 99 94 C9			sta adr.PLPRISON,y
 18927 6CE6			l_47E4
 18928 6CE6			@exit
 18929
 18930 				; ------------------------------------------------------------
 18931
 18932 = A8C0			RESULT	= DATAORIGIN+$0C6A
 18933 = A8C1			R	= DATAORIGIN+$0C6B
 18934 = A8C2			M	= DATAORIGIN+$0C6C
 18935 = A8C3			P	= DATAORIGIN+$0C6D
 18936 = A8C5			TMP	= DATAORIGIN+$0C6F
 18937
 18938 = A8C1			@VarData	= R
 18939 = 0005			@VarDataSize	= 5
 18940
 18941 6CE6 60				rts						; ret
 18942 				.endl
 18943
 18944 6CE7			.local	PUBCHOICES					; FUNCTION
 18945
 18946 				; optimize OK (pub.pas), line = 13
 18947
 18948 6CE7 A9 07			lda #$07
 18949 6CE9 8D C7 A8			sta RESULT
 18950
 18951 				; optimize FAIL ('SHOWLOCATIONHEADER', pub.pas), line = 14
 18952
 18953 6CEC 20 7A 28			jsr SHOWLOCATIONHEADER
 18954
 18955 				; optimize OK (pub.pas), line = 17
 18956
 18957 6CEF AD 22 C9			lda CURRENTCHOICE
 18958 6CF2 C9 01			cmp #$01
 18959 6CF4 F0 03 4C 30 6F		jne l_48F0
 18960
 18961 				; optimize OK (pub.pas), line = 19
 18962
 18963 6CF9 AD 3D A7			lda CURRENTSUBLOCATION
 18964 6CFC C9 02			cmp #$02
 18965 6CFE B0 03 4C F1 6D		jcc l_4903
 18966
 18967 				; optimize OK (pub.pas), line = 21
 18968
 18969 6D03 A9 02			lda #$02
 18970 6D05 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 18971 6D08 E8				inx
 18972 6D09 E8				inx
 18973 6D0A A0 01			ldy #1
 18974 6D0C AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 18975 6D0F F0 01			beq @+
 18976 6D11 88				dey
 18977 				@
 18978 6D12 94 93			sty :STACKORIGIN-1,x
 18979 6D14 AC 8A CD			ldy CURRENTPLAYER
 18980 6D17 B9 44 C9			lda adr.PLALCOHOL,y
 18981 6D1A 95 94			sta :STACKORIGIN,x
 18982 6D1C E8				inx
 18983 6D1D A0 01			ldy #1
 18984 6D1F B5 93			lda :STACKORIGIN-1,x
 18985 6D21 D0 01			bne @+
 18986 6D23 88				dey
 18987 				@
 18988 6D24 CA				dex
 18989 6D25 94 94			sty :STACKORIGIN,x
 18990 6D27 CA				dex
 18991 6D28 CA				dex
 18992 6D29 B5 95			lda :STACKORIGIN+1,x
 18993 6D2B 35 96			and :STACKORIGIN+2,x
 18994 6D2D D0 03 4C E6 6D		jeq l_4924
 18995
 18996 				; optimize OK (pub.pas), line = 23
 18997
 18998 6D32 A9 14			lda #$14
 18999 6D34 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 19000 6D37 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 19001 6D3A 18 69 0A			add #$0A
 19002 6D3D 8D D2 A8			sta P
 19003 6D40 A9 00			lda #$00
 19004 6D42 69 00			adc #$00
 19005 6D44 8D D3 A8			sta P+1
 19006
 19007 				; optimize OK (pub.pas), line = 24
 19008
 19009 6D47 A9 01			lda #$01
 19010 6D49 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 19011
 19012 				; optimize OK (pub.pas), line = 25
 19013
 19014 6D4C A9 02			lda #$02
 19015 6D4E 20 C6 1C			jsr CRT_WRITE_LOCSTR
 19016
 19017 				; optimize OK (pub.pas), line = 26
 19018
 19019 6D51 AD D2 A8			lda P
 19020 6D54 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 19021 6D57 AD D3 A8			lda P+1
 19022 6D5A 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 19023 6D5D 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 19024
 19025 				; optimize OK (pub.pas), line = 27
 19026
 19027 6D60 A9 03			lda #$03
 19028 6D62 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 19029
 19030 				; optimize OK (pub.pas), line = 29
 19031
 19032 6D65 A9 04			lda #$04
 19033 6D67 20 C6 1C			jsr CRT_WRITE_LOCSTR
 19034
 19035 				; optimize OK (pub.pas), line = 30
 19036
 19037 6D6A AC 8A CD			ldy CURRENTPLAYER
 19038 6D6D B9 44 C9			lda adr.PLALCOHOL,y
 19039 6D70 20 7E 18			jsr B_CRT.CRT_WRITE.@010180000
 19040
 19041 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', pub.pas), line = 31
 19042
 19043 6D73 E8				inx
 19044 6D74 A9 A3 95 94			mva #$A3 :STACKORIGIN,x
 19045 6D78 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 19046 6D7C 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 19047
 19048 				; optimize OK (pub.pas), line = 32
 19049
 19050 6D7F AC 8A CD			ldy CURRENTPLAYER
 19051 6D82 B9 44 C9			lda adr.PLALCOHOL,y
 19052 6D85 8D 1E A7			sta READVALUE.MAXVALUE
 19053 6D88 A9 00			lda #$00
 19054 6D8A 8D 1C A7			sta READVALUE.MINVALUE
 19055 6D8D 8D 1D A7			sta READVALUE.MINVALUE+1
 19056 6D90 8D 1F A7			sta READVALUE.MAXVALUE+1
 19057 6D93 20 26 20			jsr READVALUE
 19058 6D96 AD 20 A7			lda READVALUE.RESULT
 19059 6D99 8D D4 A8			sta AL
 19060 6D9C AD 21 A7			lda READVALUE.RESULT+1
 19061 6D9F 8D D5 A8			sta AL+1
 19062
 19063 				; optimize OK (pub.pas), line = 33
 19064
 19065 6DA2 0D D4 A8			ora AL
 19066 6DA5 D0 03 4C 2D 74		jeq @exit
 19067 6DAA			l_495E
 19068
 19069 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', pub.pas), line = 35
 19070
 19071 6DAA 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 19072
 19073 				; optimize OK (pub.pas), line = 36
 19074
 19075 6DAD A9 05			lda #$05
 19076 6DAF 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 19077
 19078 				; optimize OK (pub.pas), line = 37
 19079
 19080 6DB2 AD D2 A8			lda P
 19081 6DB5 85 8C			sta :ecx
 19082 6DB7 AD D3 A8			lda P+1
 19083 6DBA 85 8D			sta :ecx+1
 19084 6DBC AD D4 A8			lda AL
 19085 6DBF 85 84			sta :eax
 19086 6DC1 AD D5 A8			lda AL+1
 19087 6DC4 85 85			sta :eax+1
 19088 					.ifdef fmulinit
 19089 					fmulu_16
 19090 					els
 19091 6DC6 20 8F 10			imulCX
 19092 					eif
 19093 6DC9 A5 84			lda :eax
 19094 6DCB 8D CB A7			sta ADDMONEY.AMOUNT
 19095 6DCE A5 85			lda :eax+1
 19096 6DD0 8D CC A7			sta ADDMONEY.AMOUNT+1
 19097 6DD3 20 98 2F			jsr ADDMONEY
 19098
 19099 				; optimize OK (pub.pas), line = 38
 19100
 19101 6DD6 AC 8A CD			ldy CURRENTPLAYER
 19102 6DD9 B9 44 C9			lda adr.PLALCOHOL,y
 19103 6DDC 38 ED D4 A8			sub AL
 19104 6DE0 99 44 C9			sta adr.PLALCOHOL,y
 19105 6DE3 4C EB 6D			jmp l_4986
 19106 6DE6			l_4924
 19107
 19108 				; optimize OK (pub.pas), line = 42
 19109
 19110 6DE6 A9 06			lda #$06
 19111 6DE8 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 19112 6DEB			l_4986
 19113
 19114 				; optimize FAIL ('WAITFORKEY', pub.pas), line = 44
 19115
 19116 6DEB 20 4A 1E			jsr WAITFORKEY
 19117 6DEE 4C 2D 74			jmp @exit
 19118 6DF1			l_4903
 19119
 19120 				; optimize OK (pub.pas), line = 47
 19121
 19122 6DF1 A9 C8			lda #$C8
 19123 6DF3 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 19124 6DF6 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 19125 6DF9 18 69 64			add #$64
 19126 6DFC 8D D4 A8			sta AL
 19127 6DFF A9 00			lda #$00
 19128 6E01 69 00			adc #$00
 19129 6E03 8D D5 A8			sta AL+1
 19130
 19131 				; optimize OK (pub.pas), line = 48
 19132
 19133 6E06 A9 0A			lda #$0A
 19134 6E08 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 19135 6E0B AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 19136 6E0E 18 69 05			add #$05
 19137 6E11 8D D2 A8			sta P
 19138 6E14 A9 00			lda #$00
 19139 6E16 69 00			adc #$00
 19140 6E18 8D D3 A8			sta P+1
 19141
 19142 				; optimize OK (pub.pas), line = 49
 19143
 19144 6E1B A9 07			lda #$07
 19145 6E1D 20 C6 1C			jsr CRT_WRITE_LOCSTR
 19146
 19147 				; optimize OK (pub.pas), line = 50
 19148
 19149 6E20 AD D2 A8			lda P
 19150 6E23 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 19151 6E26 AD D3 A8			lda P+1
 19152 6E29 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 19153 6E2C 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 19154
 19155 				; optimize FAIL ('CRT_WRITELN', pub.pas), line = 51
 19156
 19157 6E2F E8				inx
 19158 6E30 A9 A0 95 94			mva #$A0 :STACKORIGIN,x
 19159 6E34 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 19160 6E38 20 A9 1E			jsr CRT_WRITELN
 19161
 19162 				; optimize OK (pub.pas), line = 54
 19163
 19164 6E3B AC 8A CD			ldy CURRENTPLAYER
 19165 6E3E B9 4C C9			lda adr.PLCAR,y
 19166 6E41 A8				tay
 19167 6E42 B9 0C E7			lda adr.CARCARGO,y
 19168 6E45 AC 8A CD			ldy CURRENTPLAYER
 19169 6E48 38 F9 44 C9			sub adr.PLALCOHOL,y
 19170 6E4C 8D D6 A8			sta W
 19171 6E4F A9 00			lda #$00
 19172 6E51 E9 00			sbc #$00
 19173 6E53 8D D7 A8			sta W+1
 19174
 19175 				; optimize OK (pub.pas), line = 55
 19176
 19177 6E56 30 05			bmi @+
 19178 6E58 0D D6 A8			ora W
 19179 6E5B D0 13			jne l_49CA
 19180 				@
 19181
 19182 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', pub.pas), line = 56
 19183
 19184 6E5D 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 19185
 19186 				; optimize OK (pub.pas), line = 57
 19187
 19188 6E60 A9 08			lda #$08
 19189 6E62 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 19190
 19191 				; optimize OK (pub.pas), line = 58
 19192
 19193 6E65 A9 09			lda #$09
 19194 6E67 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 19195
 19196 				; optimize FAIL ('WAITFORKEY', pub.pas), line = 59
 19197
 19198 6E6A 20 4A 1E			jsr WAITFORKEY
 19199 6E6D 4C 2D 74			jmp @exit
 19200 6E70			l_49CA
 19201
 19202 				; optimize OK (pub.pas), line = 62
 19203
 19204 6E70 AD D6 A8			lda W
 19205 6E73 CD D4 A8			cmp AL
 19206 6E76 AD D7 A8			lda W+1
 19207 6E79 ED D5 A8			sbc AL+1
 19208 6E7C 50 02			svc
 19209 6E7E 49 80			eor #$80
 19210 6E80 10 0C			jpl l_49E5
 19211 6E82 AD D6 A8			lda W
 19212 6E85 8D D4 A8			sta AL
 19213 6E88 AD D7 A8			lda W+1
 19214 6E8B 8D D5 A8			sta AL+1
 19215 6E8E			l_49E5
 19216
 19217 				; optimize OK (pub.pas), line = 63
 19218
 19219 6E8E A9 0A			lda #$0A
 19220 6E90 20 C6 1C			jsr CRT_WRITE_LOCSTR
 19221
 19222 				; optimize OK (pub.pas), line = 64
 19223
 19224 6E93 AD D4 A8			lda AL
 19225 6E96 8D 92 A1			sta B_CRT.CRT_WRITE.@010185000.NUM
 19226 6E99 A0 00			ldy #$00
 19227 6E9B AD D5 A8			lda AL+1
 19228 6E9E 10 01			spl
 19229 6EA0 88				dey
 19230 6EA1 8D 93 A1			sta B_CRT.CRT_WRITE.@010185000.NUM+1
 19231 6EA4 8C 94 A1			sty B_CRT.CRT_WRITE.@010185000.NUM+2
 19232 6EA7 8C 95 A1			sty B_CRT.CRT_WRITE.@010185000.NUM+3
 19233 6EAA 20 CA 18			jsr B_CRT.CRT_WRITE.@010185000
 19234
 19235 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', pub.pas), line = 65
 19236
 19237 6EAD E8				inx
 19238 6EAE A9 A3 95 94			mva #$A3 :STACKORIGIN,x
 19239 6EB2 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 19240 6EB6 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 19241
 19242 				; optimize OK (pub.pas), line = 66
 19243
 19244 6EB9 A9 00			lda #$00
 19245 6EBB 8D 1C A7			sta READVALUE.MINVALUE
 19246 6EBE 8D 1D A7			sta READVALUE.MINVALUE+1
 19247 6EC1 AD D4 A8			lda AL
 19248 6EC4 8D 1E A7			sta READVALUE.MAXVALUE
 19249 6EC7 AD D5 A8			lda AL+1
 19250 6ECA 8D 1F A7			sta READVALUE.MAXVALUE+1
 19251 6ECD 20 26 20			jsr READVALUE
 19252 6ED0 AD 20 A7			lda READVALUE.RESULT
 19253 6ED3 8D D6 A8			sta W
 19254 6ED6 AD 21 A7			lda READVALUE.RESULT+1
 19255 6ED9 8D D7 A8			sta W+1
 19256
 19257 				; optimize OK (pub.pas), line = 67
 19258
 19259 6EDC 30 05			bmi @+
 19260 6EDE 0D D6 A8			ora W
 19261 6EE1 D0 03			jne l_4A0C
 19262 				@
 19263 6EE3 4C 2D 74			jmp @exit
 19264 6EE6			l_4A0C
 19265
 19266 				; optimize OK (pub.pas), line = 68
 19267
 19268 6EE6 AD D2 A8			lda P
 19269 6EE9 85 8C			sta :ecx
 19270 6EEB AD D3 A8			lda P+1
 19271 6EEE 85 8D			sta :ecx+1
 19272 6EF0 AD D6 A8			lda W
 19273 6EF3 85 84			sta :eax
 19274 6EF5 AD D7 A8			lda W+1
 19275 6EF8 85 85			sta :eax+1
 19276 					.ifdef fmulinit
 19277 					fmulu_16
 19278 					els
 19279 6EFA 20 8F 10			imulCX
 19280 					eif
 19281 6EFD A5 84			lda :eax
 19282 6EFF 8D D2 A8			sta P
 19283 6F02 A5 85			lda :eax+1
 19284 6F04 8D D3 A8			sta P+1
 19285
 19286 				; optimize OK (pub.pas), line = 69
 19287
 19288 6F07 AD D2 A8			lda P
 19289 6F0A 8D D8 A7			sta PAYMONEY.PRICE
 19290 6F0D AD D3 A8			lda P+1
 19291 6F10 8D D9 A7			sta PAYMONEY.PRICE+1
 19292 6F13 20 3B 32			jsr PAYMONEY
 19293 6F16 AD DA A7			lda PAYMONEY.RESULT
 19294 6F19 D0 03 4C 2D 74		jeq @exit
 19295 6F1E			l_4A2B
 19296
 19297 				; optimize OK (pub.pas), line = 70
 19298
 19299 6F1E AC 8A CD			ldy CURRENTPLAYER
 19300 6F21 B9 44 C9			lda adr.PLALCOHOL,y
 19301 6F24 18 6D D6 A8			add W
 19302 6F28 99 44 C9			sta adr.PLALCOHOL,y
 19303
 19304 				; optimize OK (pub.pas), line = 71
 19305
 19306 6F2B A9 02			lda #$02
 19307 6F2D 20 EC 2F			jsr ADDPOINTS
 19308 6F30			l_48F0
 19309
 19310 				; optimize OK (pub.pas), line = 75
 19311
 19312 6F30 AD 22 C9			lda CURRENTCHOICE
 19313 6F33 C9 02			cmp #$02
 19314 6F35 F0 03 4C E9 70		jne l_4A55
 19315
 19316 				; optimize FAIL ('SHOWLOCATIONHEADER', pub.pas), line = 77
 19317
 19318 6F3A 20 7A 28			jsr SHOWLOCATIONHEADER
 19319
 19320 				; optimize OK (pub.pas), line = 79
 19321
 19322 6F3D AC 8A CD			ldy CURRENTPLAYER
 19323 6F40 B9 98 C9			lda adr.PLRANK,y
 19324 6F43 C9 05			cmp #$05
 19325 6F45 B0 2B			jcs l_4A6C
 19326
 19327 				; optimize OK (pub.pas), line = 81
 19328
 19329 6F47 A9 0B			lda #$0B
 19330 6F49 20 C6 1C			jsr CRT_WRITE_LOCSTR
 19331
 19332 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', pub.pas), line = 82
 19333
 19334 6F4C E8				inx
 19335 6F4D AC 8A CD			ldy CURRENTPLAYER
 19336 6F50 B9 98 C9			lda adr.PLRANK,y
 19337 6F53 0A				asl @
 19338 6F54 A8				tay
 19339 6F55 B9 55 A4			lda adr.RANKNAMES,y
 19340 6F58 95 94			sta :STACKORIGIN,x
 19341 6F5A B9 56 A4			lda adr.RANKNAMES+1,y
 19342 6F5D 95 A4			sta :STACKORIGIN+STACKWIDTH,x
 19343 6F5F 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 19344
 19345 				; optimize OK (pub.pas), line = 83
 19346
 19347 6F62 A9 0C			lda #$0C
 19348 6F64 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 19349
 19350 				; optimize OK (pub.pas), line = 84
 19351
 19352 6F67 A9 0D			lda #$0D
 19353 6F69 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 19354
 19355 				; optimize FAIL ('WAITFORKEY', pub.pas), line = 85
 19356
 19357 6F6C 20 4A 1E			jsr WAITFORKEY
 19358 6F6F 4C 2D 74			jmp @exit
 19359 6F72			l_4A6C
 19360
 19361 				; optimize OK (pub.pas), line = 91
 19362
 19363 6F72 A9 00			lda #$00
 19364 6F74 A8				tay
 19365
 19366 6F75			l_4A88
 19367 				; --- ForToDoCondition
 19368 6F75 C0 04			cpy #$04
 19369 6F77 B0 10			jcs l_4A96
 19370
 19371 				; optimize OK (pub.pas), line = 92
 19372
 19373 6F79 B9 8C CD			lda adr.PLRENT,y
 19374 6F7C CD 8A CD			cmp CURRENTPLAYER
 19375 6F7F D0 05			jne l_4AAD
 19376 6F81 A9 01			lda #$01
 19377 6F83 8D D1 A8			sta HASHIDEOUT
 19378 6F86			l_4AAD
 19379
 19380 				; --- ForToDoEpilog
 19381 6F86 C8				iny
 19382 6F87 D0 EC			jne l_4A88
 19383 6F89			l_4A96
 19384 6F89 8C C8 A8			sty R
 19385
 19386 				; optimize OK (pub.pas), line = 94
 19387
 19388 6F8C AD D1 A8			lda HASHIDEOUT
 19389 6F8F D0 10			jne l_4ACB
 19390
 19391 				; optimize OK (pub.pas), line = 96
 19392
 19393 6F91 A9 0E			lda #$0E
 19394 6F93 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 19395
 19396 				; optimize OK (pub.pas), line = 97
 19397
 19398 6F96 A9 0F			lda #$0F
 19399 6F98 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 19400
 19401 				; optimize FAIL ('WAITFORKEY', pub.pas), line = 98
 19402
 19403 6F9B 20 4A 1E			jsr WAITFORKEY
 19404 6F9E 4C 2D 74			jmp @exit
 19405 6FA1			l_4ACB
 19406
 19407 				; optimize OK (pub.pas), line = 102
 19408
 19409 6FA1 AC 8A CD			ldy CURRENTPLAYER
 19410 6FA4 B9 B1 CD			lda adr.PLNGANGSTERS,y
 19411 6FA7 C9 08			cmp #$08
 19412 6FA9 90 10			jcc l_4AE8
 19413
 19414 				; optimize OK (pub.pas), line = 104
 19415
 19416 6FAB A9 10			lda #$10
 19417 6FAD 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 19418
 19419 				; optimize OK (pub.pas), line = 105
 19420
 19421 6FB0 A9 11			lda #$11
 19422 6FB2 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 19423
 19424 				; optimize FAIL ('WAITFORKEY', pub.pas), line = 106
 19425
 19426 6FB5 20 4A 1E			jsr WAITFORKEY
 19427 6FB8 4C 2D 74			jmp @exit
 19428 6FBB			l_4AE8
 19429
 19430 				; optimize OK (pub.pas), line = 114
 19431
 19432 6FBB A9 63			lda #$63
 19433 6FBD 8D CD A8			sta G
 19434
 19435 				; optimize OK (pub.pas), line = 115
 19436
 19437 6FC0 A9 00			lda #$00
 19438 6FC2 8D CE A8			sta K
 19439
 19440 6FC5			l_4AFD
 19441 				; --- ForToDoCondition
 19442 6FC5 AD CE A8			lda K
 19443 6FC8 C9 05			cmp #$05
 19444 6FCA B0 2A			jcs l_4B0B
 19445
 19446 				; optimize OK (pub.pas), line = 117
 19447
 19448 6FCC A9 2A			lda #$2A
 19449 6FCE 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 19450 6FD1 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 19451 6FD4 8D C8 A8			sta R
 19452
 19453 				; optimize OK (pub.pas), line = 118
 19454
 19455 6FD7 C9 20			cmp #$20
 19456 6FD9 90 03			jcc l_4B22
 19457 6FDB 4C F6 6F			jmp b_4AFD
 19458 6FDE			l_4B22
 19459
 19460 				; optimize OK (pub.pas), line = 119
 19461
 19462 6FDE AC C8 A8			ldy R
 19463 6FE1 B9 91 CD			lda adr.PLGANGSTERS,y
 19464 6FE4 C9 63			cmp #$63
 19465 6FE6 D0 09			jne l_4B3A
 19466
 19467 				; optimize OK (pub.pas), line = 120
 19468
 19469 6FE8 AD C8 A8			lda R
 19470 6FEB 8D CD A8			sta G
 19471 6FEE 4C F6 6F			jmp b_4AFD
 19472 6FF1			l_4B3A
 19473
 19474 				; --- ForToDoEpilog
 19475 6FF1 EE CE A8			inc K
 19476 6FF4 D0 CF			jne l_4AFD
 19477 6FF6			l_4B0B
 19478 6FF6			b_4AFD
 19479
 19480 				; optimize OK (pub.pas), line = 125
 19481
 19482 6FF6 AD CD A8			lda G
 19483 6FF9 C9 63			cmp #$63
 19484 6FFB D0 0B			jne l_4B5A
 19485
 19486 				; optimize OK (pub.pas), line = 127
 19487
 19488 6FFD A9 12			lda #$12
 19489 6FFF 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 19490
 19491 				; optimize FAIL ('WAITFORKEY', pub.pas), line = 128
 19492
 19493 7002 20 4A 1E			jsr WAITFORKEY
 19494 7005 4C 2D 74			jmp @exit
 19495 7008			l_4B5A
 19496
 19497 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', pub.pas), line = 133
 19498
 19499 7008 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 19500
 19501 				; optimize OK (pub.pas), line = 134
 19502
 19503 700B AD CD A8			lda G
 19504 700E 20 B2 23			jsr LOADGANGSTER
 19505
 19506 				; optimize OK (pub.pas), line = 135
 19507
 19508 7011 A9 27			lda #$27
 19509 7013 20 C6 1C			jsr CRT_WRITE_LOCSTR
 19510
 19511 				; optimize OK (pub.pas), line = 136
 19512
 19513 7016 AD 5D CF			lda BUF_GANGSTERPRICE
 19514 7019 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 19515 701C AD 5E CF			lda BUF_GANGSTERPRICE+1
 19516 701F 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 19517 7022 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 19518
 19519 				; optimize OK (pub.pas), line = 137
 19520
 19521 7025 A9 28			lda #$28
 19522 7027 20 C6 1C			jsr CRT_WRITE_LOCSTR
 19523
 19524 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', pub.pas), line = 138
 19525
 19526 702A E8				inx
 19527 702B AD 7D 9B 95 94		mva BUF_GANGSTERANREDE :STACKORIGIN,x
 19528 7030 AD 7E 9B 95 A4		mva BUF_GANGSTERANREDE+1 :STACKORIGIN+STACKWIDTH,x
 19529 7035 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 19530
 19531 				; optimize OK (pub.pas), line = 139
 19532
 19533 7038 A9 29			lda #$29
 19534 703A 20 15 1D			jsr CRT_WRITELN2_LOCSTR
 19535
 19536 				; optimize FAIL ('GETYESNO', pub.pas), line = 140
 19537
 19538 703D 20 08 20			jsr GETYESNO
 19539 7040 AD 1B A7			lda GETYESNO.RESULT
 19540 7043 D0 03 4C 2D 74		jeq @exit
 19541 7048			l_4B81
 19542
 19543 				; optimize OK (pub.pas), line = 141
 19544
 19545 7048 AD 5D CF			lda BUF_GANGSTERPRICE
 19546 704B 8D D8 A7			sta PAYMONEY.PRICE
 19547 704E AD 5E CF			lda BUF_GANGSTERPRICE+1
 19548 7051 8D D9 A7			sta PAYMONEY.PRICE+1
 19549 7054 20 3B 32			jsr PAYMONEY
 19550 7057 AD DA A7			lda PAYMONEY.RESULT
 19551 705A D0 03 4C 2D 74		jeq @exit
 19552 705F			l_4B96
 19553
 19554 				; optimize OK (pub.pas), line = 142
 19555
 19556 705F AC CD A8			ldy G
 19557 7062 AD 8A CD			lda CURRENTPLAYER
 19558 7065 99 91 CD			sta adr.PLGANGSTERS,y
 19559
 19560 				; optimize OK (pub.pas), line = 143
 19561
 19562 7068 AC 8A CD			ldy CURRENTPLAYER
 19563 706B B9 B1 CD			lda adr.PLNGANGSTERS,y
 19564 706E 8D CF A8			sta Z
 19565
 19566 				; optimize OK (pub.pas), line = 144
 19567
 19568 7071 18 69 01			add #$01
 19569 7074 99 B1 CD			sta adr.PLNGANGSTERS,y
 19570
 19571 				; optimize OK (pub.pas), line = 145
 19572
 19573 7077 AC CD A8			ldy G
 19574 707A A9 0A			lda #$0A
 19575 707C 99 28 CD			sta adr.GANGSTERHEALTH,y
 19576
 19577 				; optimize OK (pub.pas), line = 146
 19578
 19579 707F 98				tya
 19580 7080 0A				asl @
 19581 7081 A8				tay
 19582 7082 B9 15 A4			lda adr.GANGSTERNAMES,y
 19583 7085 85 8C			sta @move.dst
 19584 7087 B9 16 A4			lda adr.GANGSTERNAMES+1,y
 19585 708A 85 8D			sta @move.dst+1
 19586 708C AD 7F 9B			lda BUF_GANGSTERNAME
 19587 708F 85 88			sta @move.src
 19588 7091 AD 80 9B			lda BUF_GANGSTERNAME+1
 19589 7094 85 89			sta @move.src+1
 19590 7096 A0 00			ldy #$00
 19591 7098 B1 88			lda (@move.src),y
 19592 709A 18 69 01			add #1
 19593 709D 85 84			sta @move.cnt
 19594 709F 90 01			scc
 19595 70A1 C8				iny
 19596 70A2 84 85			sty @move.cnt+1
 19597 70A4 20 D7 0E			jsr @move
 19598
 19599 				; optimize OK (pub.pas), line = 147
 19600
 19601 70A7 AC CD A8			ldy G
 19602 70AA AD 49 CF			lda BUF_GANGSTERSTR
 19603 70AD 99 C8 CC			sta adr.GANGSTERSTR,y
 19604
 19605 				; optimize OK (pub.pas), line = 148
 19606
 19607 70B0 AD 4A CF			lda BUF_GANGSTERBRUT
 19608 70B3 99 08 CD			sta adr.GANGSTERBRUT,y
 19609
 19610 				; optimize OK (pub.pas), line = 149
 19611
 19612 70B6 AD 4B CF			lda BUF_GANGSTERINT
 19613 70B9 99 E8 CC			sta adr.GANGSTERINT,y
 19614
 19615 				; optimize OK (pub.pas), line = 150
 19616
 19617 70BC AD 4C CF			lda BUF_GANGSTERWEAPON
 19618 70BF 99 48 CD			sta adr.GANGSTERWEAPON,y
 19619
 19620 				; optimize OK (pub.pas), line = 151
 19621
 19622 70C2 AD 48 CF			lda BUF_GANGSTERSEX
 19623 70C5 99 68 CD			sta adr.GANGSTERSEX,y
 19624
 19625 				; optimize OK (pub.pas), line = 153
 19626
 19627 70C8 A9 13			lda #$13
 19628 70CA 20 C6 1C			jsr CRT_WRITE_LOCSTR
 19629
 19630 				; optimize OK (pub.pas), line = 154
 19631
 19632 70CD A9 00			lda #$00
 19633 70CF 20 65 18			jsr B_CRT.CRT_WRITE.@010186000
 19634
 19635 				; optimize OK (pub.pas), line = 155
 19636
 19637 70D2 AC 8A CD			ldy CURRENTPLAYER
 19638 70D5 B9 B1 CD			lda adr.PLNGANGSTERS,y
 19639 70D8 38 E9 01			sub #$01
 19640 70DB 8D F0 A3			sta TMP
 19641
 19642 				; optimize OK (pub.pas), line = 156
 19643
 19644 70DE 20 7E 18			jsr B_CRT.CRT_WRITE.@010180000
 19645
 19646 				; optimize OK (pub.pas), line = 157
 19647
 19648 70E1 A9 14			lda #$14
 19649 70E3 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 19650
 19651 				; optimize FAIL ('WAITFORKEY', pub.pas), line = 158
 19652
 19653 70E6 20 4A 1E			jsr WAITFORKEY
 19654 70E9			l_4A55
 19655
 19656 				; optimize OK (pub.pas), line = 162
 19657
 19658 70E9 AD 22 C9			lda CURRENTCHOICE
 19659 70EC C9 03			cmp #$03
 19660 70EE F0 03 4C 72 72		jne l_4C20
 19661
 19662 				; optimize OK (pub.pas), line = 165
 19663
 19664 70F3 AC 8A CD			ldy CURRENTPLAYER
 19665 70F6 B9 98 C9			lda adr.PLRANK,y
 19666 70F9 C9 04			cmp #$04
 19667 70FB B0 0B			jcs l_4C36
 19668
 19669 				; optimize OK (pub.pas), line = 167
 19670
 19671 70FD A9 15			lda #$15
 19672 70FF 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 19673
 19674 				; optimize FAIL ('WAITFORKEY', pub.pas), line = 168
 19675
 19676 7102 20 4A 1E			jsr WAITFORKEY
 19677 7105 4C 2D 74			jmp @exit
 19678 7108			l_4C36
 19679
 19680 				; optimize OK (pub.pas), line = 173
 19681
 19682 7108 A9 03			lda #$03
 19683 710A 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 19684 710D AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 19685 7110 D0 0B			jne l_4C4D
 19686
 19687 				; optimize OK (pub.pas), line = 174
 19688
 19689 7112 A9 16			lda #$16
 19690 7114 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 19691
 19692 				; optimize FAIL ('WAITFORKEY', pub.pas), line = 175
 19693
 19694 7117 20 4A 1E			jsr WAITFORKEY
 19695 711A 4C 2D 74			jmp @exit
 19696 711D			l_4C4D
 19697
 19698 				; optimize OK (pub.pas), line = 179
 19699
 19700 711D A9 04			lda #$04
 19701 711F 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 19702 7122 E8				inx
 19703 7123 AD 62 9C 95 94		mva SYSTEM.RANDOM.@010180000.RESULT :STACKORIGIN,x
 19704 7128 E8				inx
 19705 7129 A9 F4 95 94			mva #$F4 :STACKORIGIN,x
 19706 712D A9 01 95 A4			mva #$01 :STACKORIGIN+STACKWIDTH,x
 19707 7131 A9 00 95 A3			mva #$00 :STACKORIGIN-1+STACKWIDTH,x
 19708 7135 20 7C 10			jsr imulWORD
 19709 7138 A5 84			lda :eax
 19710 713A 95 93			sta :STACKORIGIN-1,x
 19711 713C A5 85			lda :eax+1
 19712 713E 95 A3			sta :STACKORIGIN-1+STACKWIDTH,x
 19713 7140 A5 86			lda :eax+2
 19714 7142 95 B3			sta :STACKORIGIN-1+STACKWIDTH*2,x
 19715 7144 A5 87			lda :eax+3
 19716 7146 95 C3			sta :STACKORIGIN-1+STACKWIDTH*3,x
 19717 7148 A9 E8 95 94			mva #$E8 :STACKORIGIN,x
 19718 714C A9 03 95 A4			mva #$03 :STACKORIGIN+STACKWIDTH,x
 19719 7150 A9 00 95 B4			mva #$00 :STACKORIGIN+STACKWIDTH*2,x
 19720 7154 95 C4			sta :STACKORIGIN+STACKWIDTH*3,x
 19721 7156 20 F9 0D			jsr addAX_CX
 19722 7159 CA				dex
 19723 715A B5 94			lda :STACKORIGIN,x
 19724 715C 8D D2 A8			sta P
 19725 715F B5 A4			lda :STACKORIGIN+STACKWIDTH,x
 19726 7161 8D D3 A8			sta P+1
 19727 7164 CA				dex
 19728
 19729 				; optimize OK (pub.pas), line = 180
 19730
 19731 7165 A9 17			lda #$17
 19732 7167 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 19733
 19734 				; optimize OK (pub.pas), line = 181
 19735
 19736 716A A9 18			lda #$18
 19737 716C 20 C6 1C			jsr CRT_WRITE_LOCSTR
 19738
 19739 				; optimize OK (pub.pas), line = 182
 19740
 19741 716F AD D2 A8			lda P
 19742 7172 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 19743 7175 AD D3 A8			lda P+1
 19744 7178 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 19745 717B 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 19746
 19747 				; optimize OK (pub.pas), line = 183
 19748
 19749 717E A9 19			lda #$19
 19750 7180 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 19751
 19752 				; optimize FAIL ('GETYESNO', pub.pas), line = 184
 19753
 19754 7183 20 08 20			jsr GETYESNO
 19755 7186 AD 1B A7			lda GETYESNO.RESULT
 19756 7189 D0 03 4C 2D 74		jeq @exit
 19757 718E			l_4C79
 19758
 19759 				; optimize OK (pub.pas), line = 185
 19760
 19761 718E AD D2 A8			lda P
 19762 7191 8D D8 A7			sta PAYMONEY.PRICE
 19763 7194 AD D3 A8			lda P+1
 19764 7197 8D D9 A7			sta PAYMONEY.PRICE+1
 19765 719A 20 3B 32			jsr PAYMONEY
 19766 719D AD DA A7			lda PAYMONEY.RESULT
 19767 71A0 D0 03 4C 2D 74		jeq @exit
 19768 71A5			l_4C8E
 19769
 19770 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', pub.pas), line = 187
 19771
 19772 71A5 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 19773
 19774 				; optimize OK (pub.pas), line = 188
 19775
 19776 71A8 A9 05			lda #$05
 19777 71AA 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 19778 71AD AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 19779 71B0 8D D0 A8			sta TIPP
 19780
 19781 				; optimize OK (pub.pas), line = 190
 19782
 19783 71B3 A9 01			lda #$01
 19784 71B5 AC D0 A8			ldy TIPP
 19785 71B8 F0 04			beq l_0001_e
 19786 71BA			l_0001_b
 19787 71BA 0A				asl @
 19788 71BB 88				dey
 19789 71BC D0 FC			bne l_0001_b
 19790 71BE			l_0001_e
 19791 71BE 8D F0 A3			sta TMP
 19792
 19793 				; optimize OK (pub.pas), line = 191
 19794
 19795 71C1 AC 8A CD			ldy CURRENTPLAYER
 19796 71C4 B9 60 C9			lda adr.PLOPPORTUNITY,y
 19797 71C7 2D F0 A3			and TMP
 19798 71CA 8D F0 A3			sta TMP
 19799
 19800 				; optimize OK (pub.pas), line = 192
 19801
 19802 71CD F0 05			jeq l_4CC2
 19803 71CF A9 00			lda #$00
 19804 71D1 8D D0 A8			sta TIPP
 19805 71D4			l_4CC2
 19806
 19807 				; optimize OK (pub.pas), line = 193
 19808
 19809 71D4 AD D0 A8			lda TIPP
 19810 71D7 8D D8 A8			sta @CASETMP_0012
 19811 71DA D0 0A			jne l_4CD4
 19812 				@
 19813
 19814 				; optimize OK (pub.pas), line = 195
 19815
 19816 71DC A9 1A			lda #$1A
 19817 71DE 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 19818
 19819 				; optimize OK (pub.pas), line = 196
 19820
 19821 71E1 A9 1B			lda #$1B
 19822 71E3 4C F1 71			jmp s_4CE3
 19823 71E6			l_4CD4
 19824 71E6 C9 01			cmp #$01
 19825 71E8 D0 0A			jne l_4CDF
 19826
 19827 				; optimize OK (pub.pas), line = 199
 19828
 19829 71EA A9 1C			lda #$1C
 19830 71EC 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 19831
 19832 				; optimize OK (pub.pas), line = 200
 19833
 19834 71EF A9 1D			lda #$1D
 19835 71F1			s_4CE3
 19836 71F1 4C 04 72			jmp s_4CF0
 19837 71F4			l_4CDF
 19838 71F4 C9 02			cmp #$02
 19839 71F6 D0 0F			jne l_4CEA
 19840
 19841 				; optimize OK (pub.pas), line = 203
 19842
 19843 71F8 A9 1E			lda #$1E
 19844 71FA 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 19845
 19846 				; optimize OK (pub.pas), line = 204
 19847
 19848 71FD A9 1F			lda #$1F
 19849 71FF 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 19850
 19851 				; optimize OK (pub.pas), line = 205
 19852
 19853 7202 A9 20			lda #$20
 19854 7204			s_4CF0
 19855 7204 4C 39 72			jmp s_4D25
 19856 7207			l_4CEA
 19857 7207 C9 03			cmp #$03
 19858 7209 D0 31			jne l_4CF7
 19859
 19860 				; optimize OK (pub.pas), line = 208
 19861
 19862 720B A9 21			lda #$21
 19863 720D 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 19864
 19865 				; optimize OK (pub.pas), line = 209
 19866
 19867 7210 A9 22			lda #$22
 19868 7212 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 19869
 19870 				; optimize FAIL ('GETYESNO', pub.pas), line = 210
 19871
 19872 7215 20 08 20			jsr GETYESNO
 19873 7218 AD 1B A7			lda GETYESNO.RESULT
 19874 721B D0 03 4C 2D 74		jeq @exit
 19875 7220			l_4D0B
 19876
 19877 				; optimize OK (pub.pas), line = 211
 19878
 19879 7220 AD D2 A8			lda P
 19880 7223 8D D8 A7			sta PAYMONEY.PRICE
 19881 7226 AD D3 A8			lda P+1
 19882 7229 8D D9 A7			sta PAYMONEY.PRICE+1
 19883 722C 20 3B 32			jsr PAYMONEY
 19884 722F AD DA A7			lda PAYMONEY.RESULT
 19885 7232 D0 03 4C 2D 74		jeq @exit
 19886 7237			l_4D20
 19887
 19888 				; optimize OK (pub.pas), line = 212
 19889
 19890 7237 A9 23			lda #$23
 19891 7239			s_4D25
 19892 7239 4C 4C 72			jmp s_4D32
 19893 723C			l_4CF7
 19894 723C C9 04			cmp #$04
 19895 723E D0 0F			jne l_4D2C
 19896
 19897 				; optimize OK (pub.pas), line = 215
 19898
 19899 7240 A9 24			lda #$24
 19900 7242 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 19901
 19902 				; optimize OK (pub.pas), line = 216
 19903
 19904 7245 A9 25			lda #$25
 19905 7247 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 19906
 19907 				; optimize OK (pub.pas), line = 217
 19908
 19909 724A A9 26			lda #$26
 19910 724C			s_4D32
 19911 724C 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 19912 724F			l_4D2C
 19913 724F			a_0012
 19914
 19915 				; optimize OK (pub.pas), line = 220
 19916
 19917 724F A9 01			lda #$01
 19918 7251 AC D0 A8			ldy TIPP
 19919 7254 F0 04			beq l_0002_e
 19920 7256			l_0002_b
 19921 7256 0A				asl @
 19922 7257 88				dey
 19923 7258 D0 FC			bne l_0002_b
 19924 725A			l_0002_e
 19925 725A 8D F0 A3			sta TMP
 19926
 19927 				; optimize OK (pub.pas), line = 221
 19928
 19929 725D AC 8A CD			ldy CURRENTPLAYER
 19930 7260 B9 60 C9			lda adr.PLOPPORTUNITY,y
 19931 7263 0D F0 A3			ora TMP
 19932 7266 8D F0 A3			sta TMP
 19933
 19934 				; optimize OK (pub.pas), line = 222
 19935
 19936 7269 99 60 C9			sta adr.PLOPPORTUNITY,y
 19937
 19938 				; optimize FAIL ('WAITFORKEY', pub.pas), line = 223
 19939
 19940 726C 20 4A 1E			jsr WAITFORKEY
 19941 726F 4C 2D 74			jmp @exit
 19942 7272			l_4C20
 19943
 19944 				; optimize OK (pub.pas), line = 229
 19945
 19946 7272 AD 22 C9			lda CURRENTCHOICE
 19947 7275 C9 04			cmp #$04
 19948 7277 F0 03 4C 2D 74		jne l_4D70
 19949
 19950 				; optimize OK (pub.pas), line = 232
 19951
 19952 727C A9 14			lda #$14
 19953 727E 20 1F 29			jsr LOADLOCATION
 19954
 19955 				; optimize OK (pub.pas), line = 234
 19956
 19957 7281 AC 8A CD			ldy CURRENTPLAYER
 19958 7284 B9 98 C9			lda adr.PLRANK,y
 19959 7287 8D F0 A3			sta TMP
 19960
 19961 				; optimize OK (pub.pas), line = 235
 19962
 19963 728A C9 04			cmp #$04
 19964 728C 90 23			jcc l_4D8E
 19965
 19966 				; optimize OK (pub.pas), line = 237
 19967
 19968 728E A9 01			lda #$01
 19969 7290 20 C6 1C			jsr CRT_WRITE_LOCSTR
 19970
 19971 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', pub.pas), line = 238
 19972
 19973 7293 E8				inx
 19974 7294 AD F0 A3			lda TMP
 19975 7297 0A				asl @
 19976 7298 A8				tay
 19977 7299 B9 55 A4			lda adr.RANKNAMES,y
 19978 729C 95 94			sta :STACKORIGIN,x
 19979 729E B9 56 A4			lda adr.RANKNAMES+1,y
 19980 72A1 95 A4			sta :STACKORIGIN+STACKWIDTH,x
 19981 72A3 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 19982
 19983 				; optimize OK (pub.pas), line = 239
 19984
 19985 72A6 A9 02			lda #$02
 19986 72A8 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 19987
 19988 				; optimize FAIL ('WAITFORKEY', pub.pas), line = 240
 19989
 19990 72AB 20 4A 1E			jsr WAITFORKEY
 19991 72AE 4C 2D 74			jmp @exit
 19992 72B1			l_4D8E
 19993
 19994 				; optimize OK (pub.pas), line = 245
 19995
 19996 72B1 A9 05			lda #$05
 19997 72B3 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 19998 72B6 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 19999 72B9 D0 0B			jne l_4DAD
 20000
 20001 				; optimize OK (pub.pas), line = 247
 20002
 20003 72BB A9 03			lda #$03
 20004 72BD 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20005
 20006 				; optimize FAIL ('WAITFORKEY', pub.pas), line = 248
 20007
 20008 72C0 20 4A 1E			jsr WAITFORKEY
 20009 72C3 4C 2D 74			jmp @exit
 20010 72C6			l_4DAD
 20011
 20012 				; optimize OK (pub.pas), line = 253
 20013
 20014 72C6 A9 03			lda #$03
 20015 72C8 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 20016 72CB E8				inx
 20017 72CC AD 62 9C 95 94		mva SYSTEM.RANDOM.@010180000.RESULT :STACKORIGIN,x
 20018 72D1 E8				inx
 20019 72D2 A9 F4 95 94			mva #$F4 :STACKORIGIN,x
 20020 72D6 A9 01 95 A4			mva #$01 :STACKORIGIN+STACKWIDTH,x
 20021 72DA A9 00 95 A3			mva #$00 :STACKORIGIN-1+STACKWIDTH,x
 20022 72DE 20 7C 10			jsr imulWORD
 20023 72E1 A5 84			lda :eax
 20024 72E3 95 93			sta :STACKORIGIN-1,x
 20025 72E5 A5 85			lda :eax+1
 20026 72E7 95 A3			sta :STACKORIGIN-1+STACKWIDTH,x
 20027 72E9 A5 86			lda :eax+2
 20028 72EB 95 B3			sta :STACKORIGIN-1+STACKWIDTH*2,x
 20029 72ED A5 87			lda :eax+3
 20030 72EF 95 C3			sta :STACKORIGIN-1+STACKWIDTH*3,x
 20031 72F1 CA				dex
 20032 72F2 B5 94			lda :STACKORIGIN,x
 20033 72F4 8D C9 A8			sta WAGE
 20034 72F7 B5 A4			lda :STACKORIGIN+STACKWIDTH,x
 20035 72F9 8D CA A8			sta WAGE+1
 20036 72FC CA				dex
 20037
 20038 				; optimize OK (pub.pas), line = 254
 20039
 20040 72FD A9 04			lda #$04
 20041 72FF 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 20042 7302 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 20043 7305 8D D9 A8			sta @CASETMP_0013
 20044 7308 D0 2D			jne l_4DC6
 20045 				@
 20046
 20047 				; optimize OK (pub.pas), line = 257
 20048
 20049 730A A9 04			lda #$04
 20050 730C 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20051
 20052 				; optimize OK (pub.pas), line = 258
 20053
 20054 730F A9 05			lda #$05
 20055 7311 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20056
 20057 				; optimize OK (pub.pas), line = 259
 20058
 20059 7314 A9 06			lda #$06
 20060 7316 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20061
 20062 				; optimize OK (pub.pas), line = 260
 20063
 20064 7319 A9 07			lda #$07
 20065 731B 8D CC A8			sta JOBLOCATION
 20066
 20067 				; optimize OK (pub.pas), line = 261
 20068
 20069 731E A9 03			lda #$03
 20070 7320 8D CB A8			sta DURATION
 20071
 20072 				; optimize OK (pub.pas), line = 262
 20073
 20074 7323 AD C9 A8			lda WAGE
 20075 7326 18 69 DC			add #$DC
 20076 7329 8D C9 A8			sta WAGE
 20077 732C AD CA A8			lda WAGE+1
 20078 732F 69 05			adc #$05
 20079 7331 8D CA A8			sta WAGE+1
 20080 7334 4C BD 73			jmp a_0013
 20081 7337			l_4DC6
 20082 7337 C9 01			cmp #$01
 20083 7339 D0 28			jne l_4DE4
 20084
 20085 				; optimize OK (pub.pas), line = 266
 20086
 20087 733B A9 07			lda #$07
 20088 733D 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20089
 20090 				; optimize OK (pub.pas), line = 267
 20091
 20092 7340 A9 08			lda #$08
 20093 7342 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20094
 20095 				; optimize OK (pub.pas), line = 268
 20096
 20097 7345 A9 02			lda #$02
 20098 7347 8D CB A8			sta DURATION
 20099
 20100 				; optimize OK (pub.pas), line = 269
 20101
 20102 734A AD C9 A8			lda WAGE
 20103 734D 18 69 E8			add #$E8
 20104 7350 8D C9 A8			sta WAGE
 20105 7353 AD CA A8			lda WAGE+1
 20106 7356 69 03			adc #$03
 20107 7358 8D CA A8			sta WAGE+1
 20108
 20109 				; optimize OK (pub.pas), line = 270
 20110
 20111 735B A9 0B			lda #$0B
 20112 735D 8D CC A8			sta JOBLOCATION
 20113 7360 4C BD 73			jmp a_0013
 20114 7363			l_4DE4
 20115 7363 C9 02			cmp #$02
 20116 7365 D0 28			jne l_4E00
 20117
 20118 				; optimize OK (pub.pas), line = 274
 20119
 20120 7367 A9 09			lda #$09
 20121 7369 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20122
 20123 				; optimize OK (pub.pas), line = 275
 20124
 20125 736C A9 0A			lda #$0A
 20126 736E 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20127
 20128 				; optimize OK (pub.pas), line = 276
 20129
 20130 7371 A9 02			lda #$02
 20131 7373 8D CB A8			sta DURATION
 20132
 20133 				; optimize OK (pub.pas), line = 277
 20134
 20135 7376 AD C9 A8			lda WAGE
 20136 7379 18 69 D0			add #$D0
 20137 737C 8D C9 A8			sta WAGE
 20138 737F AD CA A8			lda WAGE+1
 20139 7382 69 07			adc #$07
 20140 7384 8D CA A8			sta WAGE+1
 20141
 20142 				; optimize OK (pub.pas), line = 278
 20143
 20144 7387 A9 0A			lda #$0A
 20145 7389 8D CC A8			sta JOBLOCATION
 20146 738C 4C BD 73			jmp a_0013
 20147 738F			l_4E00
 20148 738F C9 03			cmp #$03
 20149 7391 D0 2A			jne l_4E1C
 20150
 20151 				; optimize OK (pub.pas), line = 282
 20152
 20153 7393 A9 0B			lda #$0B
 20154 7395 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20155
 20156 				; optimize OK (pub.pas), line = 283
 20157
 20158 7398 A9 0C			lda #$0C
 20159 739A 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20160
 20161 				; optimize OK (pub.pas), line = 284
 20162
 20163 739D A9 0D			lda #$0D
 20164 739F 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20165
 20166 				; optimize OK (pub.pas), line = 285
 20167
 20168 73A2 A9 01			lda #$01
 20169 73A4 8D CB A8			sta DURATION
 20170
 20171 				; optimize OK (pub.pas), line = 286
 20172
 20173 73A7 AD C9 A8			lda WAGE
 20174 73AA 18 69 DC			add #$DC
 20175 73AD 8D C9 A8			sta WAGE
 20176 73B0 AD CA A8			lda WAGE+1
 20177 73B3 69 05			adc #$05
 20178 73B5 8D CA A8			sta WAGE+1
 20179
 20180 				; optimize OK (pub.pas), line = 287
 20181
 20182 73B8 A9 10			lda #$10
 20183 73BA 8D CC A8			sta JOBLOCATION
 20184 73BD			l_4E1C
 20185 73BD			a_0013
 20186
 20187 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', pub.pas), line = 291
 20188
 20189 73BD 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 20190
 20191 				; optimize OK (pub.pas), line = 292
 20192
 20193 73C0 A9 0E			lda #$0E
 20194 73C2 20 C6 1C			jsr CRT_WRITE_LOCSTR
 20195
 20196 				; optimize OK (pub.pas), line = 293
 20197
 20198 73C5 AD C9 A8			lda WAGE
 20199 73C8 8D 92 A1			sta B_CRT.CRT_WRITE.@010185000.NUM
 20200 73CB A0 00			ldy #$00
 20201 73CD AD CA A8			lda WAGE+1
 20202 73D0 10 01			spl
 20203 73D2 88				dey
 20204 73D3 8D 93 A1			sta B_CRT.CRT_WRITE.@010185000.NUM+1
 20205 73D6 8C 94 A1			sty B_CRT.CRT_WRITE.@010185000.NUM+2
 20206 73D9 8C 95 A1			sty B_CRT.CRT_WRITE.@010185000.NUM+3
 20207 73DC 20 CA 18			jsr B_CRT.CRT_WRITE.@010185000
 20208
 20209 				; optimize FAIL ('CRT_WRITELN2', pub.pas), line = 294
 20210
 20211 73DF E8				inx
 20212 73E0 A9 A0 95 94			mva #$A0 :STACKORIGIN,x
 20213 73E4 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 20214 73E8 20 82 1E			jsr CRT_WRITELN2
 20215
 20216 				; optimize OK (pub.pas), line = 295
 20217
 20218 73EB A9 0F			lda #$0F
 20219 73ED 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20220
 20221 				; optimize FAIL ('GETYESNO', pub.pas), line = 296
 20222
 20223 73F0 20 08 20			jsr GETYESNO
 20224 73F3 AD 1B A7			lda GETYESNO.RESULT
 20225 73F6 C9 01			cmp #$01
 20226 73F8 D0 33			jne l_4E53
 20227
 20228 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', pub.pas), line = 298
 20229
 20230 73FA 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 20231
 20232 				; optimize OK (pub.pas), line = 299
 20233
 20234 73FD A9 10			lda #$10
 20235 73FF 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20236
 20237 				; optimize FAIL ('WAITFORKEY', pub.pas), line = 300
 20238
 20239 7402 20 4A 1E			jsr WAITFORKEY
 20240
 20241 				; optimize OK (pub.pas), line = 302
 20242
 20243 7405 AC 8A CD			ldy CURRENTPLAYER
 20244 7408 AD CB A8			lda DURATION
 20245 740B 99 80 C9			sta adr.PLJOB,y
 20246
 20247 				; optimize OK (pub.pas), line = 303
 20248
 20249 740E 98				tya
 20250 740F 0A				asl @
 20251 7410 A8				tay
 20252 7411 AD C9 A8			lda WAGE
 20253 7414 99 84 C9			sta adr.PLJOBWAGE,y
 20254 7417 AD CA A8			lda WAGE+1
 20255 741A 99 85 C9			sta adr.PLJOBWAGE+1,y
 20256
 20257 				; optimize OK (pub.pas), line = 304
 20258
 20259 741D AD CC A8			lda JOBLOCATION
 20260 7420 99 8C C9			sta adr.PLJOBLOCATION,y
 20261 7423 A9 00			lda #$00
 20262 7425 99 8D C9			sta adr.PLJOBLOCATION+1,y
 20263
 20264 				; optimize OK (pub.pas), line = 305
 20265
 20266 7428 A9 11			lda #$11
 20267 742A 8D C7 A8			sta RESULT
 20268 742D			l_4E53
 20269 742D			l_4D70
 20270 742D			@exit
 20271
 20272 				; ------------------------------------------------------------
 20273
 20274 = A8C7			RESULT	= DATAORIGIN+$0C71
 20275 = A8C8			R	= DATAORIGIN+$0C72
 20276 = A8C9			WAGE	= DATAORIGIN+$0C73
 20277 = A8CB			DURATION	= DATAORIGIN+$0C75
 20278 = A8CC			JOBLOCATION	= DATAORIGIN+$0C76
 20279 = A8CD			G	= DATAORIGIN+$0C77
 20280 = A8CE			K	= DATAORIGIN+$0C78
 20281 = A8CF			Z	= DATAORIGIN+$0C79
 20282 = A8D0			TIPP	= DATAORIGIN+$0C7A
 20283 = A8D1			HASHIDEOUT	= DATAORIGIN+$0C7B
 20284 = A8D2			P	= DATAORIGIN+$0C7C
 20285 = A8D4			AL	= DATAORIGIN+$0C7E
 20286 = A8D6			W	= DATAORIGIN+$0C80
 20287 = A8D8			@CASETMP_0012	= DATAORIGIN+$0C82
 20288 = A8D9			@CASETMP_0013	= DATAORIGIN+$0C83
 20289
 20290 = A8C8			@VarData	= R
 20291 = 0012			@VarDataSize	= 18
 20292
 20293 742D 60				rts						; ret
 20294 				.endl
 20295
 20296 742E			.local	STORECHOICES					; FUNCTION
 20297
 20298 				; optimize FAIL ('SHOWLOCATIONHEADER', store.pas), line = 7
 20299
 20300 742E 20 7A 28			jsr SHOWLOCATIONHEADER
 20301
 20302 				; optimize OK (store.pas), line = 8
 20303
 20304 7431 A9 09			lda #$09
 20305 7433 8D DA A8			sta RESULT
 20306
 20307 				; optimize OK (store.pas), line = 12
 20308
 20309 7436 AC 8A CD			ldy CURRENTPLAYER
 20310 7439 B9 98 C9			lda adr.PLRANK,y
 20311 743C C9 02			cmp #$02
 20312 743E B0 0B			jcs l_4E98
 20313
 20314 				; optimize OK (store.pas), line = 14
 20315
 20316 7440 A9 01			lda #$01
 20317 7442 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20318
 20319 				; optimize FAIL ('WAITFORKEY', store.pas), line = 15
 20320
 20321 7445 20 4A 1E			jsr WAITFORKEY
 20322 7448 4C C1 78			jmp @exit
 20323 744B			l_4E98
 20324
 20325 				; optimize OK (store.pas), line = 22
 20326
 20327 744B AD A5 A3			lda LASTLOCATION
 20328 744E C9 09			cmp #$09
 20329 7450 D0 0C			jne l_4EB0
 20330
 20331 				; optimize FAIL ('FIGHTPOLICE', store.pas), line = 24
 20332
 20333 7452 20 03 4F			jsr FIGHTPOLICE
 20334 7455 AD 53 A8			lda FIGHTPOLICE.RESULT
 20335 7458 8D DA A8			sta RESULT
 20336 745B 4C C1 78			jmp @exit
 20337 745E			l_4EB0
 20338
 20339 				; optimize OK (store.pas), line = 29
 20340
 20341 745E AD 22 C9			lda CURRENTCHOICE
 20342 7461 C9 01			cmp #$01
 20343 7463 D0 34			jne l_4EC9
 20344
 20345 				; optimize OK (store.pas), line = 31
 20346
 20347 7465 AD 8A CD			lda CURRENTPLAYER
 20348 7468 4A				lsr @
 20349 7469 4A				lsr @
 20350 746A 4A				lsr @
 20351 746B 8D F0 A3			sta TMP
 20352
 20353 				; optimize OK (store.pas), line = 32
 20354
 20355 746E A8				tay
 20356 746F B9 08 CD			lda adr.GANGSTERBRUT,y
 20357 7472 C9 1E			cmp #$1E
 20358 7474 90 07			jcc l_4EF5x
 20359 7476 AD 3D A7			lda CURRENTSUBLOCATION
 20360 7479 C9 01			cmp #$01
 20361 747B D0 1C			jne l_4EF5
 20362 747D			l_4EF5x
 20363
 20364 				; optimize OK (store.pas), line = 33
 20365
 20366 747D A9 02			lda #$02
 20367 747F 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20368
 20369 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', store.pas), line = 34
 20370
 20371 7482 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 20372
 20373 				; optimize OK (store.pas), line = 35
 20374
 20375 7485 A9 03			lda #$03
 20376 7487 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20377
 20378 				; optimize FAIL ('WAITFORKEY', store.pas), line = 36
 20379
 20380 748A 20 4A 1E			jsr WAITFORKEY
 20381
 20382 				; optimize FAIL ('FIGHTPOLICE', store.pas), line = 37
 20383
 20384 748D 20 03 4F			jsr FIGHTPOLICE
 20385 7490 AD 53 A8			lda FIGHTPOLICE.RESULT
 20386 7493 8D DA A8			sta RESULT
 20387 7496 4C C1 78			jmp @exit
 20388 7499			l_4EF5
 20389 7499			l_4EC9
 20390
 20391 				; optimize OK (store.pas), line = 43
 20392
 20393 7499 AD 22 C9			lda CURRENTCHOICE
 20394 749C C9 02			cmp #$02
 20395 749E D0 16			jne l_4F16
 20396
 20397 				; optimize OK (store.pas), line = 45
 20398
 20399 74A0 AD 3D A7			lda CURRENTSUBLOCATION
 20400 74A3 C9 04			cmp #$04
 20401 74A5 F0 04			jeq l_4F35x
 20402 74A7 C9 03			cmp #$03
 20403 74A9 D0 0B			jne l_4F35
 20404 74AB			l_4F35x
 20405
 20406 				; optimize OK (store.pas), line = 46
 20407
 20408 74AB A9 04			lda #$04
 20409 74AD 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20410
 20411 				; optimize FAIL ('WAITFORKEY', store.pas), line = 47
 20412
 20413 74B0 20 4A 1E			jsr WAITFORKEY
 20414 74B3 4C C1 78			jmp @exit
 20415 74B6			l_4F35
 20416 74B6			l_4F16
 20417
 20418 				; optimize OK (store.pas), line = 53
 20419
 20420 74B6 AD 22 C9			lda CURRENTCHOICE
 20421 74B9 C9 03			cmp #$03
 20422 74BB F0 03 4C 7B 75		jne l_4F4F
 20423
 20424 				; optimize OK (store.pas), line = 54
 20425
 20426 74C0 AD 3D A7			lda CURRENTSUBLOCATION
 20427 74C3 C9 02			cmp #$02
 20428 74C5 F0 07			jeq l_4F6Ex
 20429 74C7 C9 01			cmp #$01
 20430 74C9 F0 03 4C 7B 75		jne l_4F6E
 20431 74CE			l_4F6Ex
 20432
 20433 				; optimize OK (store.pas), line = 55
 20434
 20435 74CE A9 05			lda #$05
 20436 74D0 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20437
 20438 				; optimize OK (store.pas), line = 56
 20439
 20440 74D3 A9 06			lda #$06
 20441 74D5 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20442
 20443 				; optimize FAIL ('WAITFORKEY', store.pas), line = 57
 20444
 20445 74D8 20 4A 1E			jsr WAITFORKEY
 20446
 20447 				; -------------------  ASM Block 00000164  -------------------
 20448
 20449 				 
 20450 74DB AD 01 9B		                lda loc_string_35
 20451 74DE 8D AC A3		                sta adr.FP_GANG+$02
 20452 74E1 AD 02 9B		                lda loc_string_35+1
 20453 74E4 8D AD A3		                sta adr.FP_GANG+1+$02
 20454 				            
 20455 				; optimize OK (store.pas), line = 66
 20456
 20457 74E7 A9 01			lda #$01
 20458 74E9 8D 02 E4			sta adr.FP_AI+$01
 20459
 20460 				; optimize OK (store.pas), line = 67
 20461
 20462 74EC AC 8A CD			ldy CURRENTPLAYER
 20463 74EF B9 98 C9			lda adr.PLRANK,y
 20464 74F2 A0 01			ldy #1
 20465 74F4 C9 06			cmp #$06
 20466 74F6 B0 01			bcs @+
 20467 74F8 88				dey
 20468 				@
 20469 74F9 84 9F			sty :STACKORIGIN+11
 20470 74FB 06 9F			asl :STACKORIGIN+11
 20471 74FD A9 03			lda #$03
 20472 74FF 18 65 9F			add :STACKORIGIN+11
 20473 7502 8D 04 E4			sta adr.FP_N+$01
 20474
 20475 				; optimize OK (store.pas), line = 68
 20476
 20477 7505 A9 00			lda #$00
 20478 7507 8D DC A8			sta K
 20479 750A AC 04 E4			ldy adr.FP_N+$01
 20480 750D 88				dey
 20481 750E 8C 12 75			sty @FORTMP_4F9E_0
 20482
 20483 7511			l_4FA1
 20484 				; --- ForToDoCondition
 20485 7511 A9 00			lda @FORTMP_4F9E_0::#$00
 20486 7513 CD DC A8			cmp K
 20487 7516 90 1D			jcc l_4FAF
 20488
 20489 				; optimize FAIL (1, store.pas), line = 69
 20490
 20491 7518 E8				inx
 20492 7519 AD DC A8 95 94		mva K :STACKORIGIN,x
 20493 751E A9 00 95 A4			mva #$00 :STACKORIGIN+STACKWIDTH,x
 20494 7522 A9 02			lda #$02
 20495 7524 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 20496 7527 B4 94			ldy :STACKORIGIN,x
 20497 7529 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 20498 752C 99 45 E5			sta adr.FP_SEX,y
 20499 752F CA				dex
 20500
 20501 				; --- ForToDoEpilog
 20502 7530 EE DC A8			inc K
 20503 7533 D0 DC			jne l_4FA1
 20504 7535			l_4FAF
 20505
 20506 				; -------------------  ASM Block 00000165  -------------------
 20507
 20508 7535 A0 00		                ldy #$00
 20509 				            @:
 20510 7537 98			                tya 
 20511 7538 0A			                asl 
 20512 7539 A8			                tay
 20513
 20514 753A AD 03 9B		                lda loc_string_36
 20515 753D 99 CE A3		                sta adr.FP_NAME+$20,y
 20516 7540 AD 04 9B		                lda loc_string_36+1
 20517 7543 99 CF A3		                sta adr.FP_NAME+1+$20,y
 20518
 20519 7546 98			                tya
 20520 7547 4A			                lsr 
 20521 7548 A8			                tay
 20522
 20523 7549 A9 1E		                lda #30
 20524 754B 99 95 E4		                sta adr.FP_ENERGY+$10,y
 20525 754E A9 07		                lda #07
 20526 7550 99 55 E4		                sta adr.FP_WEAPON+$10,y
 20527 7553 C8			                iny
 20528 7554 CC 04 E4		                cpy adr.FP_N+$01
 20529 7557 D0 DE		                bne @- 
 20530 				            
 20531 				; optimize FAIL ('DOFIGHT', store.pas), line = 102
 20532
 20533 7559 20 9F 4D			jsr DOFIGHT
 20534 755C AD 4E A8			lda DOFIGHT.RESULT
 20535 755F C9 01			cmp #$01
 20536 7561 D0 08			jne l_4FCC
 20537
 20538 				; optimize OK (store.pas), line = 104
 20539
 20540 7563 A9 11			lda #$11
 20541 7565 8D DA A8			sta RESULT
 20542 7568 4C C1 78			jmp @exit
 20543 756B			l_4FCC
 20544
 20545 				; optimize FAIL ('SHOWLOCATIONHEADER', store.pas), line = 107
 20546
 20547 756B 20 7A 28			jsr SHOWLOCATIONHEADER
 20548
 20549 				; optimize OK (store.pas), line = 108
 20550
 20551 756E A9 07			lda #$07
 20552 7570 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20553
 20554 				; optimize OK (store.pas), line = 109
 20555
 20556 7573 A9 08			lda #$08
 20557 7575 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20558
 20559 				; optimize FAIL ('WAITFORKEY', store.pas), line = 110
 20560
 20561 7578 20 4A 1E			jsr WAITFORKEY
 20562 757B			l_4F6E
 20563 757B			l_4F4F
 20564
 20565 				; optimize OK (store.pas), line = 115
 20566
 20567 757B AD 22 C9			lda CURRENTCHOICE
 20568 757E C9 04			cmp #$04
 20569 7580 D0 2A			jne l_4FEF
 20570
 20571 				; optimize OK (store.pas), line = 116
 20572
 20573 7582 AD 8A CD			lda CURRENTPLAYER
 20574 7585 0A				asl @
 20575 7586 0A				asl @
 20576 7587 0A				asl @
 20577 7588 8D F0 A3			sta TMP
 20578
 20579 				; optimize OK (store.pas), line = 117
 20580
 20581 758B AD 3D A7			lda CURRENTSUBLOCATION
 20582 758E C9 03			cmp #$03
 20583 7590 F0 0A			jeq l_501Bx
 20584 7592 AC F0 A3			ldy TMP
 20585 7595 B9 E8 CC			lda adr.GANGSTERINT,y
 20586 7598 C9 1E			cmp #$1E
 20587 759A B0 10			jcs l_501B
 20588 759C			l_501Bx
 20589
 20590 				; optimize OK (store.pas), line = 118
 20591
 20592 759C A9 09			lda #$09
 20593 759E 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20594
 20595 				; optimize OK (store.pas), line = 119
 20596
 20597 75A1 A9 0A			lda #$0A
 20598 75A3 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20599
 20600 				; optimize FAIL ('WAITFORKEY', store.pas), line = 120
 20601
 20602 75A6 20 4A 1E			jsr WAITFORKEY
 20603 75A9 4C C1 78			jmp @exit
 20604 75AC			l_501B
 20605 75AC			l_4FEF
 20606
 20607 				; optimize FAIL ('SHOWLOCATIONHEADER', store.pas), line = 126
 20608
 20609 75AC 20 7A 28			jsr SHOWLOCATIONHEADER
 20610
 20611 				; optimize OK (store.pas), line = 127
 20612
 20613 75AF A9 01			lda #$01
 20614 75B1 20 EC 2F			jsr ADDPOINTS
 20615
 20616 				; optimize OK (store.pas), line = 128
 20617
 20618 75B4 A9 C8			lda #$C8
 20619 75B6 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 20620 75B9 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 20621 75BC 18 69 20			add #$20
 20622 75BF 8D DD A8			sta P
 20623 75C2 A9 00			lda #$00
 20624 75C4 69 03			adc #$03
 20625 75C6 8D DE A8			sta P+1
 20626
 20627 				; optimize OK (store.pas), line = 129
 20628
 20629 75C9 AD 3D A7			lda CURRENTSUBLOCATION
 20630 75CC C9 02			cmp #$02
 20631 75CE F0 04			jeq l_504Fx
 20632 75D0 C9 03			cmp #$03
 20633 75D2 D0 0E			jne l_504F
 20634 75D4			l_504Fx
 20635
 20636 				; optimize OK (store.pas), line = 130
 20637
 20638 75D4 AD DD A8			lda P
 20639 75D7 38 E9 C8			sub #$C8
 20640 75DA 8D DD A8			sta P
 20641 75DD B0 03			scs
 20642 75DF CE DE A8			dec P+1
 20643 75E2			l_504F
 20644
 20645 				; optimize OK (store.pas), line = 131
 20646
 20647 75E2 AD 22 C9			lda CURRENTCHOICE
 20648 75E5 C9 02			cmp #$02
 20649 75E7 D0 11			jne l_506D
 20650 75E9 AD DD A8			lda P
 20651 75EC 18 69 58			add #$58
 20652 75EF 8D DD A8			sta P
 20653 75F2 AD DE A8			lda P+1
 20654 75F5 69 02			adc #$02
 20655 75F7 8D DE A8			sta P+1
 20656 75FA			l_506D
 20657
 20658 				; optimize OK (store.pas), line = 133
 20659
 20660 75FA AD 22 C9			lda CURRENTCHOICE
 20661 75FD C9 01			cmp #$01
 20662 75FF D0 25			jne l_508B
 20663
 20664 				; optimize OK (store.pas), line = 134
 20665
 20666 7601 A9 0B			lda #$0B
 20667 7603 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20668
 20669 				; optimize OK (store.pas), line = 135
 20670
 20671 7606 A9 0C			lda #$0C
 20672 7608 20 C6 1C			jsr CRT_WRITE_LOCSTR
 20673
 20674 				; optimize OK (store.pas), line = 136
 20675
 20676 760B AD DD A8			lda P
 20677 760E 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 20678 7611 AD DE A8			lda P+1
 20679 7614 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 20680 7617 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 20681
 20682 				; optimize FAIL ('CRT_WRITELN', store.pas), line = 137
 20683
 20684 761A E8				inx
 20685 761B A9 73 95 94			mva #$73 :STACKORIGIN,x
 20686 761F A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 20687 7623 20 A9 1E			jsr CRT_WRITELN
 20688 7626			l_508B
 20689
 20690 				; optimize OK (store.pas), line = 140
 20691
 20692 7626 AD 22 C9			lda CURRENTCHOICE
 20693 7629 C9 02			cmp #$02
 20694 762B D0 20			jne l_50A9
 20695
 20696 				; optimize OK (store.pas), line = 141
 20697
 20698 762D A9 0D			lda #$0D
 20699 762F 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20700
 20701 				; optimize OK (store.pas), line = 142
 20702
 20703 7632 AD DD A8			lda P
 20704 7635 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 20705 7638 AD DE A8			lda P+1
 20706 763B 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 20707 763E 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 20708
 20709 				; optimize FAIL ('CRT_WRITELN', store.pas), line = 143
 20710
 20711 7641 E8				inx
 20712 7642 A9 73 95 94			mva #$73 :STACKORIGIN,x
 20713 7646 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 20714 764A 20 A9 1E			jsr CRT_WRITELN
 20715 764D			l_50A9
 20716
 20717 				; optimize OK (store.pas), line = 147
 20718
 20719 764D AD 22 C9			lda CURRENTCHOICE
 20720 7650 C9 03			cmp #$03
 20721 7652 D0 19			jne l_50C5
 20722
 20723 				; optimize OK (store.pas), line = 148
 20724
 20725 7654 A9 0E			lda #$0E
 20726 7656 20 C6 1C			jsr CRT_WRITE_LOCSTR
 20727
 20728 				; optimize OK (store.pas), line = 149
 20729
 20730 7659 AD DD A8			lda P
 20731 765C 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 20732 765F AD DE A8			lda P+1
 20733 7662 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 20734 7665 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 20735
 20736 				; optimize OK (store.pas), line = 150
 20737
 20738 7668 A9 0F			lda #$0F
 20739 766A 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20740 766D			l_50C5
 20741
 20742 				; optimize OK (store.pas), line = 153
 20743
 20744 766D AD 22 C9			lda CURRENTCHOICE
 20745 7670 C9 04			cmp #$04
 20746 7672 D0 25			jne l_50E1
 20747
 20748 				; optimize OK (store.pas), line = 154
 20749
 20750 7674 A9 10			lda #$10
 20751 7676 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20752
 20753 				; optimize OK (store.pas), line = 155
 20754
 20755 7679 A9 11			lda #$11
 20756 767B 20 C6 1C			jsr CRT_WRITE_LOCSTR
 20757
 20758 				; optimize OK (store.pas), line = 156
 20759
 20760 767E AD DD A8			lda P
 20761 7681 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 20762 7684 AD DE A8			lda P+1
 20763 7687 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 20764 768A 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 20765
 20766 				; optimize FAIL ('CRT_WRITELN', store.pas), line = 157
 20767
 20768 768D E8				inx
 20769 768E A9 73 95 94			mva #$73 :STACKORIGIN,x
 20770 7692 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 20771 7696 20 A9 1E			jsr CRT_WRITELN
 20772 7699			l_50E1
 20773
 20774 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', store.pas), line = 161
 20775
 20776 7699 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 20777
 20778 				; optimize OK (store.pas), line = 162
 20779
 20780 769C A9 12			lda #$12
 20781 769E 20 15 1D			jsr CRT_WRITELN2_LOCSTR
 20782
 20783 				; optimize OK (store.pas), line = 163
 20784
 20785 76A1 A9 13			lda #$13
 20786 76A3 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20787
 20788 				; optimize OK (store.pas), line = 164
 20789
 20790 76A6 A9 14			lda #$14
 20791 76A8 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20792
 20793 				; optimize OK (store.pas), line = 165
 20794
 20795 76AB A9 15			lda #$15
 20796 76AD 20 15 1D			jsr CRT_WRITELN2_LOCSTR
 20797
 20798 				; optimize OK (store.pas), line = 166
 20799
 20800 76B0 A9 16			lda #$16
 20801 76B2 20 C6 1C			jsr CRT_WRITE_LOCSTR
 20802
 20803 				; optimize OK (store.pas), line = 167
 20804
 20805 76B5 A9 01			lda #$01
 20806 76B7 8D 1C A7			sta READVALUE.MINVALUE
 20807 76BA A9 00			lda #$00
 20808 76BC 8D 1D A7			sta READVALUE.MINVALUE+1
 20809 76BF A9 03			lda #$03
 20810 76C1 8D 1E A7			sta READVALUE.MAXVALUE
 20811 76C4 A9 00			lda #$00
 20812 76C6 8D 1F A7			sta READVALUE.MAXVALUE+1
 20813 76C9 20 26 20			jsr READVALUE
 20814 76CC AD 20 A7			lda READVALUE.RESULT
 20815 76CF 8D DB A8			sta R
 20816
 20817 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', store.pas), line = 168
 20818
 20819 76D2 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 20820
 20821 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', store.pas), line = 169
 20822
 20823 76D5 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 20824
 20825 				; optimize OK (store.pas), line = 172
 20826
 20827 76D8 AD DB A8			lda R
 20828 76DB C9 01			cmp #$01
 20829 76DD D0 1A			jne l_5112
 20830
 20831 				; optimize OK (store.pas), line = 173
 20832
 20833 76DF AD DD A8			lda P
 20834 76E2 8D CB A7			sta ADDMONEY.AMOUNT
 20835 76E5 AD DE A8			lda P+1
 20836 76E8 8D CC A7			sta ADDMONEY.AMOUNT+1
 20837 76EB 20 98 2F			jsr ADDMONEY
 20838
 20839 				; optimize OK (store.pas), line = 174
 20840
 20841 76EE A9 17			lda #$17
 20842 76F0 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20843
 20844 				; optimize FAIL ('WAITFORKEY', store.pas), line = 175
 20845
 20846 76F3 20 4A 1E			jsr WAITFORKEY
 20847 76F6 4C C1 78			jmp @exit
 20848 76F9			l_5112
 20849
 20850 				; optimize OK (store.pas), line = 179
 20851
 20852 76F9 AD DB A8			lda R
 20853 76FC C9 02			cmp #$02
 20854 76FE F0 03 4C DA 77		jne l_512D
 20855
 20856 				; optimize OK (store.pas), line = 180
 20857
 20858 7703 AD 3D A7			lda CURRENTSUBLOCATION
 20859 7706 F0 04			jeq l_514Cx
 20860 7708 C9 02			cmp #$02
 20861 770A D0 6B			jne l_514C
 20862 770C			l_514Cx
 20863
 20864 				; optimize OK (store.pas), line = 181
 20865
 20866 770C A9 18			lda #$18
 20867 770E 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20868
 20869 				; optimize OK (store.pas), line = 182
 20870
 20871 7711 A9 19			lda #$19
 20872 7713 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20873
 20874 				; optimize FAIL ('WAITFORKEY', store.pas), line = 183
 20875
 20876 7716 20 4A 1E			jsr WAITFORKEY
 20877
 20878 				; -------------------  ASM Block 00000166  -------------------
 20879
 20880 				 
 20881 7719 AD EF 9A		                lda loc_string_26
 20882 771C 8D AC A3		                sta adr.FP_GANG+$02
 20883 771F AD F0 9A		                lda loc_string_26+1
 20884 7722 8D AD A3		                sta adr.FP_GANG+1+$02
 20885 				            
 20886 				; optimize OK (store.pas), line = 192
 20887
 20888 7725 A9 01			lda #$01
 20889 7727 8D 02 E4			sta adr.FP_AI+$01
 20890
 20891 				; optimize OK (store.pas), line = 193
 20892
 20893 772A A9 05			lda #$05
 20894 772C 8D 04 E4			sta adr.FP_N+$01
 20895
 20896 				; -------------------  ASM Block 00000167  -------------------
 20897
 20898 772F A0 00		                ldy #$00
 20899 				            @:
 20900 7731 98			                tya 
 20901 7732 0A			                asl 
 20902 7733 A8			                tay
 20903
 20904 7734 AD 05 9B		                lda loc_string_37
 20905 7737 99 CE A3		                sta adr.FP_NAME+$20,y
 20906 773A AD 06 9B		                lda loc_string_37+1
 20907 773D 99 CF A3		                sta adr.FP_NAME+1+$20,y
 20908
 20909 7740 98			                tya
 20910 7741 4A			                lsr 
 20911 7742 A8			                tay
 20912
 20913 7743 A9 1E		                lda #30
 20914 7745 99 95 E4		                sta adr.FP_ENERGY+$10,y
 20915 7748 A9 03		                lda #03
 20916 774A 99 55 E4		                sta adr.FP_WEAPON+$10,y
 20917 774D C8			                iny
 20918 774E CC 04 E4		                cpy adr.FP_N+$01
 20919 7751 D0 DE		                bne @- 
 20920 				            
 20921 				; optimize FAIL ('DOFIGHT', store.pas), line = 226
 20922
 20923 7753 20 9F 4D			jsr DOFIGHT
 20924 7756 AD 4E A8			lda DOFIGHT.RESULT
 20925 7759 C9 01			cmp #$01
 20926 775B D0 08			jne l_516C
 20927
 20928 				; optimize OK (store.pas), line = 228
 20929
 20930 775D A9 11			lda #$11
 20931 775F 8D DA A8			sta RESULT
 20932 7762 4C C1 78			jmp @exit
 20933 7765			l_516C
 20934
 20935 				; optimize OK (store.pas), line = 231
 20936
 20937 7765 AD DD A8			lda P
 20938 7768 8D CB A7			sta ADDMONEY.AMOUNT
 20939 776B AD DE A8			lda P+1
 20940 776E 8D CC A7			sta ADDMONEY.AMOUNT+1
 20941 7771 20 98 2F			jsr ADDMONEY
 20942 7774 4C DA 77			jmp l_517F
 20943 7777			l_514C
 20944
 20945 				; optimize OK (store.pas), line = 235
 20946
 20947 7777 A9 C8			lda #$C8
 20948 7779 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 20949 777C AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 20950 777F 18 69 2C			add #$2C
 20951 7782 8D DF A8			sta Q
 20952 7785 A9 00			lda #$00
 20953 7787 69 01			adc #$01
 20954 7789 8D E0 A8			sta Q+1
 20955
 20956 				; optimize OK (store.pas), line = 236
 20957
 20958 778C A9 1B			lda #$1B
 20959 778E 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20960
 20961 				; optimize OK (store.pas), line = 237
 20962
 20963 7791 A9 1C			lda #$1C
 20964 7793 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 20965
 20966 				; optimize OK (store.pas), line = 238
 20967
 20968 7796 AD DF A8			lda Q
 20969 7799 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 20970 779C AD E0 A8			lda Q+1
 20971 779F 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 20972 77A2 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 20973
 20974 				; optimize FAIL ('CRT_WRITELN', store.pas), line = 239
 20975
 20976 77A5 E8				inx
 20977 77A6 A9 A0 95 94			mva #$A0 :STACKORIGIN,x
 20978 77AA A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 20979 77AE 20 A9 1E			jsr CRT_WRITELN
 20980
 20981 				; optimize OK (store.pas), line = 240
 20982
 20983 77B1 AD DD A8			lda P
 20984 77B4 8D CB A7			sta ADDMONEY.AMOUNT
 20985 77B7 AD DE A8			lda P+1
 20986 77BA 8D CC A7			sta ADDMONEY.AMOUNT+1
 20987 77BD 20 98 2F			jsr ADDMONEY
 20988
 20989 				; optimize OK (store.pas), line = 241
 20990
 20991 77C0 AD DF A8			lda Q
 20992 77C3 8D CB A7			sta ADDMONEY.AMOUNT
 20993 77C6 AD E0 A8			lda Q+1
 20994 77C9 8D CC A7			sta ADDMONEY.AMOUNT+1
 20995 77CC 20 98 2F			jsr ADDMONEY
 20996
 20997 				; optimize OK (store.pas), line = 242
 20998
 20999 77CF A9 01			lda #$01
 21000 77D1 20 EC 2F			jsr ADDPOINTS
 21001
 21002 				; optimize FAIL ('WAITFORKEY', store.pas), line = 243
 21003
 21004 77D4 20 4A 1E			jsr WAITFORKEY
 21005 77D7 4C C1 78			jmp @exit
 21006 77DA			l_517F
 21007 77DA			l_512D
 21008
 21009 				; optimize OK (store.pas), line = 248
 21010
 21011 77DA AD DB A8			lda R
 21012 77DD C9 03			cmp #$03
 21013 77DF F0 03 4C C1 78		jne l_51AE
 21014
 21015 				; optimize OK (store.pas), line = 249
 21016
 21017 77E4 AD 3D A7			lda CURRENTSUBLOCATION
 21018 77E7 C9 03			cmp #$03
 21019 77E9 F0 04			jeq l_51CDx
 21020 77EB C9 04			cmp #$04
 21021 77ED D0 71			jne l_51CD
 21022 77EF			l_51CDx
 21023
 21024 				; optimize OK (store.pas), line = 251
 21025
 21026 77EF A9 1D			lda #$1D
 21027 77F1 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 21028
 21029 				; optimize OK (store.pas), line = 252
 21030
 21031 77F4 A9 1E			lda #$1E
 21032 77F6 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 21033
 21034 				; -------------------  ASM Block 00000168  -------------------
 21035
 21036 				 
 21037 77F9 AD F9 9A		                lda loc_string_31
 21038 77FC 8D AC A3		                sta adr.FP_GANG+$02
 21039 77FF AD FA 9A		                lda loc_string_31+1
 21040 7802 8D AD A3		                sta adr.FP_GANG+1+$02
 21041 				            
 21042 				; optimize OK (store.pas), line = 260
 21043
 21044 7805 A9 01			lda #$01
 21045 7807 8D 02 E4			sta adr.FP_AI+$01
 21046
 21047 				; optimize OK (store.pas), line = 261
 21048
 21049 780A 8D 04 E4			sta adr.FP_N+$01
 21050
 21051 				; optimize OK (store.pas), line = 262
 21052
 21053 780D AD CE A3			lda adr.FP_NAME+$20
 21054 7810 85 8C			sta @move.dst
 21055 7812 AD CF A3			lda adr.FP_NAME+1+$20
 21056 7815 85 8D			sta @move.dst+1
 21057 7817 AD F9 9A			lda LOC_STRING_31
 21058 781A 85 88			sta @move.src
 21059 781C AD FA 9A			lda LOC_STRING_31+1
 21060 781F 85 89			sta @move.src+1
 21061 7821 A0 00			ldy #$00
 21062 7823 B1 88			lda (@move.src),y
 21063 7825 18 69 01			add #1
 21064 7828 85 84			sta @move.cnt
 21065 782A 90 01			scc
 21066 782C C8				iny
 21067 782D 84 85			sty @move.cnt+1
 21068 782F 20 D7 0E			jsr @move
 21069
 21070 				; optimize OK (store.pas), line = 263
 21071
 21072 7832 A9 06			lda #$06
 21073 7834 8D 55 E4			sta adr.FP_WEAPON+$10
 21074
 21075 				; optimize OK (store.pas), line = 264
 21076
 21077 7837 A9 1E			lda #$1E
 21078 7839 8D 95 E4			sta adr.FP_ENERGY+$10
 21079
 21080 				; optimize FAIL ('DOFIGHT', store.pas), line = 266
 21081
 21082 783C 20 9F 4D			jsr DOFIGHT
 21083 783F AD 4E A8			lda DOFIGHT.RESULT
 21084 7842 C9 01			cmp #$01
 21085 7844 D0 08			jne l_51FC
 21086
 21087 				; optimize OK (store.pas), line = 268
 21088
 21089 7846 A9 11			lda #$11
 21090 7848 8D DA A8			sta RESULT
 21091 784B 4C C1 78			jmp @exit
 21092 784E			l_51FC
 21093
 21094 				; optimize OK (store.pas), line = 271
 21095
 21096 784E AD DD A8			lda P
 21097 7851 8D CB A7			sta ADDMONEY.AMOUNT
 21098 7854 AD DE A8			lda P+1
 21099 7857 8D CC A7			sta ADDMONEY.AMOUNT+1
 21100 785A 20 98 2F			jsr ADDMONEY
 21101 785D 4C C1 78			jmp l_520F
 21102 7860			l_51CD
 21103
 21104 				; optimize OK (store.pas), line = 275
 21105
 21106 7860 A9 64			lda #$64
 21107 7862 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 21108 7865 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 21109 7868 8D DF A8			sta Q
 21110 786B A9 00			lda #$00
 21111 786D 8D E0 A8			sta Q+1
 21112
 21113 				; optimize OK (store.pas), line = 276
 21114
 21115 7870 AD DF A8			lda Q
 21116 7873 0A				asl @
 21117 7874 2E E0 A8			rol Q+1
 21118 7877 18 69 96			add #$96
 21119 787A 8D DF A8			sta Q
 21120 787D 90 03			scc
 21121 787F EE E0 A8			inc Q+1
 21122
 21123 				; optimize OK (store.pas), line = 277
 21124
 21125 7882 A9 20			lda #$20
 21126 7884 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 21127
 21128 				; optimize OK (store.pas), line = 278
 21129
 21130 7887 A9 21			lda #$21
 21131 7889 20 C6 1C			jsr CRT_WRITE_LOCSTR
 21132
 21133 				; optimize OK (store.pas), line = 279
 21134
 21135 788C AD DF A8			lda Q
 21136 788F 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 21137 7892 AD E0 A8			lda Q+1
 21138 7895 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 21139 7898 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 21140
 21141 				; optimize OK (store.pas), line = 280
 21142
 21143 789B A9 22			lda #$22
 21144 789D 20 C6 1C			jsr CRT_WRITE_LOCSTR
 21145
 21146 				; optimize OK (store.pas), line = 281
 21147
 21148 78A0 AD DD A8			lda P
 21149 78A3 8D CB A7			sta ADDMONEY.AMOUNT
 21150 78A6 AD DE A8			lda P+1
 21151 78A9 8D CC A7			sta ADDMONEY.AMOUNT+1
 21152 78AC 20 98 2F			jsr ADDMONEY
 21153
 21154 				; optimize OK (store.pas), line = 282
 21155
 21156 78AF AD DF A8			lda Q
 21157 78B2 8D CB A7			sta ADDMONEY.AMOUNT
 21158 78B5 AD E0 A8			lda Q+1
 21159 78B8 8D CC A7			sta ADDMONEY.AMOUNT+1
 21160 78BB 20 98 2F			jsr ADDMONEY
 21161
 21162 				; optimize FAIL ('WAITFORKEY', store.pas), line = 283
 21163
 21164 78BE 20 4A 1E			jsr WAITFORKEY
 21165 78C1			l_520F
 21166 78C1			l_51AE
 21167 78C1			@exit
 21168
 21169 				; ------------------------------------------------------------
 21170
 21171 = A8DA			RESULT	= DATAORIGIN+$0C84
 21172 = A8DB			R	= DATAORIGIN+$0C85
 21173 = A8DC			K	= DATAORIGIN+$0C86
 21174 = A8DD			P	= DATAORIGIN+$0C87
 21175 = A8DF			Q	= DATAORIGIN+$0C89
 21176
 21177 = A8DB			@VarData	= R
 21178 = 0006			@VarDataSize	= 6
 21179
 21180 78C1 60				rts						; ret
 21181 				.endl
 21182
 21183 78C2			.local	SUBWAYCHOICES					; FUNCTION
 21184
 21185 				; optimize OK (subway.pas), line = 9
 21186
 21187 78C2 A9 0C			lda #$0C
 21188 78C4 8D E2 A8			sta RESULT
 21189
 21190 				; optimize FAIL ('SHOWLOCATIONHEADER', subway.pas), line = 10
 21191
 21192 78C7 20 7A 28			jsr SHOWLOCATIONHEADER
 21193
 21194 				; optimize OK (subway.pas), line = 12
 21195
 21196 78CA AD 22 C9			lda CURRENTCHOICE
 21197 78CD C9 02			cmp #$02
 21198 78CF F0 03 4C 8D 79		jne l_524E
 21199
 21200 				; optimize OK (subway.pas), line = 14
 21201
 21202 78D4 A9 01			lda #$01
 21203 78D6 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 21204
 21205 				; optimize OK (subway.pas), line = 15
 21206
 21207 78D9 A9 02			lda #$02
 21208 78DB 20 C6 1C			jsr CRT_WRITE_LOCSTR
 21209
 21210 				; optimize FAIL ('GETYESNO', subway.pas), line = 16
 21211
 21212 78DE 20 08 20			jsr GETYESNO
 21213 78E1 AD 1B A7			lda GETYESNO.RESULT
 21214 78E4 D0 03 4C F1 7A		jeq @exit
 21215 78E9			l_5263
 21216
 21217 				; optimize OK (subway.pas), line = 17
 21218
 21219 78E9 A9 32			lda #$32
 21220 78EB 8D D8 A7			sta PAYMONEY.PRICE
 21221 78EE A9 00			lda #$00
 21222 78F0 8D D9 A7			sta PAYMONEY.PRICE+1
 21223 78F3 20 3B 32			jsr PAYMONEY
 21224 78F6 AD DA A7			lda PAYMONEY.RESULT
 21225 78F9 D0 03 4C F1 7A		jeq @exit
 21226 78FE			l_5277
 21227
 21228 				; optimize OK (subway.pas), line = 18
 21229
 21230 78FE A9 04			lda #$04
 21231 7900 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 21232 7903 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 21233 7906 8D E3 A8			sta LOOT
 21234
 21235 				; optimize OK (subway.pas), line = 19
 21236
 21237 7909 8D EA A8			sta @CASETMP_0014
 21238 790C C9 00			cmp #$00
 21239 790E D0 10			jne l_528A
 21240 				@
 21241
 21242 				; optimize OK (subway.pas), line = 21
 21243
 21244 7910 A9 08			lda #$08
 21245 7912 8D E7 A8			sta I
 21246 7915 A9 02			lda #$02
 21247 7917 8D E8 A8			sta J
 21248 791A 8D E9 A8			sta K
 21249 791D 4C 5D 79			jmp a_0014
 21250 7920			l_528A
 21251 7920 C9 01			cmp #$01
 21252 7922 D0 12			jne l_529D
 21253
 21254 				; optimize OK (subway.pas), line = 24
 21255
 21256 7924 A9 04			lda #$04
 21257 7926 8D E7 A8			sta I
 21258 7929 A9 01			lda #$01
 21259 792B 8D E8 A8			sta J
 21260 792E A9 05			lda #$05
 21261 7930 8D E9 A8			sta K
 21262 7933 4C 5D 79			jmp a_0014
 21263 7936			l_529D
 21264 7936 C9 02			cmp #$02
 21265 7938 D0 12			jne l_52B0
 21266
 21267 				; optimize OK (subway.pas), line = 27
 21268
 21269 793A A9 08			lda #$08
 21270 793C 8D E7 A8			sta I
 21271 793F A9 03			lda #$03
 21272 7941 8D E8 A8			sta J
 21273 7944 A9 09			lda #$09
 21274 7946 8D E9 A8			sta K
 21275 7949 4C 5D 79			jmp a_0014
 21276 794C			l_52B0
 21277 794C C9 03			cmp #$03
 21278 794E D0 0D			jne l_52C3
 21279
 21280 				; optimize OK (subway.pas), line = 30
 21281
 21282 7950 A9 04			lda #$04
 21283 7952 8D E7 A8			sta I
 21284 7955 A9 07			lda #$07
 21285 7957 8D E8 A8			sta J
 21286 795A 8D E9 A8			sta K
 21287 795D			l_52C3
 21288 795D			a_0014
 21289
 21290 				; optimize OK (subway.pas), line = 34
 21291
 21292 795D AC 8A CD			ldy CURRENTPLAYER
 21293 7960 AD E7 A8			lda I
 21294 7963 99 54 C9			sta adr.PLMAPPOSX,y
 21295
 21296 				; optimize OK (subway.pas), line = 35
 21297
 21298 7966 AD E8 A8			lda J
 21299 7969 99 58 C9			sta adr.PLMAPPOSY,y
 21300
 21301 				; optimize OK (subway.pas), line = 36
 21302
 21303 796C AD E9 A8			lda K
 21304 796F 99 5C C9			sta adr.PLCURRENTMAP,y
 21305
 21306 				; optimize FAIL ('PLACECURRENTPLAYER', subway.pas), line = 37
 21307
 21308 7972 20 59 2F			jsr PLACECURRENTPLAYER
 21309
 21310 				; optimize OK (subway.pas), line = 38
 21311
 21312 7975 AD B0 EA			lda MAPPOS_X
 21313 7978 8D B2 EA			sta OLDMAPPOS_X
 21314
 21315 				; optimize OK (subway.pas), line = 39
 21316
 21317 797B AD B1 EA			lda MAPPOS_Y
 21318 797E 8D B3 EA			sta OLDMAPPOS_Y
 21319
 21320 				; optimize OK (subway.pas), line = 40
 21321
 21322 7981 AD AE EA			lda PLAYERPOS_X
 21323 7984 8D B4 EA			sta OLDPLAYERPOS_X
 21324
 21325 				; optimize OK (subway.pas), line = 41
 21326
 21327 7987 AD AF EA			lda PLAYERPOS_Y
 21328 798A 8D B5 EA			sta OLDPLAYERPOS_Y
 21329 798D			l_524E
 21330
 21331 				; optimize FAIL ('SHOWLOCATIONHEADER', subway.pas), line = 44
 21332
 21333 798D 20 7A 28			jsr SHOWLOCATIONHEADER
 21334
 21335 				; optimize OK (subway.pas), line = 45
 21336
 21337 7990 AC 8A CD			ldy CURRENTPLAYER
 21338 7993 B9 B1 CD			lda adr.PLNGANGSTERS,y
 21339 7996 C9 02			cmp #$02
 21340 7998 90 05			jcc l_5321
 21341
 21342 				; optimize OK (subway.pas), line = 46
 21343
 21344 799A A9 03			lda #$03
 21345 799C 20 C6 1C			jsr CRT_WRITE_LOCSTR
 21346 799F			l_5321
 21347
 21348 				; optimize OK (subway.pas), line = 47
 21349
 21350 799F A9 00			lda #$00
 21351 79A1 8D 23 C9			sta SHOWWEAPONS
 21352
 21353 				; optimize FAIL ('SELECTGANGSTER', subway.pas), line = 48
 21354
 21355 79A4 20 11 34			jsr SELECTGANGSTER
 21356
 21357 				; optimize OK (subway.pas), line = 49
 21358
 21359 79A7 AD 88 CD			lda CURRENTGANGSTER
 21360 79AA C9 63			cmp #$63
 21361 79AC D0 03 4C F1 7A		jeq @exit
 21362 79B1			l_533D
 21363
 21364 				; optimize OK (subway.pas), line = 51
 21365
 21366 79B1 AC 8A CD			ldy CURRENTPLAYER
 21367 79B4 B9 B1 CD			lda adr.PLNGANGSTERS,y
 21368 79B7 C9 02			cmp #$02
 21369 79B9 90 03			jcc l_5355
 21370
 21371 				; optimize FAIL ('SHOWLOCATIONHEADER', subway.pas), line = 52
 21372
 21373 79BB 20 7A 28			jsr SHOWLOCATIONHEADER
 21374 79BE			l_5355
 21375
 21376 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', subway.pas), line = 53
 21377
 21378 79BE 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 21379
 21380 				; optimize OK (subway.pas), line = 54
 21381
 21382 79C1 A9 04			lda #$04
 21383 79C3 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 21384
 21385 				; optimize OK (subway.pas), line = 55
 21386
 21387 79C6 A9 5A			lda #$5A
 21388 79C8 20 7C 27			jsr WAITFRAMES
 21389
 21390 				; optimize OK (subway.pas), line = 59
 21391
 21392 79CB AC 88 CD			ldy CURRENTGANGSTER
 21393 79CE B9 E8 CC			lda adr.GANGSTERINT,y
 21394 79D1 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 21395 79D4 A0 01			ldy #1
 21396 79D6 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 21397 79D9 C9 0A			cmp #$0A
 21398 79DB 90 01			bcc @+
 21399 79DD 88				dey
 21400 				@
 21401 79DE 98				tya
 21402 79DF 8D E6 A8			sta HOPS
 21403
 21404 				; optimize OK (subway.pas), line = 61
 21405
 21406 79E2 A9 11			lda #$11
 21407 79E4 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 21408 79E7 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 21409 79EA 8D F0 A3			sta TMP
 21410
 21411 				; optimize OK (subway.pas), line = 62
 21412
 21413 79ED 4A				lsr @
 21414 79EE 8D E3 A8			sta LOOT
 21415
 21416 				; optimize OK (subway.pas), line = 63
 21417
 21418 79F1 AC 3D A7			ldy CURRENTSUBLOCATION
 21419 79F4 C8				iny
 21420 79F5 8C F0 A3			sty TMP
 21421
 21422 				; optimize OK (subway.pas), line = 64
 21423
 21424 79F8 AD F0 A3			lda TMP
 21425 79FB 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 21426 79FE AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 21427 7A01 8D F0 A3			sta TMP
 21428
 21429 				; optimize OK (subway.pas), line = 65
 21430
 21431 7A04 AD E3 A8			lda LOOT
 21432 7A07 38 ED F0 A3			sub TMP
 21433 7A0B 8D E3 A8			sta LOOT
 21434
 21435 				; optimize OK (subway.pas), line = 67
 21436
 21437 7A0E 10 05			jpl l_53AC
 21438 7A10 A9 00			lda #$00
 21439 7A12 8D E3 A8			sta LOOT
 21440 7A15			l_53AC
 21441
 21442 				; optimize OK (subway.pas), line = 68
 21443
 21444 7A15 AD E6 A8			lda HOPS
 21445 7A18 C9 01			cmp #$01
 21446 7A1A D0 05			jne l_53C5
 21447 7A1C A9 00			lda #$00
 21448 7A1E 8D E3 A8			sta LOOT
 21449 7A21			l_53C5
 21450
 21451 				; optimize OK (subway.pas), line = 69
 21452
 21453 7A21 A9 00			lda #$00
 21454 7A23 8D E4 A8			sta VALUE
 21455 7A26 8D E5 A8			sta VALUE+1
 21456
 21457 				; optimize OK (subway.pas), line = 70
 21458
 21459 7A29 AD E3 A8			lda LOOT
 21460 7A2C 8D EB A8			sta @CASETMP_0015
 21461 7A2F D0 05			jne l_53DB
 21462 				@
 21463
 21464 				; optimize OK (subway.pas), line = 71
 21465
 21466 7A31 A9 05			lda #$05
 21467 7A33 4C 40 7A			jmp s_53E8
 21468 7A36			l_53DB
 21469 7A36 C9 01			cmp #$01
 21470 7A38 F0 04			beq @+
 21471 7A3A C9 02			cmp #$02
 21472 7A3C D0 05			jne l_53E6
 21473 				@
 21474
 21475 				; optimize OK (subway.pas), line = 72
 21476
 21477 7A3E A9 06			lda #$06
 21478 7A40			s_53E8
 21479 7A40 4C 49 7A			jmp s_53F1
 21480 7A43			l_53E6
 21481 7A43 C9 03			cmp #$03
 21482 7A45 D0 08			jne l_53EF
 21483
 21484 				; optimize OK (subway.pas), line = 73
 21485
 21486 7A47 A9 07			lda #$07
 21487 7A49			s_53F1
 21488 7A49 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 21489 7A4C 4C B9 7A			jmp a_0015
 21490 7A4F			l_53EF
 21491 7A4F C9 04			cmp #$04
 21492 7A51 D0 0A			jne l_53F8
 21493
 21494 				; optimize OK (subway.pas), line = 75
 21495
 21496 7A53 A9 08			lda #$08
 21497 7A55 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 21498
 21499 				; optimize OK (subway.pas), line = 76
 21500
 21501 7A58 A9 32			lda #$32
 21502 7A5A 4C 68 7A			jmp s_540B
 21503 7A5D			l_53F8
 21504 7A5D C9 05			cmp #$05
 21505 7A5F D0 12			jne l_5405
 21506
 21507 				; optimize OK (subway.pas), line = 79
 21508
 21509 7A61 A9 09			lda #$09
 21510 7A63 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 21511
 21512 				; optimize OK (subway.pas), line = 80
 21513
 21514 7A66 A9 FA			lda #$FA
 21515 7A68			s_540B
 21516 7A68 8D E4 A8			sta VALUE
 21517 7A6B A9 00			lda #$00
 21518 7A6D 8D E5 A8			sta VALUE+1
 21519 7A70 4C B9 7A			jmp a_0015
 21520 7A73			l_5405
 21521 7A73 C9 06			cmp #$06
 21522 7A75 D0 12			jne l_5412
 21523
 21524 				; optimize OK (subway.pas), line = 83
 21525
 21526 7A77 A9 0A			lda #$0A
 21527 7A79 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 21528
 21529 				; optimize OK (subway.pas), line = 84
 21530
 21531 7A7C A9 F4			lda #$F4
 21532 7A7E 8D E4 A8			sta VALUE
 21533 7A81 A9 01			lda #$01
 21534 7A83 8D E5 A8			sta VALUE+1
 21535 7A86 4C B9 7A			jmp a_0015
 21536 7A89			l_5412
 21537 7A89 C9 07			cmp #$07
 21538 7A8B D0 12			jne l_541F
 21539
 21540 				; optimize OK (subway.pas), line = 87
 21541
 21542 7A8D A9 0B			lda #$0B
 21543 7A8F 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 21544
 21545 				; optimize OK (subway.pas), line = 88
 21546
 21547 7A92 A9 20			lda #$20
 21548 7A94 8D E4 A8			sta VALUE
 21549 7A97 A9 03			lda #$03
 21550 7A99 8D E5 A8			sta VALUE+1
 21551 7A9C 4C B9 7A			jmp a_0015
 21552 7A9F			l_541F
 21553 7A9F C9 08			cmp #$08
 21554 7AA1 D0 16			jne l_542C
 21555
 21556 				; optimize OK (subway.pas), line = 91
 21557
 21558 7AA3 A9 0C			lda #$0C
 21559 7AA5 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 21560
 21561 				; optimize OK (subway.pas), line = 92
 21562
 21563 7AA8 AC 8A CD			ldy CURRENTPLAYER
 21564 7AAB B9 24 C9			lda adr.PLSTUFF,y
 21565 7AAE 09 20			ora #$20
 21566 7AB0 99 24 C9			sta adr.PLSTUFF,y
 21567
 21568 				; optimize FAIL ('WAITFORKEY', subway.pas), line = 93
 21569
 21570 7AB3 20 4A 1E			jsr WAITFORKEY
 21571 7AB6 4C F1 7A			jmp @exit
 21572 7AB9			l_542C
 21573 7AB9			a_0015
 21574
 21575 				; optimize FAIL ('WAITFORKEY', subway.pas), line = 97
 21576
 21577 7AB9 20 4A 1E			jsr WAITFORKEY
 21578
 21579 				; optimize OK (subway.pas), line = 98
 21580
 21581 7ABC AD E3 A8			lda LOOT
 21582 7ABF 38 E9 01			sub #$01
 21583 7AC2 50 02			svc
 21584 7AC4 49 80			eor #$80
 21585 7AC6 10 0B			jpl l_545C
 21586
 21587 				; optimize FAIL ('GOTCAUGHT', subway.pas), line = 99
 21588
 21589 7AC8 20 32 36			jsr GOTCAUGHT
 21590
 21591 				; optimize OK (subway.pas), line = 100
 21592
 21593 7ACB A9 11			lda #$11
 21594 7ACD 8D E2 A8			sta RESULT
 21595 7AD0 4C F1 7A			jmp @exit
 21596 7AD3			l_545C
 21597
 21598 				; optimize OK (subway.pas), line = 103
 21599
 21600 7AD3 AD 22 C9			lda CURRENTCHOICE
 21601 7AD6 C9 02			cmp #$02
 21602 7AD8 D0 03			jne l_5476
 21603 7ADA 20 5D 82			jsr LOADMAP
 21604 7ADD			l_5476
 21605
 21606 				; optimize OK (subway.pas), line = 104
 21607
 21608 7ADD AD E4 A8			lda VALUE
 21609 7AE0 8D CB A7			sta ADDMONEY.AMOUNT
 21610 7AE3 AD E5 A8			lda VALUE+1
 21611 7AE6 8D CC A7			sta ADDMONEY.AMOUNT+1
 21612 7AE9 20 98 2F			jsr ADDMONEY
 21613
 21614 				; optimize OK (subway.pas), line = 105
 21615
 21616 7AEC A9 01			lda #$01
 21617 7AEE 20 EC 2F			jsr ADDPOINTS
 21618 7AF1			@exit
 21619
 21620 				; ------------------------------------------------------------
 21621
 21622 = A8E2			RESULT	= DATAORIGIN+$0C8C
 21623 = A8E3			LOOT	= DATAORIGIN+$0C8D
 21624 = A8E4			VALUE	= DATAORIGIN+$0C8E
 21625 = A8E6			HOPS	= DATAORIGIN+$0C90
 21626 = A8E7			I	= DATAORIGIN+$0C91
 21627 = A8E8			J	= DATAORIGIN+$0C92
 21628 = A8E9			K	= DATAORIGIN+$0C93
 21629 = A8EA			@CASETMP_0014	= DATAORIGIN+$0C94
 21630 = A8EB			@CASETMP_0015	= DATAORIGIN+$0C95
 21631
 21632 = A8E3			@VarData	= LOOT
 21633 = 0009			@VarDataSize	= 9
 21634
 21635 7AF1 60				rts						; ret
 21636 				.endl
 21637
 21638 7AF2			.local	CENTRALSTATIONCHOICES				; FUNCTION
 21639
 21640 				; optimize OK (centralstation.pas), line = 6
 21641
 21642 7AF2 A9 17			lda #$17
 21643 7AF4 8D EC A8			sta RESULT
 21644
 21645 				; optimize OK (centralstation.pas), line = 7
 21646
 21647 7AF7 AD 22 C9			lda CURRENTCHOICE
 21648 7AFA C9 01			cmp #$01
 21649 7AFC D0 29			jne l_5499
 21650
 21651 				; optimize OK (centralstation.pas), line = 9
 21652
 21653 7AFE A9 07			lda #$07
 21654 7B00 20 1F 29			jsr LOADLOCATION
 21655
 21656 				; optimize OK (centralstation.pas), line = 10
 21657
 21658 7B03 A9 07			lda #$07
 21659 7B05 20 4E 2C			jsr SHOWLOCATION
 21660 7B08 AD 8F A7			lda SHOWLOCATION.RESULT
 21661 7B0B 8D 22 C9			sta CURRENTCHOICE
 21662
 21663 				; optimize OK (centralstation.pas), line = 11
 21664
 21665 7B0E CD A9 C2			cmp LOC_NOPTIONS
 21666 7B11 D0 08			jne l_54B5
 21667
 21668 				; optimize OK (centralstation.pas), line = 13
 21669
 21670 7B13 A9 0F			lda #$0F
 21671 7B15 8D 12 CA			sta CURRENTLOCATION
 21672 7B18 4C F1 7B			jmp @exit
 21673 7B1B			l_54B5
 21674
 21675 				; optimize FAIL ('PUBCHOICES', centralstation.pas), line = 16
 21676
 21677 7B1B 20 E7 6C			jsr PUBCHOICES
 21678 7B1E AD C7 A8			lda PUBCHOICES.RESULT
 21679 7B21 8D EC A8			sta RESULT
 21680 7B24 4C F1 7B			jmp @exit
 21681 7B27			l_5499
 21682
 21683 				; optimize OK (centralstation.pas), line = 20
 21684
 21685 7B27 AD 22 C9			lda CURRENTCHOICE
 21686 7B2A C9 02			cmp #$02
 21687 7B2C D0 16			jne l_54D4
 21688
 21689 				; optimize OK (centralstation.pas), line = 22
 21690
 21691 7B2E A9 0C			lda #$0C
 21692 7B30 20 1F 29			jsr LOADLOCATION
 21693
 21694 				; optimize OK (centralstation.pas), line = 23
 21695
 21696 7B33 A9 01			lda #$01
 21697 7B35 8D 22 C9			sta CURRENTCHOICE
 21698
 21699 				; optimize FAIL ('SUBWAYCHOICES', centralstation.pas), line = 24
 21700
 21701 7B38 20 C2 78			jsr SUBWAYCHOICES
 21702 7B3B AD E2 A8			lda SUBWAYCHOICES.RESULT
 21703 7B3E 8D EC A8			sta RESULT
 21704 7B41 4C F1 7B			jmp @exit
 21705 7B44			l_54D4
 21706
 21707 				; optimize OK (centralstation.pas), line = 28
 21708
 21709 7B44 AD 22 C9			lda CURRENTCHOICE
 21710 7B47 C9 03			cmp #$03
 21711 7B49 F0 03 4C F1 7B		jne l_54F3
 21712
 21713 				; optimize FAIL ('SHOWLOCATIONHEADER', centralstation.pas), line = 30
 21714
 21715 7B4E 20 7A 28			jsr SHOWLOCATIONHEADER
 21716
 21717 				; optimize OK (centralstation.pas), line = 31
 21718
 21719 7B51 AC 8A CD			ldy CURRENTPLAYER
 21720 7B54 B9 60 C9			lda adr.PLOPPORTUNITY,y
 21721 7B57 29 01			and #$01
 21722 7B59 D0 0B			jne l_550E
 21723
 21724 				; optimize OK (centralstation.pas), line = 33
 21725
 21726 7B5B A9 01			lda #$01
 21727 7B5D 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 21728
 21729 				; optimize FAIL ('WAITFORKEY', centralstation.pas), line = 34
 21730
 21731 7B60 20 4A 1E			jsr WAITFORKEY
 21732 7B63 4C F1 7B			jmp @exit
 21733 7B66			l_550E
 21734
 21735 				; optimize OK (centralstation.pas), line = 38
 21736
 21737 7B66 AC 8A CD			ldy CURRENTPLAYER
 21738 7B69 B9 60 C9			lda adr.PLOPPORTUNITY,y
 21739 7B6C 29 FE			and #$FE
 21740 7B6E 99 60 C9			sta adr.PLOPPORTUNITY,y
 21741
 21742 				; optimize OK (centralstation.pas), line = 40
 21743
 21744 7B71 B9 B1 CD			lda adr.PLNGANGSTERS,y
 21745 7B74 C9 03			cmp #$03
 21746 7B76 B0 0B			jcs l_5539
 21747
 21748 				; optimize OK (centralstation.pas), line = 41
 21749
 21750 7B78 A9 02			lda #$02
 21751 7B7A 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 21752
 21753 				; optimize FAIL ('WAITFORKEY', centralstation.pas), line = 42
 21754
 21755 7B7D 20 4A 1E			jsr WAITFORKEY
 21756 7B80 4C F1 7B			jmp @exit
 21757 7B83			l_5539
 21758
 21759 				; optimize OK (centralstation.pas), line = 46
 21760
 21761 7B83 A9 03			lda #$03
 21762 7B85 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 21763
 21764 				; optimize OK (centralstation.pas), line = 47
 21765
 21766 7B88 A9 04			lda #$04
 21767 7B8A 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 21768
 21769 				; optimize OK (centralstation.pas), line = 48
 21770
 21771 7B8D A9 05			lda #$05
 21772 7B8F 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 21773
 21774 				; optimize FAIL ('WAITFORKEY', centralstation.pas), line = 49
 21775
 21776 7B92 20 4A 1E			jsr WAITFORKEY
 21777
 21778 				; -------------------  ASM Block 00000169  -------------------
 21779
 21780 				 
 21781 7B95 AD C9 9A		            lda loc_string_7
 21782 7B98 8D AC A3		            sta adr.FP_GANG+$02
 21783 7B9B AD CA 9A		            lda loc_string_7+1
 21784 7B9E 8D AD A3		            sta adr.FP_GANG+1+$02
 21785 				        
 21786 				; optimize OK (centralstation.pas), line = 59
 21787
 21788 7BA1 A9 01			lda #$01
 21789 7BA3 8D 02 E4			sta adr.FP_AI+$01
 21790
 21791 				; optimize OK (centralstation.pas), line = 60
 21792
 21793 7BA6 A9 03			lda #$03
 21794 7BA8 8D 04 E4			sta adr.FP_N+$01
 21795
 21796 				; -------------------  ASM Block 00000170  -------------------
 21797
 21798 7BAB A0 00		            ldy #$00
 21799 				        @:
 21800 7BAD 98			            tya 
 21801 7BAE 0A			            asl 
 21802 7BAF A8			            tay
 21803
 21804 7BB0 AD CB 9A		            lda loc_string_8
 21805 7BB3 99 CE A3		            sta adr.FP_NAME+$20,y
 21806 7BB6 AD CC 9A		            lda loc_string_8+1
 21807 7BB9 99 CF A3		            sta adr.FP_NAME+1+$20,y
 21808
 21809 7BBC 98			            tya
 21810 7BBD 4A			            lsr 
 21811 7BBE A8			            tay
 21812
 21813 7BBF A9 1E		            lda #30
 21814 7BC1 99 95 E4		            sta adr.FP_ENERGY+$10,y
 21815 7BC4 A9 07		            lda #7
 21816 7BC6 99 55 E4		            sta adr.FP_WEAPON+$10,y
 21817 7BC9 C8			            iny
 21818 7BCA CC 04 E4		            cpy adr.FP_N+$01
 21819 7BCD D0 DE		            bne @- 
 21820 				        
 21821 				; optimize FAIL ('DOFIGHT', centralstation.pas), line = 93
 21822
 21823 7BCF 20 9F 4D			jsr DOFIGHT
 21824 7BD2 AD 4E A8			lda DOFIGHT.RESULT
 21825 7BD5 C9 01			cmp #$01
 21826 7BD7 D0 0B			jne l_5560
 21827
 21828 				; optimize FAIL ('GOTCAUGHT', centralstation.pas), line = 95
 21829
 21830 7BD9 20 32 36			jsr GOTCAUGHT
 21831
 21832 				; optimize OK (centralstation.pas), line = 96
 21833
 21834 7BDC A9 11			lda #$11
 21835 7BDE 8D EC A8			sta RESULT
 21836 7BE1 4C F1 7B			jmp @exit
 21837 7BE4			l_5560
 21838
 21839 				; optimize OK (centralstation.pas), line = 99
 21840
 21841 7BE4 A9 88			lda #$88
 21842 7BE6 8D D1 A7			sta CRACKEDBANK.P
 21843 7BE9 A9 13			lda #$13
 21844 7BEB 8D D2 A7			sta CRACKEDBANK.P+1
 21845 7BEE 20 37 30			jsr CRACKEDBANK
 21846 7BF1			l_54F3
 21847 7BF1			@exit
 21848
 21849 				; ------------------------------------------------------------
 21850
 21851 = A8EC			RESULT	= DATAORIGIN+$0C96
 21852 = A8ED			R	= DATAORIGIN+$0C97
 21853 = A8EE			K	= DATAORIGIN+$0C98
 21854 = A8EF			OUTCOME	= DATAORIGIN+$0C99
 21855
 21856 = A8ED			@VarData	= R
 21857 = 0003			@VarDataSize	= 3
 21858
 21859 7BF1 60				rts						; ret
 21860 				.endl
 21861
 21862 7BF2			.local	MAJORCHOICES					; FUNCTION
 21863
 21864 				; optimize OK (major.pas), line = 5
 21865
 21866 7BF2 A9 18			lda #$18
 21867 7BF4 20 1F 29			jsr LOADLOCATION
 21868
 21869 				; optimize FAIL ('SHOWLOCATIONHEADER', major.pas), line = 6
 21870
 21871 7BF7 20 7A 28			jsr SHOWLOCATIONHEADER
 21872
 21873 				; optimize OK (major.pas), line = 8
 21874
 21875 7BFA A9 06			lda #$06
 21876 7BFC 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 21877
 21878 				; optimize OK (major.pas), line = 9
 21879
 21880 7BFF A9 07			lda #$07
 21881 7C01 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 21882
 21883 				; optimize FAIL ('WAITFORKEY', major.pas), line = 10
 21884
 21885 7C04 20 4A 1E			jsr WAITFORKEY
 21886
 21887 				; optimize OK (major.pas), line = 12
 21888
 21889 7C07 AC 8A CD			ldy CURRENTPLAYER
 21890 7C0A B9 60 C9			lda adr.PLOPPORTUNITY,y
 21891 7C0D 29 EF			and #$EF
 21892 7C0F 99 60 C9			sta adr.PLOPPORTUNITY,y
 21893
 21894 				; -------------------  ASM Block 00000171  -------------------
 21895
 21896 				 
 21897 7C12 AD CB 9A		            lda loc_string_8
 21898 7C15 8D AC A3		            sta adr.FP_GANG+$02
 21899 7C18 AD CC 9A		            lda loc_string_8+1
 21900 7C1B 8D AD A3		            sta adr.FP_GANG+1+$02
 21901 				        
 21902 				; optimize OK (major.pas), line = 22
 21903
 21904 7C1E A9 01			lda #$01
 21905 7C20 8D 02 E4			sta adr.FP_AI+$01
 21906
 21907 				; optimize OK (major.pas), line = 23
 21908
 21909 7C23 A9 05			lda #$05
 21910 7C25 8D 04 E4			sta adr.FP_N+$01
 21911
 21912 				; -------------------  ASM Block 00000172  -------------------
 21913
 21914 7C28 A0 00		        ldy #$00
 21915 				    @:
 21916 7C2A 98			        tya 
 21917 7C2B 0A			        asl 
 21918 7C2C A8			        tay
 21919
 21920 7C2D AD D3 9A		        lda loc_string_12
 21921 7C30 99 CE A3		        sta adr.FP_NAME+$20,y
 21922 7C33 AD D4 9A		        lda loc_string_12+1
 21923 7C36 99 CF A3		        sta adr.FP_NAME+1+$20,y
 21924
 21925 7C39 98			        tya
 21926 7C3A 4A			        lsr 
 21927 7C3B A8			        tay
 21928
 21929 7C3C A9 14		        lda #20
 21930 7C3E 99 95 E4		        sta adr.FP_ENERGY+$10,y
 21931 7C41 A9 07		        lda #07
 21932 7C43 99 55 E4		        sta adr.FP_WEAPON+$10,y
 21933 7C46 C8			        iny
 21934 7C47 CC 04 E4		        cpy adr.FP_N+$01
 21935 7C4A D0 DE		        bne @- 
 21936 				    
 21937 				; optimize FAIL ('DOFIGHT', major.pas), line = 55
 21938
 21939 7C4C 20 9F 4D			jsr DOFIGHT
 21940 7C4F AD 4E A8			lda DOFIGHT.RESULT
 21941 7C52 C9 01			cmp #$01
 21942 7C54 D0 0B			jne l_55A2
 21943
 21944 				; optimize FAIL ('GOTCAUGHT', major.pas), line = 57
 21945
 21946 7C56 20 32 36			jsr GOTCAUGHT
 21947
 21948 				; optimize OK (major.pas), line = 58
 21949
 21950 7C59 A9 11			lda #$11
 21951 7C5B 8D F0 A8			sta RESULT
 21952 7C5E 4C F4 7C			jmp @exit
 21953 7C61			l_55A2
 21954
 21955 				; -------------------  ASM Block 00000173  -------------------
 21956
 21957 				 
 21958 7C61 AD CD 9A		        lda loc_string_9
 21959 7C64 8D AC A3		        sta adr.FP_GANG+$02
 21960 7C67 AD CE 9A		        lda loc_string_9+1
 21961 7C6A 8D AD A3		        sta adr.FP_GANG+1+$02
 21962 				    
 21963 				; optimize OK (major.pas), line = 70
 21964
 21965 7C6D A9 01			lda #$01
 21966 7C6F 8D 02 E4			sta adr.FP_AI+$01
 21967
 21968 				; optimize OK (major.pas), line = 71
 21969
 21970 7C72 8D 04 E4			sta adr.FP_N+$01
 21971
 21972 				; optimize OK (major.pas), line = 72
 21973
 21974 7C75 AD CE A3			lda adr.FP_NAME+$20
 21975 7C78 85 8C			sta @move.dst
 21976 7C7A AD CF A3			lda adr.FP_NAME+1+$20
 21977 7C7D 85 8D			sta @move.dst+1
 21978 7C7F AD CD 9A			lda LOC_STRING_9
 21979 7C82 85 88			sta @move.src
 21980 7C84 AD CE 9A			lda LOC_STRING_9+1
 21981 7C87 85 89			sta @move.src+1
 21982 7C89 A0 00			ldy #$00
 21983 7C8B B1 88			lda (@move.src),y
 21984 7C8D 18 69 01			add #1
 21985 7C90 85 84			sta @move.cnt
 21986 7C92 90 01			scc
 21987 7C94 C8				iny
 21988 7C95 84 85			sty @move.cnt+1
 21989 7C97 20 D7 0E			jsr @move
 21990
 21991 				; optimize OK (major.pas), line = 73
 21992
 21993 7C9A A9 1E			lda #$1E
 21994 7C9C 8D 95 E4			sta adr.FP_ENERGY+$10
 21995
 21996 				; optimize OK (major.pas), line = 74
 21997
 21998 7C9F A9 01			lda #$01
 21999 7CA1 8D 55 E4			sta adr.FP_WEAPON+$10
 22000
 22001 				; optimize OK (major.pas), line = 75
 22002
 22003 7CA4 A9 02			lda #$02
 22004 7CA6 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 22005 7CA9 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 22006 7CAC 8D F0 A3			sta TMP
 22007
 22008 				; optimize OK (major.pas), line = 76
 22009
 22010 7CAF 8D 55 E5			sta adr.FP_SEX+$10
 22011
 22012 				; optimize FAIL ('DOFIGHT', major.pas), line = 79
 22013
 22014 7CB2 20 9F 4D			jsr DOFIGHT
 22015 7CB5 AD 4E A8			lda DOFIGHT.RESULT
 22016 7CB8 C9 01			cmp #$01
 22017 7CBA D0 0B			jne l_55E0
 22018
 22019 				; optimize FAIL ('GOTCAUGHT', major.pas), line = 81
 22020
 22021 7CBC 20 32 36			jsr GOTCAUGHT
 22022
 22023 				; optimize OK (major.pas), line = 82
 22024
 22025 7CBF A9 11			lda #$11
 22026 7CC1 8D F0 A8			sta RESULT
 22027 7CC4 4C F4 7C			jmp @exit
 22028 7CC7			l_55E0
 22029
 22030 				; optimize FAIL ('SHOWLOCATIONHEADER', major.pas), line = 86
 22031
 22032 7CC7 20 7A 28			jsr SHOWLOCATIONHEADER
 22033
 22034 				; optimize OK (major.pas), line = 87
 22035
 22036 7CCA A9 0A			lda #$0A
 22037 7CCC 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 22038
 22039 				; optimize OK (major.pas), line = 88
 22040
 22041 7CCF A9 0B			lda #$0B
 22042 7CD1 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 22043
 22044 				; optimize FAIL ('WAITFORKEY', major.pas), line = 89
 22045
 22046 7CD4 20 4A 1E			jsr WAITFORKEY
 22047
 22048 				; optimize OK (major.pas), line = 90
 22049
 22050 7CD7 A9 58			lda #$58
 22051 7CD9 8D CB A7			sta ADDMONEY.AMOUNT
 22052 7CDC A9 1B			lda #$1B
 22053 7CDE 8D CC A7			sta ADDMONEY.AMOUNT+1
 22054 7CE1 20 98 2F			jsr ADDMONEY
 22055
 22056 				; optimize OK (major.pas), line = 92
 22057
 22058 7CE4 A9 04			lda #$04
 22059 7CE6 20 EC 2F			jsr ADDPOINTS
 22060
 22061 				; optimize OK (major.pas), line = 93
 22062
 22063 7CE9 AC 8A CD			ldy CURRENTPLAYER
 22064 7CEC A9 01			lda #$01
 22065 7CEE 99 2C C9			sta adr.PLKILLEDMAJOR,y
 22066
 22067 				; optimize OK (major.pas), line = 94
 22068
 22069 7CF1 99 48 C9			sta adr.PLFORGEDID,y
 22070 7CF4			@exit
 22071
 22072 				; ------------------------------------------------------------
 22073
 22074 = A8F0			RESULT	= DATAORIGIN+$0C9A
 22075 = A8F1			K	= DATAORIGIN+$0C9B
 22076
 22077 = A8F1			@VarData	= K
 22078 = 0001			@VarDataSize	= 1
 22079
 22080 7CF4 60				rts						; ret
 22081 				.endl
 22082
 22083 7CF5			.local	MONEYTRANSPORTERCHOICES				; FUNCTION
 22084
 22085 				; optimize OK (moneytransporter.pas), line = 4
 22086
 22087 7CF5 A9 03			lda #$03
 22088 7CF7 20 1F 29			jsr LOADLOCATION
 22089
 22090 				; optimize FAIL ('SHOWLOCATIONHEADER', moneytransporter.pas), line = 5
 22091
 22092 7CFA 20 7A 28			jsr SHOWLOCATIONHEADER
 22093
 22094 				; optimize OK (moneytransporter.pas), line = 7
 22095
 22096 7CFD AC 8A CD			ldy CURRENTPLAYER
 22097 7D00 B9 B1 CD			lda adr.PLNGANGSTERS,y
 22098 7D03 C9 03			cmp #$03
 22099 7D05 B0 19			jcs l_561C
 22100
 22101 				; optimize OK (moneytransporter.pas), line = 9
 22102
 22103 7D07 A9 01			lda #$01
 22104 7D09 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 22105
 22106 				; optimize FAIL ('WAITFORKEY', moneytransporter.pas), line = 10
 22107
 22108 7D0C 20 4A 1E			jsr WAITFORKEY
 22109
 22110 				; optimize OK (moneytransporter.pas), line = 11
 22111
 22112 7D0F AC 8A CD			ldy CURRENTPLAYER
 22113 7D12 B9 60 C9			lda adr.PLOPPORTUNITY,y
 22114 7D15 29 FB			and #$FB
 22115 7D17 99 60 C9			sta adr.PLOPPORTUNITY,y
 22116
 22117 				; optimize FAIL ('LOADMAP', moneytransporter.pas), line = 12
 22118
 22119 7D1A 20 5D 82			jsr LOADMAP
 22120 7D1D 4C 9C 7D			jmp @exit
 22121 7D20			l_561C
 22122
 22123 				; optimize OK (moneytransporter.pas), line = 16
 22124
 22125 7D20 A9 02			lda #$02
 22126 7D22 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 22127
 22128 				; optimize OK (moneytransporter.pas), line = 17
 22129
 22130 7D25 A9 03			lda #$03
 22131 7D27 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 22132
 22133 				; optimize FAIL ('WAITFORKEY', moneytransporter.pas), line = 18
 22134
 22135 7D2A 20 4A 1E			jsr WAITFORKEY
 22136
 22137 				; -------------------  ASM Block 00000174  -------------------
 22138
 22139 				 
 22140 7D2D AD C3 9A		        lda loc_string_4
 22141 7D30 8D AC A3		        sta adr.FP_GANG+$02
 22142 7D33 AD C4 9A		        lda loc_string_4+1
 22143 7D36 8D AD A3		        sta adr.FP_GANG+1+$02
 22144 				    
 22145 				; optimize OK (moneytransporter.pas), line = 28
 22146
 22147 7D39 A9 01			lda #$01
 22148 7D3B 8D 02 E4			sta adr.FP_AI+$01
 22149
 22150 				; optimize OK (moneytransporter.pas), line = 29
 22151
 22152 7D3E A9 0A			lda #$0A
 22153 7D40 8D 04 E4			sta adr.FP_N+$01
 22154
 22155 				; -------------------  ASM Block 00000175  -------------------
 22156
 22157 7D43 A0 00		        ldy #$00
 22158 				    @:
 22159 7D45 98			        tya 
 22160 7D46 0A			        asl 
 22161 7D47 A8			        tay
 22162
 22163 7D48 AD C5 9A		        lda loc_string_5
 22164 7D4B 99 CE A3		        sta adr.FP_NAME+$20,y
 22165 7D4E AD C6 9A		        lda loc_string_5+1
 22166 7D51 99 CF A3		        sta adr.FP_NAME+1+$20,y
 22167
 22168 7D54 98			        tya
 22169 7D55 4A			        lsr 
 22170 7D56 A8			        tay
 22171
 22172 7D57 A9 32		        lda #50
 22173 7D59 99 95 E4		        sta adr.FP_ENERGY+$10,y
 22174 7D5C A9 07		        lda #07
 22175 7D5E 99 55 E4		        sta adr.FP_WEAPON+$10,y
 22176 7D61 C8			        iny
 22177 7D62 CC 04 E4		        cpy adr.FP_N+$01
 22178 7D65 D0 DE		        bne @- 
 22179 				    
 22180 				; optimize OK (moneytransporter.pas), line = 63
 22181
 22182 7D67 AC 8A CD			ldy CURRENTPLAYER
 22183 7D6A B9 60 C9			lda adr.PLOPPORTUNITY,y
 22184 7D6D 29 FB			and #$FB
 22185 7D6F 99 60 C9			sta adr.PLOPPORTUNITY,y
 22186
 22187 				; optimize FAIL ('DOFIGHT', moneytransporter.pas), line = 64
 22188
 22189 7D72 20 9F 4D			jsr DOFIGHT
 22190 7D75 AD 4E A8			lda DOFIGHT.RESULT
 22191 7D78 C9 01			cmp #$01
 22192 7D7A D0 0B			jne l_5662
 22193
 22194 				; optimize FAIL ('GOTCAUGHT', moneytransporter.pas), line = 66
 22195
 22196 7D7C 20 32 36			jsr GOTCAUGHT
 22197
 22198 				; optimize OK (moneytransporter.pas), line = 67
 22199
 22200 7D7F A9 11			lda #$11
 22201 7D81 8D F2 A8			sta RESULT
 22202 7D84 4C 9C 7D			jmp @exit
 22203 7D87			l_5662
 22204
 22205 				; optimize OK (moneytransporter.pas), line = 70
 22206
 22207 7D87 AC 8A CD			ldy CURRENTPLAYER
 22208 7D8A A9 01			lda #$01
 22209 7D8C 99 28 C9			sta adr.PLMONEYTRANSPORTER,y
 22210
 22211 				; optimize OK (moneytransporter.pas), line = 71
 22212
 22213 7D8F A9 10			lda #$10
 22214 7D91 8D D1 A7			sta CRACKEDBANK.P
 22215 7D94 A9 27			lda #$27
 22216 7D96 8D D2 A7			sta CRACKEDBANK.P+1
 22217 7D99 20 37 30			jsr CRACKEDBANK
 22218 7D9C			@exit
 22219
 22220 				; ------------------------------------------------------------
 22221
 22222 = A8F2			RESULT	= DATAORIGIN+$0C9C
 22223
 22224 7D9C 60				rts						; ret
 22225 				.endl
 22226
 22227 7D9D			.local	PRINTMAPSTATUS					; PROCEDURE
 22228
 22229 				; optimize OK (map.pas), line = 9
 22230
 22231 7D9D AD EC A4			lda MAPRELOADED
 22232 7DA0 F0 03 4C 61 80		jne l_5689
 22233
 22234 				; optimize OK (map.pas), line = 11
 22235
 22236 7DA5 A9 00			lda #$00
 22237 7DA7 A0 10			ldy #256-240
 22238 7DA9 99 E8 DE C8 D0 FA		sta:rne $DEF8+240-256,y+
 22239
 22240 				; optimize OK (map.pas), line = 12
 22241
 22242 7DAF AC 8A CD			ldy CURRENTPLAYER
 22243 7DB2 B9 98 C9			lda adr.PLRANK,y
 22244 7DB5 8D F4 A8			sta Z
 22245
 22246 				; optimize OK (map.pas), line = 13
 22247
 22248 7DB8 0A				asl @
 22249 7DB9 A8				tay
 22250 7DBA B9 56 A4			lda adr.RANKNAMES+1,y
 22251 7DBD 85 81			sta :bp+1
 22252 7DBF B9 55 A4			lda adr.RANKNAMES,y
 22253 7DC2 A8				tay
 22254 7DC3 B1 80			lda (:bp),y
 22255 7DC5 18 69 03			add #$03
 22256 7DC8 8D F3 A8			sta L
 22257
 22258 				; optimize OK (map.pas), line = 14
 22259
 22260 7DCB AD 8A CD			lda CURRENTPLAYER
 22261 7DCE 0A				asl @
 22262 7DCF 0A				asl @
 22263 7DD0 0A				asl @
 22264 7DD1 8D F5 A8			sta I
 22265
 22266 				; optimize OK (map.pas), line = 15
 22267
 22268 7DD4 0A				asl @
 22269 7DD5 A8				tay
 22270 7DD6 B9 16 A4			lda adr.GANGSTERNAMES+1,y
 22271 7DD9 85 81			sta :bp+1
 22272 7DDB B9 15 A4			lda adr.GANGSTERNAMES,y
 22273 7DDE A8				tay
 22274 7DDF AD F3 A8			lda L
 22275 7DE2 18 71 80			add (:bp),y
 22276 7DE5 8D F6 A8			sta P
 22277
 22278 				; optimize OK (map.pas), line = 16
 22279
 22280 7DE8 A9 28			lda #$28
 22281 7DEA 38 ED F6 A8			sub P
 22282 7DEE 8D F0 A3			sta TMP
 22283
 22284 				; optimize OK (map.pas), line = 17
 22285
 22286 7DF1 4E F0 A3			lsr TMP
 22287
 22288 				; optimize OK (map.pas), line = 18
 22289
 22290 7DF4 AD F0 A3			lda TMP
 22291 7DF7 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
 22292 7DFA A9 13			lda #$13
 22293 7DFC 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
 22294 7DFF 20 AC 17			jsr B_CRT.CRT_GOTOXY
 22295
 22296 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', map.pas), line = 19
 22297
 22298 7E02 E8				inx
 22299 7E03 AD F5 A8			lda I
 22300 7E06 0A				asl @
 22301 7E07 A8				tay
 22302 7E08 B9 15 A4			lda adr.GANGSTERNAMES,y
 22303 7E0B 95 94			sta :STACKORIGIN,x
 22304 7E0D B9 16 A4			lda adr.GANGSTERNAMES+1,y
 22305 7E10 95 A4			sta :STACKORIGIN+STACKWIDTH,x
 22306 7E12 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 22307
 22308 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', map.pas), line = 20
 22309
 22310 7E15 E8				inx
 22311 7E16 A9 9A 95 94			mva #$9A :STACKORIGIN,x
 22312 7E1A A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 22313 7E1E 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 22314
 22315 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', map.pas), line = 21
 22316
 22317 7E21 E8				inx
 22318 7E22 AD F4 A8			lda Z
 22319 7E25 0A				asl @
 22320 7E26 A8				tay
 22321 7E27 B9 55 A4			lda adr.RANKNAMES,y
 22322 7E2A 95 94			sta :STACKORIGIN,x
 22323 7E2C B9 56 A4			lda adr.RANKNAMES+1,y
 22324 7E2F 95 A4			sta :STACKORIGIN+STACKWIDTH,x
 22325 7E31 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 22326
 22327 				; optimize OK (map.pas), line = 26
 22328
 22329 7E34 A9 09			lda #$09
 22330 7E36 20 65 18			jsr B_CRT.CRT_WRITE.@010186000
 22331
 22332 				; optimize OK (map.pas), line = 27
 22333
 22334 7E39 A9 00			lda #$00
 22335 7E3B 8D A0 A3			sta B_CRT.CRT_INVERT.X
 22336 7E3E A9 13			lda #$13
 22337 7E40 8D A1 A3			sta B_CRT.CRT_INVERT.Y
 22338 7E43 AD 7D 9E			lda B_CRT.CRT_SCREENWIDTH
 22339 7E46 8D A2 A3			sta B_CRT.CRT_INVERT.WIDTH
 22340 7E49 20 70 1A			jsr B_CRT.CRT_INVERT
 22341
 22342 				; optimize OK (map.pas), line = 29
 22343
 22344 7E4C A9 00			lda #$00
 22345 7E4E 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
 22346 7E51 A9 14			lda #$14
 22347 7E53 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
 22348 7E56 20 AC 17			jsr B_CRT.CRT_GOTOXY
 22349
 22350 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', map.pas), line = 30
 22351
 22352 7E59 E8				inx
 22353 7E5A AD 0F 9C 95 94		mva MAP_STRING_WEAPON :STACKORIGIN,x
 22354 7E5F AD 10 9C 95 A4		mva MAP_STRING_WEAPON+1 :STACKORIGIN+STACKWIDTH,x
 22355 7E64 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 22356
 22357 				; optimize OK (map.pas), line = 31
 22358
 22359 7E67 AC F5 A8			ldy I
 22360 7E6A B9 48 CD			lda adr.GANGSTERWEAPON,y
 22361 7E6D 8D F4 A8			sta Z
 22362
 22363 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', map.pas), line = 32
 22364
 22365 7E70 E8				inx
 22366 7E71 AD F4 A8			lda Z
 22367 7E74 0A				asl @
 22368 7E75 A8				tay
 22369 7E76 B9 6B A4			lda adr.WEAPONNAMES,y
 22370 7E79 95 94			sta :STACKORIGIN,x
 22371 7E7B B9 6C A4			lda adr.WEAPONNAMES+1,y
 22372 7E7E 95 A4			sta :STACKORIGIN+STACKWIDTH,x
 22373 7E80 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 22374
 22375 				; optimize OK (map.pas), line = 34
 22376
 22377 7E83 A9 1C			lda #$1C
 22378 7E85 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
 22379 7E88 A9 14			lda #$14
 22380 7E8A 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
 22381 7E8D 20 AC 17			jsr B_CRT.CRT_GOTOXY
 22382
 22383 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', map.pas), line = 35
 22384
 22385 7E90 E8				inx
 22386 7E91 AD 11 9C 95 94		mva MAP_STRING_GANGSTER :STACKORIGIN,x
 22387 7E96 AD 12 9C 95 A4		mva MAP_STRING_GANGSTER+1 :STACKORIGIN+STACKWIDTH,x
 22388 7E9B 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 22389
 22390 				; optimize OK (map.pas), line = 36
 22391
 22392 7E9E AC 8A CD			ldy CURRENTPLAYER
 22393 7EA1 B9 B1 CD			lda adr.PLNGANGSTERS,y
 22394 7EA4 38 E9 01			sub #$01
 22395 7EA7 8D F0 A3			sta TMP
 22396
 22397 				; optimize OK (map.pas), line = 37
 22398
 22399 7EAA 20 7E 18			jsr B_CRT.CRT_WRITE.@010180000
 22400
 22401 				; optimize OK (map.pas), line = 39
 22402
 22403 7EAD A9 00			lda #$00
 22404 7EAF 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
 22405 7EB2 A9 15			lda #$15
 22406 7EB4 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
 22407 7EB7 20 AC 17			jsr B_CRT.CRT_GOTOXY
 22408
 22409 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', map.pas), line = 40
 22410
 22411 7EBA E8				inx
 22412 7EBB AD 17 9C 95 94		mva MAP_STRING_CAR :STACKORIGIN,x
 22413 7EC0 AD 18 9C 95 A4		mva MAP_STRING_CAR+1 :STACKORIGIN+STACKWIDTH,x
 22414 7EC5 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 22415
 22416 				; optimize OK (map.pas), line = 42
 22417
 22418 7EC8 AC 8A CD			ldy CURRENTPLAYER
 22419 7ECB B9 4C C9			lda adr.PLCAR,y
 22420 7ECE 8D F4 A8			sta Z
 22421
 22422 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', map.pas), line = 43
 22423
 22424 7ED1 E8				inx
 22425 7ED2 AD F4 A8			lda Z
 22426 7ED5 0A				asl @
 22427 7ED6 A8				tay
 22428 7ED7 B9 7D A4			lda adr.CARNAMES,y
 22429 7EDA 95 94			sta :STACKORIGIN,x
 22430 7EDC B9 7E A4			lda adr.CARNAMES+1,y
 22431 7EDF 95 A4			sta :STACKORIGIN+STACKWIDTH,x
 22432 7EE1 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 22433
 22434 				; optimize OK (map.pas), line = 45
 22435
 22436 7EE4 A9 28			lda #$28
 22437 7EE6 38 E9 03			sub #$03
 22438 7EE9 38 ED 92 EC			sub LEN_STRING_BRIBE
 22439 7EED 8D F5 A8			sta I
 22440
 22441 				; optimize OK (map.pas), line = 46
 22442
 22443 7EF0 AC 8A CD			ldy CURRENTPLAYER
 22444 7EF3 B9 7C C9			lda adr.PLBRIBE,y
 22445 7EF6 C9 0A			cmp #$0A
 22446 7EF8 B0 03			jcs l_574A
 22447 7EFA EE F5 A8			inc I
 22448 7EFD			l_574A
 22449
 22450 				; optimize OK (map.pas), line = 47
 22451
 22452 7EFD AD F5 A8			lda I
 22453 7F00 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
 22454 7F03 A9 15			lda #$15
 22455 7F05 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
 22456 7F08 20 AC 17			jsr B_CRT.CRT_GOTOXY
 22457
 22458 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', map.pas), line = 48
 22459
 22460 7F0B E8				inx
 22461 7F0C AD 15 9C 95 94		mva MAP_STRING_BRIBE :STACKORIGIN,x
 22462 7F11 AD 16 9C 95 A4		mva MAP_STRING_BRIBE+1 :STACKORIGIN+STACKWIDTH,x
 22463 7F16 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 22464
 22465 				; optimize OK (map.pas), line = 49
 22466
 22467 7F19 AC 8A CD			ldy CURRENTPLAYER
 22468 7F1C B9 7C C9			lda adr.PLBRIBE,y
 22469 7F1F 20 7E 18			jsr B_CRT.CRT_WRITE.@010180000
 22470
 22471 				; optimize OK (map.pas), line = 51
 22472
 22473 7F22 A9 00			lda #$00
 22474 7F24 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
 22475 7F27 A9 16			lda #$16
 22476 7F29 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
 22477 7F2C 20 AC 17			jsr B_CRT.CRT_GOTOXY
 22478
 22479 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', map.pas), line = 52
 22480
 22481 7F2F E8				inx
 22482 7F30 AD 13 9C 95 94		mva MAP_STRING_RENT :STACKORIGIN,x
 22483 7F35 AD 14 9C 95 A4		mva MAP_STRING_RENT+1 :STACKORIGIN+STACKWIDTH,x
 22484 7F3A 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 22485
 22486 				; optimize OK (map.pas), line = 53
 22487
 22488 7F3D AC 8A CD			ldy CURRENTPLAYER
 22489 7F40 B9 74 C9			lda adr.PLRENTMONTHS,y
 22490 7F43 20 7E 18			jsr B_CRT.CRT_WRITE.@010180000
 22491
 22492 				; optimize OK (map.pas), line = 55
 22493
 22494 7F46 A9 0F			lda #$0F
 22495 7F48 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
 22496 7F4B A9 16			lda #$16
 22497 7F4D 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
 22498 7F50 20 AC 17			jsr B_CRT.CRT_GOTOXY
 22499
 22500 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', map.pas), line = 56
 22501
 22502 7F53 E8				inx
 22503 7F54 AD 19 9C 95 94		mva MAP_STRING_STEPS :STACKORIGIN,x
 22504 7F59 AD 1A 9C 95 A4		mva MAP_STRING_STEPS+1 :STACKORIGIN+STACKWIDTH,x
 22505 7F5E 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 22506
 22507 				; optimize OK (map.pas), line = 57
 22508
 22509 7F61 AC 8A CD			ldy CURRENTPLAYER
 22510 7F64 B9 50 C9			lda adr.PLSTEPS,y
 22511 7F67 8D F0 A3			sta TMP
 22512
 22513 				; optimize OK (map.pas), line = 58
 22514
 22515 7F6A 20 7E 18			jsr B_CRT.CRT_WRITE.@010180000
 22516
 22517 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', map.pas), line = 59
 22518
 22519 7F6D E8				inx
 22520 7F6E A9 B6 95 94			mva #$B6 :STACKORIGIN,x
 22521 7F72 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 22522 7F76 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 22523
 22524 				; optimize OK (map.pas), line = 60
 22525
 22526 7F79 AC 8A CD			ldy CURRENTPLAYER
 22527 7F7C B9 44 C9			lda adr.PLALCOHOL,y
 22528 7F7F 8D F4 A8			sta Z
 22529
 22530 				; optimize OK (map.pas), line = 61
 22531
 22532 7F82 A9 1D			lda #$1D
 22533 7F84 8D F5 A8			sta I
 22534
 22535 				; optimize OK (map.pas), line = 62
 22536
 22537 7F87 AD F4 A8			lda Z
 22538 7F8A C9 0A			cmp #$0A
 22539 7F8C B0 03			jcs l_57A7
 22540 7F8E EE F5 A8			inc I
 22541 7F91			l_57A7
 22542
 22543 				; optimize OK (map.pas), line = 63
 22544
 22545 7F91 AD F4 A8			lda Z
 22546 7F94 C9 64			cmp #$64
 22547 7F96 B0 03			jcs l_57C6
 22548 7F98 EE F5 A8			inc I
 22549 7F9B			l_57C6
 22550
 22551 				; optimize OK (map.pas), line = 64
 22552
 22553 7F9B AD F5 A8			lda I
 22554 7F9E 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
 22555 7FA1 A9 16			lda #$16
 22556 7FA3 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
 22557 7FA6 20 AC 17			jsr B_CRT.CRT_GOTOXY
 22558
 22559 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', map.pas), line = 65
 22560
 22561 7FA9 E8				inx
 22562 7FAA AD 1B 9C 95 94		mva MAP_STRING_CARGO :STACKORIGIN,x
 22563 7FAF AD 1C 9C 95 A4		mva MAP_STRING_CARGO+1 :STACKORIGIN+STACKWIDTH,x
 22564 7FB4 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 22565
 22566 				; optimize OK (map.pas), line = 66
 22567
 22568 7FB7 AD F4 A8			lda Z
 22569 7FBA 20 7E 18			jsr B_CRT.CRT_WRITE.@010180000
 22570
 22571 				; optimize OK (map.pas), line = 68
 22572
 22573 7FBD A9 00			lda #$00
 22574 7FBF 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
 22575 7FC2 A9 17			lda #$17
 22576 7FC4 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
 22577 7FC7 20 AC 17			jsr B_CRT.CRT_GOTOXY
 22578
 22579 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', map.pas), line = 69
 22580
 22581 7FCA E8				inx
 22582 7FCB AD 1D 9C 95 94		mva MAP_STRING_MONEY :STACKORIGIN,x
 22583 7FD0 AD 1E 9C 95 A4		mva MAP_STRING_MONEY+1 :STACKORIGIN+STACKWIDTH,x
 22584 7FD5 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 22585
 22586 				; optimize OK (map.pas), line = 70
 22587
 22588 7FD8 AD 8A CD			lda CURRENTPLAYER
 22589 7FDB 0A				asl @
 22590 7FDC 0A				asl @
 22591 7FDD A8				tay
 22592 7FDE B9 30 C9			lda adr.PLMONEY,y
 22593 7FE1 8D 92 A1			sta B_CRT.CRT_WRITE.@010185000.NUM
 22594 7FE4 B9 31 C9			lda adr.PLMONEY+1,y
 22595 7FE7 8D 93 A1			sta B_CRT.CRT_WRITE.@010185000.NUM+1
 22596 7FEA B9 32 C9			lda adr.PLMONEY+2,y
 22597 7FED 8D 94 A1			sta B_CRT.CRT_WRITE.@010185000.NUM+2
 22598 7FF0 B9 33 C9			lda adr.PLMONEY+3,y
 22599 7FF3 8D 95 A1			sta B_CRT.CRT_WRITE.@010185000.NUM+3
 22600 7FF6 20 CA 18			jsr B_CRT.CRT_WRITE.@010185000
 22601
 22602 				; optimize OK (map.pas), line = 72
 22603
 22604 7FF9 A9 17			lda #$17
 22605 7FFB 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
 22606 7FFE 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
 22607 8001 20 AC 17			jsr B_CRT.CRT_GOTOXY
 22608
 22609 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', map.pas), line = 73
 22610
 22611 8004 E8				inx
 22612 8005 AD 1F 9C 95 94		mva MAP_STRING_CREDIT :STACKORIGIN,x
 22613 800A AD 20 9C 95 A4		mva MAP_STRING_CREDIT+1 :STACKORIGIN+STACKWIDTH,x
 22614 800F 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 22615
 22616 				; optimize OK (map.pas), line = 74
 22617
 22618 8012 AD 8A CD			lda CURRENTPLAYER
 22619 8015 0A				asl @
 22620 8016 A8				tay
 22621 8017 B9 64 C9			lda adr.PLLOAN,y
 22622 801A 8D F7 A8			sta W
 22623 801D B9 65 C9			lda adr.PLLOAN+1,y
 22624 8020 8D F8 A8			sta W+1
 22625
 22626 				; optimize OK (map.pas), line = 75
 22627
 22628 8023 AD F7 A8			lda W
 22629 8026 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 22630 8029 AD F8 A8			lda W+1
 22631 802C 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 22632 802F 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 22633
 22634 				; optimize OK (map.pas), line = 76
 22635
 22636 8032 A9 23			lda #$23
 22637 8034 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
 22638 8037 A9 17			lda #$17
 22639 8039 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
 22640 803C 20 AC 17			jsr B_CRT.CRT_GOTOXY
 22641
 22642 				; optimize OK (map.pas), line = 77
 22643
 22644 803F A9 08			lda #$08
 22645 8041 20 65 18			jsr B_CRT.CRT_WRITE.@010186000
 22646
 22647 				; optimize OK (map.pas), line = 78
 22648
 22649 8044 AC 8A CD			ldy CURRENTPLAYER
 22650 8047 B9 6C C9			lda adr.PLLOANTIME,y
 22651 804A 8D F0 A3			sta TMP
 22652
 22653 				; optimize OK (map.pas), line = 79
 22654
 22655 804D 20 7E 18			jsr B_CRT.CRT_WRITE.@010180000
 22656
 22657 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', map.pas), line = 80
 22658
 22659 8050 E8				inx
 22660 8051 A9 BA 95 94			mva #$BA :STACKORIGIN,x
 22661 8055 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 22662 8059 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 22663
 22664 				; optimize OK (map.pas), line = 81
 22665
 22666 805C A9 01			lda #$01
 22667 805E 8D EC A4			sta MAPRELOADED
 22668 8061			l_5689
 22669
 22670 				; optimize FAIL ('B_SYSTEM.WAITFRAME', map.pas), line = 83
 22671
 22672 8061 20 BF 16			jsr B_SYSTEM.WAITFRAME
 22673
 22674 				; optimize OK (map.pas), line = 84
 22675
 22676 8064 A9 0F			lda #$0F
 22677 8066 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
 22678 8069 A9 16			lda #$16
 22679 806B 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
 22680 806E 20 AC 17			jsr B_CRT.CRT_GOTOXY
 22681
 22682 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', map.pas), line = 85
 22683
 22684 8071 E8				inx
 22685 8072 AD 19 9C 95 94		mva MAP_STRING_STEPS :STACKORIGIN,x
 22686 8077 AD 1A 9C 95 A4		mva MAP_STRING_STEPS+1 :STACKORIGIN+STACKWIDTH,x
 22687 807C 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 22688
 22689 				; optimize OK (map.pas), line = 86
 22690
 22691 807F AC 8A CD			ldy CURRENTPLAYER
 22692 8082 B9 50 C9			lda adr.PLSTEPS,y
 22693 8085 8D F0 A3			sta TMP
 22694
 22695 				; optimize OK (map.pas), line = 87
 22696
 22697 8088 20 7E 18			jsr B_CRT.CRT_WRITE.@010180000
 22698
 22699 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', map.pas), line = 88
 22700
 22701 808B E8				inx
 22702 808C A9 B6 95 94			mva #$B6 :STACKORIGIN,x
 22703 8090 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 22704 8094 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 22705
 22706 				; ------------------------------------------------------------
 22707
 22708 = A8F3			L	= DATAORIGIN+$0C9D
 22709 = A8F4			Z	= DATAORIGIN+$0C9E
 22710 = A8F5			I	= DATAORIGIN+$0C9F
 22711 = A8F6			P	= DATAORIGIN+$0CA0
 22712 = A8F7			W	= DATAORIGIN+$0CA1
 22713
 22714 = A8F3			@VarData	= L
 22715 = 0006			@VarDataSize	= 6
 22716
 22717 8097			@exit
 22718 					.ifdef @new
 22719 					lda <@VarData
 22720 					sta :ztmp
 22721 					lda >@VarData
 22722 					ldy #@VarDataSize-1
 22723 					jmp @FreeMem
 22724 					els
 22725 8097 60				rts						; ret
 22726 					eif
 22727 				.endl
 22728
 22729 8098			.local	DRAWMAJORMONEY					; PROCEDURE
 22730
 22731 				; optimize OK (map.pas), line = 95
 22732
 22733 8098 AD 90 CD			lda CURRENTMAP
 22734 809B C9 07			cmp #$07
 22735 809D F0 03 4C 26 82		jne l_5841
 22736
 22737 				; optimize OK (map.pas), line = 101
 22738
 22739 80A2 AC 8A CD			ldy CURRENTPLAYER
 22740 80A5 B9 60 C9			lda adr.PLOPPORTUNITY,y
 22741 80A8 29 04			and #$04
 22742 80AA D0 55			jne l_585B
 22743
 22744 				; optimize OK (map.pas), line = 104
 22745
 22746 80AC A9 58			lda #$58
 22747 80AE 8D 42 E2			sta $E242
 22748 80B1 8D 43 E2			sta $E242+1
 22749
 22750 				; optimize OK (map.pas), line = 105
 22751
 22752 80B4 8D 44 E2			sta $E244
 22753 80B7 8D 45 E2			sta $E244+1
 22754
 22755 				; optimize OK (map.pas), line = 106
 22756
 22757 80BA 8D 46 E2			sta $E246
 22758 80BD 8D 47 E2			sta $E246+1
 22759
 22760 				; optimize OK (map.pas), line = 108
 22761
 22762 80C0 A9 04			lda #$04
 22763 80C2 8D 42 DE			sta $DE42
 22764
 22765 				; optimize OK (map.pas), line = 109
 22766
 22767 80C5 8D 44 DE			sta $DE44
 22768
 22769 				; optimize OK (map.pas), line = 110
 22770
 22771 80C8 8D 46 DE			sta $DE46
 22772
 22773 				; optimize OK (map.pas), line = 111
 22774
 22775 80CB A9 05			lda #$05
 22776 80CD 8D 43 DE			sta $DE43
 22777
 22778 				; optimize OK (map.pas), line = 112
 22779
 22780 80D0 8D 45 DE			sta $DE45
 22781
 22782 				; optimize OK (map.pas), line = 113
 22783
 22784 80D3 8D 47 DE			sta $DE47
 22785
 22786 				; optimize OK (map.pas), line = 115
 22787
 22788 80D6 A9 2E			lda #$2E
 22789 80D8 8D 6A E2			sta $E26A
 22790 80DB 8D 6B E2			sta $E26A+1
 22791
 22792 				; optimize OK (map.pas), line = 116
 22793
 22794 80DE 8D 6C E2			sta $E26C
 22795 80E1 8D 6D E2			sta $E26C+1
 22796
 22797 				; optimize OK (map.pas), line = 117
 22798
 22799 80E4 8D 6E E2			sta $E26E
 22800 80E7 8D 6F E2			sta $E26E+1
 22801
 22802 				; optimize OK (map.pas), line = 119
 22803
 22804 80EA A9 1C			lda #$1C
 22805 80EC 8D 6A DE			sta $DE6A
 22806
 22807 				; optimize OK (map.pas), line = 120
 22808
 22809 80EF 8D 6C DE			sta $DE6C
 22810
 22811 				; optimize OK (map.pas), line = 121
 22812
 22813 80F2 8D 6E DE			sta $DE6E
 22814
 22815 				; optimize OK (map.pas), line = 122
 22816
 22817 80F5 8D 6B DE			sta $DE6B
 22818
 22819 				; optimize OK (map.pas), line = 123
 22820
 22821 80F8 8D 6D DE			sta $DE6D
 22822
 22823 				; optimize OK (map.pas), line = 124
 22824
 22825 80FB 8D 6F DE			sta $DE6F
 22826 80FE 4C 63 81			jmp l_589B
 22827 8101			l_585B
 22828
 22829 				; optimize OK (map.pas), line = 130
 22830
 22831 8101 A9 4D			lda #$4D
 22832 8103 8D 42 E2			sta $E242
 22833 8106 8D 43 E2			sta $E242+1
 22834
 22835 				; optimize OK (map.pas), line = 131
 22836
 22837 8109 8D 44 E2			sta $E244
 22838 810C 8D 45 E2			sta $E244+1
 22839
 22840 				; optimize OK (map.pas), line = 132
 22841
 22842 810F 8D 46 E2			sta $E246
 22843 8112 8D 47 E2			sta $E246+1
 22844
 22845 				; optimize OK (map.pas), line = 133
 22846
 22847 8115 8D 6A E2			sta $E26A
 22848 8118 8D 6B E2			sta $E26A+1
 22849
 22850 				; optimize OK (map.pas), line = 134
 22851
 22852 811B 8D 6C E2			sta $E26C
 22853 811E 8D 6D E2			sta $E26C+1
 22854
 22855 				; optimize OK (map.pas), line = 135
 22856
 22857 8121 8D 6E E2			sta $E26E
 22858 8124 8D 6F E2			sta $E26E+1
 22859
 22860 				; optimize OK (moneytransporter_poke.pas), line = 1
 22861
 22862 8127 A9 49			lda #$49
 22863 8129 8D 42 DE			sta $DE42
 22864 812C A9 4A			lda #$4A
 22865 812E 8D 43 DE			sta $DE42+1
 22866
 22867 				; optimize OK (moneytransporter_poke.pas), line = 2
 22868
 22869 8131 A9 4B			lda #$4B
 22870 8133 8D 44 DE			sta $DE44
 22871 8136 A9 4C			lda #$4C
 22872 8138 8D 45 DE			sta $DE44+1
 22873
 22874 				; optimize OK (moneytransporter_poke.pas), line = 3
 22875
 22876 813B A9 4D			lda #$4D
 22877 813D 8D 46 DE			sta $DE46
 22878 8140 A9 4E			lda #$4E
 22879 8142 8D 47 DE			sta $DE46+1
 22880
 22881 				; optimize OK (moneytransporter_poke.pas), line = 4
 22882
 22883 8145 A9 55			lda #$55
 22884 8147 8D 6A DE			sta $DE6A
 22885 814A A9 56			lda #$56
 22886 814C 8D 6B DE			sta $DE6A+1
 22887
 22888 				; optimize OK (moneytransporter_poke.pas), line = 5
 22889
 22890 814F A9 57			lda #$57
 22891 8151 8D 6C DE			sta $DE6C
 22892 8154 A9 58			lda #$58
 22893 8156 8D 6D DE			sta $DE6C+1
 22894
 22895 				; optimize OK (moneytransporter_poke.pas), line = 6
 22896
 22897 8159 A9 59			lda #$59
 22898 815B 8D 6E DE			sta $DE6E
 22899 815E A9 5A			lda #$5A
 22900 8160 8D 6F DE			sta $DE6E+1
 22901 8163			l_589B
 22902
 22903 				; optimize OK (map.pas), line = 142
 22904
 22905 8163 AC 8A CD			ldy CURRENTPLAYER
 22906 8166 B9 60 C9			lda adr.PLOPPORTUNITY,y
 22907 8169 29 10			and #$10
 22908 816B D0 57			jne l_58D8
 22909
 22910 				; optimize OK (map.pas), line = 146
 22911
 22912 816D A9 58			lda #$58
 22913 816F 8D 0C E1			sta $E10C
 22914 8172 8D 0D E1			sta $E10C+1
 22915
 22916 				; optimize OK (map.pas), line = 147
 22917
 22918 8175 8D 0E E1			sta $E10E
 22919 8178 8D 0F E1			sta $E10E+1
 22920
 22921 				; optimize OK (map.pas), line = 149
 22922
 22923 817B A9 2E			lda #$2E
 22924 817D 8D 34 E1			sta $E134
 22925 8180 8D 35 E1			sta $E134+1
 22926
 22927 				; optimize OK (map.pas), line = 150
 22928
 22929 8183 8D 36 E1			sta $E136
 22930 8186 8D 37 E1			sta $E136+1
 22931
 22932 				; optimize OK (map.pas), line = 152
 22933
 22934 8189 A9 04			lda #$04
 22935 818B 8D 0C DD			sta $DD0C
 22936
 22937 				; optimize OK (map.pas), line = 153
 22938
 22939 818E 8D 0E DD			sta $DD0E
 22940
 22941 				; optimize OK (map.pas), line = 154
 22942
 22943 8191 8D 34 DD			sta $DD34
 22944
 22945 				; optimize OK (map.pas), line = 155
 22946
 22947 8194 8D 36 DD			sta $DD36
 22948
 22949 				; optimize OK (map.pas), line = 156
 22950
 22951 8197 A9 05			lda #$05
 22952 8199 8D 0D DD			sta $DD0D
 22953
 22954 				; optimize OK (map.pas), line = 157
 22955
 22956 819C 8D 0F DD			sta $DD0F
 22957
 22958 				; optimize OK (map.pas), line = 158
 22959
 22960 819F 8D 35 DD			sta $DD35
 22961
 22962 				; optimize OK (map.pas), line = 159
 22963
 22964 81A2 8D 37 DD			sta $DD37
 22965
 22966 				; optimize OK (map.pas), line = 161
 22967
 22968 81A5 A9 2E			lda #$2E
 22969 81A7 8D 5C E1			sta $E15C
 22970 81AA 8D 5D E1			sta $E15C+1
 22971
 22972 				; optimize OK (map.pas), line = 162
 22973
 22974 81AD 8D 5E E1			sta $E15E
 22975 81B0 8D 5F E1			sta $E15E+1
 22976
 22977 				; optimize OK (map.pas), line = 163
 22978
 22979 81B3 A9 1C			lda #$1C
 22980 81B5 8D 5C DD			sta $DD5C
 22981
 22982 				; optimize OK (map.pas), line = 164
 22983
 22984 81B8 8D 5E DD			sta $DD5E
 22985
 22986 				; optimize OK (map.pas), line = 165
 22987
 22988 81BB 8D 5D DD			sta $DD5D
 22989
 22990 				; optimize OK (map.pas), line = 166
 22991
 22992 81BE 8D 5F DD			sta $DD5F
 22993 81C1 4C 26 82			jmp l_5918
 22994 81C4			l_58D8
 22995
 22996 				; optimize OK (map.pas), line = 172
 22997
 22998 81C4 A9 4E			lda #$4E
 22999 81C6 8D 0C E1			sta $E10C
 23000 81C9 8D 0D E1			sta $E10C+1
 23001
 23002 				; optimize OK (map.pas), line = 173
 23003
 23004 81CC 8D 0E E1			sta $E10E
 23005 81CF 8D 0F E1			sta $E10E+1
 23006
 23007 				; optimize OK (map.pas), line = 176
 23008
 23009 81D2 8D 34 E1			sta $E134
 23010 81D5 8D 35 E1			sta $E134+1
 23011
 23012 				; optimize OK (map.pas), line = 177
 23013
 23014 81D8 8D 36 E1			sta $E136
 23015 81DB 8D 37 E1			sta $E136+1
 23016
 23017 				; optimize OK (map.pas), line = 178
 23018
 23019 81DE 8D 5C E1			sta $E15C
 23020 81E1 8D 5D E1			sta $E15C+1
 23021
 23022 				; optimize OK (map.pas), line = 179
 23023
 23024 81E4 8D 5E E1			sta $E15E
 23025 81E7 8D 5F E1			sta $E15E+1
 23026
 23027 				; optimize OK (major_poke.pas), line = 1
 23028
 23029 81EA A9 29			lda #$29
 23030 81EC 8D 0C DD			sta $DD0C
 23031 81EF A9 2A			lda #$2A
 23032 81F1 8D 0D DD			sta $DD0C+1
 23033
 23034 				; optimize OK (major_poke.pas), line = 2
 23035
 23036 81F4 A9 2B			lda #$2B
 23037 81F6 8D 0E DD			sta $DD0E
 23038 81F9 A9 2C			lda #$2C
 23039 81FB 8D 0F DD			sta $DD0E+1
 23040
 23041 				; optimize OK (major_poke.pas), line = 3
 23042
 23043 81FE A9 29			lda #$29
 23044 8200 8D 34 DD			sta $DD34
 23045 8203 A9 35			lda #$35
 23046 8205 8D 35 DD			sta $DD34+1
 23047
 23048 				; optimize OK (major_poke.pas), line = 4
 23049
 23050 8208 A9 36			lda #$36
 23051 820A 8D 36 DD			sta $DD36
 23052 820D A9 37			lda #$37
 23053 820F 8D 37 DD			sta $DD36+1
 23054
 23055 				; optimize OK (major_poke.pas), line = 5
 23056
 23057 8212 A9 1C			lda #$1C
 23058 8214 8D 5C DD			sta $DD5C
 23059 8217 A9 3E			lda #$3E
 23060 8219 8D 5D DD			sta $DD5C+1
 23061
 23062 				; optimize OK (major_poke.pas), line = 6
 23063
 23064 821C A9 3F			lda #$3F
 23065 821E 8D 5E DD			sta $DD5E
 23066 8221 A9 40			lda #$40
 23067 8223 8D 5F DD			sta $DD5E+1
 23068 8226			l_5918
 23069 8226			l_5841
 23070
 23071 8226			@exit
 23072 					.ifdef @new
 23073 					lda <@VarData
 23074 					sta :ztmp
 23075 					lda >@VarData
 23076 					ldy #@VarDataSize-1
 23077 					jmp @FreeMem
 23078 					els
 23079 8226 60				rts						; ret
 23080 					eif
 23081 				.endl
 23082
 23083 8227			.local	PRELOADMAP					; PROCEDURE
 23084
 23085 				; optimize FAIL ('BLACKCONSOLE', map.pas), line = 191
 23086
 23087 8227 20 8E 27			jsr BLACKCONSOLE
 23088
 23089 				; optimize OK (map.pas), line = 192
 23090
 23091 822A A9 41			lda #$41
 23092 822C 18 6D 90 CD			add CURRENTMAP
 23093 8230 8D 4F E7			sta adr.FNTNAME+$01
 23094
 23095 				; optimize OK (map.pas), line = 193
 23096
 23097 8233 AD 93 9B			lda FNTNAME
 23098 8236 8D 36 A7			sta LOADXAPL.FNAME
 23099 8239 AD 94 9B			lda FNTNAME+1
 23100 823C 8D 37 A7			sta LOADXAPL.FNAME+1
 23101 823F A9 00			lda #$00
 23102 8241 8D 38 A7			sta LOADXAPL.OUTPUTPOINTER
 23103 8244 A9 D8			lda #$D8
 23104 8246 8D 39 A7			sta LOADXAPL.OUTPUTPOINTER+1
 23105 8249 20 60 27			jsr LOADXAPL
 23106
 23107 				; optimize FAIL ('CLEARSPRITES', map.pas), line = 194
 23108
 23109 824C 20 5F 3D			jsr CLEARSPRITES
 23110
 23111 				; optimize OK (map.pas), line = 195
 23112
 23113 824F A9 00			lda #$00
 23114 8251 20 84 38			jsr PAINTPLAYER
 23115
 23116 				; optimize FAIL ('DRAWMAJORMONEY', map.pas), line = 198
 23117
 23118 8254 20 98 80			jsr DRAWMAJORMONEY
 23119
 23120 				; optimize OK (map.pas), line = 199
 23121
 23122 8257 A9 00			lda #$00
 23123 8259 8D EC A4			sta MAPRELOADED
 23124
 23125 825C			@exit
 23126 					.ifdef @new
 23127 					lda <@VarData
 23128 					sta :ztmp
 23129 					lda >@VarData
 23130 					ldy #@VarDataSize-1
 23131 					jmp @FreeMem
 23132 					els
 23133 825C 60				rts						; ret
 23134 					eif
 23135 				.endl
 23136
 23137 825D			.local	LOADMAP						; PROCEDURE
 23138
 23139 				; optimize FAIL ('PRELOADMAP', map.pas), line = 206
 23140
 23141 825D 20 27 82			jsr PRELOADMAP
 23142
 23143 				; optimize FAIL ('ENABLEMAPCONSOLE', map.pas), line = 207
 23144
 23145 8260 20 F0 27			jsr ENABLEMAPCONSOLE
 23146
 23147 				; optimize FAIL ('PRINTMAPSTATUS', map.pas), line = 208
 23148
 23149 8263 20 9D 7D			jsr PRINTMAPSTATUS
 23150
 23151 8266			@exit
 23152 					.ifdef @new
 23153 					lda <@VarData
 23154 					sta :ztmp
 23155 					lda >@VarData
 23156 					ldy #@VarDataSize-1
 23157 					jmp @FreeMem
 23158 					els
 23159 8266 60				rts						; ret
 23160 					eif
 23161 				.endl
 23162
 23163 8267			.local	CHANGEMAP					; PROCEDURE
 23164
 23165 				; optimize OK (map.pas), line = 216
 23166
 23167 8267 AD AE EA			lda PLAYERPOS_X
 23168 826A C9 CB			cmp #$CB
 23169 826C 90 1E			jcc l_5977
 23170
 23171 				; optimize OK (map.pas), line = 219
 23172
 23173 826E A9 31			lda #$31
 23174 8270 8D AE EA			sta PLAYERPOS_X
 23175
 23176 				; optimize OK (map.pas), line = 220
 23177
 23178 8273 A9 00			lda #$00
 23179 8275 8D B0 EA			sta MAPPOS_X
 23180
 23181 				; optimize OK (map.pas), line = 221
 23182
 23183 8278 AD 90 CD			lda CURRENTMAP
 23184 827B C9 04			cmp #$04
 23185 827D F0 0D			jeq l_599E
 23186 827F C9 09			cmp #$09
 23187 8281 F0 09			jeq l_599E
 23188
 23189 				; optimize OK (map.pas), line = 223
 23190
 23191 8283 EE 90 CD			inc CURRENTMAP
 23192
 23193 				; optimize FAIL ('LOADMAP', map.pas), line = 224
 23194
 23195 8286 20 5D 82			jsr LOADMAP
 23196 8289 4C F5 82			jmp @exit
 23197 828C			l_599E
 23198 828C			l_5977
 23199
 23200 				; optimize OK (map.pas), line = 229
 23201
 23202 828C AD AE EA			lda PLAYERPOS_X
 23203 828F C9 2F			cmp #$2F
 23204 8291 B0 1C			jcs l_59C0
 23205
 23206 				; optimize OK (map.pas), line = 232
 23207
 23208 8293 A9 C9			lda #$C9
 23209 8295 8D AE EA			sta PLAYERPOS_X
 23210
 23211 				; optimize OK (map.pas), line = 233
 23212
 23213 8298 A9 13			lda #$13
 23214 829A 8D B0 EA			sta MAPPOS_X
 23215
 23216 				; optimize OK (map.pas), line = 234
 23217
 23218 829D AD 90 CD			lda CURRENTMAP
 23219 82A0 F0 0D			jeq l_59E7
 23220 82A2 C9 05			cmp #$05
 23221 82A4 F0 09			jeq l_59E7
 23222
 23223 				; optimize OK (map.pas), line = 236
 23224
 23225 82A6 CE 90 CD			dec CURRENTMAP
 23226
 23227 				; optimize FAIL ('LOADMAP', map.pas), line = 237
 23228
 23229 82A9 20 5D 82			jsr LOADMAP
 23230 82AC 4C F5 82			jmp @exit
 23231 82AF			l_59E7
 23232 82AF			l_59C0
 23233
 23234 				; optimize OK (map.pas), line = 242
 23235
 23236 82AF AD AF EA			lda PLAYERPOS_Y
 23237 82B2 C9 AD			cmp #$AD
 23238 82B4 90 1C			jcc l_5A09
 23239
 23240 				; optimize OK (map.pas), line = 244
 23241
 23242 82B6 A9 24			lda #$24
 23243 82B8 8D AF EA			sta PLAYERPOS_Y
 23244
 23245 				; optimize OK (map.pas), line = 245
 23246
 23247 82BB A9 00			lda #$00
 23248 82BD 8D B1 EA			sta MAPPOS_Y
 23249
 23250 				; optimize OK (map.pas), line = 246
 23251
 23252 82C0 AD 90 CD			lda CURRENTMAP
 23253 82C3 C9 05			cmp #$05
 23254 82C5 B0 0B			jcs l_5A24
 23255
 23256 				; optimize OK (map.pas), line = 248
 23257
 23258 82C7 69 05			adc #$05
 23259 82C9 8D 90 CD			sta CURRENTMAP
 23260
 23261 				; optimize FAIL ('LOADMAP', map.pas), line = 249
 23262
 23263 82CC 20 5D 82			jsr LOADMAP
 23264 82CF 4C F5 82			jmp @exit
 23265 82D2			l_5A24
 23266 82D2			l_5A09
 23267
 23268 				; optimize OK (map.pas), line = 254
 23269
 23270 82D2 AD AF EA			lda PLAYERPOS_Y
 23271 82D5 C9 23			cmp #$23
 23272 82D7 B0 1C			jcs l_5A46
 23273
 23274 				; optimize OK (map.pas), line = 256
 23275
 23276 82D9 A9 AC			lda #$AC
 23277 82DB 8D AF EA			sta PLAYERPOS_Y
 23278
 23279 				; optimize OK (map.pas), line = 257
 23280
 23281 82DE A9 11			lda #$11
 23282 82E0 8D B1 EA			sta MAPPOS_Y
 23283
 23284 				; optimize OK (map.pas), line = 258
 23285
 23286 82E3 AD 90 CD			lda CURRENTMAP
 23287 82E6 C9 05			cmp #$05
 23288 82E8 90 0B			jcc l_5A61
 23289
 23290 				; optimize OK (map.pas), line = 260
 23291
 23292 82EA E9 05			sbc #$05
 23293 82EC 8D 90 CD			sta CURRENTMAP
 23294
 23295 				; optimize FAIL ('LOADMAP', map.pas), line = 261
 23296
 23297 82EF 20 5D 82			jsr LOADMAP
 23298 82F2 4C F5 82			jmp @exit
 23299 82F5			l_5A61
 23300 82F5			l_5A46
 23301
 23302 82F5			@exit
 23303 					.ifdef @new
 23304 					lda <@VarData
 23305 					sta :ztmp
 23306 					lda >@VarData
 23307 					ldy #@VarDataSize-1
 23308 					jmp @FreeMem
 23309 					els
 23310 82F5 60				rts						; ret
 23311 					eif
 23312 				.endl
 23313
 23314 82F6			.local	M_READSTRINGI					; PROCEDURE
 23315
 23316 82F6 AC FA A8 84 82 AC + 	mwy R :bp2
 23317 8300 A0 00			ldy #$00
 23318 8302 A9 00 91 82			mva #$00 (:bp2),y
 23319
 23320 				; --- RepeatUntilProlog
 23321 8306			l_5A76
 23322
 23323 				; optimize FAIL ('B_CRT.CRT_READCHARI', setup_game.pas), line = 11
 23324
 23325 8306 20 62 19			jsr B_CRT.CRT_READCHARI
 23326 8309 AD 9A A1			lda B_CRT.CRT_READCHARI.RESULT
 23327 830C 8D FC A8			sta A
 23328
 23329 				; optimize OK (setup_game.pas), line = 12
 23330
 23331 830F C9 DB			cmp #$DB
 23332 8311 D0 03 4C A0 83		jeq @exit
 23333 8316			l_5A8C
 23334
 23335 				; optimize OK (setup_game.pas), line = 13
 23336
 23337 8316 AD FC A8			lda A
 23338 8319 C9 7E			cmp #$7E
 23339 831B D0 3B			jne l_5AAE
 23340 831D AC FA A8 84 82 AC + 	mwy R :bp2
 23341 8327 A0 00			ldy #$00
 23342 8329 B1 82			lda (:bp2),y
 23343 832B F0 2B			jeq l_5AAE
 23344
 23345 				; optimize FAIL (0, setup_game.pas), line = 14
 23346
 23347 832D AD 7F 9E			lda B_CRT.CRT_CURSOR
 23348 8330 D0 03			bne @+
 23349 8332 CE 80 9E			dec B_CRT.CRT_CURSOR+1
 23350 				@
 23351 8335 CE 7F 9E			dec B_CRT.CRT_CURSOR
 23352
 23353 				; optimize OK (setup_game.pas), line = 15
 23354
 23355 8338 AC 80 9E			ldy B_CRT.CRT_CURSOR+1
 23356 833B 84 81			sty :bp+1
 23357 833D AC 7F 9E			ldy B_CRT.CRT_CURSOR
 23358 8340 A9 00			lda #$00
 23359 8342 91 80			sta (:bp),y
 23360
 23361 				; optimize OK (setup_game.pas), line = 16
 23362
 23363 8344 AC FA A8 84 82 AC + 	mwy R :bp2
 23364 834E A0 00			ldy #$00
 23365 8350 B1 82			lda (:bp2),y
 23366 8352 38 E9 01			sub #$01
 23367 8355 4C 9B 83			jmp l_5AC2
 23368 8358			l_5AAE
 23369
 23370 				; optimize OK (setup_game.pas), line = 18
 23371
 23372 8358 AD FC A8			lda A
 23373 835B C9 C2			cmp #$C2
 23374 835D F0 3E			jeq l_5B13
 23375 835F C9 C1			cmp #$C1
 23376 8361 F0 3A			jeq l_5B13
 23377 8363 C9 7F			cmp #$7F
 23378 8365 F0 36			jeq l_5B13
 23379 8367 C9 5B			cmp #$5B
 23380 8369 F0 32			jeq l_5B13
 23381 836B C9 7E			cmp #$7E
 23382 836D F0 2E			jeq l_5B13
 23383 836F AC FB A8 84 81		mvy R+1 :bp+1
 23384 8374 AC FA A8			ldy R
 23385 8377 B1 80			lda (:bp),y
 23386 8379 CD F9 A8			cmp LIMIT
 23387 837C B0 1F			jcs l_5B13
 23388
 23389 				; optimize OK (setup_game.pas), line = 24
 23390
 23391 837E AD FC A8			lda A
 23392 8381 20 F4 18			jsr B_CRT.CRT_PUT.@010180000
 23393
 23394 				; optimize OK (setup_game.pas), line = 25
 23395
 23396 8384 AC FA A8 84 82 AC + 	mwy R :bp2
 23397 838E A0 00			ldy #$00
 23398 8390 B1 82			lda (:bp2),y
 23399 8392 18 69 01			add #$01
 23400 8395 91 82			sta (:bp2),y
 23401
 23402 				; optimize OK (setup_game.pas), line = 26
 23403
 23404 8397 A8				tay
 23405 8398 AD FC A8			lda A
 23406 839B			l_5AC2
 23407 839B 91 82			sta (:bp2),y
 23408 839D			l_5B13
 23409
 23410 				; optimize OK (setup_game.pas), line = 28
 23411
 23412 839D 4C 06 83			jmp l_5A76
 23413
 23414 				; ------------------------------------------------------------
 23415
 23416 = A8F9			LIMIT	= DATAORIGIN+$0CA3
 23417 = A8FA			R	= DATAORIGIN+$0CA4
 23418 = A8FC			A	= DATAORIGIN+$0CA6
 23419
 23420 = A8F9			@VarData	= LIMIT
 23421 = 0004			@VarDataSize	= 4
 23422
 23423 83A0			@exit
 23424 					.ifdef @new
 23425 					lda <@VarData
 23426 					sta :ztmp
 23427 					lda >@VarData
 23428 					ldy #@VarDataSize-1
 23429 					jmp @FreeMem
 23430 					els
 23431 83A0 60				rts						; ret
 23432 					eif
 23433 				.endl
 23434
 23435 83A1			.local	SETUPGAME					; PROCEDURE
 23436
 23437 				; optimize OK (setup_game.pas), line = 38
 23438
 23439 83A1 A9 1C			lda #$1C
 23440 83A3 20 1F 29			jsr LOADLOCATION
 23441
 23442 				; optimize FAIL ('SHOWLOCATIONHEADER', setup_game.pas), line = 41
 23443
 23444 83A6 20 7A 28			jsr SHOWLOCATIONHEADER
 23445
 23446 				; optimize FAIL ('CHECKFORSAVEDGAME', setup_game.pas), line = 42
 23447
 23448 83A9 20 9B 24			jsr CHECKFORSAVEDGAME
 23449
 23450 				; optimize OK (setup_game.pas), line = 43
 23451
 23452 83AC AD 05 C2			lda SAVE_GAMEFOUND
 23453 83AF C9 01			cmp #$01
 23454 83B1 D0 2F			jne l_5B45
 23455
 23456 				; optimize OK (setup_game.pas), line = 44
 23457
 23458 83B3 A9 03			lda #$03
 23459 83B5 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 23460 83B8 A9 0F			lda #$0F
 23461 83BA 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 23462 83BD 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 23463
 23464 				; optimize OK (setup_game.pas), line = 45
 23465
 23466 83C0 A9 04			lda #$04
 23467 83C2 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 23468 83C5 A9 10			lda #$10
 23469 83C7 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 23470 83CA 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 23471
 23472 				; optimize FAIL ('GETYESNO', setup_game.pas), line = 46
 23473
 23474 83CD 20 08 20			jsr GETYESNO
 23475 83D0 AD 1B A7			lda GETYESNO.RESULT
 23476 83D3 C9 01			cmp #$01
 23477 83D5 D0 0B			jne l_5B5C
 23478
 23479 				; optimize FAIL ('LOADGAME', setup_game.pas), line = 47
 23480
 23481 83D7 20 7E 25			jsr LOADGAME
 23482
 23483 				; optimize OK (setup_game.pas), line = 48
 23484
 23485 83DA A9 FE			lda #$FE
 23486 83DC 8D 21 C9			sta LASTLOCATIONSTRINGS
 23487 83DF 4C 19 87			jmp @exit
 23488 83E2			l_5B5C
 23489 83E2			l_5B45
 23490
 23491 				; optimize FAIL ('SHOWLOCATIONHEADER', setup_game.pas), line = 53
 23492
 23493 83E2 20 7A 28			jsr SHOWLOCATIONHEADER
 23494
 23495 				; optimize OK (setup_game.pas), line = 54
 23496
 23497 83E5 A9 03			lda #$03
 23498 83E7 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 23499 83EA A9 0E			lda #$0E
 23500 83EC 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 23501 83EF 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 23502
 23503 				; optimize OK (setup_game.pas), line = 55
 23504
 23505 83F2 A9 05			lda #$05
 23506 83F4 8D 12 A7			sta GETANSWERCHAR.AKEY
 23507 83F7 A9 3A			lda #$3A
 23508 83F9 8D 13 A7			sta GETANSWERCHAR.BKEY
 23509 83FC A9 2B			lda #$2B
 23510 83FE 8D 14 A7			sta GETANSWERCHAR.A
 23511 8401 A9 24			lda #$24
 23512 8403 8D 15 A7			sta GETANSWERCHAR.B
 23513 8406 20 8C 1F			jsr GETANSWERCHAR
 23514 8409 AD 16 A7			lda GETANSWERCHAR.RESULT
 23515 840C 8D FE A8			sta R
 23516
 23517 				; optimize OK (setup_game.pas), line = 56
 23518
 23519 840F D0 0A			jne l_5B84
 23520
 23521 				; optimize OK (setup_game.pas), line = 57
 23522
 23523 8411 A9 19			lda #$19
 23524 8413 8D C4 CA			sta GAMELENGTH
 23525
 23526 				; optimize OK (setup_game.pas), line = 58
 23527
 23528 8416 A9 64			lda #$64
 23529 8418 4C 22 84			jmp l_5B96
 23530 841B			l_5B84
 23531
 23532 				; optimize OK (setup_game.pas), line = 62
 23533
 23534 841B A9 32			lda #$32
 23535 841D 8D C4 CA			sta GAMELENGTH
 23536
 23537 				; optimize OK (setup_game.pas), line = 63
 23538
 23539 8420 A9 C8			lda #$C8
 23540 8422			l_5B96
 23541 8422 8D C5 CA			sta GAMEPOINTS
 23542 8425 A9 00			lda #$00
 23543 8427 8D C6 CA			sta GAMEPOINTS+1
 23544
 23545 				; optimize OK (setup_game.pas), line = 66
 23546
 23547 842A A9 05			lda #$05
 23548 842C 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 23549 842F A9 03			lda #$03
 23550 8431 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 23551 8434 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 23552
 23553 				; optimize OK (setup_game.pas), line = 67
 23554
 23555 8437 A9 01			lda #$01
 23556 8439 8D 1C A7			sta READVALUE.MINVALUE
 23557 843C A9 00			lda #$00
 23558 843E 8D 1D A7			sta READVALUE.MINVALUE+1
 23559 8441 A9 04			lda #$04
 23560 8443 8D 1E A7			sta READVALUE.MAXVALUE
 23561 8446 A9 00			lda #$00
 23562 8448 8D 1F A7			sta READVALUE.MAXVALUE+1
 23563 844B 20 26 20			jsr READVALUE
 23564 844E AD 20 A7			lda READVALUE.RESULT
 23565 8451 8D 20 C9			sta NPLAYERS
 23566
 23567 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', setup_game.pas), line = 68
 23568
 23569 8454 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 23570
 23571 				; optimize OK (setup_game.pas), line = 71
 23572
 23573 8457 AD 6F 9B			lda PLGANGSTERS
 23574 845A 85 82			sta :bp2
 23575 845C AD 70 9B			lda PLGANGSTERS+1
 23576 845F 85 83			sta :bp2+1
 23577 8461 A9 63			lda #$63
 23578 8463 A0 1F			ldy #$1F
 23579 8465 91 82 88 10 FB		sta:rpl (:bp2),y-
 23580
 23581 				; optimize OK (setup_game.pas), line = 72
 23582
 23583 846A A9 00			lda #$00
 23584 846C 8D FD A8			sta J
 23585 846F AC 20 C9			ldy NPLAYERS
 23586 8472 88				dey
 23587 8473 8C 77 84			sty @FORTMP_5BB9_0
 23588
 23589 8476			l_5BBC
 23590 				; --- ForToDoCondition
 23591 8476 A9 00			lda @FORTMP_5BB9_0::#$00
 23592 8478 CD FD A8			cmp J
 23593 847B B0 03 4C 07 87		jcc l_5BCA
 23594
 23595 				; optimize OK (setup_game.pas), line = 74
 23596
 23597 8480 AD FD A8			lda J
 23598 8483 8D 8A CD			sta CURRENTPLAYER
 23599
 23600 				; optimize OK (setup_game.pas), line = 75
 23601
 23602 8486 0A				asl @
 23603 8487 0A				asl @
 23604 8488 0A				asl @
 23605 8489 8D F0 A3			sta TMP
 23606
 23607 				; optimize FAIL ('SHOWLOCATIONHEADER', setup_game.pas), line = 77
 23608
 23609 848C 20 7A 28			jsr SHOWLOCATIONHEADER
 23610
 23611 				; optimize OK (setup_game.pas), line = 80
 23612
 23613 848F A9 04			lda #$04
 23614 8491 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 23615 8494 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 23616 8497 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 23617
 23618 				; optimize OK (setup_game.pas), line = 81
 23619
 23620 849A AD FD A8			lda J
 23621 849D 18 69 01			add #$01
 23622 84A0 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 23623 84A3 A9 00			lda #$00
 23624 84A5 69 00			adc #$00
 23625 84A7 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 23626 84AA 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 23627
 23628 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', setup_game.pas), line = 82
 23629
 23630 84AD 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 23631
 23632 				; --- RepeatUntilProlog
 23633 84B0			l_5BE8
 23634
 23635 				; optimize OK (setup_game.pas), line = 85
 23636
 23637 84B0 A9 06			lda #$06
 23638 84B2 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 23639 84B5 A9 05			lda #$05
 23640 84B7 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 23641 84BA 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 23642
 23643 				; optimize OK (setup_game.pas), line = 86
 23644
 23645 84BD A9 0B			lda #$0B
 23646 84BF 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
 23647 84C2 A9 07			lda #$07
 23648 84C4 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
 23649 84C7 20 AC 17			jsr B_CRT.CRT_GOTOXY
 23650
 23651 				; optimize OK (setup_game.pas), line = 87
 23652
 23653 84CA A9 00			lda #$00
 23654 84CC 85 AD			sta :STACKORIGIN+STACKWIDTH+9
 23655 84CE AD F0 A3			lda TMP
 23656 84D1 0A				asl @
 23657 84D2 26 AD			rol :STACKORIGIN+STACKWIDTH+9
 23658 84D4 18 69 15			add <adr.GANGSTERNAMES
 23659 84D7 85 82			sta :bp2
 23660 84D9 A9 A4			lda >adr.GANGSTERNAMES
 23661 84DB 65 AD			adc :STACKORIGIN+STACKWIDTH+9
 23662 84DD 85 83			sta :bp2+1
 23663 84DF A0 00			ldy #$00
 23664 84E1 B1 82			lda (:bp2),y
 23665 84E3 8D FA A8			sta M_READSTRINGI.R
 23666 84E6 C8				iny
 23667 84E7 B1 82			lda (:bp2),y
 23668 84E9 8D FB A8			sta M_READSTRINGI.R+1
 23669 84EC A9 0F			lda #$0F
 23670 84EE 8D F9 A8			sta M_READSTRINGI.LIMIT
 23671 84F1 20 F6 82			jsr M_READSTRINGI
 23672
 23673 				; optimize OK (setup_game.pas), line = 88
 23674
 23675 84F4 AD F0 A3			lda TMP
 23676 84F7 0A				asl @
 23677 84F8 A8				tay
 23678 84F9 B9 16 A4			lda adr.GANGSTERNAMES+1,y
 23679 84FC 85 81			sta :bp+1
 23680 84FE B9 15 A4			lda adr.GANGSTERNAMES,y
 23681 8501 A8				tay
 23682 8502 B1 80			lda (:bp),y
 23683 8504 F0 AA			jeq l_5BE8
 23684
 23685 				; optimize OK (setup_game.pas), line = 91
 23686
 23687 8506 AC 8A CD			ldy CURRENTPLAYER
 23688 8509 A9 01			lda #$01
 23689 850B 99 B1 CD			sta adr.PLNGANGSTERS,y
 23690
 23691 				; optimize OK (setup_game.pas), line = 92
 23692
 23693 850E AC F0 A3			ldy TMP
 23694 8511 AD FD A8			lda J
 23695 8514 99 91 CD			sta adr.PLGANGSTERS,y
 23696
 23697 				; --- RepeatUntilProlog
 23698 8517			l_5C11
 23699
 23700 				; optimize OK (setup_game.pas), line = 95
 23701
 23702 8517 A9 09			lda #$09
 23703 8519 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 23704 851C A9 06			lda #$06
 23705 851E 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 23706 8521 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 23707
 23708 				; optimize OK (setup_game.pas), line = 96
 23709
 23710 8524 A9 0B			lda #$0B
 23711 8526 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
 23712 8529 A9 0A			lda #$0A
 23713 852B 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
 23714 852E 20 AC 17			jsr B_CRT.CRT_GOTOXY
 23715
 23716 				; optimize OK (setup_game.pas), line = 97
 23717
 23718 8531 A9 00			lda #$00
 23719 8533 85 AD			sta :STACKORIGIN+STACKWIDTH+9
 23720 8535 AD 8A CD			lda CURRENTPLAYER
 23721 8538 0A				asl @
 23722 8539 26 AD			rol :STACKORIGIN+STACKWIDTH+9
 23723 853B 18 69 0D			add <adr.PLGANG
 23724 853E 85 82			sta :bp2
 23725 8540 A9 A4			lda >adr.PLGANG
 23726 8542 65 AD			adc :STACKORIGIN+STACKWIDTH+9
 23727 8544 85 83			sta :bp2+1
 23728 8546 A0 00			ldy #$00
 23729 8548 B1 82			lda (:bp2),y
 23730 854A 8D FA A8			sta M_READSTRINGI.R
 23731 854D C8				iny
 23732 854E B1 82			lda (:bp2),y
 23733 8550 8D FB A8			sta M_READSTRINGI.R+1
 23734 8553 A9 0F			lda #$0F
 23735 8555 8D F9 A8			sta M_READSTRINGI.LIMIT
 23736 8558 20 F6 82			jsr M_READSTRINGI
 23737
 23738 				; optimize OK (setup_game.pas), line = 98
 23739
 23740 855B AD 8A CD			lda CURRENTPLAYER
 23741 855E 0A				asl @
 23742 855F A8				tay
 23743 8560 B9 0E A4			lda adr.PLGANG+1,y
 23744 8563 85 81			sta :bp+1
 23745 8565 B9 0D A4			lda adr.PLGANG,y
 23746 8568 A8				tay
 23747 8569 B1 80			lda (:bp),y
 23748 856B F0 AA			jeq l_5C11
 23749
 23750 				; optimize OK (setup_game.pas), line = 100
 23751
 23752 856D A9 0C			lda #$0C
 23753 856F 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 23754 8572 A9 07			lda #$07
 23755 8574 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 23756 8577 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 23757
 23758 				; optimize OK (setup_game.pas), line = 101
 23759
 23760 857A A9 0E			lda #$0E
 23761 857C 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 23762 857F A9 0D			lda #$0D
 23763 8581 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 23764 8584 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 23765
 23766 				; optimize OK (setup_game.pas), line = 102
 23767
 23768 8587 A9 05			lda #$05
 23769 8589 8D 12 A7			sta GETANSWERCHAR.AKEY
 23770 858C A9 25			lda #$25
 23771 858E 8D 13 A7			sta GETANSWERCHAR.BKEY
 23772 8591 A9 2B			lda #$2B
 23773 8593 8D 14 A7			sta GETANSWERCHAR.A
 23774 8596 A9 2D			lda #$2D
 23775 8598 8D 15 A7			sta GETANSWERCHAR.B
 23776 859B 20 8C 1F			jsr GETANSWERCHAR
 23777 859E AD 16 A7			lda GETANSWERCHAR.RESULT
 23778 85A1 8D FE A8			sta R
 23779
 23780 				; optimize OK (setup_game.pas), line = 104
 23781
 23782 85A4 A9 01			lda #$01
 23783 85A6 38 ED FE A8			sub R
 23784 85AA AC F0 A3			ldy TMP
 23785 85AD 99 68 CD			sta adr.GANGSTERSEX,y
 23786
 23787 				; optimize OK (setup_game.pas), line = 106
 23788
 23789 85B0 A9 0F			lda #$0F
 23790 85B2 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 23791 85B5 A9 08			lda #$08
 23792 85B7 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 23793 85BA 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 23794
 23795 				; optimize FAIL (1, setup_game.pas), line = 107
 23796
 23797 85BD E8				inx
 23798 85BE AD F0 A3 95 94		mva TMP :STACKORIGIN,x
 23799 85C3 A9 00 95 A4			mva #$00 :STACKORIGIN+STACKWIDTH,x
 23800 85C7 A9 0A			lda #$0A
 23801 85C9 8D 06 A7			sta GETRANDOM.MINP
 23802 85CC A9 00			lda #$00
 23803 85CE 8D 07 A7			sta GETRANDOM.MINP+1
 23804 85D1 A9 23			lda #$23
 23805 85D3 8D 08 A7			sta GETRANDOM.MAXP
 23806 85D6 A9 00			lda #$00
 23807 85D8 8D 09 A7			sta GETRANDOM.MAXP+1
 23808 85DB A9 02			lda #$02
 23809 85DD 8D 0A A7			sta GETRANDOM.STEPS
 23810 85E0 A9 00			lda #$00
 23811 85E2 8D 0B A7			sta GETRANDOM.STEPS+1
 23812 85E5 20 D0 1E			jsr GETRANDOM
 23813 85E8 E8				inx
 23814 85E9 AD 0C A7 95 94		mva GETRANDOM.RESULT :STACKORIGIN,x
 23815 85EE AD 0D A7 95 A4		mva GETRANDOM.RESULT+1 :STACKORIGIN+STACKWIDTH,x
 23816 85F3 B4 93			ldy :STACKORIGIN-1,x
 23817 85F5 B5 94			lda :STACKORIGIN,x
 23818 85F7 99 C8 CC			sta adr.GANGSTERSTR,y
 23819 85FA CA				dex
 23820 85FB CA				dex
 23821
 23822 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', setup_game.pas), line = 108
 23823
 23824 85FC 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 23825
 23826 				; optimize OK (setup_game.pas), line = 110
 23827
 23828 85FF A9 10			lda #$10
 23829 8601 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 23830 8604 A9 09			lda #$09
 23831 8606 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 23832 8609 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 23833
 23834 				; optimize FAIL (1, setup_game.pas), line = 111
 23835
 23836 860C E8				inx
 23837 860D AD F0 A3 95 94		mva TMP :STACKORIGIN,x
 23838 8612 A9 00 95 A4			mva #$00 :STACKORIGIN+STACKWIDTH,x
 23839 8616 A9 0A			lda #$0A
 23840 8618 8D 06 A7			sta GETRANDOM.MINP
 23841 861B A9 00			lda #$00
 23842 861D 8D 07 A7			sta GETRANDOM.MINP+1
 23843 8620 A9 23			lda #$23
 23844 8622 8D 08 A7			sta GETRANDOM.MAXP
 23845 8625 A9 00			lda #$00
 23846 8627 8D 09 A7			sta GETRANDOM.MAXP+1
 23847 862A A9 02			lda #$02
 23848 862C 8D 0A A7			sta GETRANDOM.STEPS
 23849 862F A9 00			lda #$00
 23850 8631 8D 0B A7			sta GETRANDOM.STEPS+1
 23851 8634 20 D0 1E			jsr GETRANDOM
 23852 8637 E8				inx
 23853 8638 AD 0C A7 95 94		mva GETRANDOM.RESULT :STACKORIGIN,x
 23854 863D AD 0D A7 95 A4		mva GETRANDOM.RESULT+1 :STACKORIGIN+STACKWIDTH,x
 23855 8642 B4 93			ldy :STACKORIGIN-1,x
 23856 8644 B5 94			lda :STACKORIGIN,x
 23857 8646 99 E8 CC			sta adr.GANGSTERINT,y
 23858 8649 CA				dex
 23859 864A CA				dex
 23860
 23861 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', setup_game.pas), line = 112
 23862
 23863 864B 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 23864
 23865 				; optimize OK (setup_game.pas), line = 114
 23866
 23867 864E A9 11			lda #$11
 23868 8650 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 23869 8653 A9 0A			lda #$0A
 23870 8655 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 23871 8658 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 23872
 23873 				; optimize FAIL (1, setup_game.pas), line = 115
 23874
 23875 865B E8				inx
 23876 865C AD F0 A3 95 94		mva TMP :STACKORIGIN,x
 23877 8661 A9 00 95 A4			mva #$00 :STACKORIGIN+STACKWIDTH,x
 23878 8665 A9 0A			lda #$0A
 23879 8667 8D 06 A7			sta GETRANDOM.MINP
 23880 866A A9 00			lda #$00
 23881 866C 8D 07 A7			sta GETRANDOM.MINP+1
 23882 866F A9 23			lda #$23
 23883 8671 8D 08 A7			sta GETRANDOM.MAXP
 23884 8674 A9 00			lda #$00
 23885 8676 8D 09 A7			sta GETRANDOM.MAXP+1
 23886 8679 A9 02			lda #$02
 23887 867B 8D 0A A7			sta GETRANDOM.STEPS
 23888 867E A9 00			lda #$00
 23889 8680 8D 0B A7			sta GETRANDOM.STEPS+1
 23890 8683 20 D0 1E			jsr GETRANDOM
 23891 8686 E8				inx
 23892 8687 AD 0C A7 95 94		mva GETRANDOM.RESULT :STACKORIGIN,x
 23893 868C AD 0D A7 95 A4		mva GETRANDOM.RESULT+1 :STACKORIGIN+STACKWIDTH,x
 23894 8691 B4 93			ldy :STACKORIGIN-1,x
 23895 8693 B5 94			lda :STACKORIGIN,x
 23896 8695 99 08 CD			sta adr.GANGSTERBRUT,y
 23897 8698 CA				dex
 23898 8699 CA				dex
 23899
 23900 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', setup_game.pas), line = 116
 23901
 23902 869A 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 23903
 23904 				; optimize OK (setup_game.pas), line = 118
 23905
 23906 869D AC F0 A3			ldy TMP
 23907 86A0 A9 1E			lda #$1E
 23908 86A2 99 28 CD			sta adr.GANGSTERHEALTH,y
 23909
 23910 				; optimize OK (setup_game.pas), line = 119
 23911
 23912 86A5 A9 12			lda #$12
 23913 86A7 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 23914 86AA A9 0C			lda #$0C
 23915 86AC 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 23916 86AF 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 23917
 23918 				; optimize FAIL (1, setup_game.pas), line = 120
 23919
 23920 86B2 E8				inx
 23921 86B3 AD 8A CD 95 94		mva CURRENTPLAYER :STACKORIGIN,x
 23922 86B8 A9 00			lda #$00
 23923 86BA 16 94			asl :STACKORIGIN,x
 23924 86BC 2A				rol @
 23925 86BD 16 94			asl :STACKORIGIN,x
 23926 86BF 2A				rol @
 23927 86C0 95 A4			sta :STACKORIGIN+STACKWIDTH,x
 23928 86C2 A9 88			lda #$88
 23929 86C4 8D 06 A7			sta GETRANDOM.MINP
 23930 86C7 A9 13			lda #$13
 23931 86C9 8D 07 A7			sta GETRANDOM.MINP+1
 23932 86CC A9 0F			lda #$0F
 23933 86CE 8D 08 A7			sta GETRANDOM.MAXP
 23934 86D1 A9 27			lda #$27
 23935 86D3 8D 09 A7			sta GETRANDOM.MAXP+1
 23936 86D6 A9 FA			lda #$FA
 23937 86D8 8D 0A A7			sta GETRANDOM.STEPS
 23938 86DB A9 00			lda #$00
 23939 86DD 8D 0B A7			sta GETRANDOM.STEPS+1
 23940 86E0 20 D0 1E			jsr GETRANDOM
 23941 86E3 B4 94			ldy :STACKORIGIN,x
 23942 86E5 AD 0C A7			lda GETRANDOM.RESULT
 23943 86E8 99 30 C9			sta adr.PLMONEY,y
 23944 86EB AD 0D A7			lda GETRANDOM.RESULT+1
 23945 86EE 99 31 C9			sta adr.PLMONEY+1,y
 23946 86F1 A9 00			lda #$00
 23947 86F3 99 32 C9			sta adr.PLMONEY+2,y
 23948 86F6 A9 00			lda #$00
 23949 86F8 99 33 C9			sta adr.PLMONEY+3,y
 23950 86FB CA				dex
 23951
 23952 				; optimize FAIL ('WAITFORKEY', setup_game.pas), line = 121
 23953
 23954 86FC 20 4A 1E			jsr WAITFORKEY
 23955
 23956 				; --- ForToDoEpilog
 23957 86FF EE FD A8			inc J
 23958 8702 F0 03 4C 76 84		jne l_5BBC
 23959 8707			l_5BCA
 23960
 23961 				; optimize FAIL ('INITPLAYERS', setup_game.pas), line = 125
 23962
 23963 8707 20 47 2E			jsr INITPLAYERS
 23964
 23965 				; optimize OK (setup_game.pas), line = 126
 23966
 23967 870A A9 00			lda #$00
 23968 870C 8D 8A CD			sta CURRENTPLAYER
 23969
 23970 				; optimize OK (setup_game.pas), line = 127
 23971
 23972 870F A9 01			lda #$01
 23973 8711 8D C2 CA			sta CURRENTMONTH
 23974
 23975 				; optimize OK (setup_game.pas), line = 128
 23976
 23977 8714 A9 00			lda #$00
 23978 8716 8D C3 CA			sta CURRENTYEAR
 23979
 23980 				; ------------------------------------------------------------
 23981
 23982 = A8FD			J	= DATAORIGIN+$0CA7
 23983 = A8FE			R	= DATAORIGIN+$0CA8
 23984 = A8FF			K	= DATAORIGIN+$0CA9
 23985
 23986 = A8FD			@VarData	= J
 23987 = 0003			@VarDataSize	= 3
 23988
 23989 8719			@exit
 23990 					.ifdef @new
 23991 					lda <@VarData
 23992 					sta :ztmp
 23993 					lda >@VarData
 23994 					ldy #@VarDataSize-1
 23995 					jmp @FreeMem
 23996 					els
 23997 8719 60				rts						; ret
 23998 					eif
 23999 				.endl
 24000
 24001 871A			.local	JOBWORKING					; PROCEDURE
 24002
 24003 				; optimize FAIL ('ENABLECONSOLE', updates.pas), line = 5
 24004
 24005 871A 20 B0 27			jsr ENABLECONSOLE
 24006
 24007 				; optimize FAIL ('B_CRT.CRT_CLEAR.@00', updates.pas), line = 6
 24008
 24009 871D 20 84 17			jsr B_CRT.CRT_CLEAR.@00
 24010
 24011 				; optimize FAIL ('B_CRT.CRT_WRITECENTERED.@02018986000001000180000', updates.pas), line = 7
 24012
 24013 8720 E8				inx
 24014 8721 AC 99 9A 84 82 AC + 	mwy LOC_NAME :bp2
 24015 872B A0 00			ldy #$00
 24016 872D B1 82 99 9D A1 C8 + 	mva:rne (:bp2),y B_CRT.CRT_WRITECENTERED.@02018986000001000180000.adr.S,y+
 24017 8735 E8				inx
 24018 8736 A9 01 95 94			mva #$01 :STACKORIGIN,x
 24019 873A 20 DF 19			jsr B_CRT.CRT_WRITECENTERED.@02018986000001000180000
 24020
 24021 				; optimize OK (updates.pas), line = 8
 24022
 24023 873D A9 00			lda #$00
 24024 873F 8D A0 A3			sta B_CRT.CRT_INVERT.X
 24025 8742 A9 01			lda #$01
 24026 8744 8D A1 A3			sta B_CRT.CRT_INVERT.Y
 24027 8747 AD 7D 9E			lda B_CRT.CRT_SCREENWIDTH
 24028 874A 8D A2 A3			sta B_CRT.CRT_INVERT.WIDTH
 24029 874D 20 70 1A			jsr B_CRT.CRT_INVERT
 24030
 24031 				; optimize OK (updates.pas), line = 9
 24032
 24033 8750 A9 00			lda #$00
 24034 8752 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
 24035 8755 A9 03			lda #$03
 24036 8757 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
 24037 875A 20 AC 17			jsr B_CRT.CRT_GOTOXY
 24038
 24039 875D			@exit
 24040 					.ifdef @new
 24041 					lda <@VarData
 24042 					sta :ztmp
 24043 					lda >@VarData
 24044 					ldy #@VarDataSize-1
 24045 					jmp @FreeMem
 24046 					els
 24047 875D 60				rts						; ret
 24048 					eif
 24049 				.endl
 24050
 24051 875E			.local	UPDATERANK					; PROCEDURE
 24052
 24053 				; optimize OK (updates.pas), line = 20
 24054
 24055 875E AC 8A CD			ldy CURRENTPLAYER
 24056 8761 B9 98 C9			lda adr.PLRANK,y
 24057 8764 8D 01 A9			sta OLDRANK
 24058
 24059 				; optimize OK (updates.pas), line = 21
 24060
 24061 8767 B9 A0 C9			lda adr.PLNEWPOINTS,y
 24062 876A 30 31			jmi l_5CCA
 24063 876C F0 2F			jeq l_5CCA
 24064
 24065 				; optimize OK (updates.pas), line = 22
 24066
 24067 876E B9 9C C9			lda adr.PLPOINTS,y
 24068 8771 18 79 A0 C9			add adr.PLNEWPOINTS,y
 24069 8775 99 9C C9			sta adr.PLPOINTS,y
 24070
 24071 				; optimize OK (updates.pas), line = 25
 24072
 24073 8778 85 9D			sta :STACKORIGIN+9
 24074 877A AD C5 CA			lda GAMEPOINTS
 24075 877D 18 69 0A			add #$0A
 24076 8780 85 9E			sta :STACKORIGIN+10
 24077 8782 AD C6 CA			lda GAMEPOINTS+1
 24078 8785 69 00			adc #$00
 24079 8787 C9 00			cmp #$00
 24080 8789 D0 04			bne @+
 24081 878B A5 9E			lda :STACKORIGIN+10
 24082 878D C5 9D			cmp :STACKORIGIN+9
 24083 				@
 24084 878F B0 09			jcs l_5CFA
 24085 8791 AD C5 CA			lda GAMEPOINTS
 24086 8794 18 69 0A			add #$0A
 24087 8797 99 9C C9			sta adr.PLPOINTS,y
 24088 879A			l_5CFA
 24089 879A 4C D5 87			jmp l_5D12
 24090 879D			l_5CCA
 24091
 24092 				; optimize OK (updates.pas), line = 29
 24093
 24094 879D AC 8A CD			ldy CURRENTPLAYER
 24095 87A0 B9 9C C9			lda adr.PLPOINTS,y
 24096 87A3 85 9D			sta :STACKORIGIN+9
 24097 87A5 B9 A0 C9			lda adr.PLNEWPOINTS,y
 24098 87A8 85 9E			sta :STACKORIGIN+10
 24099 87AA A0 00			ldy #$00
 24100 87AC A5 9E			lda :STACKORIGIN+10
 24101 87AE 10 01			spl
 24102 87B0 88				dey
 24103 87B1 84 AE			sty :STACKORIGIN+STACKWIDTH+10
 24104 87B3 A5 9D			lda :STACKORIGIN+9
 24105 87B5 18 65 9E			add :STACKORIGIN+10
 24106 87B8 8D 03 A9			sta K
 24107 87BB A9 00			lda #$00
 24108 87BD 65 AE			adc :STACKORIGIN+STACKWIDTH+10
 24109 87BF 8D 04 A9			sta K+1
 24110
 24111 				; optimize OK (updates.pas), line = 30
 24112
 24113 87C2 10 08			jpl l_5D35
 24114 87C4 A9 00			lda #$00
 24115 87C6 8D 03 A9			sta K
 24116 87C9 8D 04 A9			sta K+1
 24117 87CC			l_5D35
 24118
 24119 				; optimize OK (updates.pas), line = 31
 24120
 24121 87CC AC 8A CD			ldy CURRENTPLAYER
 24122 87CF AD 03 A9			lda K
 24123 87D2 99 9C C9			sta adr.PLPOINTS,y
 24124 87D5			l_5D12
 24125
 24126 				; optimize OK (updates.pas), line = 33
 24127
 24128 87D5 AC 8A CD			ldy CURRENTPLAYER
 24129 87D8 A9 00			lda #$00
 24130 87DA 99 A0 C9			sta adr.PLNEWPOINTS,y
 24131
 24132 				; optimize OK (updates.pas), line = 35
 24133
 24134 87DD A9 0A			lda #$0A
 24135 87DF 85 8C			sta @WORD.DIV.B
 24136 87E1 A9 00			lda #$00
 24137 87E3 85 8D			sta @WORD.DIV.B+1
 24138 87E5 AD C5 CA			lda GAMEPOINTS
 24139 87E8 85 84			sta @WORD.DIV.A
 24140 87EA AD C6 CA			lda GAMEPOINTS+1
 24141 87ED 85 85			sta @WORD.DIV.A+1
 24142 87EF 20 24 11			jsr @WORD.DIV
 24143 87F2 A5 84			lda :eax
 24144 87F4 8D 05 A9			sta D
 24145
 24146 				; optimize OK (updates.pas), line = 36
 24147
 24148 87F7 AC 8A CD			ldy CURRENTPLAYER
 24149 87FA B9 9C C9			lda adr.PLPOINTS,y
 24150 87FD 18 69 05			add #$05
 24151 8800 85 84			sta @WORD.DIV.A
 24152 8802 A9 00			lda #$00
 24153 8804 69 00			adc #$00
 24154 8806 85 85			sta @WORD.DIV.A+1
 24155 8808 AD 05 A9			lda D
 24156 880B 85 8C			sta @WORD.DIV.B
 24157 880D A9 00			lda #$00
 24158 880F 85 8D			sta @WORD.DIV.B+1
 24159 8811 20 24 11			jsr @WORD.DIV
 24160 8814 A5 84			lda :eax
 24161 8816 8D 02 A9			sta NEWRANK
 24162
 24163 				; optimize OK (updates.pas), line = 37
 24164
 24165 8819 C9 0B			cmp #$0B
 24166 881B 90 05			jcc l_5D79
 24167 881D A9 0A			lda #$0A
 24168 881F 8D 02 A9			sta NEWRANK
 24169 8822			l_5D79
 24170
 24171 				; optimize OK (updates.pas), line = 43
 24172
 24173 8822 AD 01 A9			lda OLDRANK
 24174 8825 CD 02 A9			cmp NEWRANK
 24175 8828 90 03 4C 44 89		jcs l_5D94
 24176
 24177 				; optimize FAIL ('BLACKCONSOLE', updates.pas), line = 45
 24178
 24179 882D 20 8E 27			jsr BLACKCONSOLE
 24180
 24181 				; optimize OK (updates.pas), line = 46
 24182
 24183 8830 A9 13			lda #$13
 24184 8832 20 1F 29			jsr LOADLOCATION
 24185
 24186 				; optimize OK (updates.pas), line = 47
 24187
 24188 8835 A9 00			lda #$00
 24189 8837 8D AE EA			sta PLAYERPOS_X
 24190
 24191 				; optimize OK (updates.pas), line = 48
 24192
 24193 883A 8D AF EA			sta PLAYERPOS_Y
 24194
 24195 				; optimize OK (updates.pas), line = 49
 24196
 24197 883D 85 88			sta SYSTEM.FILLCHAR.@03018000001810000188000.A
 24198 883F A9 DC			lda #$DC
 24199 8841 85 89			sta SYSTEM.FILLCHAR.@03018000001810000188000.A+1
 24200 8843 A9 C0			lda #$C0
 24201 8845 85 8C			sta SYSTEM.FILLCHAR.@03018000001810000188000.COUNT
 24202 8847 A9 03			lda #$03
 24203 8849 85 8D			sta SYSTEM.FILLCHAR.@03018000001810000188000.COUNT+1
 24204 884B A9 00			lda #$00
 24205 884D 85 84			sta SYSTEM.FILLCHAR.@03018000001810000188000.VALUE
 24206 884F				.LOCAL +MAIN.SYSTEM.FILLCHAR.@03018000001810000188000
 24207 884F				m@INLINE
Macro: MAIN.SYSTEM.FILLCHAR.@03018000001810000188000.M@INLINE [Source: main_PL.a65]
     4 884F 20 2C 0F			jsr @fill
Source: main_PL.a65
 24208 					.ENDL
 24209
 24210 				; optimize OK (updates.pas), line = 50
 24211
 24212 8852 AD 8A CD			lda CURRENTPLAYER
 24213 8855 0A				asl @
 24214 8856 0A				asl @
 24215 8857 0A				asl @
 24216 8858 8D F0 A3			sta TMP
 24217
 24218 				; optimize OK (updates.pas), line = 51
 24219
 24220 885B A8				tay
 24221 885C B9 68 CD			lda adr.GANGSTERSEX,y
 24222 885F D0 0C			jne l_5DC3
 24223
 24224 				; optimize OK (updates.pas), line = 52
 24225
 24226 8861 AD 95 9B			lda WANTED_M_FNAME
 24227 8864 8D 36 A7			sta LOADXAPL.FNAME
 24228 8867 AD 96 9B			lda WANTED_M_FNAME+1
 24229 886A 4C 76 88			jmp l_5DD1
 24230 886D			l_5DC3
 24231
 24232 				; optimize OK (updates.pas), line = 54
 24233
 24234 886D AD 97 9B			lda WANTED_F_FNAME
 24235 8870 8D 36 A7			sta LOADXAPL.FNAME
 24236 8873 AD 98 9B			lda WANTED_F_FNAME+1
 24237 8876			l_5DD1
 24238 8876 8D 37 A7			sta LOADXAPL.FNAME+1
 24239 8879 A9 00			lda #$00
 24240 887B 8D 38 A7			sta LOADXAPL.OUTPUTPOINTER
 24241 887E A9 D8			lda #$D8
 24242 8880 8D 39 A7			sta LOADXAPL.OUTPUTPOINTER+1
 24243 8883 20 60 27			jsr LOADXAPL
 24244
 24245 				; optimize FAIL ('ENABLEMAPCONSOLE', updates.pas), line = 55
 24246
 24247 8886 20 F0 27			jsr ENABLEMAPCONSOLE
 24248
 24249 				; optimize OK (updates.pas), line = 56
 24250
 24251 8889 A9 04			lda #$04
 24252 888B 8D F6 EA			sta MAPCOLORA
 24253
 24254 				; optimize OK (updates.pas), line = 57
 24255
 24256 888E A9 0A			lda #$0A
 24257 8890 8D F7 EA			sta MAPCOLORB
 24258
 24259 				; optimize OK (updates.pas), line = 58
 24260
 24261 8893 A9 13			lda #$13
 24262 8895 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 24263 8898 A9 03			lda #$03
 24264 889A 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 24265 889D 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 24266
 24267 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', updates.pas), line = 59
 24268
 24269 88A0 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 24270
 24271 				; optimize OK (updates.pas), line = 60
 24272
 24273 88A3 A9 04			lda #$04
 24274 88A5 20 C6 1C			jsr CRT_WRITE_LOCSTR
 24275
 24276 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', updates.pas), line = 61
 24277
 24278 88A8 E8				inx
 24279 88A9 AD F0 A3			lda TMP
 24280 88AC 0A				asl @
 24281 88AD A8				tay
 24282 88AE B9 15 A4			lda adr.GANGSTERNAMES,y
 24283 88B1 95 94			sta :STACKORIGIN,x
 24284 88B3 B9 16 A4			lda adr.GANGSTERNAMES+1,y
 24285 88B6 95 A4			sta :STACKORIGIN+STACKWIDTH,x
 24286 88B8 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 24287
 24288 				; optimize OK (updates.pas), line = 62
 24289
 24290 88BB A9 05			lda #$05
 24291 88BD 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 24292
 24293 				; optimize OK (updates.pas), line = 63
 24294
 24295 88C0 A9 06			lda #$06
 24296 88C2 20 C6 1C			jsr CRT_WRITE_LOCSTR
 24297
 24298 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', updates.pas), line = 64
 24299
 24300 88C5 E8				inx
 24301 88C6 AD 8A CD			lda CURRENTPLAYER
 24302 88C9 0A				asl @
 24303 88CA A8				tay
 24304 88CB B9 0D A4			lda adr.PLGANG,y
 24305 88CE 95 94			sta :STACKORIGIN,x
 24306 88D0 B9 0E A4			lda adr.PLGANG+1,y
 24307 88D3 95 A4			sta :STACKORIGIN+STACKWIDTH,x
 24308 88D5 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 24309
 24310 				; optimize OK (updates.pas), line = 65
 24311
 24312 88D8 A9 07			lda #$07
 24313 88DA 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 24314
 24315 				; optimize OK (updates.pas), line = 66
 24316
 24317 88DD A9 08			lda #$08
 24318 88DF 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 24319
 24320 				; optimize OK (updates.pas), line = 67
 24321
 24322 88E2 A9 09			lda #$09
 24323 88E4 20 C6 1C			jsr CRT_WRITE_LOCSTR
 24324
 24325 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', updates.pas), line = 68
 24326
 24327 88E7 E8				inx
 24328 88E8 AD 02 A9			lda NEWRANK
 24329 88EB 0A				asl @
 24330 88EC A8				tay
 24331 88ED B9 55 A4			lda adr.RANKNAMES,y
 24332 88F0 95 94			sta :STACKORIGIN,x
 24333 88F2 B9 56 A4			lda adr.RANKNAMES+1,y
 24334 88F5 95 A4			sta :STACKORIGIN+STACKWIDTH,x
 24335 88F7 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 24336
 24337 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', updates.pas), line = 69
 24338
 24339 88FA E8				inx
 24340 88FB A9 85 95 94			mva #$85 :STACKORIGIN,x
 24341 88FF A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 24342 8903 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 24343
 24344 				; optimize OK (updates.pas), line = 70
 24345
 24346 8906 AC 8A CD			ldy CURRENTPLAYER
 24347 8909 B9 9C C9			lda adr.PLPOINTS,y
 24348 890C 20 7E 18			jsr B_CRT.CRT_WRITE.@010180000
 24349
 24350 				; optimize OK (updates.pas), line = 71
 24351
 24352 890F A9 0A			lda #$0A
 24353 8911 20 C6 1C			jsr CRT_WRITE_LOCSTR
 24354
 24355 				; optimize FAIL ('CRT_READKEYORFIRE', updates.pas), line = 72
 24356
 24357 8914 20 04 1E			jsr CRT_READKEYORFIRE
 24358
 24359 				; optimize OK (updates.pas), line = 73
 24360
 24361 8917 A9 88			lda #$88
 24362 8919 8D F6 EA			sta MAPCOLORA
 24363
 24364 				; optimize OK (updates.pas), line = 74
 24365
 24366 891C A9 06			lda #$06
 24367 891E 8D F7 EA			sta MAPCOLORB
 24368
 24369 				; optimize FAIL ('BLACKCONSOLE', updates.pas), line = 75
 24370
 24371 8921 20 8E 27			jsr BLACKCONSOLE
 24372
 24373 				; optimize OK (updates.pas), line = 76
 24374
 24375 8924 A9 58			lda #$58
 24376 8926 85 88			sta SYSTEM.FILLCHAR.@03018000001810000188000.A
 24377 8928 A9 DE			lda #$DE
 24378 892A 85 89			sta SYSTEM.FILLCHAR.@03018000001810000188000.A+1
 24379 892C A9 68			lda #$68
 24380 892E 85 8C			sta SYSTEM.FILLCHAR.@03018000001810000188000.COUNT
 24381 8930 A9 01			lda #$01
 24382 8932 85 8D			sta SYSTEM.FILLCHAR.@03018000001810000188000.COUNT+1
 24383 8934 A9 00			lda #$00
 24384 8936 85 84			sta SYSTEM.FILLCHAR.@03018000001810000188000.VALUE
 24385 8938				.LOCAL +MAIN.SYSTEM.FILLCHAR.@03018000001810000188000
 24386 8938				m@INLINE
Macro: MAIN.SYSTEM.FILLCHAR.@03018000001810000188000.M@INLINE [Source: main_PL.a65]
     4 8938 20 2C 0F			jsr @fill
Source: main_PL.a65
 24387 					.ENDL
 24388
 24389 				; optimize OK (updates.pas), line = 77
 24390
 24391 893B AC 8A CD			ldy CURRENTPLAYER
 24392 893E AD 02 A9			lda NEWRANK
 24393 8941 99 98 C9			sta adr.PLRANK,y
 24394 8944			l_5D94
 24395
 24396 				; ------------------------------------------------------------
 24397
 24398 = A901			OLDRANK	= DATAORIGIN+$0CAB
 24399 = A902			NEWRANK	= DATAORIGIN+$0CAC
 24400 = A903			K	= DATAORIGIN+$0CAD
 24401 = A905			D	= DATAORIGIN+$0CAF
 24402
 24403 = A901			@VarData	= OLDRANK
 24404 = 0005			@VarDataSize	= 5
 24405
 24406 8944			@exit
 24407 					.ifdef @new
 24408 					lda <@VarData
 24409 					sta :ztmp
 24410 					lda >@VarData
 24411 					ldy #@VarDataSize-1
 24412 					jmp @FreeMem
 24413 					els
 24414 8944 60				rts						; ret
 24415 					eif
 24416 				.endl
 24417
 24418 8945			.local	UPDATERENT					; PROCEDURE
 24419
 24420 				; optimize OK (updates.pas), line = 86
 24421
 24422 8945 A9 00			lda #$00
 24423 8947 8D 09 A9			sta R
 24424
 24425 894A			l_5E31
 24426 				; --- ForToDoCondition
 24427 894A AC 09 A9			ldy R
 24428 894D C0 04			cpy #$04
 24429 894F 90 03 4C 97 8A		jcs l_5E3F
 24430
 24431 				; optimize OK (updates.pas), line = 88
 24432
 24433 8954 B9 8C CD			lda adr.PLRENT,y
 24434 8957 CD 8A CD			cmp CURRENTPLAYER
 24435 895A F0 03			jeq l_5E56
 24436 895C 4C 8F 8A			jmp c_5E31
 24437 895F			l_5E56
 24438
 24439 				; optimize OK (updates.pas), line = 90
 24440
 24441 895F AC 8A CD			ldy CURRENTPLAYER
 24442 8962 B9 74 C9			lda adr.PLRENTMONTHS,y
 24443 8965 F0 09			jeq l_5E6E
 24444
 24445 				; optimize OK (updates.pas), line = 92
 24446
 24447 8967 38 E9 01			sub #$01
 24448 896A 99 74 C9			sta adr.PLRENTMONTHS,y
 24449 896D 4C 97 8A			jmp @exit
 24450 8970			l_5E6E
 24451
 24452 				; optimize OK (updates.pas), line = 96
 24453
 24454 8970 A9 13			lda #$13
 24455 8972 20 1F 29			jsr LOADLOCATION
 24456
 24457 				; optimize FAIL ('ENABLECONSOLE', updates.pas), line = 99
 24458
 24459 8975 20 B0 27			jsr ENABLECONSOLE
 24460
 24461 				; optimize FAIL ('B_CRT.CRT_CLEAR.@00', updates.pas), line = 100
 24462
 24463 8978 20 84 17			jsr B_CRT.CRT_CLEAR.@00
 24464
 24465 				; optimize OK (updates.pas), line = 101
 24466
 24467 897B A9 01			lda #$01
 24468 897D 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 24469 8980 A9 0D			lda #$0D
 24470 8982 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 24471 8985 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 24472
 24473 				; optimize OK (updates.pas), line = 102
 24474
 24475 8988 A9 00			lda #$00
 24476 898A 8D A0 A3			sta B_CRT.CRT_INVERT.X
 24477 898D A9 01			lda #$01
 24478 898F 8D A1 A3			sta B_CRT.CRT_INVERT.Y
 24479 8992 AD 7D 9E			lda B_CRT.CRT_SCREENWIDTH
 24480 8995 8D A2 A3			sta B_CRT.CRT_INVERT.WIDTH
 24481 8998 20 70 1A			jsr B_CRT.CRT_INVERT
 24482
 24483 				; optimize OK (updates.pas), line = 103
 24484
 24485 899B A9 00			lda #$00
 24486 899D 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
 24487 89A0 A9 03			lda #$03
 24488 89A2 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
 24489 89A5 20 AC 17			jsr B_CRT.CRT_GOTOXY
 24490
 24491 				; optimize FAIL (1, updates.pas), line = 105
 24492
 24493 89A8 E8				inx
 24494 89A9 A9 FA 95 94			mva #$FA :STACKORIGIN,x
 24495 89AD A9 C8			lda #$C8
 24496 89AF 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 24497 89B2 B5 94			lda :STACKORIGIN,x
 24498 89B4 18 6D 62 9C			add SYSTEM.RANDOM.@010180000.RESULT
 24499 89B8 8D 06 A9			sta PR
 24500 89BB A9 00			lda #$00
 24501 89BD 69 00			adc #$00
 24502 89BF 8D 07 A9			sta PR+1
 24503 89C2 CA				dex
 24504
 24505 				; optimize OK (updates.pas), line = 106
 24506
 24507 89C3 A9 0E			lda #$0E
 24508 89C5 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 24509
 24510 				; optimize OK (updates.pas), line = 107
 24511
 24512 89C8 A9 0F			lda #$0F
 24513 89CA 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 24514
 24515 				; optimize OK (updates.pas), line = 112
 24516
 24517 89CD AD 8A CD			lda CURRENTPLAYER
 24518 89D0 0A				asl @
 24519 89D1 0A				asl @
 24520 89D2 A8				tay
 24521 89D3				.LOCAL
 24522 89D3 A9 00			lda #$00
 24523 89D5 38 F9 33 C9			sub adr.PLMONEY+3,y
 24524 89D9 D0 21			bne L4
 24525 89DB A9 00			lda #$00
 24526 89DD D9 32 C9			cmp adr.PLMONEY+2,y
 24527 89E0 D0 0E			bne L1
 24528 89E2 AD 07 A9			lda PR+1
 24529 89E5 D9 31 C9			cmp adr.PLMONEY+1,y
 24530 89E8 D0 06			bne L1
 24531 89EA AD 06 A9			lda PR
 24532 89ED D9 30 C9			cmp adr.PLMONEY,y
 24533 89F0 F0 10		L1	beq L5
 24534 89F2 B0 04			bcs L3
 24535 89F4 A9 FF			lda #$FF
 24536 89F6 D0 0A			bne L5
 24537 89F8 A9 01		L3	lda #$01
 24538 89FA D0 06			bne L5
 24539 89FC 50 04		L4	bvc L5
 24540 89FE 49 FF			eor #$FF
 24541 8A00 09 01			ora #$01
 24542 8A02			L5
 24543 					.ENDL
 24544 8A02 10 38			jpl l_5EB2
 24545
 24546 				; optimize OK (updates.pas), line = 114
 24547
 24548 8A04 A9 10			lda #$10
 24549 8A06 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 24550
 24551 				; optimize OK (updates.pas), line = 115
 24552
 24553 8A09 A9 11			lda #$11
 24554 8A0B 20 C6 1C			jsr CRT_WRITE_LOCSTR
 24555
 24556 				; optimize OK (updates.pas), line = 116
 24557
 24558 8A0E AD 06 A9			lda PR
 24559 8A11 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 24560 8A14 AD 07 A9			lda PR+1
 24561 8A17 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 24562 8A1A 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 24563
 24564 				; optimize OK (updates.pas), line = 117
 24565
 24566 8A1D A9 12			lda #$12
 24567 8A1F 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 24568
 24569 				; optimize OK (updates.pas), line = 118
 24570
 24571 8A22 AD 06 A9			lda PR
 24572 8A25 8D CD A7			sta SUBMONEY.AMOUNT
 24573 8A28 AD 07 A9			lda PR+1
 24574 8A2B 8D CE A7			sta SUBMONEY.AMOUNT+1
 24575 8A2E 20 C2 2F			jsr SUBMONEY
 24576
 24577 				; optimize OK (updates.pas), line = 119
 24578
 24579 8A31 AC 8A CD			ldy CURRENTPLAYER
 24580 8A34 A9 00			lda #$00
 24581 8A36 99 74 C9			sta adr.PLRENTMONTHS,y
 24582 8A39 4C 8C 8A			jmp l_5ECF
 24583 8A3C			l_5EB2
 24584
 24585 				; optimize OK (updates.pas), line = 126
 24586
 24587 8A3C A9 13			lda #$13
 24588 8A3E 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 24589
 24590 				; optimize OK (updates.pas), line = 127
 24591
 24592 8A41 AC 8A CD			ldy CURRENTPLAYER
 24593 8A44 B9 B1 CD			lda adr.PLNGANGSTERS,y
 24594 8A47 C9 02			cmp #$02
 24595 8A49 90 39			jcc l_5EE6
 24596
 24597 				; optimize OK (updates.pas), line = 129
 24598
 24599 8A4B A9 14			lda #$14
 24600 8A4D 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 24601
 24602 				; optimize OK (updates.pas), line = 130
 24603
 24604 8A50 A9 15			lda #$15
 24605 8A52 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 24606
 24607 				; optimize OK (updates.pas), line = 131
 24608
 24609 8A55 A9 00			lda #$00
 24610 8A57 A8				tay
 24611
 24612 8A58			l_5EF4
 24613 				; --- ForToDoCondition
 24614 8A58 C0 20			cpy #$20
 24615 8A5A B0 10			jcs l_5F02
 24616
 24617 				; optimize OK (updates.pas), line = 132
 24618
 24619 8A5C B9 91 CD			lda adr.PLGANGSTERS,y
 24620 8A5F CD 8A CD			cmp CURRENTPLAYER
 24621 8A62 D0 05			jne l_5F19
 24622 8A64 A9 63			lda #$63
 24623 8A66 99 91 CD			sta adr.PLGANGSTERS,y
 24624 8A69			l_5F19
 24625
 24626 				; --- ForToDoEpilog
 24627 8A69 C8				iny
 24628 8A6A D0 EC			jne l_5EF4
 24629 8A6C			l_5F02
 24630 8A6C 8C 08 A9			sty K
 24631
 24632 				; optimize OK (updates.pas), line = 135
 24633
 24634 8A6F AD 8A CD			lda CURRENTPLAYER
 24635 8A72 0A				asl @
 24636 8A73 0A				asl @
 24637 8A74 0A				asl @
 24638 8A75 A8				tay
 24639 8A76 AD 8A CD			lda CURRENTPLAYER
 24640 8A79 99 91 CD			sta adr.PLGANGSTERS,y
 24641
 24642 				; optimize OK (updates.pas), line = 136
 24643
 24644 8A7C AC 8A CD			ldy CURRENTPLAYER
 24645 8A7F A9 01			lda #$01
 24646 8A81 99 B1 CD			sta adr.PLNGANGSTERS,y
 24647 8A84			l_5EE6
 24648
 24649 				; optimize OK (updates.pas), line = 139
 24650
 24651 8A84 AC 09 A9			ldy R
 24652 8A87 A9 63			lda #$63
 24653 8A89 99 8C CD			sta adr.PLRENT,y
 24654 8A8C			l_5ECF
 24655
 24656 				; optimize FAIL ('WAITFORKEY', updates.pas), line = 141
 24657
 24658 8A8C 20 4A 1E			jsr WAITFORKEY
 24659
 24660 				; --- ForToDoEpilog
 24661 8A8F			c_5E31
 24662 8A8F EE 09 A9			inc R
 24663 8A92 F0 03 4C 4A 89		jne l_5E31
 24664 8A97			l_5E3F
 24665
 24666 				; ------------------------------------------------------------
 24667
 24668 = A906			PR	= DATAORIGIN+$0CB0
 24669 = A908			K	= DATAORIGIN+$0CB2
 24670 = A909			R	= DATAORIGIN+$0CB3
 24671
 24672 = A906			@VarData	= PR
 24673 = 0004			@VarDataSize	= 4
 24674
 24675 8A97			@exit
 24676 					.ifdef @new
 24677 					lda <@VarData
 24678 					sta :ztmp
 24679 					lda >@VarData
 24680 					ldy #@VarDataSize-1
 24681 					jmp @FreeMem
 24682 					els
 24683 8A97 60				rts						; ret
 24684 					eif
 24685 				.endl
 24686
 24687 8A98			.local	UPDATELOANSHARK					; PROCEDURE
 24688
 24689 				; optimize OK (updates.pas), line = 150
 24690
 24691 8A98 AD 8A CD			lda CURRENTPLAYER
 24692 8A9B 0A				asl @
 24693 8A9C A8				tay
 24694 8A9D B9 A4 C9			lda adr.PLLOANINVEST,y
 24695 8AA0 8D 0A A9			sta P
 24696 8AA3 B9 A5 C9			lda adr.PLLOANINVEST+1,y
 24697 8AA6 8D 0B A9			sta P+1
 24698
 24699 				; optimize OK (updates.pas), line = 152
 24700
 24701 8AA9 0D 0A A9			ora P
 24702 8AAC D0 03 4C 30 8B		jeq l_5F68
 24703
 24704 				; optimize OK (updates.pas), line = 154
 24705
 24706 8AB1 A9 15			lda #$15
 24707 8AB3 20 1F 29			jsr LOADLOCATION
 24708
 24709 				; optimize FAIL ('JOBWORKING', updates.pas), line = 155
 24710
 24711 8AB6 20 1A 87			jsr JOBWORKING
 24712
 24713 				; optimize OK (updates.pas), line = 156
 24714
 24715 8AB9 A9 03			lda #$03
 24716 8ABB 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 24717 8ABE AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 24718 8AC1 D0 5D			jne l_5F7D
 24719
 24720 				; optimize FAIL (1, updates.pas), line = 158
 24721
 24722 8AC3 E8				inx
 24723 8AC4 AD 0A A9 95 94		mva P :STACKORIGIN,x
 24724 8AC9 AD 0B A9 95 A4		mva P+1 :STACKORIGIN+STACKWIDTH,x
 24725 8ACE E8				inx
 24726 8ACF A9 06 95 94			mva #$06 :STACKORIGIN,x
 24727 8AD3 20 2D 0E			jsr @shrAX_CL
 24728 8AD6 CA				dex
 24729 8AD7 A9 00			lda #$00
 24730 8AD9 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 24731 8ADC B5 94			lda :STACKORIGIN,x
 24732 8ADE 18 6D 62 9C			add SYSTEM.RANDOM.@010180000.RESULT
 24733 8AE2 8D 0A A9			sta P
 24734 8AE5 B5 A4			lda :STACKORIGIN+STACKWIDTH,x
 24735 8AE7 69 00			adc #$00
 24736 8AE9 8D 0B A9			sta P+1
 24737 8AEC CA				dex
 24738
 24739 				; optimize OK (updates.pas), line = 159
 24740
 24741 8AED AD 0A A9			lda P
 24742 8AF0 8D CB A7			sta ADDMONEY.AMOUNT
 24743 8AF3 AD 0B A9			lda P+1
 24744 8AF6 8D CC A7			sta ADDMONEY.AMOUNT+1
 24745 8AF9 20 98 2F			jsr ADDMONEY
 24746
 24747 				; optimize OK (updates.pas), line = 160
 24748
 24749 8AFC A9 01			lda #$01
 24750 8AFE 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 24751
 24752 				; optimize OK (updates.pas), line = 161
 24753
 24754 8B01 A9 02			lda #$02
 24755 8B03 20 C6 1C			jsr CRT_WRITE_LOCSTR
 24756
 24757 				; optimize OK (updates.pas), line = 162
 24758
 24759 8B06 AD 0A A9			lda P
 24760 8B09 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 24761 8B0C AD 0B A9			lda P+1
 24762 8B0F 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 24763 8B12 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 24764
 24765 				; optimize OK (updates.pas), line = 163
 24766
 24767 8B15 A9 03			lda #$03
 24768 8B17 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 24769
 24770 				; optimize FAIL ('WAITFORKEY', updates.pas), line = 164
 24771
 24772 8B1A 20 4A 1E			jsr WAITFORKEY
 24773 8B1D 4C C0 8C			jmp @exit
 24774 8B20			l_5F7D
 24775
 24776 				; optimize OK (updates.pas), line = 169
 24777
 24778 8B20 A9 04			lda #$04
 24779 8B22 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 24780
 24781 				; optimize OK (updates.pas), line = 170
 24782
 24783 8B25 A9 05			lda #$05
 24784 8B27 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 24785
 24786 				; optimize FAIL ('WAITFORKEY', updates.pas), line = 171
 24787
 24788 8B2A 20 4A 1E			jsr WAITFORKEY
 24789 8B2D 4C C0 8C			jmp @exit
 24790 8B30			l_5FA2
 24791 8B30			l_5F68
 24792
 24793 				; optimize OK (updates.pas), line = 177
 24794
 24795 8B30 AD 8A CD			lda CURRENTPLAYER
 24796 8B33 0A				asl @
 24797 8B34 A8				tay
 24798 8B35 B9 65 C9			lda adr.PLLOAN+1,y
 24799 8B38 10 03 4C C0 8C		jmi l_5FBD
 24800 8B3D 19 64 C9			ora adr.PLLOAN,y
 24801 8B40 D0 03 4C C0 8C		jeq l_5FBD
 24802
 24803 				; optimize OK (updates.pas), line = 179
 24804
 24805 8B45 AC 8A CD			ldy CURRENTPLAYER
 24806 8B48 B9 6C C9			lda adr.PLLOANTIME,y
 24807 8B4B 8D 0C A9			sta K
 24808
 24809 				; optimize OK (updates.pas), line = 180
 24810
 24811 8B4E A9 15			lda #$15
 24812 8B50 20 1F 29			jsr LOADLOCATION
 24813
 24814 				; optimize FAIL ('JOBWORKING', updates.pas), line = 181
 24815
 24816 8B53 20 1A 87			jsr JOBWORKING
 24817
 24818 				; optimize OK (updates.pas), line = 182
 24819
 24820 8B56 AD 0C A9			lda K
 24821 8B59 F0 4F			jeq l_5FDC
 24822
 24823 				; optimize OK (updates.pas), line = 184
 24824
 24825 8B5B A9 06			lda #$06
 24826 8B5D 20 C6 1C			jsr CRT_WRITE_LOCSTR
 24827
 24828 				; optimize OK (updates.pas), line = 185
 24829
 24830 8B60 AD 8A CD			lda CURRENTPLAYER
 24831 8B63 0A				asl @
 24832 8B64 A8				tay
 24833 8B65 B9 64 C9			lda adr.PLLOAN,y
 24834 8B68 8D 92 A1			sta B_CRT.CRT_WRITE.@010185000.NUM
 24835 8B6B B9 65 C9			lda adr.PLLOAN+1,y
 24836 8B6E 85 AD			sta :STACKORIGIN+STACKWIDTH+9
 24837 8B70 A0 00			ldy #$00
 24838 8B72 A5 AD			lda :STACKORIGIN+STACKWIDTH+9
 24839 8B74 10 01			spl
 24840 8B76 88				dey
 24841 8B77 8D 93 A1			sta B_CRT.CRT_WRITE.@010185000.NUM+1
 24842 8B7A 8C 94 A1			sty B_CRT.CRT_WRITE.@010185000.NUM+2
 24843 8B7D 8C 95 A1			sty B_CRT.CRT_WRITE.@010185000.NUM+3
 24844 8B80 20 CA 18			jsr B_CRT.CRT_WRITE.@010185000
 24845
 24846 				; optimize OK (updates.pas), line = 186
 24847
 24848 8B83 A9 07			lda #$07
 24849 8B85 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 24850
 24851 				; optimize OK (updates.pas), line = 187
 24852
 24853 8B88 A9 08			lda #$08
 24854 8B8A 20 C6 1C			jsr CRT_WRITE_LOCSTR
 24855
 24856 				; optimize OK (updates.pas), line = 188
 24857
 24858 8B8D AD 0C A9			lda K
 24859 8B90 20 7E 18			jsr B_CRT.CRT_WRITE.@010180000
 24860
 24861 				; optimize OK (updates.pas), line = 189
 24862
 24863 8B93 A9 09			lda #$09
 24864 8B95 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 24865
 24866 				; optimize FAIL ('WAITFORKEY', updates.pas), line = 190
 24867
 24868 8B98 20 4A 1E			jsr WAITFORKEY
 24869
 24870 				; optimize OK (updates.pas), line = 191
 24871
 24872 8B9B AD 0C A9			lda K
 24873 8B9E 38 E9 01			sub #$01
 24874 8BA1 AC 8A CD			ldy CURRENTPLAYER
 24875 8BA4 99 6C C9			sta adr.PLLOANTIME,y
 24876 8BA7 4C C0 8C			jmp @exit
 24877 8BAA			l_5FDC
 24878
 24879 				; optimize OK (updates.pas), line = 195
 24880
 24881 8BAA A9 0A			lda #$0A
 24882 8BAC 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 24883
 24884 				; optimize OK (updates.pas), line = 196
 24885
 24886 8BAF A9 0B			lda #$0B
 24887 8BB1 20 15 1D			jsr CRT_WRITELN2_LOCSTR
 24888
 24889 				; optimize FAIL ('WAITFORKEY', updates.pas), line = 197
 24890
 24891 8BB4 20 4A 1E			jsr WAITFORKEY
 24892
 24893 				; optimize OK (updates.pas), line = 199
 24894
 24895 8BB7 A9 01			lda #$01
 24896 8BB9 8D 02 E4			sta adr.FP_AI+$01
 24897
 24898 				; optimize OK (updates.pas), line = 200
 24899
 24900 8BBC A9 05			lda #$05
 24901 8BBE 8D 04 E4			sta adr.FP_N+$01
 24902
 24903 				; optimize OK (updates.pas), line = 201
 24904
 24905 8BC1 AD AC A3			lda adr.FP_GANG+$02
 24906 8BC4 85 8C			sta @move.dst
 24907 8BC6 AD AD A3			lda adr.FP_GANG+1+$02
 24908 8BC9 85 8D			sta @move.dst+1
 24909 8BCB AD D3 9A			lda LOC_STRING_12
 24910 8BCE 85 88			sta @move.src
 24911 8BD0 AD D4 9A			lda LOC_STRING_12+1
 24912 8BD3 85 89			sta @move.src+1
 24913 8BD5 A0 00			ldy #$00
 24914 8BD7 B1 88			lda (@move.src),y
 24915 8BD9 18 69 01			add #1
 24916 8BDC 85 84			sta @move.cnt
 24917 8BDE 90 01			scc
 24918 8BE0 C8				iny
 24919 8BE1 84 85			sty @move.cnt+1
 24920 8BE3 20 D7 0E			jsr @move
 24921
 24922 				; optimize OK (updates.pas), line = 202
 24923
 24924 8BE6 A9 00			lda #$00
 24925 8BE8 8D 0C A9			sta K
 24926
 24927 8BEB			l_601D
 24928 				; --- ForToDoCondition
 24929 8BEB AD 0C A9			lda K
 24930 8BEE C9 05			cmp #$05
 24931 8BF0 B0 54			jcs l_602B
 24932
 24933 				; optimize OK (updates.pas), line = 204
 24934
 24935 8BF2 A9 02			lda #$02
 24936 8BF4 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 24937 8BF7 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 24938 8BFA 8D F0 A3			sta TMP
 24939
 24940 				; optimize OK (updates.pas), line = 205
 24941
 24942 8BFD AC 0C A9			ldy K
 24943 8C00 AD F0 A3			lda TMP
 24944 8C03 99 55 E5			sta adr.FP_SEX+$10,y
 24945
 24946 				; optimize OK (updates.pas), line = 206
 24947
 24948 8C06 98				tya
 24949 8C07 0A				asl @
 24950 8C08 A8				tay
 24951 8C09 B9 CE A3			lda adr.FP_NAME+$20,y
 24952 8C0C 85 8C			sta @move.dst
 24953 8C0E B9 CF A3			lda adr.FP_NAME+1+$20,y
 24954 8C11 85 8D			sta @move.dst+1
 24955 8C13 AD E5 9A			lda LOC_STRING_21
 24956 8C16 85 88			sta @move.src
 24957 8C18 AD E6 9A			lda LOC_STRING_21+1
 24958 8C1B 85 89			sta @move.src+1
 24959 8C1D A0 00			ldy #$00
 24960 8C1F B1 88			lda (@move.src),y
 24961 8C21 18 69 01			add #1
 24962 8C24 85 84			sta @move.cnt
 24963 8C26 90 01			scc
 24964 8C28 C8				iny
 24965 8C29 84 85			sty @move.cnt+1
 24966 8C2B 20 D7 0E			jsr @move
 24967
 24968 				; optimize OK (updates.pas), line = 207
 24969
 24970 8C2E AC 0C A9			ldy K
 24971 8C31 A9 03			lda #$03
 24972 8C33 99 55 E4			sta adr.FP_WEAPON+$10,y
 24973
 24974 				; optimize OK (updates.pas), line = 208
 24975
 24976 8C36 A9 1E			lda #$1E
 24977 8C38 99 95 E4			sta adr.FP_ENERGY+$10,y
 24978
 24979 				; optimize OK (updates.pas), line = 209
 24980
 24981 8C3B 99 D5 E4			sta adr.FP_STRENGTH+$10,y
 24982
 24983 				; optimize OK (updates.pas), line = 210
 24984
 24985 8C3E 99 15 E5			sta adr.FP_BRUTALITY+$10,y
 24986
 24987 				; --- ForToDoEpilog
 24988 8C41 EE 0C A9			inc K
 24989 8C44 D0 A5			jne l_601D
 24990 8C46			l_602B
 24991
 24992 				; optimize FAIL ('DOFIGHT', updates.pas), line = 213
 24993
 24994 8C46 20 9F 4D			jsr DOFIGHT
 24995 8C49 AD 4E A8			lda DOFIGHT.RESULT
 24996 8C4C C9 01			cmp #$01
 24997 8C4E D0 37			jne l_608A
 24998
 24999 				; optimize FAIL ('ENABLECONSOLE', updates.pas), line = 215
 25000
 25001 8C50 20 B0 27			jsr ENABLECONSOLE
 25002
 25003 				; optimize FAIL ('JOBWORKING', updates.pas), line = 217
 25004
 25005 8C53 20 1A 87			jsr JOBWORKING
 25006
 25007 				; optimize OK (updates.pas), line = 218
 25008
 25009 8C56 A9 0D			lda #$0D
 25010 8C58 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 25011
 25012 				; optimize OK (updates.pas), line = 219
 25013
 25014 8C5B A9 0E			lda #$0E
 25015 8C5D 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 25016
 25017 				; optimize OK (updates.pas), line = 220
 25018
 25019 8C60 AD 8A CD			lda CURRENTPLAYER
 25020 8C63 0A				asl @
 25021 8C64 0A				asl @
 25022 8C65 A8				tay
 25023 8C66 A9 00			lda #$00
 25024 8C68 99 30 C9			sta adr.PLMONEY,y
 25025 8C6B 99 31 C9			sta adr.PLMONEY+1,y
 25026 8C6E 99 32 C9			sta adr.PLMONEY+2,y
 25027 8C71 99 33 C9			sta adr.PLMONEY+3,y
 25028
 25029 				; optimize OK (updates.pas), line = 221
 25030
 25031 8C74 AD 8A CD			lda CURRENTPLAYER
 25032 8C77 0A				asl @
 25033 8C78 A8				tay
 25034 8C79 A9 00			lda #$00
 25035 8C7B 99 64 C9			sta adr.PLLOAN,y
 25036 8C7E 99 65 C9			sta adr.PLLOAN+1,y
 25037
 25038 				; optimize FAIL ('WAITFORKEY', updates.pas), line = 222
 25039
 25040 8C81 20 4A 1E			jsr WAITFORKEY
 25041 8C84 4C C0 8C			jmp @exit
 25042 8C87			l_608A
 25043
 25044 				; optimize FAIL ('ENABLECONSOLE', updates.pas), line = 226
 25045
 25046 8C87 20 B0 27			jsr ENABLECONSOLE
 25047
 25048 				; optimize FAIL ('JOBWORKING', updates.pas), line = 228
 25049
 25050 8C8A 20 1A 87			jsr JOBWORKING
 25051
 25052 				; optimize OK (updates.pas), line = 229
 25053
 25054 8C8D A9 0F			lda #$0F
 25055 8C8F 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 25056
 25057 				; optimize OK (updates.pas), line = 230
 25058
 25059 8C92 A9 10			lda #$10
 25060 8C94 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 25061
 25062 				; optimize OK (updates.pas), line = 231
 25063
 25064 8C97 A9 11			lda #$11
 25065 8C99 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 25066
 25067 				; optimize FAIL ('WAITFORKEY', updates.pas), line = 232
 25068
 25069 8C9C 20 4A 1E			jsr WAITFORKEY
 25070
 25071 				; optimize FAIL (2, updates.pas), line = 233
 25072
 25073 8C9F E8				inx
 25074 8CA0 AD 8A CD 95 94		mva CURRENTPLAYER :STACKORIGIN,x
 25075 8CA5 A9 00 95 A4			mva #$00 :STACKORIGIN+STACKWIDTH,x
 25076 8CA9 E8				inx
 25077 8CAA A9 03 95 94			mva #$03 :STACKORIGIN,x
 25078 8CAE A9 03			lda #$03
 25079 8CB0 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 25080 8CB3 B5 94			lda :STACKORIGIN,x
 25081 8CB5 18 6D 62 9C			add SYSTEM.RANDOM.@010180000.RESULT
 25082 8CB9 B4 93			ldy :STACKORIGIN-1,x
 25083 8CBB 99 6C C9			sta adr.PLLOANTIME,y
 25084 8CBE CA				dex
 25085 8CBF CA				dex
 25086 8CC0			l_5FBD
 25087
 25088 				; ------------------------------------------------------------
 25089
 25090 = A90A			P	= DATAORIGIN+$0CB4
 25091 = A90C			K	= DATAORIGIN+$0CB6
 25092
 25093 = A90A			@VarData	= P
 25094 = 0003			@VarDataSize	= 3
 25095
 25096 8CC0			@exit
 25097 					.ifdef @new
 25098 					lda <@VarData
 25099 					sta :ztmp
 25100 					lda >@VarData
 25101 					ldy #@VarDataSize-1
 25102 					jmp @FreeMem
 25103 					els
 25104 8CC0 60				rts						; ret
 25105 					eif
 25106 				.endl
 25107
 25108 8CC1			.local	UPDATEOPPORTUNITIES				; PROCEDURE
 25109
 25110 				; optimize OK (updates.pas), line = 244
 25111
 25112 8CC1 AC 8A CD			ldy CURRENTPLAYER
 25113 8CC4 B9 60 C9			lda adr.PLOPPORTUNITY,y
 25114 8CC7 29 08			and #$08
 25115 8CC9 C9 08			cmp #$08
 25116 8CCB F0 03			jeq l_60D6
 25117 8CCD 4C 93 8D			jmp @exit
 25118 8CD0			l_60D6
 25119
 25120 				; optimize OK (updates.pas), line = 247
 25121
 25122 8CD0 A9 13			lda #$13
 25123 8CD2 20 1F 29			jsr LOADLOCATION
 25124
 25125 				; optimize FAIL ('ENABLECONSOLE', updates.pas), line = 249
 25126
 25127 8CD5 20 B0 27			jsr ENABLECONSOLE
 25128
 25129 				; optimize FAIL ('B_CRT.CRT_CLEAR.@00', updates.pas), line = 250
 25130
 25131 8CD8 20 84 17			jsr B_CRT.CRT_CLEAR.@00
 25132
 25133 				; optimize OK (updates.pas), line = 251
 25134
 25135 8CDB A9 01			lda #$01
 25136 8CDD 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 25137 8CE0 A9 16			lda #$16
 25138 8CE2 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 25139 8CE5 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 25140
 25141 				; optimize OK (updates.pas), line = 252
 25142
 25143 8CE8 A9 00			lda #$00
 25144 8CEA 8D A0 A3			sta B_CRT.CRT_INVERT.X
 25145 8CED A9 01			lda #$01
 25146 8CEF 8D A1 A3			sta B_CRT.CRT_INVERT.Y
 25147 8CF2 AD 7D 9E			lda B_CRT.CRT_SCREENWIDTH
 25148 8CF5 8D A2 A3			sta B_CRT.CRT_INVERT.WIDTH
 25149 8CF8 20 70 1A			jsr B_CRT.CRT_INVERT
 25150
 25151 				; optimize OK (updates.pas), line = 253
 25152
 25153 8CFB A9 00			lda #$00
 25154 8CFD 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
 25155 8D00 A9 03			lda #$03
 25156 8D02 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
 25157 8D05 20 AC 17			jsr B_CRT.CRT_GOTOXY
 25158
 25159 				; optimize OK (updates.pas), line = 258
 25160
 25161 8D08 AC 8A CD			ldy CURRENTPLAYER
 25162 8D0B B9 60 C9			lda adr.PLOPPORTUNITY,y
 25163 8D0E 29 F7			and #$F7
 25164 8D10 99 60 C9			sta adr.PLOPPORTUNITY,y
 25165
 25166 				; optimize OK (updates.pas), line = 259
 25167
 25168 8D13 A9 05			lda #$05
 25169 8D15 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 25170 8D18 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 25171 8D1B D0 0D			jne l_610A
 25172
 25173 				; optimize OK (updates.pas), line = 262
 25174
 25175 8D1D A9 17			lda #$17
 25176 8D1F 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 25177
 25178 				; optimize OK (updates.pas), line = 263
 25179
 25180 8D22 A9 18			lda #$18
 25181 8D24 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 25182 8D27 4C 90 8D			jmp l_6118
 25183 8D2A			l_610A
 25184
 25185 				; optimize FAIL (1, updates.pas), line = 267
 25186
 25187 8D2A E8				inx
 25188 8D2B A9 7C 95 94			mva #$7C :STACKORIGIN,x
 25189 8D2F A9 15 95 A4			mva #$15 :STACKORIGIN+STACKWIDTH,x
 25190 8D33 A9 96			lda #$96
 25191 8D35 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 25192 8D38 E8				inx
 25193 8D39 AD 62 9C 95 94		mva SYSTEM.RANDOM.@010180000.RESULT :STACKORIGIN,x
 25194 8D3E E8				inx
 25195 8D3F A9 06 95 94			mva #$06 :STACKORIGIN,x
 25196 8D43 20 10 0E			jsr @shlEAX_CL.BYTE
 25197 8D46 CA				dex
 25198 8D47 A9 00 95 B3			mva #$00 :STACKORIGIN-1+STACKWIDTH*2,x
 25199 8D4B 95 C3			sta :STACKORIGIN-1+STACKWIDTH*3,x
 25200 8D4D 20 F9 0D			jsr addAX_CX
 25201 8D50 CA				dex
 25202 8D51 B5 94			lda :STACKORIGIN,x
 25203 8D53 8D 0D A9			sta PR
 25204 8D56 B5 A4			lda :STACKORIGIN+STACKWIDTH,x
 25205 8D58 8D 0E A9			sta PR+1
 25206 8D5B CA				dex
 25207
 25208 				; optimize OK (updates.pas), line = 268
 25209
 25210 8D5C A9 19			lda #$19
 25211 8D5E 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 25212
 25213 				; optimize OK (updates.pas), line = 269
 25214
 25215 8D61 A9 1A			lda #$1A
 25216 8D63 20 C6 1C			jsr CRT_WRITE_LOCSTR
 25217
 25218 				; optimize OK (updates.pas), line = 270
 25219
 25220 8D66 AD 0D A9			lda PR
 25221 8D69 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 25222 8D6C AD 0E A9			lda PR+1
 25223 8D6F 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 25224 8D72 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 25225
 25226 				; optimize FAIL ('CRT_WRITELN', updates.pas), line = 271
 25227
 25228 8D75 E8				inx
 25229 8D76 A9 73 95 94			mva #$73 :STACKORIGIN,x
 25230 8D7A A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 25231 8D7E 20 A9 1E			jsr CRT_WRITELN
 25232
 25233 				; optimize OK (updates.pas), line = 272
 25234
 25235 8D81 AD 0D A9			lda PR
 25236 8D84 8D CB A7			sta ADDMONEY.AMOUNT
 25237 8D87 AD 0E A9			lda PR+1
 25238 8D8A 8D CC A7			sta ADDMONEY.AMOUNT+1
 25239 8D8D 20 98 2F			jsr ADDMONEY
 25240 8D90			l_6118
 25241
 25242 				; optimize FAIL ('WAITFORKEY', updates.pas), line = 274
 25243
 25244 8D90 20 4A 1E			jsr WAITFORKEY
 25245
 25246 				; ------------------------------------------------------------
 25247
 25248 = A90D			PR	= DATAORIGIN+$0CB7
 25249
 25250 = A90D			@VarData	= PR
 25251 = 0002			@VarDataSize	= 2
 25252
 25253 8D93			@exit
 25254 					.ifdef @new
 25255 					lda <@VarData
 25256 					sta :ztmp
 25257 					lda >@VarData
 25258 					ldy #@VarDataSize-1
 25259 					jmp @FreeMem
 25260 					els
 25261 8D93 60				rts						; ret
 25262 					eif
 25263 				.endl
 25264
 25265 8D94			.local	UPDATEGANGSTERS					; PROCEDURE
 25266
 25267 				; optimize OK (updates.pas), line = 281
 25268
 25269 8D94 A9 00			lda #$00
 25270 8D96 8D 0F A9			sta J
 25271
 25272 8D99			l_613F
 25273 				; --- ForToDoCondition
 25274 8D99 AC 0F A9			ldy J
 25275 8D9C C0 20			cpy #$20
 25276 8D9E B0 53			jcs l_614D
 25277
 25278 				; optimize OK (updates.pas), line = 283
 25279
 25280 8DA0 B9 28 CD			lda adr.GANGSTERHEALTH,y
 25281 8DA3 8D 10 A9			sta EN
 25282
 25283 				; optimize OK (updates.pas), line = 284
 25284
 25285 8DA6 B9 C8 CC			lda adr.GANGSTERSTR,y
 25286 8DA9 4A				lsr @
 25287 8DAA 4A				lsr @
 25288 8DAB 18 6D 10 A9			add EN
 25289 8DAF 8D 10 A9			sta EN
 25290
 25291 				; optimize OK (updates.pas), line = 285
 25292
 25293 8DB2 B9 08 CD			lda adr.GANGSTERBRUT,y
 25294 8DB5 4A				lsr @
 25295 8DB6 85 9D			sta :STACKORIGIN+9
 25296 8DB8 B9 E8 CC			lda adr.GANGSTERINT,y
 25297 8DBB 4A				lsr @
 25298 8DBC 18 65 9D			add :STACKORIGIN+9
 25299 8DBF 18 69 01			add #$01
 25300 8DC2 8D 11 A9			sta MAXX
 25301
 25302 				; optimize OK (updates.pas), line = 286
 25303
 25304 8DC5 C9 23			cmp #$23
 25305 8DC7 B0 05			jcs l_6199
 25306 8DC9 A9 23			lda #$23
 25307 8DCB 8D 11 A9			sta MAXX
 25308 8DCE			l_6199
 25309
 25310 				; optimize OK (updates.pas), line = 287
 25311
 25312 8DCE AD 11 A9			lda MAXX
 25313 8DD1 CD 10 A9			cmp EN
 25314 8DD4 B0 03			jcs l_61B4
 25315 8DD6 8D 10 A9			sta EN
 25316 8DD9			l_61B4
 25317
 25318 				; optimize OK (updates.pas), line = 288
 25319
 25320 8DD9 AD 10 A9			lda EN
 25321 8DDC C9 64			cmp #$64
 25322 8DDE 90 05			jcc l_61CF
 25323 8DE0 A9 63			lda #$63
 25324 8DE2 8D 10 A9			sta EN
 25325 8DE5			l_61CF
 25326
 25327 				; optimize OK (updates.pas), line = 289
 25328
 25329 8DE5 AC 0F A9			ldy J
 25330 8DE8 AD 10 A9			lda EN
 25331 8DEB 99 28 CD			sta adr.GANGSTERHEALTH,y
 25332
 25333 				; --- ForToDoEpilog
 25334 8DEE EE 0F A9			inc J
 25335 8DF1 D0 A6			jne l_613F
 25336 8DF3			l_614D
 25337
 25338 				; ------------------------------------------------------------
 25339
 25340 = A90F			J	= DATAORIGIN+$0CB9
 25341 = A910			EN	= DATAORIGIN+$0CBA
 25342 = A911			MAXX	= DATAORIGIN+$0CBB
 25343
 25344 = A90F			@VarData	= J
 25345 = 0003			@VarDataSize	= 3
 25346
 25347 8DF3			@exit
 25348 					.ifdef @new
 25349 					lda <@VarData
 25350 					sta :ztmp
 25351 					lda >@VarData
 25352 					ldy #@VarDataSize-1
 25353 					jmp @FreeMem
 25354 					els
 25355 8DF3 60				rts						; ret
 25356 					eif
 25357 				.endl
 25358
 25359 8DF4			.local	UPDATEPRISON					; PROCEDURE
 25360
 25361 				; optimize OK (updates.pas), line = 299
 25362
 25363 8DF4 A9 13			lda #$13
 25364 8DF6 20 1F 29			jsr LOADLOCATION
 25365
 25366 				; optimize OK (updates.pas), line = 301
 25367
 25368 8DF9 AC 8A CD			ldy CURRENTPLAYER
 25369 8DFC B9 94 C9			lda adr.PLPRISON,y
 25370 8DFF F0 59			jeq l_61FF
 25371
 25372 				; optimize OK (updates.pas), line = 303
 25373
 25374 8E01 AD AA C2			lda adr.LOC_MAP_PLACES
 25375 8E04 8D 90 CD			sta CURRENTMAP
 25376
 25377 				; optimize OK (updates.pas), line = 304
 25378
 25379 8E07 AD F1 9A			lda LOC_STRING_27
 25380 8E0A 85 88			sta @move.src
 25381 8E0C AD F2 9A			lda LOC_STRING_27+1
 25382 8E0F 85 89			sta @move.src+1
 25383 					@moveSTRING LOC_NAME #40
 25383 				 MWA LOC_NAME @MOVE.DST\ MVA #40 @MOVESTRING.LEN\ JSR @MOVESTRING
 25383 8E11 AD 99 9A 85 8C AD +  MWA LOC_NAME @MOVE.DST
 25383 8E1B A9 28 8D 7B 0F	 MVA #40 @MOVESTRING.LEN
 25383 8E20 20 74 0F		 JSR @MOVESTRING
 25384
 25385 				; optimize FAIL ('SHOWLOCATIONHEADER', updates.pas), line = 305
 25386
 25387 8E23 20 7A 28			jsr SHOWLOCATIONHEADER
 25388
 25389 				; optimize OK (updates.pas), line = 306
 25390
 25391 8E26 A9 1C			lda #$1C
 25392 8E28 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 25393
 25394 				; optimize OK (updates.pas), line = 307
 25395
 25396 8E2B A9 1D			lda #$1D
 25397 8E2D 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 25398
 25399 				; optimize OK (updates.pas), line = 308
 25400
 25401 8E30 A9 08			lda #$08
 25402 8E32 20 65 18			jsr B_CRT.CRT_WRITE.@010186000
 25403
 25404 				; optimize OK (updates.pas), line = 309
 25405
 25406 8E35 AC 8A CD			ldy CURRENTPLAYER
 25407 8E38 B9 94 C9			lda adr.PLPRISON,y
 25408 8E3B 20 7E 18			jsr B_CRT.CRT_WRITE.@010180000
 25409
 25410 				; optimize OK (updates.pas), line = 310
 25411
 25412 8E3E A9 1E			lda #$1E
 25413 8E40 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 25414
 25415 				; optimize OK (updates.pas), line = 311
 25416
 25417 8E43 AC 8A CD			ldy CURRENTPLAYER
 25418 8E46 B9 94 C9			lda adr.PLPRISON,y
 25419 8E49 38 E9 01			sub #$01
 25420 8E4C 99 94 C9			sta adr.PLPRISON,y
 25421
 25422 				; optimize FAIL ('WAITFORKEY', updates.pas), line = 312
 25423
 25424 8E4F 20 4A 1E			jsr WAITFORKEY
 25425
 25426 				; optimize OK (updates.pas), line = 313
 25427
 25428 8E52 A9 11			lda #$11
 25429 8E54 8D 12 CA			sta CURRENTLOCATION
 25430 8E57 4C 3D 8F			jmp @exit
 25431 8E5A			l_61FF
 25432
 25433 				; optimize OK (updates.pas), line = 317
 25434
 25435 8E5A AC 8A CD			ldy CURRENTPLAYER
 25436 8E5D B9 AC C9			lda adr.PLFREED,y
 25437 8E60 C9 63			cmp #$63
 25438 8E62 D0 03 4C 3D 8F		jeq l_6245
 25439
 25440 				; optimize OK (updates.pas), line = 319
 25441
 25442 8E67 A9 1F			lda #$1F
 25443 8E69 20 C6 1C			jsr CRT_WRITE_LOCSTR
 25444
 25445 				; optimize OK (updates.pas), line = 320
 25446
 25447 8E6C AC 8A CD			ldy CURRENTPLAYER
 25448 8E6F B9 AC C9			lda adr.PLFREED,y
 25449 8E72 8D 12 A9			sta K
 25450
 25451 				; optimize OK (updates.pas), line = 321
 25452
 25453 8E75 0A				asl @
 25454 8E76 0A				asl @
 25455 8E77 0A				asl @
 25456 8E78 8D 13 A9			sta R
 25457
 25458 				; optimize FAIL ('B_CRT.CRT_WRITE.@0101898600000100', updates.pas), line = 322
 25459
 25460 8E7B E8				inx
 25461 8E7C AD 13 A9			lda R
 25462 8E7F 0A				asl @
 25463 8E80 A8				tay
 25464 8E81 B9 15 A4			lda adr.GANGSTERNAMES,y
 25465 8E84 95 94			sta :STACKORIGIN,x
 25466 8E86 B9 16 A4			lda adr.GANGSTERNAMES+1,y
 25467 8E89 95 A4			sta :STACKORIGIN+STACKWIDTH,x
 25468 8E8B 20 1F 18			jsr B_CRT.CRT_WRITE.@0101898600000100
 25469
 25470 				; optimize OK (updates.pas), line = 323
 25471
 25472 8E8E A9 20			lda #$20
 25473 8E90 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 25474
 25475 				; optimize OK (updates.pas), line = 324
 25476
 25477 8E93 A9 21			lda #$21
 25478 8E95 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 25479
 25480 				; optimize OK (updates.pas), line = 325
 25481
 25482 8E98 A9 22			lda #$22
 25483 8E9A 20 C6 1C			jsr CRT_WRITE_LOCSTR
 25484
 25485 				; optimize OK (updates.pas), line = 326
 25486
 25487 8E9D AD 8A CD			lda CURRENTPLAYER
 25488 8EA0 0A				asl @
 25489 8EA1 0A				asl @
 25490 8EA2 A8				tay
 25491 8EA3 B9 30 C9			lda adr.PLMONEY,y
 25492 8EA6 8D 92 A1			sta B_CRT.CRT_WRITE.@010185000.NUM
 25493 8EA9 B9 31 C9			lda adr.PLMONEY+1,y
 25494 8EAC 8D 93 A1			sta B_CRT.CRT_WRITE.@010185000.NUM+1
 25495 8EAF B9 32 C9			lda adr.PLMONEY+2,y
 25496 8EB2 8D 94 A1			sta B_CRT.CRT_WRITE.@010185000.NUM+2
 25497 8EB5 B9 33 C9			lda adr.PLMONEY+3,y
 25498 8EB8 8D 95 A1			sta B_CRT.CRT_WRITE.@010185000.NUM+3
 25499 8EBB 20 CA 18			jsr B_CRT.CRT_WRITE.@010185000
 25500
 25501 				; optimize FAIL ('CRT_WRITELN', updates.pas), line = 327
 25502
 25503 8EBE E8				inx
 25504 8EBF A9 BE 95 94			mva #$BE :STACKORIGIN,x
 25505 8EC3 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 25506 8EC7 20 A9 1E			jsr CRT_WRITELN
 25507
 25508 				; optimize OK (updates.pas), line = 328
 25509
 25510 8ECA AD 8A CD			lda CURRENTPLAYER
 25511 8ECD 0A				asl @
 25512 8ECE 0A				asl @
 25513 8ECF A8				tay
 25514 8ED0 B9 30 C9			lda adr.PLMONEY,y
 25515 8ED3 8D 1E A7			sta READVALUE.MAXVALUE
 25516 8ED6 B9 31 C9			lda adr.PLMONEY+1,y
 25517 8ED9 8D 1F A7			sta READVALUE.MAXVALUE+1
 25518 8EDC A9 00			lda #$00
 25519 8EDE 8D 1C A7			sta READVALUE.MINVALUE
 25520 8EE1 8D 1D A7			sta READVALUE.MINVALUE+1
 25521 8EE4 20 26 20			jsr READVALUE
 25522 8EE7 AD 20 A7			lda READVALUE.RESULT
 25523 8EEA 8D 14 A9			sta PR
 25524 8EED AD 21 A7			lda READVALUE.RESULT+1
 25525 8EF0 8D 15 A9			sta PR+1
 25526
 25527 				; optimize OK (updates.pas), line = 329
 25528
 25529 8EF3 0D 14 A9			ora PR
 25530 8EF6 F0 3D			jeq l_6288
 25531
 25532 				; optimize OK (updates.pas), line = 331
 25533
 25534 8EF8 AD 14 A9			lda PR
 25535 8EFB 8D D8 A7			sta PAYMONEY.PRICE
 25536 8EFE AD 15 A9			lda PR+1
 25537 8F01 8D D9 A7			sta PAYMONEY.PRICE+1
 25538 8F04 20 3B 32			jsr PAYMONEY
 25539
 25540 				; optimize OK (updates.pas), line = 332
 25541
 25542 8F07 A9 02			lda #$02
 25543 8F09 20 EC 2F			jsr ADDPOINTS
 25544
 25545 				; optimize OK (updates.pas), line = 333
 25546
 25547 8F0C AD 12 A9			lda K
 25548 8F0F 0A				asl @
 25549 8F10 0A				asl @
 25550 8F11 A8				tay
 25551 8F12 B9 30 C9			lda adr.PLMONEY,y
 25552 8F15 18 6D 14 A9			add PR
 25553 8F19 99 30 C9			sta adr.PLMONEY,y
 25554 8F1C B9 31 C9			lda adr.PLMONEY+1,y
 25555 8F1F 6D 15 A9			adc PR+1
 25556 8F22 99 31 C9			sta adr.PLMONEY+1,y
 25557 8F25 B9 32 C9			lda adr.PLMONEY+2,y
 25558 8F28 69 00			adc #$00
 25559 8F2A 99 32 C9			sta adr.PLMONEY+2,y
 25560 8F2D B9 33 C9			lda adr.PLMONEY+3,y
 25561 8F30 69 00			adc #$00
 25562 8F32 99 33 C9			sta adr.PLMONEY+3,y
 25563 8F35			l_6288
 25564
 25565 				; optimize OK (updates.pas), line = 335
 25566
 25567 8F35 AC 8A CD			ldy CURRENTPLAYER
 25568 8F38 A9 63			lda #$63
 25569 8F3A 99 AC C9			sta adr.PLFREED,y
 25570 8F3D			l_6245
 25571
 25572 				; ------------------------------------------------------------
 25573
 25574 = A912			K	= DATAORIGIN+$0CBC
 25575 = A913			R	= DATAORIGIN+$0CBD
 25576 = A914			PR	= DATAORIGIN+$0CBE
 25577
 25578 = A912			@VarData	= K
 25579 = 0004			@VarDataSize	= 4
 25580
 25581 8F3D			@exit
 25582 					.ifdef @new
 25583 					lda <@VarData
 25584 					sta :ztmp
 25585 					lda >@VarData
 25586 					ldy #@VarDataSize-1
 25587 					jmp @FreeMem
 25588 					els
 25589 8F3D 60				rts						; ret
 25590 					eif
 25591 				.endl
 25592
 25593 8F3E			.local	UPDATEJOB					; FUNCTION
 25594
 25595 				; optimize OK (updates.pas), line = 348
 25596
 25597 8F3E A9 16			lda #$16
 25598 8F40 20 1F 29			jsr LOADLOCATION
 25599
 25600 				; optimize FAIL ('JOBWORKING', updates.pas), line = 349
 25601
 25602 8F43 20 1A 87			jsr JOBWORKING
 25603
 25604 				; optimize OK (updates.pas), line = 351
 25605
 25606 8F46 AD 8A CD			lda CURRENTPLAYER
 25607 8F49 0A				asl @
 25608 8F4A A8				tay
 25609 8F4B B9 8D C9			lda adr.PLJOBLOCATION+1,y
 25610 8F4E D0 05			bne @+
 25611 8F50 B9 8C C9			lda adr.PLJOBLOCATION,y
 25612 8F53 C9 07			cmp #$07
 25613 				@
 25614 8F55 F0 0F			jeq l_62D1x
 25615 8F57 B9 8D C9			lda adr.PLJOBLOCATION+1,y
 25616 8F5A D0 05			bne @+
 25617 8F5C B9 8C C9			lda adr.PLJOBLOCATION,y
 25618 8F5F C9 0A			cmp #$0A
 25619 				@
 25620 8F61 F0 03 4C 6C 90		jne l_62D1
 25621 8F66			l_62D1x
 25622
 25623 				; optimize OK (updates.pas), line = 353
 25624
 25625 8F66 A9 01			lda #$01
 25626 8F68 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 25627
 25628 				; optimize OK (updates.pas), line = 354
 25629
 25630 8F6B A9 02			lda #$02
 25631 8F6D 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 25632
 25633 				; optimize FAIL ('EFFECTWAIT', updates.pas), line = 355
 25634
 25635 8F70 20 74 1D			jsr EFFECTWAIT
 25636
 25637 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', updates.pas), line = 356
 25638
 25639 8F73 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 25640
 25641 				; optimize OK (updates.pas), line = 357
 25642
 25643 8F76 A9 02			lda #$02
 25644 8F78 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 25645 8F7B AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 25646 8F7E D0 10			jne l_62E9
 25647
 25648 				; optimize OK (updates.pas), line = 359
 25649
 25650 8F80 A9 03			lda #$03
 25651 8F82 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 25652
 25653 				; optimize FAIL ('WAITFORKEY', updates.pas), line = 360
 25654
 25655 8F85 20 4A 1E			jsr WAITFORKEY
 25656
 25657 				; optimize OK (updates.pas), line = 361
 25658
 25659 8F88 A9 01			lda #$01
 25660 8F8A 8D 17 A9			sta JOBDONE
 25661 8F8D 4C 6C 90			jmp l_62FA
 25662 8F90			l_62E9
 25663
 25664 				; optimize OK (updates.pas), line = 365
 25665
 25666 8F90 A9 04			lda #$04
 25667 8F92 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 25668
 25669 				; optimize OK (updates.pas), line = 366
 25670
 25671 8F95 A9 05			lda #$05
 25672 8F97 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 25673
 25674 				; optimize FAIL ('WAITFORKEY', updates.pas), line = 367
 25675
 25676 8F9A 20 4A 1E			jsr WAITFORKEY
 25677
 25678 				; optimize OK (updates.pas), line = 368
 25679
 25680 8F9D A9 00			lda #$00
 25681 8F9F 8D 55 E5			sta adr.FP_SEX+$10
 25682
 25683 				; optimize OK (updates.pas), line = 369
 25684
 25685 8FA2 A9 03			lda #$03
 25686 8FA4 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 25687 8FA7 AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 25688 8FAA 8D 1C A9			sta @CASETMP_0016
 25689 8FAD D0 2D			jne l_630E
 25690 				@
 25691
 25692 				; optimize OK (updates.pas), line = 371
 25693
 25694 8FAF AD AC A3			lda adr.FP_GANG+$02
 25695 8FB2 85 8C			sta @move.dst
 25696 8FB4 AD AD A3			lda adr.FP_GANG+1+$02
 25697 8FB7 85 8D			sta @move.dst+1
 25698 8FB9 AD C7 9A			lda LOC_STRING_6
 25699 8FBC 85 88			sta @move.src
 25700 8FBE AD C8 9A			lda LOC_STRING_6+1
 25701 8FC1 85 89			sta @move.src+1
 25702 8FC3 A0 00			ldy #$00
 25703 8FC5 B1 88			lda (@move.src),y
 25704 8FC7 18 69 01			add #1
 25705 8FCA 85 84			sta @move.cnt
 25706 8FCC 90 01			scc
 25707 8FCE C8				iny
 25708 8FCF 84 85			sty @move.cnt+1
 25709 8FD1 20 D7 0E			jsr @move
 25710
 25711 				; optimize OK (updates.pas), line = 372
 25712
 25713 8FD4 A9 01			lda #$01
 25714 8FD6 8D 55 E5			sta adr.FP_SEX+$10
 25715 8FD9 4C 1E 90			jmp a_0016
 25716 8FDC			l_630E
 25717 8FDC C9 01			cmp #$01
 25718 8FDE D0 15			jne l_6320
 25719
 25720 				; optimize OK (updates.pas), line = 374
 25721
 25722 8FE0 AD AC A3			lda adr.FP_GANG+$02
 25723 8FE3 85 8C			sta @move.dst
 25724 8FE5 AD AD A3			lda adr.FP_GANG+1+$02
 25725 8FE8 85 8D			sta @move.dst+1
 25726 8FEA AD C9 9A			lda LOC_STRING_7
 25727 8FED 85 88			sta @move.src
 25728 8FEF AD CA 9A			lda LOC_STRING_7+1
 25729 8FF2 4C 0B 90			jmp s_6333
 25730 8FF5			l_6320
 25731 8FF5 C9 02			cmp #$02
 25732 8FF7 D0 25			jne l_632D
 25733
 25734 				; optimize OK (updates.pas), line = 375
 25735
 25736 8FF9 AD AC A3			lda adr.FP_GANG+$02
 25737 8FFC 85 8C			sta @move.dst
 25738 8FFE AD AD A3			lda adr.FP_GANG+1+$02
 25739 9001 85 8D			sta @move.dst+1
 25740 9003 AD CB 9A			lda LOC_STRING_8
 25741 9006 85 88			sta @move.src
 25742 9008 AD CC 9A			lda LOC_STRING_8+1
 25743 900B			s_6333
 25744 900B 85 89			sta @move.src+1
 25745 900D A0 00			ldy #$00
 25746 900F B1 88			lda (@move.src),y
 25747 9011 18 69 01			add #1
 25748 9014 85 84			sta @move.cnt
 25749 9016 90 01			scc
 25750 9018 C8				iny
 25751 9019 84 85			sty @move.cnt+1
 25752 901B 20 D7 0E			jsr @move
 25753 901E			l_632D
 25754 901E			a_0016
 25755
 25756 				; optimize OK (updates.pas), line = 377
 25757
 25758 901E A9 01			lda #$01
 25759 9020 8D 02 E4			sta adr.FP_AI+$01
 25760
 25761 				; optimize OK (updates.pas), line = 378
 25762
 25763 9023 8D 04 E4			sta adr.FP_N+$01
 25764
 25765 				; optimize OK (updates.pas), line = 379
 25766
 25767 9026 AD AC A3			lda adr.FP_GANG+$02
 25768 9029 85 88			sta @move.src
 25769 902B AD AD A3			lda adr.FP_GANG+1+$02
 25770 902E 85 89			sta @move.src+1
 25771 9030 AD CE A3			lda adr.FP_NAME+$20
 25772 9033 85 8C			sta @move.dst
 25773 9035 AD CF A3			lda adr.FP_NAME+1+$20
 25774 9038 85 8D			sta @move.dst+1
 25775 903A A0 00			ldy #$00
 25776 903C B1 88			lda (@move.src),y
 25777 903E 18 69 01			add #1
 25778 9041 85 84			sta @move.cnt
 25779 9043 90 01			scc
 25780 9045 C8				iny
 25781 9046 84 85			sty @move.cnt+1
 25782 9048 20 D7 0E			jsr @move
 25783
 25784 				; optimize OK (updates.pas), line = 380
 25785
 25786 904B A9 05			lda #$05
 25787 904D 8D 55 E4			sta adr.FP_WEAPON+$10
 25788
 25789 				; optimize OK (updates.pas), line = 381
 25790
 25791 9050 A9 1E			lda #$1E
 25792 9052 8D 95 E4			sta adr.FP_ENERGY+$10
 25793
 25794 				; optimize FAIL ('DOFIGHT', updates.pas), line = 383
 25795
 25796 9055 20 9F 4D			jsr DOFIGHT
 25797 9058 AD 4E A8			lda DOFIGHT.RESULT
 25798 905B C9 01			cmp #$01
 25799 905D D0 05			jne l_6363
 25800
 25801 				; optimize OK (updates.pas), line = 384
 25802
 25803 905F A9 00			lda #$00
 25804 9061 4C 66 90			jmp l_6371
 25805 9064			l_6363
 25806
 25807 				; optimize OK (updates.pas), line = 386
 25808
 25809 9064 A9 01			lda #$01
 25810 9066			l_6371
 25811 9066 8D 17 A9			sta JOBDONE
 25812
 25813 				; optimize FAIL ('ENABLECONSOLE', updates.pas), line = 387
 25814
 25815 9069 20 B0 27			jsr ENABLECONSOLE
 25816 906C			l_62FA
 25817 906C			l_62D1
 25818
 25819 				; optimize OK (updates.pas), line = 391
 25820
 25821 906C AD 8A CD			lda CURRENTPLAYER
 25822 906F 0A				asl @
 25823 9070 A8				tay
 25824 9071 B9 8D C9			lda adr.PLJOBLOCATION+1,y
 25825 9074 D0 05			bne @+
 25826 9076 B9 8C C9			lda adr.PLJOBLOCATION,y
 25827 9079 C9 0B			cmp #$0B
 25828 				@
 25829 907B F0 03 4C DE 91		jne l_638C
 25830
 25831 				; optimize OK (updates.pas), line = 393
 25832
 25833 9080 A9 09			lda #$09
 25834 9082 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 25835
 25836 				; optimize OK (updates.pas), line = 394
 25837
 25838 9085 A9 0A			lda #$0A
 25839 9087 20 15 1D			jsr CRT_WRITELN2_LOCSTR
 25840
 25841 				; optimize OK (updates.pas), line = 395
 25842
 25843 908A A9 0B			lda #$0B
 25844 908C 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 25845
 25846 				; optimize OK (updates.pas), line = 396
 25847
 25848 908F A9 0C			lda #$0C
 25849 9091 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 25850
 25851 				; optimize OK (updates.pas), line = 397
 25852
 25853 9094 A9 0D			lda #$0D
 25854 9096 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 25855
 25856 				; optimize OK (updates.pas), line = 398
 25857
 25858 9099 A9 0E			lda #$0E
 25859 909B 20 C6 1C			jsr CRT_WRITE_LOCSTR
 25860
 25861 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', updates.pas), line = 399
 25862
 25863 909E 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 25864
 25865 				; optimize OK (updates.pas), line = 400
 25866
 25867 90A1 A9 63			lda #$63
 25868 90A3 8D 18 A9			sta R
 25869
 25870 				; --- RepeatUntilProlog
 25871 90A6			l_639F
 25872
 25873 				; optimize FAIL ('READKEYANDSTICK', updates.pas), line = 402
 25874
 25875 90A6 20 DD 1B			jsr READKEYANDSTICK
 25876 90A9 AD EF A4			lda READKEYANDSTICK.RESULT
 25877 90AC 8D 1B A9			sta CH
 25878
 25879 				; optimize OK (updates.pas), line = 403
 25880
 25881 90AF 8D 1D A9			sta @CASETMP_0017
 25882 90B2 C9 1F			cmp #$1F
 25883 90B4 D0 08			jne l_63AE
 25884 				@
 25885
 25886 				; optimize OK (updates.pas), line = 404
 25887
 25888 90B6 A9 01			lda #$01
 25889 90B8 8D 18 A9			sta R
 25890 90BB 4C D3 90			jmp a_0017
 25891 90BE			l_63AE
 25892 90BE C9 1E			cmp #$1E
 25893 90C0 D0 08			jne l_63B9
 25894
 25895 				; optimize OK (updates.pas), line = 405
 25896
 25897 90C2 A9 02			lda #$02
 25898 90C4 8D 18 A9			sta R
 25899 90C7 4C D3 90			jmp a_0017
 25900 90CA			l_63B9
 25901 90CA C9 1A			cmp #$1A
 25902 90CC D0 05			jne l_63C4
 25903
 25904 				; optimize OK (updates.pas), line = 406
 25905
 25906 90CE A9 03			lda #$03
 25907 90D0 8D 18 A9			sta R
 25908 90D3			l_63C4
 25909 90D3			a_0017
 25910
 25911 				; optimize OK (updates.pas), line = 408
 25912
 25913 90D3 AD 18 A9			lda R
 25914 90D6 C9 63			cmp #$63
 25915 90D8 F0 CC			jeq l_639F
 25916
 25917 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', updates.pas), line = 410
 25918
 25919 90DA 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 25920
 25921 				; optimize FAIL ('B_CRT.CRT_NEWLINE.@00', updates.pas), line = 411
 25922
 25923 90DD 20 D8 19			jsr B_CRT.CRT_NEWLINE.@00
 25924
 25925 				; optimize OK (updates.pas), line = 413
 25926
 25927 90E0 A9 06			lda #$06
 25928 90E2 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 25929 90E5 AD 18 A9			lda R
 25930 90E8 CD 62 9C			cmp SYSTEM.RANDOM.@010180000.RESULT
 25931 90EB B0 64			jcs l_63EF
 25932
 25933 				; optimize OK (updates.pas), line = 415
 25934
 25935 90ED A9 64			lda #$64
 25936 90EF 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 25937 90F2 E8				inx
 25938 90F3 AD 62 9C 95 94		mva SYSTEM.RANDOM.@010180000.RESULT :STACKORIGIN,x
 25939 90F8 E8				inx
 25940 90F9 AD 18 A9 95 94		mva R :STACKORIGIN,x
 25941 90FE 20 32 10			jsr imulBYTE
 25942 9101 CA				dex
 25943 9102 A5 84			lda :eax
 25944 9104 18 69 2C			add #$2C
 25945 9107 8D 19 A9			sta P
 25946 910A A5 85			lda :eax+1
 25947 910C 69 01			adc #$01
 25948 910E 8D 1A A9			sta P+1
 25949 9111 CA				dex
 25950
 25951 				; optimize OK (updates.pas), line = 416
 25952
 25953 9112 A9 0F			lda #$0F
 25954 9114 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 25955
 25956 				; optimize OK (updates.pas), line = 417
 25957
 25958 9117 A9 10			lda #$10
 25959 9119 20 C6 1C			jsr CRT_WRITE_LOCSTR
 25960
 25961 				; optimize OK (updates.pas), line = 418
 25962
 25963 911C AD 19 A9			lda P
 25964 911F 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 25965 9122 AD 1A A9			lda P+1
 25966 9125 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 25967 9128 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 25968
 25969 				; optimize FAIL ('CRT_WRITELN', updates.pas), line = 419
 25970
 25971 912B E8				inx
 25972 912C A9 73 95 94			mva #$73 :STACKORIGIN,x
 25973 9130 A9 0C 95 A4			mva #$0C :STACKORIGIN+STACKWIDTH,x
 25974 9134 20 A9 1E			jsr CRT_WRITELN
 25975
 25976 				; optimize OK (updates.pas), line = 420
 25977
 25978 9137 AD 19 A9			lda P
 25979 913A 8D CB A7			sta ADDMONEY.AMOUNT
 25980 913D AD 1A A9			lda P+1
 25981 9140 8D CC A7			sta ADDMONEY.AMOUNT+1
 25982 9143 20 98 2F			jsr ADDMONEY
 25983
 25984 				; optimize FAIL ('WAITFORKEY', updates.pas), line = 421
 25985
 25986 9146 20 4A 1E			jsr WAITFORKEY
 25987
 25988 				; optimize OK (updates.pas), line = 422
 25989
 25990 9149 A9 01			lda #$01
 25991 914B 8D 17 A9			sta JOBDONE
 25992 914E 4C DE 91			jmp l_6419
 25993 9151			l_63EF
 25994
 25995 				; optimize OK (updates.pas), line = 426
 25996
 25997 9151 A9 11			lda #$11
 25998 9153 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 25999
 26000 				; optimize OK (updates.pas), line = 427
 26001
 26002 9156 A9 12			lda #$12
 26003 9158 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 26004
 26005 				; optimize FAIL ('WAITFORKEY', updates.pas), line = 428
 26006
 26007 915B 20 4A 1E			jsr WAITFORKEY
 26008
 26009 				; optimize OK (updates.pas), line = 429
 26010
 26011 915E A9 01			lda #$01
 26012 9160 8D 02 E4			sta adr.FP_AI+$01
 26013
 26014 				; optimize OK (updates.pas), line = 430
 26015
 26016 9163 8D 04 E4			sta adr.FP_N+$01
 26017
 26018 				; optimize OK (updates.pas), line = 431
 26019
 26020 9166 AD CE A3			lda adr.FP_NAME+$20
 26021 9169 85 8C			sta @move.dst
 26022 916B AD CF A3			lda adr.FP_NAME+1+$20
 26023 916E 85 8D			sta @move.dst+1
 26024 9170 AD F7 9A			lda LOC_STRING_30
 26025 9173 85 88			sta @move.src
 26026 9175 AD F8 9A			lda LOC_STRING_30+1
 26027 9178 85 89			sta @move.src+1
 26028 917A A0 00			ldy #$00
 26029 917C B1 88			lda (@move.src),y
 26030 917E 18 69 01			add #1
 26031 9181 85 84			sta @move.cnt
 26032 9183 90 01			scc
 26033 9185 C8				iny
 26034 9186 84 85			sty @move.cnt+1
 26035 9188 20 D7 0E			jsr @move
 26036
 26037 				; optimize OK (updates.pas), line = 432
 26038
 26039 918B AD AC A3			lda adr.FP_GANG+$02
 26040 918E 85 8C			sta @move.dst
 26041 9190 AD AD A3			lda adr.FP_GANG+1+$02
 26042 9193 85 8D			sta @move.dst+1
 26043 9195 AD F7 9A			lda LOC_STRING_30
 26044 9198 85 88			sta @move.src
 26045 919A AD F8 9A			lda LOC_STRING_30+1
 26046 919D 85 89			sta @move.src+1
 26047 919F A0 00			ldy #$00
 26048 91A1 B1 88			lda (@move.src),y
 26049 91A3 18 69 01			add #1
 26050 91A6 85 84			sta @move.cnt
 26051 91A8 90 01			scc
 26052 91AA C8				iny
 26053 91AB 84 85			sty @move.cnt+1
 26054 91AD 20 D7 0E			jsr @move
 26055
 26056 				; optimize OK (updates.pas), line = 433
 26057
 26058 91B0 A9 00			lda #$00
 26059 91B2 8D 55 E5			sta adr.FP_SEX+$10
 26060
 26061 				; optimize OK (updates.pas), line = 434
 26062
 26063 91B5 A9 02			lda #$02
 26064 91B7 8D 55 E4			sta adr.FP_WEAPON+$10
 26065
 26066 				; optimize OK (updates.pas), line = 435
 26067
 26068 91BA A9 0A			lda #$0A
 26069 91BC 8D 95 E4			sta adr.FP_ENERGY+$10
 26070
 26071 				; optimize OK (updates.pas), line = 436
 26072
 26073 91BF A9 1E			lda #$1E
 26074 91C1 8D D5 E4			sta adr.FP_STRENGTH+$10
 26075
 26076 				; optimize OK (updates.pas), line = 437
 26077
 26078 91C4 8D 15 E5			sta adr.FP_BRUTALITY+$10
 26079
 26080 				; optimize FAIL ('DOFIGHT', updates.pas), line = 439
 26081
 26082 91C7 20 9F 4D			jsr DOFIGHT
 26083 91CA AD 4E A8			lda DOFIGHT.RESULT
 26084 91CD C9 01			cmp #$01
 26085 91CF D0 05			jne l_645D
 26086
 26087 				; optimize OK (updates.pas), line = 440
 26088
 26089 91D1 A9 00			lda #$00
 26090 91D3 4C D8 91			jmp l_646B
 26091 91D6			l_645D
 26092
 26093 				; optimize OK (updates.pas), line = 442
 26094
 26095 91D6 A9 01			lda #$01
 26096 91D8			l_646B
 26097 91D8 8D 17 A9			sta JOBDONE
 26098
 26099 				; optimize FAIL ('ENABLECONSOLE', updates.pas), line = 443
 26100
 26101 91DB 20 B0 27			jsr ENABLECONSOLE
 26102 91DE			l_6419
 26103 91DE			l_638C
 26104
 26105 				; optimize OK (updates.pas), line = 447
 26106
 26107 91DE AD 8A CD			lda CURRENTPLAYER
 26108 91E1 0A				asl @
 26109 91E2 A8				tay
 26110 91E3 B9 8D C9			lda adr.PLJOBLOCATION+1,y
 26111 91E6 D0 05			bne @+
 26112 91E8 B9 8C C9			lda adr.PLJOBLOCATION,y
 26113 91EB C9 10			cmp #$10
 26114 				@
 26115 91ED F0 03 4C 7D 92		jne l_6486
 26116
 26117 				; optimize OK (updates.pas), line = 449
 26118
 26119 91F2 A9 13			lda #$13
 26120 91F4 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 26121
 26122 				; optimize OK (updates.pas), line = 450
 26123
 26124 91F7 A9 14			lda #$14
 26125 91F9 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 26126
 26127 				; optimize FAIL ('WAITFORKEY', updates.pas), line = 451
 26128
 26129 91FC 20 4A 1E			jsr WAITFORKEY
 26130
 26131 				; optimize OK (updates.pas), line = 452
 26132
 26133 91FF A9 01			lda #$01
 26134 9201 8D 02 E4			sta adr.FP_AI+$01
 26135
 26136 				; optimize OK (updates.pas), line = 453
 26137
 26138 9204 8D 04 E4			sta adr.FP_N+$01
 26139
 26140 				; optimize OK (updates.pas), line = 454
 26141
 26142 9207 AD CE A3			lda adr.FP_NAME+$20
 26143 920A 85 8C			sta @move.dst
 26144 920C AD CF A3			lda adr.FP_NAME+1+$20
 26145 920F 85 8D			sta @move.dst+1
 26146 9211 AD F9 9A			lda LOC_STRING_31
 26147 9214 85 88			sta @move.src
 26148 9216 AD FA 9A			lda LOC_STRING_31+1
 26149 9219 85 89			sta @move.src+1
 26150 921B A0 00			ldy #$00
 26151 921D B1 88			lda (@move.src),y
 26152 921F 18 69 01			add #1
 26153 9222 85 84			sta @move.cnt
 26154 9224 90 01			scc
 26155 9226 C8				iny
 26156 9227 84 85			sty @move.cnt+1
 26157 9229 20 D7 0E			jsr @move
 26158
 26159 				; optimize OK (updates.pas), line = 455
 26160
 26161 922C AD AC A3			lda adr.FP_GANG+$02
 26162 922F 85 8C			sta @move.dst
 26163 9231 AD AD A3			lda adr.FP_GANG+1+$02
 26164 9234 85 8D			sta @move.dst+1
 26165 9236 AD F9 9A			lda LOC_STRING_31
 26166 9239 85 88			sta @move.src
 26167 923B AD FA 9A			lda LOC_STRING_31+1
 26168 923E 85 89			sta @move.src+1
 26169 9240 A0 00			ldy #$00
 26170 9242 B1 88			lda (@move.src),y
 26171 9244 18 69 01			add #1
 26172 9247 85 84			sta @move.cnt
 26173 9249 90 01			scc
 26174 924B C8				iny
 26175 924C 84 85			sty @move.cnt+1
 26176 924E 20 D7 0E			jsr @move
 26177
 26178 				; optimize OK (updates.pas), line = 456
 26179
 26180 9251 A9 00			lda #$00
 26181 9253 8D 55 E5			sta adr.FP_SEX+$10
 26182
 26183 				; optimize OK (updates.pas), line = 457
 26184
 26185 9256 8D 55 E4			sta adr.FP_WEAPON+$10
 26186
 26187 				; optimize OK (updates.pas), line = 458
 26188
 26189 9259 A9 14			lda #$14
 26190 925B 8D 95 E4			sta adr.FP_ENERGY+$10
 26191
 26192 				; optimize OK (updates.pas), line = 459
 26193
 26194 925E A9 1E			lda #$1E
 26195 9260 8D D5 E4			sta adr.FP_STRENGTH+$10
 26196
 26197 				; optimize OK (updates.pas), line = 460
 26198
 26199 9263 8D 15 E5			sta adr.FP_BRUTALITY+$10
 26200
 26201 				; optimize FAIL ('DOFIGHT', updates.pas), line = 462
 26202
 26203 9266 20 9F 4D			jsr DOFIGHT
 26204 9269 AD 4E A8			lda DOFIGHT.RESULT
 26205 926C C9 01			cmp #$01
 26206 926E D0 05			jne l_64CB
 26207
 26208 				; optimize OK (updates.pas), line = 463
 26209
 26210 9270 A9 00			lda #$00
 26211 9272 4C 77 92			jmp l_64D9
 26212 9275			l_64CB
 26213
 26214 				; optimize OK (updates.pas), line = 465
 26215
 26216 9275 A9 01			lda #$01
 26217 9277			l_64D9
 26218 9277 8D 17 A9			sta JOBDONE
 26219
 26220 				; optimize FAIL ('ENABLECONSOLE', updates.pas), line = 466
 26221
 26222 927A 20 B0 27			jsr ENABLECONSOLE
 26223 927D			l_6486
 26224
 26225 				; optimize OK (updates.pas), line = 470
 26226
 26227 927D AD 17 A9			lda JOBDONE
 26228 9280 C9 01			cmp #$01
 26229 9282 D0 66			jne l_64F2
 26230
 26231 				; optimize OK (updates.pas), line = 472
 26232
 26233 9284 AC 8A CD			ldy CURRENTPLAYER
 26234 9287 B9 80 C9			lda adr.PLJOB,y
 26235 928A 38 E9 01			sub #$01
 26236 928D 99 80 C9			sta adr.PLJOB,y
 26237
 26238 				; optimize OK (updates.pas), line = 473
 26239
 26240 9290 F0 03			jeq l_6518
 26241 9292 4C 12 93			jmp @exit
 26242 9295			l_6518
 26243
 26244 				; optimize FAIL ('JOBWORKING', updates.pas), line = 474
 26245
 26246 9295 20 1A 87			jsr JOBWORKING
 26247
 26248 				; optimize OK (updates.pas), line = 475
 26249
 26250 9298 A9 15			lda #$15
 26251 929A 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 26252
 26253 				; optimize OK (updates.pas), line = 476
 26254
 26255 929D AD 8A CD			lda CURRENTPLAYER
 26256 92A0 0A				asl @
 26257 92A1 A8				tay
 26258 92A2 B9 84 C9			lda adr.PLJOBWAGE,y
 26259 92A5 8D 90 A1			sta B_CRT.CRT_WRITE.@010181000.NUM
 26260 92A8 B9 85 C9			lda adr.PLJOBWAGE+1,y
 26261 92AB 8D 91 A1			sta B_CRT.CRT_WRITE.@010181000.NUM+1
 26262 92AE 20 A4 18			jsr B_CRT.CRT_WRITE.@010181000
 26263
 26264 				; optimize OK (updates.pas), line = 477
 26265
 26266 92B1 A9 16			lda #$16
 26267 92B3 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 26268
 26269 				; optimize FAIL ('WAITFORKEY', updates.pas), line = 478
 26270
 26271 92B6 20 4A 1E			jsr WAITFORKEY
 26272
 26273 				; optimize OK (updates.pas), line = 479
 26274
 26275 92B9 AD 8A CD			lda CURRENTPLAYER
 26276 92BC 0A				asl @
 26277 92BD A8				tay
 26278 92BE B9 84 C9			lda adr.PLJOBWAGE,y
 26279 92C1 8D CB A7			sta ADDMONEY.AMOUNT
 26280 92C4 B9 85 C9			lda adr.PLJOBWAGE+1,y
 26281 92C7 8D CC A7			sta ADDMONEY.AMOUNT+1
 26282 92CA 20 98 2F			jsr ADDMONEY
 26283
 26284 				; optimize OK (updates.pas), line = 480
 26285
 26286 92CD A9 03			lda #$03
 26287 92CF 20 EC 2F			jsr ADDPOINTS
 26288
 26289 				; optimize OK (updates.pas), line = 482
 26290
 26291 92D2 AC 8A CD			ldy CURRENTPLAYER
 26292 92D5 A9 00			lda #$00
 26293 92D7 99 80 C9			sta adr.PLJOB,y
 26294
 26295 				; optimize OK (updates.pas), line = 483
 26296
 26297 92DA 98				tya
 26298 92DB 0A				asl @
 26299 92DC A8				tay
 26300 92DD A9 0F			lda #$0F
 26301 92DF 99 8C C9			sta adr.PLJOBLOCATION,y
 26302 92E2 A9 00			lda #$00
 26303 92E4 99 8D C9			sta adr.PLJOBLOCATION+1,y
 26304 92E7 4C 12 93			jmp @exit
 26305 92EA			l_64F2
 26306
 26307 				; optimize FAIL ('JOBWORKING', updates.pas), line = 487
 26308
 26309 92EA 20 1A 87			jsr JOBWORKING
 26310
 26311 				; optimize OK (updates.pas), line = 488
 26312
 26313 92ED A9 17			lda #$17
 26314 92EF 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 26315
 26316 				; optimize OK (updates.pas), line = 489
 26317
 26318 92F2 A9 18			lda #$18
 26319 92F4 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 26320
 26321 				; optimize FAIL ('WAITFORKEY', updates.pas), line = 490
 26322
 26323 92F7 20 4A 1E			jsr WAITFORKEY
 26324
 26325 				; optimize OK (updates.pas), line = 491
 26326
 26327 92FA A9 02			lda #$02
 26328 92FC 20 FD 2F			jsr REMOVEPOINTS
 26329
 26330 				; optimize OK (updates.pas), line = 492
 26331
 26332 92FF AD 8A CD			lda CURRENTPLAYER
 26333 9302 0A				asl @
 26334 9303 A8				tay
 26335 9304 A9 00			lda #$00
 26336 9306 99 8C C9			sta adr.PLJOBLOCATION,y
 26337 9309 99 8D C9			sta adr.PLJOBLOCATION+1,y
 26338
 26339 				; optimize OK (updates.pas), line = 493
 26340
 26341 930C AC 8A CD			ldy CURRENTPLAYER
 26342 930F 99 80 C9			sta adr.PLJOB,y
 26343 9312			@exit
 26344
 26345 				; ------------------------------------------------------------
 26346
 26347 = A916			RESULT	= DATAORIGIN+$0CC0
 26348 = A917			JOBDONE	= DATAORIGIN+$0CC1
 26349 = A918			R	= DATAORIGIN+$0CC2
 26350 = A919			P	= DATAORIGIN+$0CC3
 26351 = A91B			CH	= DATAORIGIN+$0CC5
 26352 = A91C			@CASETMP_0016	= DATAORIGIN+$0CC6
 26353 = A91D			@CASETMP_0017	= DATAORIGIN+$0CC7
 26354
 26355 = A917			@VarData	= JOBDONE
 26356 = 0007			@VarDataSize	= 7
 26357
 26358 9312 60				rts						; ret
 26359 				.endl
 26360
 26361 9313			.local	CLEARMEMORY					; PROCEDURE
 26362
 26363 				; optimize OK (main.pas), line = 127
 26364
 26365 9313 A9 00			lda #$00
 26366 9315 85 88			sta SYSTEM.FILLCHAR.@03018000001810000188000.A
 26367 9317 A9 D8			lda #$D8
 26368 9319 85 89			sta SYSTEM.FILLCHAR.@03018000001810000188000.A+1
 26369 931B A9 00			lda #$00
 26370 931D 85 8C			sta SYSTEM.FILLCHAR.@03018000001810000188000.COUNT
 26371 931F A9 18			lda #$18
 26372 9321 85 8D			sta SYSTEM.FILLCHAR.@03018000001810000188000.COUNT+1
 26373 9323 A9 00			lda #$00
 26374 9325 85 84			sta SYSTEM.FILLCHAR.@03018000001810000188000.VALUE
 26375 9327				.LOCAL +MAIN.SYSTEM.FILLCHAR.@03018000001810000188000
 26376 9327				m@INLINE
Macro: MAIN.SYSTEM.FILLCHAR.@03018000001810000188000.M@INLINE [Source: main_PL.a65]
     4 9327 20 2C 0F			jsr @fill
Source: main_PL.a65
 26377 					.ENDL
 26378
 26379 				; optimize OK (main.pas), line = 128
 26380
 26381 932A A9 00			lda #$00
 26382 932C 85 88			sta SYSTEM.FILLCHAR.@03018000001810000188000.A
 26383 932E A9 C0			lda #$C0
 26384 9330 85 89			sta SYSTEM.FILLCHAR.@03018000001810000188000.A+1
 26385 9332 A9 00			lda #$00
 26386 9334 85 8C			sta SYSTEM.FILLCHAR.@03018000001810000188000.COUNT
 26387 9336 A9 10			lda #$10
 26388 9338 85 8D			sta SYSTEM.FILLCHAR.@03018000001810000188000.COUNT+1
 26389 933A A9 00			lda #$00
 26390 933C 85 84			sta SYSTEM.FILLCHAR.@03018000001810000188000.VALUE
 26391 933E				.LOCAL +MAIN.SYSTEM.FILLCHAR.@03018000001810000188000
 26392 933E				m@INLINE
Macro: MAIN.SYSTEM.FILLCHAR.@03018000001810000188000.M@INLINE [Source: main_PL.a65]
     4 933E 20 2C 0F			jsr @fill
Source: main_PL.a65
 26393 					.ENDL
 26394
 26395 				; optimize OK (main.pas), line = 129
 26396
 26397 9341 A9 00			lda #$00
 26398 9343 A0 43			ldy #$43
 26399 9345 99 00 CA 88 10 FA		sta:rpl $CA00,y-
 26400
 26401 934B			@exit
 26402 					.ifdef @new
 26403 					lda <@VarData
 26404 					sta :ztmp
 26405 					lda >@VarData
 26406 					ldy #@VarDataSize-1
 26407 					jmp @FreeMem
 26408 					els
 26409 934B 60				rts						; ret
 26410 					eif
 26411 				.endl
 26412
 26413 934C			.local	INITGLOBALVARS					; PROCEDURE
 26414
 26415 				; optimize OK (main.pas), line = 137
 26416
 26417 934C A9 00			lda #$00
 26418 934E A8				tay
 26419
 26420 934F			l_6572
 26421 				; --- ForToDoCondition
 26422 934F C0 04			cpy #$04
 26423 9351 B0 0E			jcs l_6580
 26424
 26425 				; optimize OK (main.pas), line = 139
 26426
 26427 9353 A9 63			lda #$63
 26428 9355 99 8C CD			sta adr.PLRENT,y
 26429
 26430 				; optimize OK (main.pas), line = 140
 26431
 26432 9358 99 70 C9			sta adr.PLLOANSHARK,y
 26433
 26434 				; optimize OK (main.pas), line = 141
 26435
 26436 935B 99 AC C9			sta adr.PLFREED,y
 26437
 26438 				; --- ForToDoEpilog
 26439 935E C8				iny
 26440 935F D0 EE			jne l_6572
 26441 9361			l_6580
 26442 9361 8C 1E A9			sty K
 26443
 26444 				; ------------------------------------------------------------
 26445
 26446 = A91E			K	= DATAORIGIN+$0CC8
 26447
 26448 = A91E			@VarData	= K
 26449 = 0001			@VarDataSize	= 1
 26450
 26451 9364			@exit
 26452 					.ifdef @new
 26453 					lda <@VarData
 26454 					sta :ztmp
 26455 					lda >@VarData
 26456 					ldy #@VarDataSize-1
 26457 					jmp @FreeMem
 26458 					els
 26459 9364 60				rts						; ret
 26460 					eif
 26461 				.endl
 26462
 26463 9365			.local	SHOWCREDITS					; PROCEDURE
 26464
 26465 				; optimize OK (main.pas), line = 150
 26466
 26467 9365 A9 1E			lda #$1E
 26468 9367 20 1F 29			jsr LOADLOCATION
 26469
 26470 				; optimize FAIL ('SHOWLOCATIONHEADER', main.pas), line = 151
 26471
 26472 936A 20 7A 28			jsr SHOWLOCATIONHEADER
 26473
 26474 				; optimize OK (main.pas), line = 152
 26475
 26476 936D AD BD 9A			lda LOC_STRING_1
 26477 9370 8D 20 A9			sta CUR_LOC_STR
 26478 9373 AD BE 9A			lda LOC_STRING_1+1
 26479 9376 8D 21 A9			sta CUR_LOC_STR+1
 26480
 26481 				; optimize OK (main.pas), line = 153
 26482
 26483 9379 A9 00			lda #$00
 26484 937B 8D 1F A9			sta K
 26485
 26486 937E			l_65AF
 26487 				; --- ForToDoCondition
 26488 937E AD 1F A9			lda K
 26489 9381 C9 0F			cmp #$0F
 26490 9383 B0 21			jcs l_65BD
 26491
 26492 				; optimize FAIL ('CRT_WRITELN', main.pas), line = 155
 26493
 26494 9385 E8				inx
 26495 9386 AD 20 A9 95 94		mva CUR_LOC_STR :STACKORIGIN,x
 26496 938B AD 21 A9 95 A4		mva CUR_LOC_STR+1 :STACKORIGIN+STACKWIDTH,x
 26497 9390 20 A9 1E			jsr CRT_WRITELN
 26498
 26499 				; optimize OK (main.pas), line = 156
 26500
 26501 9393 AD 20 A9			lda CUR_LOC_STR
 26502 9396 18 69 28			add #$28
 26503 9399 8D 20 A9			sta CUR_LOC_STR
 26504 939C 90 03			scc
 26505 939E EE 21 A9			inc CUR_LOC_STR+1
 26506
 26507 				; --- ForToDoEpilog
 26508 93A1 EE 1F A9			inc K
 26509 93A4 D0 D8			jne l_65AF
 26510 93A6			l_65BD
 26511
 26512 				; optimize FAIL ('WAITFORKEY', main.pas), line = 158
 26513
 26514 93A6 20 4A 1E			jsr WAITFORKEY
 26515
 26516 				; optimize FAIL ('SHOWLOCATIONHEADER', main.pas), line = 159
 26517
 26518 93A9 20 7A 28			jsr SHOWLOCATIONHEADER
 26519
 26520 				; optimize OK (main.pas), line = 160
 26521
 26522 93AC A9 00			lda #$00
 26523 93AE 8D 1F A9			sta K
 26524
 26525 93B1			l_65D9
 26526 				; --- ForToDoCondition
 26527 93B1 AD 1F A9			lda K
 26528 93B4 C9 0F			cmp #$0F
 26529 93B6 B0 21			jcs l_65E7
 26530
 26531 				; optimize FAIL ('CRT_WRITELN', main.pas), line = 162
 26532
 26533 93B8 E8				inx
 26534 93B9 AD 20 A9 95 94		mva CUR_LOC_STR :STACKORIGIN,x
 26535 93BE AD 21 A9 95 A4		mva CUR_LOC_STR+1 :STACKORIGIN+STACKWIDTH,x
 26536 93C3 20 A9 1E			jsr CRT_WRITELN
 26537
 26538 				; optimize OK (main.pas), line = 163
 26539
 26540 93C6 AD 20 A9			lda CUR_LOC_STR
 26541 93C9 18 69 28			add #$28
 26542 93CC 8D 20 A9			sta CUR_LOC_STR
 26543 93CF 90 03			scc
 26544 93D1 EE 21 A9			inc CUR_LOC_STR+1
 26545
 26546 				; --- ForToDoEpilog
 26547 93D4 EE 1F A9			inc K
 26548 93D7 D0 D8			jne l_65D9
 26549 93D9			l_65E7
 26550
 26551 				; optimize FAIL ('WAITFORKEY', main.pas), line = 165
 26552
 26553 93D9 20 4A 1E			jsr WAITFORKEY
 26554
 26555 				; ------------------------------------------------------------
 26556
 26557 = A91F			K	= DATAORIGIN+$0CC9
 26558 = A920			CUR_LOC_STR	= DATAORIGIN+$0CCA
 26559
 26560 = A91F			@VarData	= K
 26561 = 0003			@VarDataSize	= 3
 26562
 26563 93DC			@exit
 26564 					.ifdef @new
 26565 					lda <@VarData
 26566 					sta :ztmp
 26567 					lda >@VarData
 26568 					ldy #@VarDataSize-1
 26569 					jmp @FreeMem
 26570 					els
 26571 93DC 60				rts						; ret
 26572 					eif
 26573 				.endl
 26574 93DD			l_00EA
 26575
 26576 				; optimize OK (main.pas), line = 175
 26577
 26578 93DD A9 22			lda #$22
 26579 93DF 8D 00 D4			sta ATARI.DMACTL
 26580
 26581 				; -------------------  ASM Block 00000176  -------------------
 26582
 26583
 26584 93E2 48			        pha
 26585 93E3 20 2A 08		        jsr xbios.xBIOS_SET_DEFAULT_DEVICE
 26586 93E6 A9 00		        lda #$00
 26587 93E8 8D E8 0B		        sta xbios.xIRQEN
 26588 93EB 68			        pla
 26589 				    
 26590 				; optimize FAIL ('SYSTEM.RANDOMIZE', main.pas), line = 184
 26591
 26592 93EC 20 A1 13			jsr SYSTEM.RANDOMIZE
 26593
 26594 				; optimize FAIL ('B_SYSTEM.SYSTEMOFF.@00', main.pas), line = 185
 26595
 26596 93EF 20 8A 16			jsr B_SYSTEM.SYSTEMOFF.@00
 26597
 26598 				; optimize OK (main.pas), line = 195
 26599
 26600 93F2 A9 00			lda #$00
 26601 93F4 8D 11 CA			sta PLAYMUSIC
 26602
 26603 				; optimize OK (main.pas), line = 198
 26604
 26605 93F7 C9 63			cmp #$63
 26606 93F9 D0 03			jne l_6616
 26607
 26608 				; optimize FAIL ('MUSICPROXY', main.pas), line = 199
 26609
 26610 93FB 20 CC 1B			jsr MUSICPROXY
 26611 93FE			l_6616
 26612
 26613 				; optimize FAIL ('ENABLECONSOLE', main.pas), line = 201
 26614
 26615 93FE 20 B0 27			jsr ENABLECONSOLE
 26616
 26617 				; optimize FAIL ('CLEARMEMORY', main.pas), line = 203
 26618
 26619 9401 20 13 93			jsr CLEARMEMORY
 26620
 26621 				; optimize OK (main.pas), line = 204
 26622
 26623 9404 AD 33 9C			lda E7FNAME
 26624 9407 8D 36 A7			sta LOADXAPL.FNAME
 26625 940A AD 34 9C			lda E7FNAME+1
 26626 940D 8D 37 A7			sta LOADXAPL.FNAME+1
 26627 9410 A9 00			lda #$00
 26628 9412 8D 38 A7			sta LOADXAPL.OUTPUTPOINTER
 26629 9415 A9 E7			lda #$E7
 26630 9417 8D 39 A7			sta LOADXAPL.OUTPUTPOINTER+1
 26631 941A 20 60 27			jsr LOADXAPL
 26632
 26633 				; optimize FAIL ('INITGLOBALVARS', main.pas), line = 206
 26634
 26635 941D 20 4C 93			jsr INITGLOBALVARS
 26636
 26637 				; optimize FAIL ('SHOWCREDITS', main.pas), line = 207
 26638
 26639 9420 20 65 93			jsr SHOWCREDITS
 26640
 26641 				; optimize FAIL ('SETUPGAME', main.pas), line = 209
 26642
 26643 9423 20 A1 83			jsr SETUPGAME
 26644
 26645 				; optimize OK (main.pas), line = 211
 26646
 26647 9426 A9 00			lda #$00
 26648 9428 8D A6 A3			sta MSX.PLAYER
 26649 942B A9 F0			lda #$F0
 26650 942D 8D A7 A3			sta MSX.PLAYER+1
 26651
 26652 				; optimize OK (main.pas), line = 212
 26653
 26654 9430 A9 00			lda #$00
 26655 9432 8D A8 A3			sta MSX.MODUL
 26656 9435 A9 F7			lda #$F7
 26657 9437 8D A9 A3			sta MSX.MODUL+1
 26658
 26659 				; optimize OK (main.pas), line = 215
 26660
 26661 943A A9 00			lda #$00
 26662 943C 8D 11 CA			sta PLAYMUSIC
 26663
 26664 				; optimize OK (main.pas), line = 220
 26665
 26666 943F A9 01			lda #$01
 26667 9441 8D EE A4			sta SHOWBITMAPS
 26668
 26669 				; --- RepeatUntilProlog
 26670 9444			l_6634
 26671
 26672 				; optimize OK (main.pas), line = 224
 26673
 26674 9444 A0 01			ldy #1
 26675 9446 AD C4 CA			lda GAMELENGTH
 26676 9449 CD C3 CA			cmp CURRENTYEAR
 26677 944C 90 01			bcc @+
 26678 944E 88				dey
 26679 				@
 26680 944F 98				tya
 26681 9450 8D 89 CD			sta GAMEENDS
 26682
 26683 				; optimize OK (main.pas), line = 226
 26684
 26685 9453 AD 8A CD			lda CURRENTPLAYER
 26686 9456 D0 41			jne l_6654
 26687
 26688 				; optimize OK (main.pas), line = 227
 26689
 26690 9458 8D 22 A9			sta K
 26691 945B AC 20 C9			ldy NPLAYERS
 26692 945E 88				dey
 26693 945F 8C 63 94			sty @FORTMP_6661_0
 26694
 26695 9462			l_6664
 26696 				; --- ForToDoCondition
 26697 9462 A9 00			lda @FORTMP_6661_0::#$00
 26698 9464 CD 22 A9			cmp K
 26699 9467 90 30			jcc l_6672
 26700
 26701 				; optimize OK (main.pas), line = 228
 26702
 26703 9469 AC 22 A9			ldy K
 26704 946C A9 00			lda #$00
 26705 946E CD C6 CA			cmp GAMEPOINTS+1
 26706 9471 D0 06			bne @+
 26707 9473 B9 9C C9			lda adr.PLPOINTS,y
 26708 9476 CD C5 CA			cmp GAMEPOINTS
 26709 				@
 26710 9479 90 19			jcc l_6688
 26711
 26712 				; optimize OK (main.pas), line = 229
 26713
 26714 947B B9 28 C9			lda adr.PLMONEYTRANSPORTER,y
 26715 947E C9 01			cmp #$01
 26716 9480 D0 12			jne l_669E
 26717
 26718 				; optimize OK (main.pas), line = 230
 26719
 26720 9482 B9 2C C9			lda adr.PLKILLEDMAJOR,y
 26721 9485 C9 01			cmp #$01
 26722 9487 D0 0B			jne l_66B4
 26723
 26724 				; optimize OK (main.pas), line = 232
 26725
 26726 9489 A9 01			lda #$01
 26727 948B 99 0C CA			sta adr.PLWINNERS,y
 26728
 26729 				; optimize OK (main.pas), line = 233
 26730
 26731 948E EE 89 CD			inc GAMEENDS
 26732
 26733 				; optimize OK (main.pas), line = 234
 26734
 26735 9491 EE 10 CA			inc PLNWINNERS
 26736 9494			l_66B4
 26737 9494			l_669E
 26738 9494			l_6688
 26739
 26740 				; --- ForToDoEpilog
 26741 9494 EE 22 A9			inc K
 26742 9497 D0 C9			jne l_6664
 26743 9499			l_6672
 26744 9499			l_6654
 26745
 26746 				; optimize OK (main.pas), line = 237
 26747
 26748 9499 AD 89 CD			lda GAMEENDS
 26749 949C F0 03			jeq l_66EF
 26750 949E 4C 77 98			jmp b_6634
 26751 94A1			l_66EF
 26752
 26753 				; optimize OK (main.pas), line = 239
 26754
 26755 94A1 A9 13			lda #$13
 26756 94A3 20 1F 29			jsr LOADLOCATION
 26757
 26758 				; optimize FAIL ('ENABLECONSOLE', main.pas), line = 240
 26759
 26760 94A6 20 B0 27			jsr ENABLECONSOLE
 26761
 26762 				; optimize FAIL ('PLAYERSTURN', main.pas), line = 241
 26763
 26764 94A9 20 64 2E			jsr PLAYERSTURN
 26765 94AC AD C8 A7			lda PLAYERSTURN.RESULT
 26766 94AF C9 1D			cmp #$1D
 26767 94B1 D0 03			jne l_6705
 26768 94B3 4C 74 98			jmp c_6634
 26769 94B6			l_6705
 26770
 26771 				; optimize FAIL ('BLACKCONSOLE', main.pas), line = 245
 26772
 26773 94B6 20 8E 27			jsr BLACKCONSOLE
 26774
 26775 				; optimize OK (main.pas), line = 247
 26776
 26777 94B9 A9 0F			lda #$0F
 26778 94BB 8D 12 CA			sta CURRENTLOCATION
 26779
 26780 				; optimize OK (main.pas), line = 248
 26781
 26782 94BE 8D A5 A3			sta LASTLOCATION
 26783
 26784 				; optimize FAIL ('UPDATERANK', main.pas), line = 250
 26785
 26786 94C1 20 5E 87			jsr UPDATERANK
 26787
 26788 				; optimize OK (main.pas), line = 256
 26789
 26790 94C4 AC 8A CD			ldy CURRENTPLAYER
 26791 94C7 B9 40 C9			lda adr.PLFAKEMONEY,y
 26792 94CA F0 16			jeq l_6727
 26793
 26794 				; optimize OK (main.pas), line = 258
 26795
 26796 94CC 38 E9 01			sub #$01
 26797 94CF 99 40 C9			sta adr.PLFAKEMONEY,y
 26798
 26799 				; optimize OK (main.pas), line = 259
 26800
 26801 94D2 D0 0E			jne l_674D
 26802
 26803 				; optimize FAIL ('ENABLECONSOLE', main.pas), line = 261
 26804
 26805 94D4 20 B0 27			jsr ENABLECONSOLE
 26806
 26807 				; optimize FAIL ('JOBWORKING', main.pas), line = 262
 26808
 26809 94D7 20 1A 87			jsr JOBWORKING
 26810
 26811 				; optimize OK (main.pas), line = 263
 26812
 26813 94DA A9 0B			lda #$0B
 26814 94DC 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 26815
 26816 				; optimize FAIL ('WAITFORKEY', main.pas), line = 264
 26817
 26818 94DF 20 4A 1E			jsr WAITFORKEY
 26819 94E2			l_674D
 26820 94E2			l_6727
 26821
 26822 				; optimize OK (main.pas), line = 269
 26823
 26824 94E2 AC 8A CD			ldy CURRENTPLAYER
 26825 94E5 B9 48 C9			lda adr.PLFORGEDID,y
 26826 94E8 F0 22			jeq l_676C
 26827
 26828 				; optimize OK (main.pas), line = 271
 26829
 26830 94EA A9 0C			lda #$0C
 26831 94EC 20 AD 13			jsr SYSTEM.RANDOM.@010180000
 26832 94EF AD 62 9C			lda SYSTEM.RANDOM.@010180000.RESULT
 26833 94F2 C9 01			cmp #$01
 26834 94F4 D0 16			jne l_677E
 26835
 26836 				; optimize FAIL ('ENABLECONSOLE', main.pas), line = 273
 26837
 26838 94F6 20 B0 27			jsr ENABLECONSOLE
 26839
 26840 				; optimize FAIL ('JOBWORKING', main.pas), line = 274
 26841
 26842 94F9 20 1A 87			jsr JOBWORKING
 26843
 26844 				; optimize OK (main.pas), line = 275
 26845
 26846 94FC A9 0C			lda #$0C
 26847 94FE 20 0B 1D			jsr CRT_WRITELN_LOCSTR
 26848
 26849 				; optimize FAIL ('WAITFORKEY', main.pas), line = 276
 26850
 26851 9501 20 4A 1E			jsr WAITFORKEY
 26852
 26853 				; optimize OK (main.pas), line = 277
 26854
 26855 9504 AC 8A CD			ldy CURRENTPLAYER
 26856 9507 A9 00			lda #$00
 26857 9509 99 48 C9			sta adr.PLFORGEDID,y
 26858 950C			l_677E
 26859 950C			l_676C
 26860
 26861 				; optimize FAIL ('UPDATEGANGSTERS', main.pas), line = 281
 26862
 26863 950C 20 94 8D			jsr UPDATEGANGSTERS
 26864
 26865 				; optimize FAIL ('UPDATERENT', main.pas), line = 282
 26866
 26867 950F 20 45 89			jsr UPDATERENT
 26868
 26869 				; optimize FAIL ('UPDATEOPPORTUNITIES', main.pas), line = 283
 26870
 26871 9512 20 C1 8C			jsr UPDATEOPPORTUNITIES
 26872
 26873 				; optimize FAIL ('UPDATEPRISON', main.pas), line = 284
 26874
 26875 9515 20 F4 8D			jsr UPDATEPRISON
 26876
 26877 				; optimize OK (main.pas), line = 287
 26878
 26879 9518 AC 8A CD			ldy CURRENTPLAYER
 26880 951B B9 7C C9			lda adr.PLBRIBE,y
 26881 951E F0 06			jeq l_67A8
 26882
 26883 				; optimize OK (main.pas), line = 288
 26884
 26885 9520 38 E9 01			sub #$01
 26886 9523 99 7C C9			sta adr.PLBRIBE,y
 26887 9526			l_67A8
 26888
 26889 				; optimize OK (main.pas), line = 290
 26890
 26891 9526 AD 12 CA			lda CURRENTLOCATION
 26892 9529 C9 11			cmp #$11
 26893 952B D0 06			jne l_67CD
 26894
 26895 				; optimize FAIL ('NEXTPLAYER', main.pas), line = 291
 26896
 26897 952D 20 0E 2E			jsr NEXTPLAYER
 26898 9530 4C 74 98			jmp c_6634
 26899 9533			l_67CD
 26900
 26901 				; optimize OK (main.pas), line = 296
 26902
 26903 9533 A9 16			lda #$16
 26904 9535 20 1F 29			jsr LOADLOCATION
 26905
 26906 				; optimize FAIL ('UPDATELOANSHARK', main.pas), line = 297
 26907
 26908 9538 20 98 8A			jsr UPDATELOANSHARK
 26909
 26910 				; optimize OK (main.pas), line = 298
 26911
 26912 953B AC 8A CD			ldy CURRENTPLAYER
 26913 953E B9 80 C9			lda adr.PLJOB,y
 26914 9541 F0 0E			jeq l_67E9
 26915
 26916 				; optimize FAIL ('UPDATEJOB', main.pas), line = 300
 26917
 26918 9543 20 3E 8F			jsr UPDATEJOB
 26919
 26920 				; optimize OK (main.pas), line = 301
 26921
 26922 9546 A9 11			lda #$11
 26923 9548 8D 12 CA			sta CURRENTLOCATION
 26924
 26925 				; optimize FAIL ('NEXTPLAYER', main.pas), line = 303
 26926
 26927 954B 20 0E 2E			jsr NEXTPLAYER
 26928 954E 4C 74 98			jmp c_6634
 26929 9551			l_67E9
 26930
 26931 				; optimize OK (main.pas), line = 307
 26932
 26933 9551 AC 8A CD			ldy CURRENTPLAYER
 26934 9554 B9 4C C9			lda adr.PLCAR,y
 26935 9557 A8				tay
 26936 9558 B9 12 E7			lda adr.CARRANGE,y
 26937 955B AC 8A CD			ldy CURRENTPLAYER
 26938 955E 99 50 C9			sta adr.PLSTEPS,y
 26939
 26940 				; optimize FAIL ('PLACECURRENTPLAYER', main.pas), line = 308
 26941
 26942 9561 20 59 2F			jsr PLACECURRENTPLAYER
 26943
 26944 				; optimize FAIL ('LOADMAP', main.pas), line = 309
 26945
 26946 9564 20 5D 82			jsr LOADMAP
 26947
 26948 				; optimize FAIL ('ENABLESPRITES', main.pas), line = 310
 26949
 26950 9567 20 77 3D			jsr ENABLESPRITES
 26951
 26952 				; optimize FAIL ('PRINTMAPSTATUS', main.pas), line = 311
 26953
 26954 956A 20 9D 7D			jsr PRINTMAPSTATUS
 26955
 26956 				; optimize OK (main.pas), line = 313
 26957
 26958 956D A9 00			lda #$00
 26959 956F 8D C7 CA			sta LASTACTION
 26960
 26961 				; --- WhileProlog
 26962 9572 4C 38 98			jmp l_680B
 26963 9575			l_680C
 26964
 26965 				; optimize FAIL ('ENABLEMAPCONSOLE', main.pas), line = 318
 26966
 26967 9575 20 F0 27			jsr ENABLEMAPCONSOLE
 26968
 26969 				; optimize FAIL ('PRINTMAPSTATUS', main.pas), line = 319
 26970
 26971 9578 20 9D 7D			jsr PRINTMAPSTATUS
 26972
 26973 				; optimize OK (main.pas), line = 320
 26974
 26975 957B A9 00			lda #$00
 26976 957D 20 84 38			jsr PAINTPLAYER
 26977
 26978 				; --- RepeatUntilProlog
 26979 9580			l_6811
 26980
 26981 				; optimize FAIL ('READKEYANDSTICK', main.pas), line = 323
 26982
 26983 9580 20 DD 1B			jsr READKEYANDSTICK
 26984 9583 AD EF A4			lda READKEYANDSTICK.RESULT
 26985 9586 8D 24 A9			sta CH
 26986
 26987 				; optimize OK (main.pas), line = 331
 26988
 26989 9589 C9 1F			cmp #$1F
 26990 958B D0 08			jne l_6827
 26991
 26992 				; optimize OK (main.pas), line = 332
 26993
 26994 958D AD EE A4			lda SHOWBITMAPS
 26995 9590 49 01			eor #$01
 26996 9592 8D EE A4			sta SHOWBITMAPS
 26997 9595			l_6827
 26998
 26999 				; optimize OK (main.pas), line = 338
 27000
 27001 9595 AD 24 A9			lda CH
 27002 9598 C9 65			cmp #$65
 27003 959A D0 12			jne l_6846
 27004
 27005 				; optimize OK (main.pas), line = 340
 27006
 27007 959C A9 10			lda #$10
 27008 959E 8D CB A7			sta ADDMONEY.AMOUNT
 27009 95A1 A9 27			lda #$27
 27010 95A3 8D CC A7			sta ADDMONEY.AMOUNT+1
 27011 95A6 20 98 2F			jsr ADDMONEY
 27012
 27013 				; optimize OK (main.pas), line = 341
 27014
 27015 95A9 A9 1E			lda #$1E
 27016 95AB 20 7C 27			jsr WAITFRAMES
 27017 95AE			l_6846
 27018
 27019 				; optimize OK (main.pas), line = 344
 27020
 27021 95AE AD 24 A9			lda CH
 27022 95B1 C9 6E			cmp #$6E
 27023 95B3 D0 1E			jne l_685F
 27024
 27025 				; optimize OK (main.pas), line = 346
 27026
 27027 95B5 AC 8A CD			ldy CURRENTPLAYER
 27028 95B8 B9 9C C9			lda adr.PLPOINTS,y
 27029 95BB 18 69 05			add #$05
 27030 95BE 99 9C C9			sta adr.PLPOINTS,y
 27031
 27032 				; optimize OK (main.pas), line = 347
 27033
 27034 95C1 A9 FF			lda #$FF
 27035 95C3 99 60 C9			sta adr.PLOPPORTUNITY,y
 27036
 27037 				; optimize OK (main.pas), line = 348
 27038
 27039 95C6 A9 01			lda #$01
 27040 95C8 99 28 C9			sta adr.PLMONEYTRANSPORTER,y
 27041
 27042 				; optimize OK (main.pas), line = 349
 27043
 27044 95CB 99 2C C9			sta adr.PLKILLEDMAJOR,y
 27045
 27046 				; optimize OK (main.pas), line = 350
 27047
 27048 95CE A9 1E			lda #$1E
 27049 95D0 20 7C 27			jsr WAITFRAMES
 27050 95D3			l_685F
 27051
 27052 				; optimize OK (main.pas), line = 354
 27053
 27054 95D3 AD 24 A9			lda CH
 27055 95D6 C9 1C			cmp #$1C
 27056 95D8 D0 77			jne l_689B
 27057
 27058 				; optimize OK (main.pas), line = 356
 27059
 27060 95DA A9 15			lda #$15
 27061 95DC 20 1F 29			jsr LOADLOCATION
 27062
 27063 				; optimize FAIL ('SHOWLOCATIONHEADER', main.pas), line = 357
 27064
 27065 95DF 20 7A 28			jsr SHOWLOCATIONHEADER
 27066
 27067 				; optimize OK (main.pas), line = 358
 27068
 27069 95E2 A9 03			lda #$03
 27070 95E4 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 27071 95E7 A9 12			lda #$12
 27072 95E9 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 27073 95EC 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 27074
 27075 				; optimize OK (main.pas), line = 359
 27076
 27077 95EF A9 0F			lda #$0F
 27078 95F1 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
 27079 95F4 A9 04			lda #$04
 27080 95F6 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
 27081 95F9 20 AC 17			jsr B_CRT.CRT_GOTOXY
 27082
 27083 				; optimize OK (main.pas), line = 360
 27084
 27085 95FC AD C4 CA			lda GAMELENGTH
 27086 95FF 38 ED C3 CA			sub CURRENTYEAR
 27087 9603 8D F0 A3			sta TMP
 27088
 27089 				; optimize OK (main.pas), line = 361
 27090
 27091 9606 20 7E 18			jsr B_CRT.CRT_WRITE.@010180000
 27092
 27093 				; optimize OK (main.pas), line = 362
 27094
 27095 9609 A9 13			lda #$13
 27096 960B 20 C6 1C			jsr CRT_WRITE_LOCSTR
 27097
 27098 				; optimize OK (main.pas), line = 363
 27099
 27100 960E A9 06			lda #$06
 27101 9610 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 27102 9613 A9 14			lda #$14
 27103 9615 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 27104 9618 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 27105
 27106 				; optimize OK (main.pas), line = 364
 27107
 27108 961B A9 00			lda #$00
 27109 961D 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
 27110 9620 A9 04			lda #$04
 27111 9622 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
 27112 9625 20 AC 17			jsr B_CRT.CRT_GOTOXY
 27113
 27114 				; optimize OK (main.pas), line = 365
 27115
 27116 9628 A9 01			lda #$01
 27117 962A 8D 23 C9			sta SHOWWEAPONS
 27118
 27119 				; optimize FAIL ('PRINTGANGSTERS', main.pas), line = 366
 27120
 27121 962D 20 C4 32			jsr PRINTGANGSTERS
 27122
 27123 				; optimize OK (main.pas), line = 367
 27124
 27125 9630 A9 00			lda #$00
 27126 9632 8D 23 C9			sta SHOWWEAPONS
 27127
 27128 				; optimize OK (main.pas), line = 368
 27129
 27130 9635 8D 8A A0			sta B_CRT.CRT_GOTOXY.X
 27131 9638 A9 14			lda #$14
 27132 963A 8D 8B A0			sta B_CRT.CRT_GOTOXY.Y
 27133 963D 20 AC 17			jsr B_CRT.CRT_GOTOXY
 27134
 27135 				; optimize FAIL ('WAITFORKEY', main.pas), line = 369
 27136
 27137 9640 20 4A 1E			jsr WAITFORKEY
 27138
 27139 				; optimize FAIL ('ENABLEMAPCONSOLE', main.pas), line = 370
 27140
 27141 9643 20 F0 27			jsr ENABLEMAPCONSOLE
 27142
 27143 				; optimize FAIL ('PRINTMAPSTATUS', main.pas), line = 371
 27144
 27145 9646 20 9D 7D			jsr PRINTMAPSTATUS
 27146
 27147 				; optimize OK (main.pas), line = 372
 27148
 27149 9649 A9 00			lda #$00
 27150 964B 20 84 38			jsr PAINTPLAYER
 27151 964E 4C 93 96			jmp c_6811
 27152 9651			l_689B
 27153
 27154 				; optimize OK (main.pas), line = 375
 27155
 27156 9651 AD 24 A9			lda CH
 27157 9654 20 80 3A			jsr MOVECURRENTPLAYER
 27158 9657 AD F7 A7			lda MOVECURRENTPLAYER.RESULT
 27159 965A 8D 12 CA			sta CURRENTLOCATION
 27160
 27161 				; optimize OK (main.pas), line = 376
 27162
 27163 965D C9 11			cmp #$11
 27164 965F D0 03			jne l_68E9
 27165 9661 4C 96 96			jmp b_6811
 27166 9664			l_68E9
 27167
 27168 				; optimize FAIL ('PRINTMAPSTATUS', main.pas), line = 377
 27169
 27170 9664 20 9D 7D			jsr PRINTMAPSTATUS
 27171
 27172 				; optimize OK (main.pas), line = 378
 27173
 27174 9667 A9 01			lda #$01
 27175 9669 8D EC A4			sta MAPRELOADED
 27176
 27177 				; optimize FAIL ('CHANGEMAP', main.pas), line = 379
 27178
 27179 966C 20 67 82			jsr CHANGEMAP
 27180
 27181 				; optimize OK (main.pas), line = 380
 27182
 27183 966F A0 01			ldy #1
 27184 9671 AD 12 CA			lda CURRENTLOCATION
 27185 9674 C9 10			cmp #$10
 27186 9676 D0 01			bne @+
 27187 9678 88				dey
 27188 				@
 27189 9679 84 9D			sty :STACKORIGIN+9
 27190 967B AC 8A CD			ldy CURRENTPLAYER
 27191 967E B9 50 C9			lda adr.PLSTEPS,y
 27192 9681 85 9E			sta :STACKORIGIN+10
 27193 9683 A0 01			ldy #1
 27194 9685 A5 9E			lda :STACKORIGIN+10
 27195 9687 30 03			bmi @+
 27196 9689 F0 01			beq @+
 27197 968B 88				dey
 27198 				@
 27199 968C 98				tya
 27200 968D 05 9D			ora :STACKORIGIN+9
 27201 968F 85 9D			sta :STACKORIGIN+9
 27202 9691 D0 03			bne *+5
 27203 9693			c_6811
 27204 9693 4C 80 95			jmp l_6811
 27205 9696			b_6811
 27206
 27207 				; optimize OK (main.pas), line = 382
 27208
 27209 9696 AD 12 CA			lda CURRENTLOCATION
 27210 9699 C9 11			cmp #$11
 27211 969B D0 0E			jne l_6920
 27212
 27213 				; optimize OK (main.pas), line = 384
 27214
 27215 969D AC 8A CD			ldy CURRENTPLAYER
 27216 96A0 A9 00			lda #$00
 27217 96A2 99 50 C9			sta adr.PLSTEPS,y
 27218
 27219 				; optimize FAIL ('BLACKCONSOLE', main.pas), line = 385
 27220
 27221 96A5 20 8E 27			jsr BLACKCONSOLE
 27222 96A8 4C 4F 98			jmp b_680C
 27223 96AB			l_6920
 27224
 27225 				; optimize OK (main.pas), line = 390
 27226
 27227 96AB AD 12 CA			lda CURRENTLOCATION
 27228 96AE C9 0F			cmp #$0F
 27229 96B0 F0 04			jeq l_6949x
 27230 96B2 C9 10			cmp #$10
 27231 96B4 D0 03			jne l_6949
 27232 96B6			l_6949x
 27233 96B6 4C 4F 98			jmp b_680C
 27234 96B9			l_6949
 27235
 27236 				; optimize OK (main.pas), line = 393
 27237
 27238 96B9 AD B2 EA			lda OLDMAPPOS_X
 27239 96BC 8D B0 EA			sta MAPPOS_X
 27240
 27241 				; optimize OK (main.pas), line = 394
 27242
 27243 96BF AD B3 EA			lda OLDMAPPOS_Y
 27244 96C2 8D B1 EA			sta MAPPOS_Y
 27245
 27246 				; optimize OK (main.pas), line = 395
 27247
 27248 96C5 AD B4 EA			lda OLDPLAYERPOS_X
 27249 96C8 8D AE EA			sta PLAYERPOS_X
 27250
 27251 				; optimize OK (main.pas), line = 396
 27252
 27253 96CB AD B5 EA			lda OLDPLAYERPOS_Y
 27254 96CE 8D AF EA			sta PLAYERPOS_Y
 27255
 27256 				; optimize OK (main.pas), line = 397
 27257
 27258 96D1 AC 8A CD			ldy CURRENTPLAYER
 27259 96D4 B9 50 C9			lda adr.PLSTEPS,y
 27260 96D7 38 E9 06			sub #$06
 27261 96DA 99 50 C9			sta adr.PLSTEPS,y
 27262
 27263 				; optimize FAIL ('CLEARSPRITES', main.pas), line = 399
 27264
 27265 96DD 20 5F 3D			jsr CLEARSPRITES
 27266
 27267 				; optimize FAIL ('BLACKCONSOLE', main.pas), line = 402
 27268
 27269 96E0 20 8E 27			jsr BLACKCONSOLE
 27270
 27271 				; optimize OK (main.pas), line = 404
 27272
 27273 96E3 AD 12 CA			lda CURRENTLOCATION
 27274 96E6 20 4E 2C			jsr SHOWLOCATION
 27275 96E9 AD 8F A7			lda SHOWLOCATION.RESULT
 27276 96EC 8D 22 C9			sta CURRENTCHOICE
 27277
 27278 				; optimize OK (main.pas), line = 405
 27279
 27280 96EF CD A9 C2			cmp LOC_NOPTIONS
 27281 96F2 D0 05			jne l_6991
 27282
 27283 				; optimize OK (main.pas), line = 406
 27284
 27285 96F4 A9 0F			lda #$0F
 27286 96F6 8D 12 CA			sta CURRENTLOCATION
 27287 96F9			l_6991
 27288
 27289 				; optimize OK (main.pas), line = 408
 27290
 27291 96F9 AD 12 CA			lda CURRENTLOCATION
 27292 96FC 8D 26 A9			sta @CASETMP_0018
 27293 96FF C9 01			cmp #$01
 27294 9701 D0 0C			jne l_69A3
 27295 				@
 27296
 27297 				; optimize FAIL ('BANKCHOICES', main.pas), line = 409
 27298
 27299 9703 20 22 54			jsr BANKCHOICES
 27300 9706 AD 86 A8			lda BANKCHOICES.RESULT
 27301 9709 8D 23 A9			sta OUTCOME
 27302 970C 4C E8 97			jmp a_0018
 27303 970F			l_69A3
 27304 970F C9 02			cmp #$02
 27305 9711 D0 0C			jne l_69AE
 27306
 27307 				; optimize FAIL ('FORGERYCHOICES', main.pas), line = 410
 27308
 27309 9713 20 ED 5C			jsr FORGERYCHOICES
 27310 9716 AD 9F A8			lda FORGERYCHOICES.RESULT
 27311 9719 8D 23 A9			sta OUTCOME
 27312 971C 4C E8 97			jmp a_0018
 27313 971F			l_69AE
 27314 971F C9 03			cmp #$03
 27315 9721 D0 0C			jne l_69B9
 27316
 27317 				; optimize FAIL ('MONEYTRANSPORTERCHOICES', main.pas), line = 411
 27318
 27319 9723 20 F5 7C			jsr MONEYTRANSPORTERCHOICES
 27320 9726 AD F2 A8			lda MONEYTRANSPORTERCHOICES.RESULT
 27321 9729 8D 23 A9			sta OUTCOME
 27322 972C 4C E8 97			jmp a_0018
 27323 972F			l_69B9
 27324 972F C9 04			cmp #$04
 27325 9731 D0 0C			jne l_69C4
 27326
 27327 				; optimize FAIL ('LOANSHARKCHOICES', main.pas), line = 412
 27328
 27329 9733 20 2E 65			jsr LOANSHARKCHOICES
 27330 9736 AD B8 A8			lda LOANSHARKCHOICES.RESULT
 27331 9739 8D 23 A9			sta OUTCOME
 27332 973C 4C E8 97			jmp a_0018
 27333 973F			l_69C4
 27334 973F C9 05			cmp #$05
 27335 9741 D0 0C			jne l_69CF
 27336
 27337 				; optimize FAIL ('POLICECHOICES', main.pas), line = 413
 27338
 27339 9743 20 04 6B			jsr POLICECHOICES
 27340 9746 AD C0 A8			lda POLICECHOICES.RESULT
 27341 9749 8D 23 A9			sta OUTCOME
 27342 974C 4C E8 97			jmp a_0018
 27343 974F			l_69CF
 27344 974F C9 06			cmp #$06
 27345 9751 D0 0C			jne l_69DA
 27346
 27347 				; optimize FAIL ('CARDEALERCHOICES', main.pas), line = 414
 27348
 27349 9753 20 E6 59			jsr CARDEALERCHOICES
 27350 9756 AD 97 A8			lda CARDEALERCHOICES.RESULT
 27351 9759 8D 23 A9			sta OUTCOME
 27352 975C 4C E8 97			jmp a_0018
 27353 975F			l_69DA
 27354 975F C9 07			cmp #$07
 27355 9761 D0 0C			jne l_69E5
 27356
 27357 				; optimize FAIL ('PUBCHOICES', main.pas), line = 415
 27358
 27359 9763 20 E7 6C			jsr PUBCHOICES
 27360 9766 AD C7 A8			lda PUBCHOICES.RESULT
 27361 9769 8D 23 A9			sta OUTCOME
 27362 976C 4C E8 97			jmp a_0018
 27363 976F			l_69E5
 27364 976F C9 17			cmp #$17
 27365 9771 D0 0C			jne l_69F0
 27366
 27367 				; optimize FAIL ('CENTRALSTATIONCHOICES', main.pas), line = 416
 27368
 27369 9773 20 F2 7A			jsr CENTRALSTATIONCHOICES
 27370 9776 AD EC A8			lda CENTRALSTATIONCHOICES.RESULT
 27371 9779 8D 23 A9			sta OUTCOME
 27372 977C 4C E8 97			jmp a_0018
 27373 977F			l_69F0
 27374 977F C9 09			cmp #$09
 27375 9781 D0 0C			jne l_69FB
 27376
 27377 				; optimize FAIL ('STORECHOICES', main.pas), line = 417
 27378
 27379 9783 20 2E 74			jsr STORECHOICES
 27380 9786 AD DA A8			lda STORECHOICES.RESULT
 27381 9789 8D 23 A9			sta OUTCOME
 27382 978C 4C E8 97			jmp a_0018
 27383 978F			l_69FB
 27384 978F C9 0A			cmp #$0A
 27385 9791 D0 0C			jne l_6A06
 27386
 27387 				; optimize FAIL ('HIDEOUTCHOICES', main.pas), line = 418
 27388
 27389 9793 20 56 60			jsr HIDEOUTCHOICES
 27390 9796 AD AE A8			lda HIDEOUTCHOICES.RESULT
 27391 9799 8D 23 A9			sta OUTCOME
 27392 979C 4C E8 97			jmp a_0018
 27393 979F			l_6A06
 27394 979F C9 0B			cmp #$0B
 27395 97A1 D0 0C			jne l_6A11
 27396
 27397 				; optimize FAIL ('GAMBLINGCHOICES', main.pas), line = 419
 27398
 27399 97A3 20 CC 5E			jsr GAMBLINGCHOICES
 27400 97A6 AD A7 A8			lda GAMBLINGCHOICES.RESULT
 27401 97A9 8D 23 A9			sta OUTCOME
 27402 97AC 4C E8 97			jmp a_0018
 27403 97AF			l_6A11
 27404 97AF C9 0C			cmp #$0C
 27405 97B1 D0 0C			jne l_6A1C
 27406
 27407 				; optimize FAIL ('SUBWAYCHOICES', main.pas), line = 420
 27408
 27409 97B3 20 C2 78			jsr SUBWAYCHOICES
 27410 97B6 AD E2 A8			lda SUBWAYCHOICES.RESULT
 27411 97B9 8D 23 A9			sta OUTCOME
 27412 97BC 4C E8 97			jmp a_0018
 27413 97BF			l_6A1C
 27414 97BF C9 0D			cmp #$0D
 27415 97C1 D0 0C			jne l_6A27
 27416
 27417 				; optimize FAIL ('ARMSDEALERCHOICES', main.pas), line = 421
 27418
 27419 97C3 20 82 4F			jsr ARMSDEALERCHOICES
 27420 97C6 AD 57 A8			lda ARMSDEALERCHOICES.RESULT
 27421 97C9 8D 23 A9			sta OUTCOME
 27422 97CC 4C E8 97			jmp a_0018
 27423 97CF			l_6A27
 27424 97CF C9 18			cmp #$18
 27425 97D1 D0 0C			jne l_6A32
 27426
 27427 				; optimize FAIL ('MAJORCHOICES', main.pas), line = 422
 27428
 27429 97D3 20 F2 7B			jsr MAJORCHOICES
 27430 97D6 AD F0 A8			lda MAJORCHOICES.RESULT
 27431 97D9 8D 23 A9			sta OUTCOME
 27432 97DC 4C E8 97			jmp a_0018
 27433 97DF			l_6A32
 27434 97DF C9 0F			cmp #$0F
 27435 97E1 D0 05			jne l_6A3D
 27436
 27437 				; optimize OK (main.pas), line = 423
 27438
 27439 97E3 A9 0F			lda #$0F
 27440 97E5 8D 23 A9			sta OUTCOME
 27441 97E8			l_6A3D
 27442 97E8			a_0018
 27443
 27444 				; optimize OK (main.pas), line = 426
 27445
 27446 97E8 A9 00			lda #$00
 27447 97EA 8D EC A4			sta MAPRELOADED
 27448
 27449 				; optimize OK (main.pas), line = 427
 27450
 27451 97ED AD 12 CA			lda CURRENTLOCATION
 27452 97F0 8D A5 A3			sta LASTLOCATION
 27453
 27454 				; optimize OK (main.pas), line = 428
 27455
 27456 97F3 AD 23 A9			lda OUTCOME
 27457 97F6 8D 12 CA			sta CURRENTLOCATION
 27458
 27459 				; optimize OK (main.pas), line = 431
 27460
 27461 97F9 AD B5 CD			lda DIDFIGHT
 27462 97FC C9 01			cmp #$01
 27463 97FE D0 38			jne l_6A74
 27464
 27465 				; optimize OK (main.pas), line = 432
 27466
 27467 9800 A9 00			lda #$00
 27468 9802 8D B5 CD			sta DIDFIGHT
 27469
 27470 				; optimize OK (main.pas), line = 433
 27471
 27472 9805 AD B2 EA			lda OLDMAPPOS_X
 27473 9808 8D B0 EA			sta MAPPOS_X
 27474
 27475 				; optimize OK (main.pas), line = 434
 27476
 27477 980B AD B3 EA			lda OLDMAPPOS_Y
 27478 980E 8D B1 EA			sta MAPPOS_Y
 27479
 27480 				; optimize OK (main.pas), line = 435
 27481
 27482 9811 AD B4 EA			lda OLDPLAYERPOS_X
 27483 9814 8D AE EA			sta PLAYERPOS_X
 27484
 27485 				; optimize OK (main.pas), line = 436
 27486
 27487 9817 AD B5 EA			lda OLDPLAYERPOS_Y
 27488 981A 8D AF EA			sta PLAYERPOS_Y
 27489
 27490 				; optimize OK (main.pas), line = 437
 27491
 27492 981D AC 8A CD			ldy CURRENTPLAYER
 27493 9820 B9 50 C9			lda adr.PLSTEPS,y
 27494 9823 F0 07			jeq l_6AB2x
 27495 9825 AD 12 CA			lda CURRENTLOCATION
 27496 9828 C9 11			cmp #$11
 27497 982A D0 03			jne l_6AB2
 27498 982C			l_6AB2x
 27499 982C 4C 4F 98			jmp b_680C
 27500 982F			l_6AB2
 27501
 27502 				; optimize FAIL ('LOADMAP', main.pas), line = 438
 27503
 27504 982F 20 5D 82			jsr LOADMAP
 27505
 27506 				; optimize FAIL ('ENABLESPRITES', main.pas), line = 439
 27507
 27508 9832 20 77 3D			jsr ENABLESPRITES
 27509
 27510 				; optimize FAIL ('PRINTMAPSTATUS', main.pas), line = 440
 27511
 27512 9835 20 9D 7D			jsr PRINTMAPSTATUS
 27513 9838			l_6A74
 27514 9838			l_680B
 27515
 27516 				; optimize OK (main.pas), line = 315
 27517
 27518 9838 AC 8A CD			ldy CURRENTPLAYER
 27519 983B B9 50 C9			lda adr.PLSTEPS,y
 27520 983E 30 02			smi
 27521 9840 D0 03			bne @+
 27522 9842 4C 4F 98			jmp l_680Cw
 27523 				@
 27524 9845 AD 12 CA			lda CURRENTLOCATION
 27525 9848 C9 11			cmp #$11
 27526 984A F0 03			jeq l_680Cw
 27527 				@
 27528 984C 4C 75 95			jmp l_680C
 27529 984F			l_680Cw
 27530 984F			b_680C
 27531
 27532 				; optimize OK (main.pas), line = 445
 27533
 27534 984F AC 8A CD			ldy CURRENTPLAYER
 27535 9852 AD B0 EA			lda MAPPOS_X
 27536 9855 99 54 C9			sta adr.PLMAPPOSX,y
 27537
 27538 				; optimize OK (main.pas), line = 446
 27539
 27540 9858 AD B1 EA			lda MAPPOS_Y
 27541 985B 99 58 C9			sta adr.PLMAPPOSY,y
 27542
 27543 				; optimize OK (main.pas), line = 447
 27544
 27545 985E AD 90 CD			lda CURRENTMAP
 27546 9861 99 5C C9			sta adr.PLCURRENTMAP,y
 27547
 27548 				; optimize FAIL ('NEXTPLAYER', main.pas), line = 449
 27549
 27550 9864 20 0E 2E			jsr NEXTPLAYER
 27551
 27552 				; optimize OK (main.pas), line = 450
 27553
 27554 9867 A0 01			ldy #1
 27555 9869 AD 89 CD			lda GAMEENDS
 27556 986C C9 01			cmp #$01
 27557 986E F0 01			beq @+
 27558 9870 88				dey
 27559 				@
 27560 9871 98				tya
 27561 9872 D0 03			bne *+5
 27562 9874			c_6634
 27563 9874 4C 44 94			jmp l_6634
 27564 9877			b_6634
 27565
 27566 				; optimize FAIL ('ENABLECONSOLE', main.pas), line = 453
 27567
 27568 9877 20 B0 27			jsr ENABLECONSOLE
 27569
 27570 				; optimize FAIL ('B_CRT.CRT_CLEAR.@00', main.pas), line = 454
 27571
 27572 987A 20 84 17			jsr B_CRT.CRT_CLEAR.@00
 27573
 27574 				; optimize OK (main.pas), line = 456
 27575
 27576 987D A9 13			lda #$13
 27577 987F 20 1F 29			jsr LOADLOCATION
 27578 9882 A0 F4			ldy #256-12
 27579 9884 B9 CE 0B 99 D7 A3 + 	mva:rne CODEORIGIN+$00C2+12-256,y adr.FINALFNAME+12-256,y+
 27580
 27581 				; optimize OK (main.pas), line = 460
 27582
 27583 988D AD 10 CA			lda PLNWINNERS
 27584 9890 C9 01			cmp #$01
 27585 9892 D0 77			jne l_6B14
 27586
 27587 				; optimize OK (main.pas), line = 461
 27588
 27589 9894 A9 00			lda #$00
 27590 9896 8D 22 A9			sta K
 27591 9899 AC 20 C9			ldy NPLAYERS
 27592 989C 88				dey
 27593 989D 8C A1 98			sty @FORTMP_6B21_0
 27594
 27595 98A0			l_6B24
 27596 				; --- ForToDoCondition
 27597 98A0 A9 00			lda @FORTMP_6B21_0::#$00
 27598 98A2 CD 22 A9			cmp K
 27599 98A5 90 61			jcc l_6B32
 27600
 27601 				; optimize OK (main.pas), line = 463
 27602
 27603 98A7 AC 22 A9			ldy K
 27604 98AA B9 0C CA			lda adr.PLWINNERS,y
 27605 98AD C9 01			cmp #$01
 27606 98AF D0 52			jne l_6B47
 27607
 27608 				; optimize OK (main.pas), line = 465
 27609
 27610 98B1 AD 22 A9			lda K
 27611 98B4 0A				asl @
 27612 98B5 0A				asl @
 27613 98B6 0A				asl @
 27614 98B7 8D F0 A3			sta TMP
 27615
 27616 				; optimize FAIL ('B_CRT.CRT_WRITECENTERED.@02018986000001000180000', main.pas), line = 466
 27617
 27618 98BA E8				inx
 27619 98BB AD F0 A3			lda TMP
 27620 98BE 0A				asl @
 27621 98BF A8				tay
 27622 98C0 B9 15 A4			lda adr.GANGSTERNAMES,y
 27623 98C3 85 82			sta :bp2
 27624 98C5 B9 16 A4			lda adr.GANGSTERNAMES+1,y
 27625 98C8 85 83			sta :bp2+1
 27626 98CA A0 00			ldy #$00
 27627 98CC B1 82 99 9D A1 C8 + 	mva:rne (:bp2),y B_CRT.CRT_WRITECENTERED.@02018986000001000180000.adr.S,y+
 27628 98D4 E8				inx
 27629 98D5 A9 05 95 94			mva #$05 :STACKORIGIN,x
 27630 98D9 20 DF 19			jsr B_CRT.CRT_WRITECENTERED.@02018986000001000180000
 27631
 27632 				; optimize OK (main.pas), line = 467
 27633
 27634 98DC A9 07			lda #$07
 27635 98DE 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 27636 98E1 A9 23			lda #$23
 27637 98E3 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 27638 98E6 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 27639
 27640 				; optimize OK (main.pas), line = 468
 27641
 27642 98E9 A9 08			lda #$08
 27643 98EB 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 27644 98EE A9 24			lda #$24
 27645 98F0 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 27646 98F3 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 27647
 27648 				; optimize OK (main.pas), line = 469
 27649
 27650 98F6 A9 09			lda #$09
 27651 98F8 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 27652 98FB A9 25			lda #$25
 27653 98FD 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 27654 9900 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 27655 9903			l_6B47
 27656
 27657 				; --- ForToDoEpilog
 27658 9903 EE 22 A9			inc K
 27659 9906 D0 98			jne l_6B24
 27660 9908			l_6B32
 27661 9908 4C 88 99			jmp l_6B72
 27662 990B			l_6B14
 27663
 27664 				; optimize OK (main.pas), line = 481
 27665
 27666 990B AD 10 CA			lda PLNWINNERS
 27667 990E F0 0D			jeq l_6B84
 27668
 27669 				; optimize OK (main.pas), line = 482
 27670
 27671 9910 A9 05			lda #$05
 27672 9912 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 27673 9915 A9 26			lda #$26
 27674 9917 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 27675 991A 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 27676 991D			l_6B84
 27677
 27678 				; optimize OK (main.pas), line = 483
 27679
 27680 991D A9 00			lda #$00
 27681 991F 8D 22 C9			sta CURRENTCHOICE
 27682
 27683 				; optimize OK (main.pas), line = 484
 27684
 27685 9922 8D 22 A9			sta K
 27686 9925 AC 20 C9			ldy NPLAYERS
 27687 9928 88				dey
 27688 9929 8C 2D 99			sty @FORTMP_6B9A_0
 27689
 27690 992C			l_6B9D
 27691 				; --- ForToDoCondition
 27692 992C A9 00			lda @FORTMP_6B9A_0::#$00
 27693 992E CD 22 A9			cmp K
 27694 9931 90 41			jcc l_6BAB
 27695
 27696 				; optimize OK (main.pas), line = 486
 27697
 27698 9933 AC 22 A9			ldy K
 27699 9936 B9 0C CA			lda adr.PLWINNERS,y
 27700 9939 C9 01			cmp #$01
 27701 993B D0 32			jne l_6BC0
 27702
 27703 				; optimize OK (main.pas), line = 488
 27704
 27705 993D AD 22 A9			lda K
 27706 9940 0A				asl @
 27707 9941 0A				asl @
 27708 9942 0A				asl @
 27709 9943 8D F0 A3			sta TMP
 27710
 27711 				; optimize FAIL ('B_CRT.CRT_WRITECENTERED.@02018986000001000180000', main.pas), line = 489
 27712
 27713 9946 E8				inx
 27714 9947 AD F0 A3			lda TMP
 27715 994A 0A				asl @
 27716 994B A8				tay
 27717 994C B9 15 A4			lda adr.GANGSTERNAMES,y
 27718 994F 85 82			sta :bp2
 27719 9951 B9 16 A4			lda adr.GANGSTERNAMES+1,y
 27720 9954 85 83			sta :bp2+1
 27721 9956 A0 00			ldy #$00
 27722 9958 B1 82 99 9D A1 C8 + 	mva:rne (:bp2),y B_CRT.CRT_WRITECENTERED.@02018986000001000180000.adr.S,y+
 27723 9960 E8				inx
 27724 9961 A9 07			lda #$07
 27725 9963 18 6D 22 C9			add CURRENTCHOICE
 27726 9967 95 94			sta :STACKORIGIN,x
 27727 9969 20 DF 19			jsr B_CRT.CRT_WRITECENTERED.@02018986000001000180000
 27728
 27729 				; optimize OK (main.pas), line = 490
 27730
 27731 996C EE 22 C9			inc CURRENTCHOICE
 27732 996F			l_6BC0
 27733
 27734 				; --- ForToDoEpilog
 27735 996F EE 22 A9			inc K
 27736 9972 D0 B8			jne l_6B9D
 27737 9974			l_6BAB
 27738
 27739 				; optimize OK (main.pas), line = 493
 27740
 27741 9974 A9 07			lda #$07
 27742 9976 18 6D 22 C9			add CURRENTCHOICE
 27743 997A 18 69 02			add #$02
 27744 997D 8D FC A4			sta CRT_WRITECENTERED_LOCSTR.R
 27745 9980 A9 27			lda #$27
 27746 9982 8D FD A4			sta CRT_WRITECENTERED_LOCSTR.B
 27747 9985 20 1F 1D			jsr CRT_WRITECENTERED_LOCSTR
 27748 9988			l_6B72
 27749
 27750 				; optimize FAIL ('CRT_READKEYORFIRE', main.pas), line = 496
 27751
 27752 9988 20 04 1E			jsr CRT_READKEYORFIRE
 27753
 27754 				; optimize FAIL ('B_SYSTEM.DISABLEDLI', main.pas), line = 497
 27755
 27756 998B 20 B0 16			jsr B_SYSTEM.DISABLEDLI
 27757
 27758 				; optimize OK (main.pas), line = 498
 27759
 27760 998E A9 B0			lda #$B0
 27761 9990 8D 02 D4			sta ATARI.DLISTL
 27762 9993 A9 FF			lda #$FF
 27763 9995 8D 03 D4			sta ATARI.DLISTL+1
 27764
 27765 				; optimize OK (main.pas), line = 499
 27766
 27767 9998 A9 0A			lda #$0A
 27768 999A 20 7C 27			jsr WAITFRAMES
 27769
 27770 				; optimize OK (main.pas), line = 503
 27771
 27772 999D AD 37 9C			lda FINALFNAME
 27773 99A0 8D 36 A7			sta LOADXAPL.FNAME
 27774 99A3 AD 38 9C			lda FINALFNAME+1
 27775 99A6 8D 37 A7			sta LOADXAPL.FNAME+1
 27776 99A9 A9 FA			lda #$FA
 27777 99AB 8D 38 A7			sta LOADXAPL.OUTPUTPOINTER
 27778 99AE A9 2F			lda #$2F
 27779 99B0 8D 39 A7			sta LOADXAPL.OUTPUTPOINTER+1
 27780 99B3 20 60 27			jsr LOADXAPL
 27781 99B6 A0 F4			ldy #256-12
 27782 99B8 B9 DA 0B 99 D7 A3 + 	mva:rne CODEORIGIN+$00CE+12-256,y adr.FINALFNAME+12-256,y+
 27783
 27784 				; optimize OK (main.pas), line = 506
 27785
 27786 99C1 AD 37 9C			lda FINALFNAME
 27787 99C4 8D 36 A7			sta LOADXAPL.FNAME
 27788 99C7 AD 38 9C			lda FINALFNAME+1
 27789 99CA 8D 37 A7			sta LOADXAPL.FNAME+1
 27790 99CD A9 00			lda #$00
 27791 99CF 8D 38 A7			sta LOADXAPL.OUTPUTPOINTER
 27792 99D2 A9 B8			lda #$B8
 27793 99D4 8D 39 A7			sta LOADXAPL.OUTPUTPOINTER+1
 27794 99D7 20 60 27			jsr LOADXAPL
 27795 99DA A0 F4			ldy #256-12
 27796 99DC B9 E6 0B 99 D7 A3 + 	mva:rne CODEORIGIN+$00DA+12-256,y adr.FINALFNAME+12-256,y+
 27797
 27798 				; optimize OK (main.pas), line = 508
 27799
 27800 99E5 AD 37 9C			lda FINALFNAME
 27801 99E8 8D 36 A7			sta LOADXAPL.FNAME
 27802 99EB AD 38 9C			lda FINALFNAME+1
 27803 99EE 8D 37 A7			sta LOADXAPL.FNAME+1
 27804 99F1 A9 00			lda #$00
 27805 99F3 8D 38 A7			sta LOADXAPL.OUTPUTPOINTER
 27806 99F6 A9 B0			lda #$B0
 27807 99F8 8D 39 A7			sta LOADXAPL.OUTPUTPOINTER+1
 27808 99FB 20 60 27			jsr LOADXAPL
 27809
 27810 				; -------------------  ASM Block 00000177  -------------------
 27811
 27812 99FE A9 70		        lda #$70
 27813 9A00 A2 00		        ldx #$00  ; low byte of music
 27814 9A02 A0 B8		        ldy #$b8 ; high byte <-- CHANGE TOO if music addr changes
 27815 9A04 20 03 B0		        jsr $b000+3
 27816 9A07 A9 00		        lda #$00
 27817 9A09 A2 00		        ldx #$00
 27818 9A0B 20 03 B0		        jsr $b000+3
 27819 				    
 27820 				; -------------------  ASM Block 00000178  -------------------
 27821
 27822 9A0E			    lpend:
 27823 9A0E 20 00 68		        jsr $6800;
 27824 9A11 4C 0E 9A		        jmp lpend
 27825 				    
 27826 				; ------------------------------------------------------------
 27827
 27828 = B000			TXT_ADDRESS	= $B000
 27829 = B400			MAINFONT_ADR	= $B400
 27830 = B800			PMG_BASE_ADR	= $B800
 27831 = C000			LOCATION_ADR	= $C000
 27832 = C920			VARBLOCK2	= $C920
 27833 = CA00			VARBLOCK1	= $CA00
 27834 = D800			MAP_FNT_ADDRESS	= $D800
 27835 = DC00			MAP_SCR_ADDRESS	= $DC00
 27836 = E000			LOC_MAP_ADR	= $E000
 27837 = E400			VARFIGHT	= $E400
 27838 = E700			E7_ADR	= $E700
 27839 = F000			RMT_PLAYER	= $F000
 27840 = F700			RMT_MODUL	= $F700
 27841 = FF70			DL_CONSOLE_ADR	= $FF70
 27842 = FF90			DL_MAP_ADR	= $FF90
 27843 = FFB0			DL_BLACK_CONSOLE_ADR	= $FFB0
 27844 = FFB8			DL_BITMAP_ADR	= $FFB8
 27845 = 1FFA			XEX_ADDRESS	= $1FFA
 27846 = B000			SAP_PLAYER	= $B000
 27847 = B003			SAP_PLAYER_3	= $B003
 27848 = B006			SAP_PLAYER_6	= $B006
 27849 = 00D8			MF_ZPLOCATION	= $D8
 27850 = BFFF			CARTOP	= $BFFF
 27851 = A000			CARBAS	= $A000
 27852 = 03FA			GINTLK	= $03FA
 27853 = D013			TRIG3	= $D013
 27854 = D500			ZEROBANK	= $D500
 27855 = D580			CARTOFF	= $D580
 27856 = A000			CARBASE	= $A000
 27857 = D500			adr.BANKS	= $D500
 27858 9A14			.var BANKS	= adr.BANKS .word
 27859 = 00D8			COPYSRC	= $D8
 27860 = 00DA			COPYDST	= $DA
 27861 = 00DB			WORKPAGES	= $DB
 27862 = 00DC			CURBANK	= $DC
 27863 = 00DD			CURSEC	= $DD
 27864 = C200			SAVE_LOCATION_ADR	= $C200
 27865 = C200			SAVE_LASTSAVE	= $C200
 27866 = C201			SAVEBANK	= $C201
 27867 = C202			SAVEADDRESS	= $C202
 27868 = C204			SAVE_SLOT	= $C204
 27869 = C205			SAVE_GAMEFOUND	= $C205
 27870 = C206			SAVE_SAVENUM	= $C206
 27871 = C207			TMP_AA	= $C207
 27872 = C208			TMP_55	= $C208
 27873 = C209			BANK_BANK	= $C209
 27874 = C20A			BANK_SRC	= $C20A
 27875 = C20C			BANK_DEST	= $C20C
 27876 = C20E			BANK_SIZE	= $C20E
 27877 = C210			BANK_VAL	= $C210
 27878 = C211			BANK_SECTOR	= $C211
 27879 = C212			BANK_WRITE	= $C212
 27880 = A3A5			LASTLOCATION	= DATAORIGIN+$074F
 27881 = A3A6			adr.MSX	= DATAORIGIN+$0750	; [4] OBJECT
 27882 9A14			.var MSX	= adr.MSX .word
 27883 = A3A6			MSX.PLAYER	= DATAORIGIN+$0750
 27884 = A3A8			MSX.MODUL	= DATAORIGIN+$0752
 27885 = C920			NPLAYERS	= $C920
 27886 = C921			LASTLOCATIONSTRINGS	= $C921
 27887 = C922			CURRENTCHOICE	= $C922
 27888 = C923			SHOWWEAPONS	= $C923
 27889 = C924			adr.PLSTUFF	= $C924
 27890 9A14			.var PLSTUFF	= adr.PLSTUFF .word
 27891 = C928			adr.PLMONEYTRANSPORTER	= $C928
 27892 9A14			.var PLMONEYTRANSPORTER	= adr.PLMONEYTRANSPORTER .word
 27893 = C92C			adr.PLKILLEDMAJOR	= $C92C
 27894 9A14			.var PLKILLEDMAJOR	= adr.PLKILLEDMAJOR .word
 27895 = C930			adr.PLMONEY	= $C930
 27896 9A14			.var PLMONEY	= adr.PLMONEY .word
 27897 = C940			adr.PLFAKEMONEY	= $C940
 27898 9A14			.var PLFAKEMONEY	= adr.PLFAKEMONEY .word
 27899 = C944			adr.PLALCOHOL	= $C944
 27900 9A14			.var PLALCOHOL	= adr.PLALCOHOL .word
 27901 = C948			adr.PLFORGEDID	= $C948
 27902 9A14			.var PLFORGEDID	= adr.PLFORGEDID .word
 27903 = C94C			adr.PLCAR	= $C94C
 27904 9A14			.var PLCAR	= adr.PLCAR .word
 27905 = C950			adr.PLSTEPS	= $C950
 27906 9A14			.var PLSTEPS	= adr.PLSTEPS .word
 27907 = C954			adr.PLMAPPOSX	= $C954
 27908 9A14			.var PLMAPPOSX	= adr.PLMAPPOSX .word
 27909 = C958			adr.PLMAPPOSY	= $C958
 27910 9A14			.var PLMAPPOSY	= adr.PLMAPPOSY .word
 27911 = C95C			adr.PLCURRENTMAP	= $C95C
 27912 9A14			.var PLCURRENTMAP	= adr.PLCURRENTMAP .word
 27913 = C960			adr.PLOPPORTUNITY	= $C960
 27914 9A14			.var PLOPPORTUNITY	= adr.PLOPPORTUNITY .word
 27915 = C964			adr.PLLOAN	= $C964
 27916 9A14			.var PLLOAN	= adr.PLLOAN .word
 27917 = C96C			adr.PLLOANTIME	= $C96C
 27918 9A14			.var PLLOANTIME	= adr.PLLOANTIME .word
 27919 = C970			adr.PLLOANSHARK	= $C970
 27920 9A14			.var PLLOANSHARK	= adr.PLLOANSHARK .word
 27921 = C974			adr.PLRENTMONTHS	= $C974
 27922 9A14			.var PLRENTMONTHS	= adr.PLRENTMONTHS .word
 27923 = C978			adr.PLRENTCOST	= $C978
 27924 9A14			.var PLRENTCOST	= adr.PLRENTCOST .word
 27925 = C97C			adr.PLBRIBE	= $C97C
 27926 9A14			.var PLBRIBE	= adr.PLBRIBE .word
 27927 = C980			adr.PLJOB	= $C980
 27928 9A14			.var PLJOB	= adr.PLJOB .word
 27929 = C984			adr.PLJOBWAGE	= $C984
 27930 9A14			.var PLJOBWAGE	= adr.PLJOBWAGE .word
 27931 = C98C			adr.PLJOBLOCATION	= $C98C
 27932 9A14			.var PLJOBLOCATION	= adr.PLJOBLOCATION .word
 27933 = C994			adr.PLPRISON	= $C994
 27934 9A14			.var PLPRISON	= adr.PLPRISON .word
 27935 = C998			adr.PLRANK	= $C998
 27936 9A14			.var PLRANK	= adr.PLRANK .word
 27937 = C99C			adr.PLPOINTS	= $C99C
 27938 9A14			.var PLPOINTS	= adr.PLPOINTS .word
 27939 = C9A0			adr.PLNEWPOINTS	= $C9A0
 27940 9A14			.var PLNEWPOINTS	= adr.PLNEWPOINTS .word
 27941 = C9A4			adr.PLLOANINVEST	= $C9A4
 27942 9A14			.var PLLOANINVEST	= adr.PLLOANINVEST .word
 27943 = C9AC			adr.PLFREED	= $C9AC
 27944 9A14			.var PLFREED	= adr.PLFREED .word
 27945 = E400			FP_WINNER	= $E400
 27946 = E401			adr.FP_AI	= $E401
 27947 9A14			.var FP_AI	= adr.FP_AI .word
 27948 = E403			adr.FP_N	= $E403
 27949 9A14			.var FP_N	= adr.FP_N .word
 27950 = E405			adr.FP_POSW	= $E405
 27951 9A14			.var FP_POSW	= adr.FP_POSW .word
 27952 = E445			adr.FP_WEAPON	= $E445
 27953 9A14			.var FP_WEAPON	= adr.FP_WEAPON .word
 27954 = E485			adr.FP_ENERGY	= $E485
 27955 9A14			.var FP_ENERGY	= adr.FP_ENERGY .word
 27956 = E4C5			adr.FP_STRENGTH	= $E4C5
 27957 9A14			.var FP_STRENGTH	= adr.FP_STRENGTH .word
 27958 = E505			adr.FP_BRUTALITY	= $E505
 27959 9A14			.var FP_BRUTALITY	= adr.FP_BRUTALITY .word
 27960 = E545			adr.FP_SEX	= $E545
 27961 9A14			.var FP_SEX	= adr.FP_SEX .word
 27962 = E585			adr.FP_GANG_1	= $E585
 27963 9A14			.var FP_GANG_1	= adr.FP_GANG_1 .word
 27964 = E595			adr.FP_GANG_2	= $E595
 27965 9A14			.var FP_GANG_2	= adr.FP_GANG_2 .word
 27966 = E5A5			adr.FP_NAME_1	= $E5A5
 27967 9A14			.var FP_NAME_1	= adr.FP_NAME_1 .word
 27968 = E5B5			adr.FP_NAME_2	= $E5B5
 27969 9A14			.var FP_NAME_2	= adr.FP_NAME_2 .word
 27970 = E5C5			adr.FP_NAME_3	= $E5C5
 27971 9A14			.var FP_NAME_3	= adr.FP_NAME_3 .word
 27972 = E5D5			adr.FP_NAME_4	= $E5D5
 27973 9A14			.var FP_NAME_4	= adr.FP_NAME_4 .word
 27974 = E5E5			adr.FP_NAME_5	= $E5E5
 27975 9A14			.var FP_NAME_5	= adr.FP_NAME_5 .word
 27976 = E5F5			adr.FP_NAME_6	= $E5F5
 27977 9A14			.var FP_NAME_6	= adr.FP_NAME_6 .word
 27978 = E605			adr.FP_NAME_7	= $E605
 27979 9A14			.var FP_NAME_7	= adr.FP_NAME_7 .word
 27980 = E615			adr.FP_NAME_8	= $E615
 27981 9A14			.var FP_NAME_8	= adr.FP_NAME_8 .word
 27982 = E625			adr.FP_NAME_9	= $E625
 27983 9A14			.var FP_NAME_9	= adr.FP_NAME_9 .word
 27984 = E635			adr.FP_NAME_10	= $E635
 27985 9A14			.var FP_NAME_10	= adr.FP_NAME_10 .word
 27986 = E645			adr.FP_NAME_11	= $E645
 27987 9A14			.var FP_NAME_11	= adr.FP_NAME_11 .word
 27988 = E655			adr.FP_NAME_12	= $E655
 27989 9A14			.var FP_NAME_12	= adr.FP_NAME_12 .word
 27990 = E665			adr.FP_NAME_13	= $E665
 27991 9A14			.var FP_NAME_13	= adr.FP_NAME_13 .word
 27992 = E675			adr.FP_NAME_14	= $E675
 27993 9A14			.var FP_NAME_14	= adr.FP_NAME_14 .word
 27994 = E685			adr.FP_NAME_15	= $E685
 27995 9A14			.var FP_NAME_15	= adr.FP_NAME_15 .word
 27996 = E695			adr.FP_NAME_16	= $E695
 27997 9A14			.var FP_NAME_16	= adr.FP_NAME_16 .word
 27998 = E6A5			adr.FP_NAME_17	= $E6A5
 27999 9A14			.var FP_NAME_17	= adr.FP_NAME_17 .word
 28000 = E6B5			adr.FP_NAME_18	= $E6B5
 28001 9A14			.var FP_NAME_18	= adr.FP_NAME_18 .word
 28002 = E6C5			adr.FP_NAME_19	= $E6C5
 28003 9A14			.var FP_NAME_19	= adr.FP_NAME_19 .word
 28004 = E6D5			adr.FP_NAME_20	= $E6D5
 28005 9A14			.var FP_NAME_20	= adr.FP_NAME_20 .word
 28006 = E6E5			FP_CURRENTPLAYER	= $E6E5
 28007 = E6E6			FP_CURRENTSITE	= $E6E6
 28008 = E6E7			FP_CURRENTCOMMAND	= $E6E7
 28009 = E6E8			FP_VALIDCMD	= $E6E8
 28010 = E6E9			SHOOT_DIFF	= $E6E9
 28011 = E6EA			SHOOT_START	= $E6EA
 28012 = E6EF			F_CURPOS	= $E6EF
 28013 = 0003			FIGHT_BULLETTIME	= $03
 28014 = 0014			FIGHT_HITTIME	= $14
 28015 = 0032			FIGHT_TEXTTIME	= $32
 28016 = 0005			FIGHT_ROUNDTIME	= $05
 28017 = 0046			FIGHT_DEADTIME	= $46
 28018 = A3AA			adr.FP_GANG	= [DATAORIGIN+$0754] .array [2] .word
 28019 9A14			.var FP_GANG	= adr.FP_GANG .word
 28020 = A3AE			adr.FP_NAME	= [DATAORIGIN+$0758] .array [32] .word
 28021 9A14			.var FP_NAME	= adr.FP_NAME .word
 28022 = A3EE			TMPSTR	= DATAORIGIN+$0798
 28023 = A3F0			TMP	= DATAORIGIN+$079A
 28024 = C000			adr.LOC_NAME	= $C000
 28025 9A14			.var LOC_NAME	= adr.LOC_NAME .word
 28026 = C028			adr.LOC_SUBLOCATION_NAME_1	= $C028
 28027 9A14			.var LOC_SUBLOCATION_NAME_1	= adr.LOC_SUBLOCATION_NAME_1 .word
 28028 = C050			adr.LOC_SUBLOCATION_NAME_2	= $C050
 28029 9A14			.var LOC_SUBLOCATION_NAME_2	= adr.LOC_SUBLOCATION_NAME_2 .word
 28030 = C078			adr.LOC_SUBLOCATION_NAME_3	= $C078
 28031 9A14			.var LOC_SUBLOCATION_NAME_3	= adr.LOC_SUBLOCATION_NAME_3 .word
 28032 = C0A0			adr.LOC_SUBLOCATION_NAME_4	= $C0A0
 28033 9A14			.var LOC_SUBLOCATION_NAME_4	= adr.LOC_SUBLOCATION_NAME_4 .word
 28034 = C0C8			adr.LOC_OPTIONS_1	= $C0C8
 28035 9A14			.var LOC_OPTIONS_1	= adr.LOC_OPTIONS_1 .word
 28036 = C0F0			adr.LOC_OPTIONS_2	= $C0F0
 28037 9A14			.var LOC_OPTIONS_2	= adr.LOC_OPTIONS_2 .word
 28038 = C118			adr.LOC_OPTIONS_3	= $C118
 28039 9A14			.var LOC_OPTIONS_3	= adr.LOC_OPTIONS_3 .word
 28040 = C140			adr.LOC_OPTIONS_4	= $C140
 28041 9A14			.var LOC_OPTIONS_4	= adr.LOC_OPTIONS_4 .word
 28042 = C168			adr.LOC_OPTIONS_5	= $C168
 28043 9A14			.var LOC_OPTIONS_5	= adr.LOC_OPTIONS_5 .word
 28044 = C190			adr.LOC_OPTIONS_6	= $C190
 28045 9A14			.var LOC_OPTIONS_6	= adr.LOC_OPTIONS_6 .word
 28046 = C1B8			adr.LOC_OPTIONS_7	= $C1B8
 28047 9A14			.var LOC_OPTIONS_7	= adr.LOC_OPTIONS_7 .word
 28048 = C1E0			adr.LOC_OPTIONS_8	= $C1E0
 28049 9A14			.var LOC_OPTIONS_8	= adr.LOC_OPTIONS_8 .word
 28050 = C208			adr.LOC_OPTIONS_9	= $C208
 28051 9A14			.var LOC_OPTIONS_9	= adr.LOC_OPTIONS_9 .word
 28052 = C230			adr.LOC_OPTIONS_10	= $C230
 28053 9A14			.var LOC_OPTIONS_10	= adr.LOC_OPTIONS_10 .word
 28054 = C258			adr.LOC_DESCRIPTION_1	= $C258
 28055 9A14			.var LOC_DESCRIPTION_1	= adr.LOC_DESCRIPTION_1 .word
 28056 = C280			adr.LOC_DESCRIPTION_2	= $C280
 28057 9A14			.var LOC_DESCRIPTION_2	= adr.LOC_DESCRIPTION_2 .word
 28058 = C2A9			LOC_NOPTIONS	= $C2A9
 28059 = C2AA			adr.LOC_MAP_PLACES	= $C2AA
 28060 9A14			.var LOC_MAP_PLACES	= adr.LOC_MAP_PLACES .word
 28061 = C2B0			adr.LOC_STRING_1	= $C2B0
 28062 9A14			.var LOC_STRING_1	= adr.LOC_STRING_1 .word
 28063 = C2D8			adr.LOC_STRING_2	= $C2D8
 28064 9A14			.var LOC_STRING_2	= adr.LOC_STRING_2 .word
 28065 = C300			adr.LOC_STRING_3	= $C300
 28066 9A14			.var LOC_STRING_3	= adr.LOC_STRING_3 .word
 28067 = C328			adr.LOC_STRING_4	= $C328
 28068 9A14			.var LOC_STRING_4	= adr.LOC_STRING_4 .word
 28069 = C350			adr.LOC_STRING_5	= $C350
 28070 9A14			.var LOC_STRING_5	= adr.LOC_STRING_5 .word
 28071 = C378			adr.LOC_STRING_6	= $C378
 28072 9A14			.var LOC_STRING_6	= adr.LOC_STRING_6 .word
 28073 = C3A0			adr.LOC_STRING_7	= $C3A0
 28074 9A14			.var LOC_STRING_7	= adr.LOC_STRING_7 .word
 28075 = C3C8			adr.LOC_STRING_8	= $C3C8
 28076 9A14			.var LOC_STRING_8	= adr.LOC_STRING_8 .word
 28077 = C3F0			adr.LOC_STRING_9	= $C3F0
 28078 9A14			.var LOC_STRING_9	= adr.LOC_STRING_9 .word
 28079 = C418			adr.LOC_STRING_10	= $C418
 28080 9A14			.var LOC_STRING_10	= adr.LOC_STRING_10 .word
 28081 = C440			adr.LOC_STRING_11	= $C440
 28082 9A14			.var LOC_STRING_11	= adr.LOC_STRING_11 .word
 28083 = C468			adr.LOC_STRING_12	= $C468
 28084 9A14			.var LOC_STRING_12	= adr.LOC_STRING_12 .word
 28085 = C490			adr.LOC_STRING_13	= $C490
 28086 9A14			.var LOC_STRING_13	= adr.LOC_STRING_13 .word
 28087 = C4B8			adr.LOC_STRING_14	= $C4B8
 28088 9A14			.var LOC_STRING_14	= adr.LOC_STRING_14 .word
 28089 = C4E0			adr.LOC_STRING_15	= $C4E0
 28090 9A14			.var LOC_STRING_15	= adr.LOC_STRING_15 .word
 28091 = C508			adr.LOC_STRING_16	= $C508
 28092 9A14			.var LOC_STRING_16	= adr.LOC_STRING_16 .word
 28093 = C530			adr.LOC_STRING_17	= $C530
 28094 9A14			.var LOC_STRING_17	= adr.LOC_STRING_17 .word
 28095 = C558			adr.LOC_STRING_18	= $C558
 28096 9A14			.var LOC_STRING_18	= adr.LOC_STRING_18 .word
 28097 = C580			adr.LOC_STRING_19	= $C580
 28098 9A14			.var LOC_STRING_19	= adr.LOC_STRING_19 .word
 28099 = C5A8			adr.LOC_STRING_20	= $C5A8
 28100 9A14			.var LOC_STRING_20	= adr.LOC_STRING_20 .word
 28101 = C5D0			adr.LOC_STRING_21	= $C5D0
 28102 9A14			.var LOC_STRING_21	= adr.LOC_STRING_21 .word
 28103 = C5F8			adr.LOC_STRING_22	= $C5F8
 28104 9A14			.var LOC_STRING_22	= adr.LOC_STRING_22 .word
 28105 = C620			adr.LOC_STRING_23	= $C620
 28106 9A14			.var LOC_STRING_23	= adr.LOC_STRING_23 .word
 28107 = C648			adr.LOC_STRING_24	= $C648
 28108 9A14			.var LOC_STRING_24	= adr.LOC_STRING_24 .word
 28109 = C670			adr.LOC_STRING_25	= $C670
 28110 9A14			.var LOC_STRING_25	= adr.LOC_STRING_25 .word
 28111 = C698			adr.LOC_STRING_26	= $C698
 28112 9A14			.var LOC_STRING_26	= adr.LOC_STRING_26 .word
 28113 = C6C0			adr.LOC_STRING_27	= $C6C0
 28114 9A14			.var LOC_STRING_27	= adr.LOC_STRING_27 .word
 28115 = C6E8			adr.LOC_STRING_28	= $C6E8
 28116 9A14			.var LOC_STRING_28	= adr.LOC_STRING_28 .word
 28117 = C710			adr.LOC_STRING_29	= $C710
 28118 9A14			.var LOC_STRING_29	= adr.LOC_STRING_29 .word
 28119 = C738			adr.LOC_STRING_30	= $C738
 28120 9A14			.var LOC_STRING_30	= adr.LOC_STRING_30 .word
 28121 = C760			adr.LOC_STRING_31	= $C760
 28122 9A14			.var LOC_STRING_31	= adr.LOC_STRING_31 .word
 28123 = C788			adr.LOC_STRING_32	= $C788
 28124 9A14			.var LOC_STRING_32	= adr.LOC_STRING_32 .word
 28125 = C7B0			adr.LOC_STRING_33	= $C7B0
 28126 9A14			.var LOC_STRING_33	= adr.LOC_STRING_33 .word
 28127 = C7D8			adr.LOC_STRING_34	= $C7D8
 28128 9A14			.var LOC_STRING_34	= adr.LOC_STRING_34 .word
 28129 = C800			adr.LOC_STRING_35	= $C800
 28130 9A14			.var LOC_STRING_35	= adr.LOC_STRING_35 .word
 28131 = C828			adr.LOC_STRING_36	= $C828
 28132 9A14			.var LOC_STRING_36	= adr.LOC_STRING_36 .word
 28133 = C850			adr.LOC_STRING_37	= $C850
 28134 9A14			.var LOC_STRING_37	= adr.LOC_STRING_37 .word
 28135 = C878			adr.LOC_STRING_38	= $C878
 28136 9A14			.var LOC_STRING_38	= adr.LOC_STRING_38 .word
 28137 = C8A0			adr.LOC_STRING_39	= $C8A0
 28138 9A14			.var LOC_STRING_39	= adr.LOC_STRING_39 .word
 28139 = C8C8			adr.LOC_STRING_40	= $C8C8
 28140 9A14			.var LOC_STRING_40	= adr.LOC_STRING_40 .word
 28141 = C8F0			adr.LOC_STRING_41	= $C8F0
 28142 9A14			.var LOC_STRING_41	= adr.LOC_STRING_41 .word
 28143 = C918			LOCCOLBK	= $C918
 28144 = C919			LOCCOLPF0	= $C919
 28145 = C91A			LOCCOLPF1	= $C91A
 28146 = C91B			LOCCOLPF2	= $C91B
 28147 = A3F1			adr.LOC_OPTIONS	= [DATAORIGIN+$079B] .array [10] .word
 28148 9A14			.var LOC_OPTIONS	= adr.LOC_OPTIONS .word
 28149 = A405			adr.LOC_SUBLOCATION_NAMES	= [DATAORIGIN+$07AF] .array [4] .word
 28150 9A14			.var LOC_SUBLOCATION_NAMES	= adr.LOC_SUBLOCATION_NAMES .word
 28151 = CA00			adr.GANGSTERMAP	= $CA00
 28152 9A14			.var GANGSTERMAP	= adr.GANGSTERMAP .word
 28153 = CA0A			GANGSTERCOUNT	= $CA0A
 28154 = CA0B			TMPOPPORTUNITY	= $CA0B
 28155 = CA0C			adr.PLWINNERS	= $CA0C
 28156 9A14			.var PLWINNERS	= adr.PLWINNERS .word
 28157 = CA10			PLNWINNERS	= $CA10
 28158 = CA11			PLAYMUSIC	= $CA11
 28159 = CA12			CURRENTLOCATION	= $CA12
 28160 = CA44			adr.PLGANG_1	= $CA44
 28161 9A14			.var PLGANG_1	= adr.PLGANG_1 .word
 28162 = CA54			adr.PLGANG_2	= $CA54
 28163 9A14			.var PLGANG_2	= adr.PLGANG_2 .word
 28164 = CA64			adr.PLGANG_3	= $CA64
 28165 9A14			.var PLGANG_3	= adr.PLGANG_3 .word
 28166 = CA74			adr.PLGANG_4	= $CA74
 28167 9A14			.var PLGANG_4	= adr.PLGANG_4 .word
 28168 = A40D			adr.PLGANG	= [DATAORIGIN+$07B7] .array [4] .word
 28169 9A14			.var PLGANG	= adr.PLGANG .word
 28170 = CAC2			CURRENTMONTH	= $CAC2
 28171 = CAC3			CURRENTYEAR	= $CAC3
 28172 = CAC4			GAMELENGTH	= $CAC4
 28173 = CAC5			GAMEPOINTS	= $CAC5
 28174 = CAC7			LASTACTION	= $CAC7
 28175 = CAC8			adr.GANGSTERNAME_1	= $CAC8
 28176 9A14			.var GANGSTERNAME_1	= adr.GANGSTERNAME_1 .word
 28177 = CAD8			adr.GANGSTERNAME_2	= $CAD8
 28178 9A14			.var GANGSTERNAME_2	= adr.GANGSTERNAME_2 .word
 28179 = CAE8			adr.GANGSTERNAME_3	= $CAE8
 28180 9A14			.var GANGSTERNAME_3	= adr.GANGSTERNAME_3 .word
 28181 = CAF8			adr.GANGSTERNAME_4	= $CAF8
 28182 9A14			.var GANGSTERNAME_4	= adr.GANGSTERNAME_4 .word
 28183 = CB08			adr.GANGSTERNAME_5	= $CB08
 28184 9A14			.var GANGSTERNAME_5	= adr.GANGSTERNAME_5 .word
 28185 = CB18			adr.GANGSTERNAME_6	= $CB18
 28186 9A14			.var GANGSTERNAME_6	= adr.GANGSTERNAME_6 .word
 28187 = CB28			adr.GANGSTERNAME_7	= $CB28
 28188 9A14			.var GANGSTERNAME_7	= adr.GANGSTERNAME_7 .word
 28189 = CB38			adr.GANGSTERNAME_8	= $CB38
 28190 9A14			.var GANGSTERNAME_8	= adr.GANGSTERNAME_8 .word
 28191 = CB48			adr.GANGSTERNAME_9	= $CB48
 28192 9A14			.var GANGSTERNAME_9	= adr.GANGSTERNAME_9 .word
 28193 = CB58			adr.GANGSTERNAME_10	= $CB58
 28194 9A14			.var GANGSTERNAME_10	= adr.GANGSTERNAME_10 .word
 28195 = CB68			adr.GANGSTERNAME_11	= $CB68
 28196 9A14			.var GANGSTERNAME_11	= adr.GANGSTERNAME_11 .word
 28197 = CB78			adr.GANGSTERNAME_12	= $CB78
 28198 9A14			.var GANGSTERNAME_12	= adr.GANGSTERNAME_12 .word
 28199 = CB88			adr.GANGSTERNAME_13	= $CB88
 28200 9A14			.var GANGSTERNAME_13	= adr.GANGSTERNAME_13 .word
 28201 = CB98			adr.GANGSTERNAME_14	= $CB98
 28202 9A14			.var GANGSTERNAME_14	= adr.GANGSTERNAME_14 .word
 28203 = CBA8			adr.GANGSTERNAME_15	= $CBA8
 28204 9A14			.var GANGSTERNAME_15	= adr.GANGSTERNAME_15 .word
 28205 = CBB8			adr.GANGSTERNAME_16	= $CBB8
 28206 9A14			.var GANGSTERNAME_16	= adr.GANGSTERNAME_16 .word
 28207 = CBC8			adr.GANGSTERNAME_17	= $CBC8
 28208 9A14			.var GANGSTERNAME_17	= adr.GANGSTERNAME_17 .word
 28209 = CBD8			adr.GANGSTERNAME_18	= $CBD8
 28210 9A14			.var GANGSTERNAME_18	= adr.GANGSTERNAME_18 .word
 28211 = CBE8			adr.GANGSTERNAME_19	= $CBE8
 28212 9A14			.var GANGSTERNAME_19	= adr.GANGSTERNAME_19 .word
 28213 = CBF8			adr.GANGSTERNAME_20	= $CBF8
 28214 9A14			.var GANGSTERNAME_20	= adr.GANGSTERNAME_20 .word
 28215 = CC08			adr.GANGSTERNAME_21	= $CC08
 28216 9A14			.var GANGSTERNAME_21	= adr.GANGSTERNAME_21 .word
 28217 = CC18			adr.GANGSTERNAME_22	= $CC18
 28218 9A14			.var GANGSTERNAME_22	= adr.GANGSTERNAME_22 .word
 28219 = CC28			adr.GANGSTERNAME_23	= $CC28
 28220 9A14			.var GANGSTERNAME_23	= adr.GANGSTERNAME_23 .word
 28221 = CC38			adr.GANGSTERNAME_24	= $CC38
 28222 9A14			.var GANGSTERNAME_24	= adr.GANGSTERNAME_24 .word
 28223 = CC48			adr.GANGSTERNAME_25	= $CC48
 28224 9A14			.var GANGSTERNAME_25	= adr.GANGSTERNAME_25 .word
 28225 = CC58			adr.GANGSTERNAME_26	= $CC58
 28226 9A14			.var GANGSTERNAME_26	= adr.GANGSTERNAME_26 .word
 28227 = CC68			adr.GANGSTERNAME_27	= $CC68
 28228 9A14			.var GANGSTERNAME_27	= adr.GANGSTERNAME_27 .word
 28229 = CC78			adr.GANGSTERNAME_28	= $CC78
 28230 9A14			.var GANGSTERNAME_28	= adr.GANGSTERNAME_28 .word
 28231 = CC88			adr.GANGSTERNAME_29	= $CC88
 28232 9A14			.var GANGSTERNAME_29	= adr.GANGSTERNAME_29 .word
 28233 = CC98			adr.GANGSTERNAME_30	= $CC98
 28234 9A14			.var GANGSTERNAME_30	= adr.GANGSTERNAME_30 .word
 28235 = CCA8			adr.GANGSTERNAME_31	= $CCA8
 28236 9A14			.var GANGSTERNAME_31	= adr.GANGSTERNAME_31 .word
 28237 = CCB8			adr.GANGSTERNAME_32	= $CCB8
 28238 9A14			.var GANGSTERNAME_32	= adr.GANGSTERNAME_32 .word
 28239 = CCC8			adr.GANGSTERSTR	= $CCC8
 28240 9A14			.var GANGSTERSTR	= adr.GANGSTERSTR .word
 28241 = CCE8			adr.GANGSTERINT	= $CCE8
 28242 9A14			.var GANGSTERINT	= adr.GANGSTERINT .word
 28243 = CD08			adr.GANGSTERBRUT	= $CD08
 28244 9A14			.var GANGSTERBRUT	= adr.GANGSTERBRUT .word
 28245 = CD28			adr.GANGSTERHEALTH	= $CD28
 28246 9A14			.var GANGSTERHEALTH	= adr.GANGSTERHEALTH .word
 28247 = CD48			adr.GANGSTERWEAPON	= $CD48
 28248 9A14			.var GANGSTERWEAPON	= adr.GANGSTERWEAPON .word
 28249 = CD68			adr.GANGSTERSEX	= $CD68
 28250 9A14			.var GANGSTERSEX	= adr.GANGSTERSEX .word
 28251 = CD88			CURRENTGANGSTER	= $CD88
 28252 = CD89			GAMEENDS	= $CD89
 28253 = CD8A			CURRENTPLAYER	= $CD8A
 28254 = CD8B			LOCCOL	= $CD8B
 28255 = CD8C			adr.PLRENT	= $CD8C
 28256 9A14			.var PLRENT	= adr.PLRENT .word
 28257 = CD90			CURRENTMAP	= $CD90
 28258 = CD91			adr.PLGANGSTERS	= $CD91
 28259 9A14			.var PLGANGSTERS	= adr.PLGANGSTERS .word
 28260 = CDB1			adr.PLNGANGSTERS	= $CDB1
 28261 9A14			.var PLNGANGSTERS	= adr.PLNGANGSTERS .word
 28262 = CDB5			DIDFIGHT	= $CDB5
 28263 = CDC0			SAVEGAMEMAGIC	= $CDC0
 28264 = CE70			adr.BUF_GANGSTERTEXT1	= $CE70
 28265 9A14			.var BUF_GANGSTERTEXT1	= adr.BUF_GANGSTERTEXT1 .word
 28266 = CE98			adr.BUF_GANGSTERTEXT2	= $CE98
 28267 9A14			.var BUF_GANGSTERTEXT2	= adr.BUF_GANGSTERTEXT2 .word
 28268 = CEC0			adr.BUF_GANGSTERTEXT3	= $CEC0
 28269 9A14			.var BUF_GANGSTERTEXT3	= adr.BUF_GANGSTERTEXT3 .word
 28270 = CEE8			adr.BUF_GANGSTERTEXT4	= $CEE8
 28271 9A14			.var BUF_GANGSTERTEXT4	= adr.BUF_GANGSTERTEXT4 .word
 28272 = CF10			adr.BUF_GANGSTERTEXT5	= $CF10
 28273 9A14			.var BUF_GANGSTERTEXT5	= adr.BUF_GANGSTERTEXT5 .word
 28274 = CF38			adr.BUF_GANGSTERANREDE	= $CF38
 28275 9A14			.var BUF_GANGSTERANREDE	= adr.BUF_GANGSTERANREDE .word
 28276 = CF48			BUF_GANGSTERSEX	= $CF48
 28277 = CF49			BUF_GANGSTERSTR	= $CF49
 28278 = CF4A			BUF_GANGSTERBRUT	= $CF4A
 28279 = CF4B			BUF_GANGSTERINT	= $CF4B
 28280 = CF4C			BUF_GANGSTERWEAPON	= $CF4C
 28281 = CF4D			adr.BUF_GANGSTERNAME	= $CF4D
 28282 9A14			.var BUF_GANGSTERNAME	= adr.BUF_GANGSTERNAME .word
 28283 = CF5D			BUF_GANGSTERPRICE	= $CF5D
 28284 = A415			adr.GANGSTERNAMES	= [DATAORIGIN+$07BF] .array [32] .word
 28285 9A14			.var GANGSTERNAMES	= adr.GANGSTERNAMES .word
 28286 = E700			adr.CARPRICES	= $E700
 28287 9A14			.var CARPRICES	= adr.CARPRICES .word
 28288 = E70C			adr.CARCARGO	= $E70C
 28289 9A14			.var CARCARGO	= adr.CARCARGO .word
 28290 = E712			adr.CARRANGE	= $E712
 28291 9A14			.var CARRANGE	= adr.CARRANGE .word
 28292 = E718			adr.WEAPONPRICES	= $E718
 28293 9A14			.var WEAPONPRICES	= adr.WEAPONPRICES .word
 28294 = E72A			adr.WEAPONREACH	= $E72A
 28295 9A14			.var WEAPONREACH	= adr.WEAPONREACH .word
 28296 = E733			adr.WEAPONPRECISION	= $E733
 28297 9A14			.var WEAPONPRECISION	= adr.WEAPONPRECISION .word
 28298 = E73C			adr.WEAPONEFFECT	= $E73C
 28299 9A14			.var WEAPONEFFECT	= adr.WEAPONEFFECT .word
 28300 = E745			adr.WEAPONSOUND	= $E745
 28301 9A14			.var WEAPONSOUND	= adr.WEAPONSOUND .word
 28302 = E74E			adr.FNTNAME	= $E74E
 28303 9A14			.var FNTNAME	= adr.FNTNAME .word
 28304 = E75E			adr.WANTED_M_FNAME	= $E75E
 28305 9A14			.var WANTED_M_FNAME	= adr.WANTED_M_FNAME .word
 28306 = E76E			adr.WANTED_F_FNAME	= $E76E
 28307 9A14			.var WANTED_F_FNAME	= adr.WANTED_F_FNAME .word
 28308 = E77E			adr.FIGHT_MAP_FNAME	= $E77E
 28309 9A14			.var FIGHT_MAP_FNAME	= adr.FIGHT_MAP_FNAME .word
 28310 = E78E			adr.GANGSTERFILENAME	= $E78E
 28311 9A14			.var GANGSTERFILENAME	= adr.GANGSTERFILENAME .word
 28312 = E79E			adr.LOCABANKFNAME	= $E79E
 28313 9A14			.var LOCABANKFNAME	= adr.LOCABANKFNAME .word
 28314 = E7AE			adr.LOCAFORGFNAME	= $E7AE
 28315 9A14			.var LOCAFORGFNAME	= adr.LOCAFORGFNAME .word
 28316 = E7BE			adr.LOCAMONYFNAME	= $E7BE
 28317 9A14			.var LOCAMONYFNAME	= adr.LOCAMONYFNAME .word
 28318 = E7CE			adr.LOCALOANFNAME	= $E7CE
 28319 9A14			.var LOCALOANFNAME	= adr.LOCALOANFNAME .word
 28320 = E7DE			adr.LOCAPOLIFNAME	= $E7DE
 28321 9A14			.var LOCAPOLIFNAME	= adr.LOCAPOLIFNAME .word
 28322 = E7EE			adr.LOCACARSFNAME	= $E7EE
 28323 9A14			.var LOCACARSFNAME	= adr.LOCACARSFNAME .word
 28324 = E7FE			adr.LOCAPUBBFNAME	= $E7FE
 28325 9A14			.var LOCAPUBBFNAME	= adr.LOCAPUBBFNAME .word
 28326 = E80E			adr.LOCAPUBCFNAME	= $E80E
 28327 9A14			.var LOCAPUBCFNAME	= adr.LOCAPUBCFNAME .word
 28328 = E81E			adr.LOCASTORFNAME	= $E81E
 28329 9A14			.var LOCASTORFNAME	= adr.LOCASTORFNAME .word
 28330 = E82E			adr.LOCAHIDEFNAME	= $E82E
 28331 9A14			.var LOCAHIDEFNAME	= adr.LOCAHIDEFNAME .word
 28332 = E83E			adr.LOCAGAMBFNAME	= $E83E
 28333 9A14			.var LOCAGAMBFNAME	= adr.LOCAGAMBFNAME .word
 28334 = E84E			adr.LOCASUBWFNAME	= $E84E
 28335 9A14			.var LOCASUBWFNAME	= adr.LOCASUBWFNAME .word
 28336 = E85E			adr.LOCAARMSFNAME	= $E85E
 28337 9A14			.var LOCAARMSFNAME	= adr.LOCAARMSFNAME .word
 28338 = E86E			adr.LOCAMAINFNAME	= $E86E
 28339 9A14			.var LOCAMAINFNAME	= adr.LOCAMAINFNAME .word
 28340 = E87E			adr.LOCAJOBBFNAME	= $E87E
 28341 9A14			.var LOCAJOBBFNAME	= adr.LOCAJOBBFNAME .word
 28342 = E88E			adr.LOCAMAJOFNAME	= $E88E
 28343 9A14			.var LOCAMAJOFNAME	= adr.LOCAMAJOFNAME .word
 28344 = E89E			adr.LOCACOURFNAME	= $E89E
 28345 9A14			.var LOCACOURFNAME	= adr.LOCACOURFNAME .word
 28346 = E8AE			adr.LOCACAUGFNAME	= $E8AE
 28347 9A14			.var LOCACAUGFNAME	= adr.LOCACAUGFNAME .word
 28348 = E8BE			adr.LOCAROADFNAME	= $E8BE
 28349 9A14			.var LOCAROADFNAME	= adr.LOCAROADFNAME .word
 28350 = E8CE			adr.LOCAUPDTFNAME	= $E8CE
 28351 9A14			.var LOCAUPDTFNAME	= adr.LOCAUPDTFNAME .word
 28352 = E8DE			adr.LOCASETUFNAME	= $E8DE
 28353 9A14			.var LOCASETUFNAME	= adr.LOCASETUFNAME .word
 28354 = E8EE			adr.LOCACENTFNAME	= $E8EE
 28355 9A14			.var LOCACENTFNAME	= adr.LOCACENTFNAME .word
 28356 = E8FE			adr.LOCACREDFNAME	= $E8FE
 28357 9A14			.var LOCACREDFNAME	= adr.LOCACREDFNAME .word
 28358 = E90E			adr.RANK_1	= $E90E
 28359 9A14			.var RANK_1	= adr.RANK_1 .word
 28360 = E91E			adr.RANK_2	= $E91E
 28361 9A14			.var RANK_2	= adr.RANK_2 .word
 28362 = E92E			adr.RANK_3	= $E92E
 28363 9A14			.var RANK_3	= adr.RANK_3 .word
 28364 = E93E			adr.RANK_4	= $E93E
 28365 9A14			.var RANK_4	= adr.RANK_4 .word
 28366 = E94E			adr.RANK_5	= $E94E
 28367 9A14			.var RANK_5	= adr.RANK_5 .word
 28368 = E95E			adr.RANK_6	= $E95E
 28369 9A14			.var RANK_6	= adr.RANK_6 .word
 28370 = E96E			adr.RANK_7	= $E96E
 28371 9A14			.var RANK_7	= adr.RANK_7 .word
 28372 = E97E			adr.RANK_8	= $E97E
 28373 9A14			.var RANK_8	= adr.RANK_8 .word
 28374 = E98E			adr.RANK_9	= $E98E
 28375 9A14			.var RANK_9	= adr.RANK_9 .word
 28376 = E99E			adr.RANK_10	= $E99E
 28377 9A14			.var RANK_10	= adr.RANK_10 .word
 28378 = E9AE			adr.RANK_11	= $E9AE
 28379 9A14			.var RANK_11	= adr.RANK_11 .word
 28380 = E9BE			adr.WEAPONNAME_1	= $E9BE
 28381 9A14			.var WEAPONNAME_1	= adr.WEAPONNAME_1 .word
 28382 = E9CE			adr.WEAPONNAME_2	= $E9CE
 28383 9A14			.var WEAPONNAME_2	= adr.WEAPONNAME_2 .word
 28384 = E9DE			adr.WEAPONNAME_3	= $E9DE
 28385 9A14			.var WEAPONNAME_3	= adr.WEAPONNAME_3 .word
 28386 = E9EE			adr.WEAPONNAME_4	= $E9EE
 28387 9A14			.var WEAPONNAME_4	= adr.WEAPONNAME_4 .word
 28388 = E9FE			adr.WEAPONNAME_5	= $E9FE
 28389 9A14			.var WEAPONNAME_5	= adr.WEAPONNAME_5 .word
 28390 = EA0E			adr.WEAPONNAME_6	= $EA0E
 28391 9A14			.var WEAPONNAME_6	= adr.WEAPONNAME_6 .word
 28392 = EA1E			adr.WEAPONNAME_7	= $EA1E
 28393 9A14			.var WEAPONNAME_7	= adr.WEAPONNAME_7 .word
 28394 = EA2E			adr.WEAPONNAME_8	= $EA2E
 28395 9A14			.var WEAPONNAME_8	= adr.WEAPONNAME_8 .word
 28396 = EA3E			adr.WEAPONNAME_9	= $EA3E
 28397 9A14			.var WEAPONNAME_9	= adr.WEAPONNAME_9 .word
 28398 = EA4E			adr.CARNAMES_1	= $EA4E
 28399 9A14			.var CARNAMES_1	= adr.CARNAMES_1 .word
 28400 = EA5E			adr.CARNAMES_2	= $EA5E
 28401 9A14			.var CARNAMES_2	= adr.CARNAMES_2 .word
 28402 = EA6E			adr.CARNAMES_3	= $EA6E
 28403 9A14			.var CARNAMES_3	= adr.CARNAMES_3 .word
 28404 = EA7E			adr.CARNAMES_4	= $EA7E
 28405 9A14			.var CARNAMES_4	= adr.CARNAMES_4 .word
 28406 = EA8E			adr.CARNAMES_5	= $EA8E
 28407 9A14			.var CARNAMES_5	= adr.CARNAMES_5 .word
 28408 = EA9E			adr.CARNAMES_6	= $EA9E
 28409 9A14			.var CARNAMES_6	= adr.CARNAMES_6 .word
 28410 = EAAE			PLAYERPOS_X	= $EAAE
 28411 = EAAF			PLAYERPOS_Y	= $EAAF
 28412 = EAB0			MAPPOS_X	= $EAB0
 28413 = EAB1			MAPPOS_Y	= $EAB1
 28414 = EAB2			OLDMAPPOS_X	= $EAB2
 28415 = EAB3			OLDMAPPOS_Y	= $EAB3
 28416 = EAB4			OLDPLAYERPOS_X	= $EAB4
 28417 = EAB5			OLDPLAYERPOS_Y	= $EAB5
 28418 = EAB6			adr.FPPOSSTART	= $EAB6
 28419 9A14			.var FPPOSSTART	= adr.FPPOSSTART .word
 28420 = EAF6			MAPCOLORA	= $EAF6
 28421 = EAF7			MAPCOLORB	= $EAF7
 28422 = EAF8			SPRITEMOVEDIR	= $EAF8
 28423 = EAF9			JOYSTICKUSED	= $EAF9
 28424 = EAFA			adr.FIGHT_STRING_1	= $EAFA
 28425 9A14			.var FIGHT_STRING_1	= adr.FIGHT_STRING_1 .word
 28426 = EB0A			adr.FIGHT_STRING_2	= $EB0A
 28427 9A14			.var FIGHT_STRING_2	= adr.FIGHT_STRING_2 .word
 28428 = EB1A			adr.FIGHT_STRING_3	= $EB1A
 28429 9A14			.var FIGHT_STRING_3	= adr.FIGHT_STRING_3 .word
 28430 = EB2A			adr.FIGHT_STRING_4	= $EB2A
 28431 9A14			.var FIGHT_STRING_4	= adr.FIGHT_STRING_4 .word
 28432 = EB3A			adr.FIGHT_STRING_5	= $EB3A
 28433 9A14			.var FIGHT_STRING_5	= adr.FIGHT_STRING_5 .word
 28434 = EB4A			adr.FIGHT_STRING_6	= $EB4A
 28435 9A14			.var FIGHT_STRING_6	= adr.FIGHT_STRING_6 .word
 28436 = EB5A			adr.WAITKEY_STRING	= $EB5A
 28437 9A14			.var WAITKEY_STRING	= adr.WAITKEY_STRING .word
 28438 = EB82			adr.MAP_STRING_WEAPON	= $EB82
 28439 9A14			.var MAP_STRING_WEAPON	= adr.MAP_STRING_WEAPON .word
 28440 = EB92			adr.MAP_STRING_GANGSTER	= $EB92
 28441 9A14			.var MAP_STRING_GANGSTER	= adr.MAP_STRING_GANGSTER .word
 28442 = EBA2			adr.MAP_STRING_RENT	= $EBA2
 28443 9A14			.var MAP_STRING_RENT	= adr.MAP_STRING_RENT .word
 28444 = EBB2			adr.MAP_STRING_BRIBE	= $EBB2
 28445 9A14			.var MAP_STRING_BRIBE	= adr.MAP_STRING_BRIBE .word
 28446 = EBC2			adr.MAP_STRING_CAR	= $EBC2
 28447 9A14			.var MAP_STRING_CAR	= adr.MAP_STRING_CAR .word
 28448 = EBD2			adr.MAP_STRING_STEPS	= $EBD2
 28449 9A14			.var MAP_STRING_STEPS	= adr.MAP_STRING_STEPS .word
 28450 = EBE2			adr.MAP_STRING_CARGO	= $EBE2
 28451 9A14			.var MAP_STRING_CARGO	= adr.MAP_STRING_CARGO .word
 28452 = EBF2			adr.MAP_STRING_MONEY	= $EBF2
 28453 9A14			.var MAP_STRING_MONEY	= adr.MAP_STRING_MONEY .word
 28454 = EC02			adr.MAP_STRING_CREDIT	= $EC02
 28455 9A14			.var MAP_STRING_CREDIT	= adr.MAP_STRING_CREDIT .word
 28456 = EC12			adr.FIGHT_POLICE_STRING_1	= $EC12
 28457 9A14			.var FIGHT_POLICE_STRING_1	= adr.FIGHT_POLICE_STRING_1 .word
 28458 = EC22			adr.FIGHT_POLICE_STRING_2	= $EC22
 28459 9A14			.var FIGHT_POLICE_STRING_2	= adr.FIGHT_POLICE_STRING_2 .word
 28460 = EC32			adr.NOT_ENOUGH_MONEY_STRING	= $EC32
 28461 9A14			.var NOT_ENOUGH_MONEY_STRING	= adr.NOT_ENOUGH_MONEY_STRING .word
 28462 = EC5A			adr.YOUR_CHOICE_STRING	= $EC5A
 28463 9A14			.var YOUR_CHOICE_STRING	= adr.YOUR_CHOICE_STRING .word
 28464 = EC6A			adr.POLICE_STRING_1	= $EC6A
 28465 9A14			.var POLICE_STRING_1	= adr.POLICE_STRING_1 .word
 28466 = EC92			LEN_STRING_BRIBE	= $EC92
 28467 = EC93			adr.FIGHT_STRING_7	= $EC93
 28468 9A14			.var FIGHT_STRING_7	= adr.FIGHT_STRING_7 .word
 28469 = A455			adr.RANKNAMES	= [DATAORIGIN+$07FF] .array [11] .word
 28470 9A14			.var RANKNAMES	= adr.RANKNAMES .word
 28471 = A46B			adr.WEAPONNAMES	= [DATAORIGIN+$0815] .array [9] .word
 28472 9A14			.var WEAPONNAMES	= adr.WEAPONNAMES .word
 28473 = A47D			adr.CARNAMES	= [DATAORIGIN+$0827] .array [6] .word
 28474 9A14			.var CARNAMES	= adr.CARNAMES .word
 28475 = 0C4D			adr.E7FNAME	= $0C4D
 28476 9A14			.var E7FNAME	= adr.E7FNAME .word
 28477 = 0C59			adr.SAVEFNAME	= $0C59
 28478 9A14			.var SAVEFNAME	= adr.SAVEFNAME .word
 28479 = A4CB			adr.FINALFNAME	= [DATAORIGIN+$0875] .array [33]
 28480 9A14			.var FINALFNAME	= adr.FINALFNAME .word
 28481 = A4EC			MAPRELOADED	= DATAORIGIN+$0896
 28482 = A4ED			SPRITEOFFSET	= DATAORIGIN+$0897
 28483 = A4EE			SHOWBITMAPS	= DATAORIGIN+$0898
 28484 = 0278			STICK	= $0278
 28485 = D012			PCOLR0	= $D012
 28486 = D013			PCOLR1	= $D013
 28487 = D014			PCOLR2	= $D014
 28488 = D015			PCOLR3	= $D015
 28489 = 0023			N_KEYCODE	= $23
 28490 = 002E			N_CHARCODE	= $2E
 28491 = 002D			Y_KEYCODE	= $2D
 28492 = 0034			Y_CHARCODE	= $34
 28493 = 0005			F_KEYCODE	= $05
 28494 = 002B			F_CHARCODE	= $2B
 28495 = 0025			M_KEYCODE	= $25
 28496 = 002D			M_CHARCODE	= $2D
 28497 = 0005			SHORT_GAME_KEYCODE	= $05
 28498 = 002B			SHORT_GAME_CHARCODE	= $2B
 28499 = 003A			LONG_GAME_KEYCODE	= $3A
 28500 = 0024			LONG_GAME_CHARCODE	= $24
 28501 = 003E			SHOOTING_RANGE_KEYCODE	= $3E
 28502 = 0033			SHOOTING_RANGE_CHARCODE	= $33
 28503 = 0008			TRAINING_CAMP_KEYCODE	= $08
 28504 = 002F			TRAINING_CAMP_CHARCODE	= $2F
 28505 = 0C65			adr.HEALTH_CHAR	= CODEORIGIN+$0065
 28506 9A14			.var HEALTH_CHAR	= adr.HEALTH_CHAR .word
 28507 = 0C68			adr.WEAPON_CHAR	= CODEORIGIN+$0068
 28508 9A14			.var WEAPON_CHAR	= adr.WEAPON_CHAR .word
 28509 = 000C			LEN_STRING_GANGSTER	= $0C
 28510 = 0010			FAST_ADJUST_DELAY	= $10
 28511 = 0007			SAVE_SECTOR	= $07
 28512 = 0038			SAVE_BASEBANK	= $38
 28513 = 06DF			SAVE_SIZE	= $06DF
 28514 = 0008			SAVE_PAGES	= $08
 28515 = 0020			SAVE_SLOTS	= $20
 28516 = A73B			CONSOLESTATE	= DATAORIGIN+$0AE5
 28517 = 0002			LAST_TRAIN	= $02
 28518 = 0001			BANK_	= $01
 28519 = 0002			FORGERY_	= $02
 28520 = 0003			MONEYTRANSPORT_	= $03
 28521 = 0004			LOANSHARK_	= $04
 28522 = 0005			POLICE_	= $05
 28523 = 0006			CARDEALER_	= $06
 28524 = 0007			PUB_	= $07
 28525 = 0008			MAILTRAIN_	= $08
 28526 = 0009			STORE_	= $09
 28527 = 000A			HIDEOUT_	= $0A
 28528 = 000B			GAMBLING_	= $0B
 28529 = 000C			SUBWAY_	= $0C
 28530 = 000D			ARMSDEALER_	= $0D
 28531 = 000E			TITLE_	= $0E
 28532 = 000F			NONE_	= $0F
 28533 = 0010			STREET_	= $10
 28534 = 0011			END_TURN_	= $11
 28535 = 0012			LOSTFIGHT_	= $12
 28536 = 0013			MAIN_	= $13
 28537 = 0014			PUB2_	= $14
 28538 = 0015			UPDATES_	= $15
 28539 = 0016			JOB_	= $16
 28540 = 0017			CENTRALSTATION_	= $17
 28541 = 0018			MAJOR_	= $18
 28542 = 0019			COURT_	= $19
 28543 = 001A			CAUGHT_	= $1A
 28544 = 001B			ROADBLOCK_	= $1B
 28545 = 001C			SETUP_	= $1C
 28546 = 001D			RESET_	= $1D
 28547 = 001E			CREDITS_	= $1E
 28548 = A73D			CURRENTSUBLOCATION	= DATAORIGIN+$0AE7
 28549 = A73E			adr.CURRENTSUBLOCATIONNAME	= [DATAORIGIN+$0AE8] .array [41]
 28550 9A14			.var CURRENTSUBLOCATIONNAME	= adr.CURRENTSUBLOCATIONNAME .word
 28551 = 0001			MOVESPEED	= $01
 28552 = 0030			SPRITESIZE	= $30
 28553 = 0C8E			adr.SAFECLMFNAME	= $0C8E
 28554 9A14			.var SAFECLMFNAME	= adr.SAFECLMFNAME .word
 28555 = A922			K	= DATAORIGIN+$0CCC
 28556 = A923			OUTCOME	= DATAORIGIN+$0CCD
 28557 = A924			CH	= DATAORIGIN+$0CCE
 28558 = A926			@CASETMP_0018	= DATAORIGIN+$0CD0
 28559 9A14			@exit
 28560
 28561 9A14 A2 00		@halt	ldx #$00
 28562 9A16 9A				txs
 28563
 28564 					.ifdef MAIN.@DEFINES.ROMOFF
 28565 9A17 EE 01 D3			inc portb
 28566 					.fi
 28567
 28568 9A1A A0 01			ldy #$01
 28569
 28570 9A1C 60				rts
 28571
 28572 				; ------------------------------------------------------------
 28573
 28574 9A1D			.local	@DEFINES
 28575 9A1D			ATARI
 28576 9A1D			CART
 28577 9A1D			LOCATION_PL
 28578 9A1D			CHEAT
 28579 9A1D			CPU_6502
 28580 9A1D			ROMOFF
 28581 9A1D			NOROMFONT
 28582 9A1D			BASICOFF
 28583 				.endl
 28584
 28585 9A1D			.local	@RESOURCE
 28586 				.endl
 28587
 28588 = 9A1D 00 D5		BANKS
 28588 = 9A1F A6 A3		MSX
 28588 = 9A21 24 C9		PLSTUFF
 28588 = 9A23 28 C9		PLMONEYTRANSPORTER
 28588 = 9A25 2C C9		PLKILLEDMAJOR
 28588 = 9A27 30 C9		PLMONEY
 28588 = 9A29 40 C9		PLFAKEMONEY
 28588 = 9A2B 44 C9		PLALCOHOL
 28588 = 9A2D 48 C9		PLFORGEDID
 28588 = 9A2F 4C C9		PLCAR
 28588 = 9A31 50 C9		PLSTEPS
 28588 = 9A33 54 C9		PLMAPPOSX
 28588 = 9A35 58 C9		PLMAPPOSY
 28588 = 9A37 5C C9		PLCURRENTMAP
 28588 = 9A39 60 C9		PLOPPORTUNITY
 28588 = 9A3B 64 C9		PLLOAN
 28588 = 9A3D 6C C9		PLLOANTIME
 28588 = 9A3F 70 C9		PLLOANSHARK
 28588 = 9A41 74 C9		PLRENTMONTHS
 28588 = 9A43 78 C9		PLRENTCOST
 28588 = 9A45 7C C9		PLBRIBE
 28588 = 9A47 80 C9		PLJOB
 28588 = 9A49 84 C9		PLJOBWAGE
 28588 = 9A4B 8C C9		PLJOBLOCATION
 28588 = 9A4D 94 C9		PLPRISON
 28588 = 9A4F 98 C9		PLRANK
 28588 = 9A51 9C C9		PLPOINTS
 28588 = 9A53 A0 C9		PLNEWPOINTS
 28588 = 9A55 A4 C9		PLLOANINVEST
 28588 = 9A57 AC C9		PLFREED
 28588 = 9A59 01 E4		FP_AI
 28588 = 9A5B 03 E4		FP_N
 28588 = 9A5D 05 E4		FP_POSW
 28588 = 9A5F 45 E4		FP_WEAPON
 28588 = 9A61 85 E4		FP_ENERGY
 28588 = 9A63 C5 E4		FP_STRENGTH
 28588 = 9A65 05 E5		FP_BRUTALITY
 28588 = 9A67 45 E5		FP_SEX
 28588 = 9A69 85 E5		FP_GANG_1
 28588 = 9A6B 95 E5		FP_GANG_2
 28588 = 9A6D A5 E5		FP_NAME_1
 28588 = 9A6F B5 E5		FP_NAME_2
 28588 = 9A71 C5 E5		FP_NAME_3
 28588 = 9A73 D5 E5		FP_NAME_4
 28588 = 9A75 E5 E5		FP_NAME_5
 28588 = 9A77 F5 E5		FP_NAME_6
 28588 = 9A79 05 E6		FP_NAME_7
 28588 = 9A7B 15 E6		FP_NAME_8
 28588 = 9A7D 25 E6		FP_NAME_9
 28588 = 9A7F 35 E6		FP_NAME_10
 28588 = 9A81 45 E6		FP_NAME_11
 28588 = 9A83 55 E6		FP_NAME_12
 28588 = 9A85 65 E6		FP_NAME_13
 28588 = 9A87 75 E6		FP_NAME_14
 28588 = 9A89 85 E6		FP_NAME_15
 28588 = 9A8B 95 E6		FP_NAME_16
 28588 = 9A8D A5 E6		FP_NAME_17
 28588 = 9A8F B5 E6		FP_NAME_18
 28588 = 9A91 C5 E6		FP_NAME_19
 28588 = 9A93 D5 E6		FP_NAME_20
 28588 = 9A95 AA A3		FP_GANG
 28588 = 9A97 AE A3		FP_NAME
 28588 = 9A99 00 C0		LOC_NAME
 28588 = 9A9B 28 C0		LOC_SUBLOCATION_NAME_1
 28588 = 9A9D 50 C0		LOC_SUBLOCATION_NAME_2
 28588 = 9A9F 78 C0		LOC_SUBLOCATION_NAME_3
 28588 = 9AA1 A0 C0		LOC_SUBLOCATION_NAME_4
 28588 = 9AA3 C8 C0		LOC_OPTIONS_1
 28588 = 9AA5 F0 C0		LOC_OPTIONS_2
 28588 = 9AA7 18 C1		LOC_OPTIONS_3
 28588 = 9AA9 40 C1		LOC_OPTIONS_4
 28588 = 9AAB 68 C1		LOC_OPTIONS_5
 28588 = 9AAD 90 C1		LOC_OPTIONS_6
 28588 = 9AAF B8 C1		LOC_OPTIONS_7
 28588 = 9AB1 E0 C1		LOC_OPTIONS_8
 28588 = 9AB3 08 C2		LOC_OPTIONS_9
 28588 = 9AB5 30 C2		LOC_OPTIONS_10
 28588 = 9AB7 58 C2		LOC_DESCRIPTION_1
 28588 = 9AB9 80 C2		LOC_DESCRIPTION_2
 28588 = 9ABB AA C2		LOC_MAP_PLACES
 28588 = 9ABD B0 C2		LOC_STRING_1
 28588 = 9ABF D8 C2		LOC_STRING_2
 28588 = 9AC1 00 C3		LOC_STRING_3
 28588 = 9AC3 28 C3		LOC_STRING_4
 28588 = 9AC5 50 C3		LOC_STRING_5
 28588 = 9AC7 78 C3		LOC_STRING_6
 28588 = 9AC9 A0 C3		LOC_STRING_7
 28588 = 9ACB C8 C3		LOC_STRING_8
 28588 = 9ACD F0 C3		LOC_STRING_9
 28588 = 9ACF 18 C4		LOC_STRING_10
 28588 = 9AD1 40 C4		LOC_STRING_11
 28588 = 9AD3 68 C4		LOC_STRING_12
 28588 = 9AD5 90 C4		LOC_STRING_13
 28588 = 9AD7 B8 C4		LOC_STRING_14
 28588 = 9AD9 E0 C4		LOC_STRING_15
 28588 = 9ADB 08 C5		LOC_STRING_16
 28588 = 9ADD 30 C5		LOC_STRING_17
 28588 = 9ADF 58 C5		LOC_STRING_18
 28588 = 9AE1 80 C5		LOC_STRING_19
 28588 = 9AE3 A8 C5		LOC_STRING_20
 28588 = 9AE5 D0 C5		LOC_STRING_21
 28588 = 9AE7 F8 C5		LOC_STRING_22
 28588 = 9AE9 20 C6		LOC_STRING_23
 28588 = 9AEB 48 C6		LOC_STRING_24
 28588 = 9AED 70 C6		LOC_STRING_25
 28588 = 9AEF 98 C6		LOC_STRING_26
 28588 = 9AF1 C0 C6		LOC_STRING_27
 28588 = 9AF3 E8 C6		LOC_STRING_28
 28588 = 9AF5 10 C7		LOC_STRING_29
 28588 = 9AF7 38 C7		LOC_STRING_30
 28588 = 9AF9 60 C7		LOC_STRING_31
 28588 = 9AFB 88 C7		LOC_STRING_32
 28588 = 9AFD B0 C7		LOC_STRING_33
 28588 = 9AFF D8 C7		LOC_STRING_34
 28588 = 9B01 00 C8		LOC_STRING_35
 28588 = 9B03 28 C8		LOC_STRING_36
 28588 = 9B05 50 C8		LOC_STRING_37
 28588 = 9B07 78 C8		LOC_STRING_38
 28588 = 9B09 A0 C8		LOC_STRING_39
 28588 = 9B0B C8 C8		LOC_STRING_40
 28588 = 9B0D F0 C8		LOC_STRING_41
 28588 = 9B0F F1 A3		LOC_OPTIONS
 28588 = 9B11 05 A4		LOC_SUBLOCATION_NAMES
 28588 = 9B13 00 CA		GANGSTERMAP
 28588 = 9B15 0C CA		PLWINNERS
 28588 = 9B17 44 CA		PLGANG_1
 28588 = 9B19 54 CA		PLGANG_2
 28588 = 9B1B 64 CA		PLGANG_3
 28588 = 9B1D 74 CA		PLGANG_4
 28588 = 9B1F 0D A4		PLGANG
 28588 = 9B21 C8 CA		GANGSTERNAME_1
 28588 = 9B23 D8 CA		GANGSTERNAME_2
 28588 = 9B25 E8 CA		GANGSTERNAME_3
 28588 = 9B27 F8 CA		GANGSTERNAME_4
 28588 = 9B29 08 CB		GANGSTERNAME_5
 28588 = 9B2B 18 CB		GANGSTERNAME_6
 28588 = 9B2D 28 CB		GANGSTERNAME_7
 28588 = 9B2F 38 CB		GANGSTERNAME_8
 28588 = 9B31 48 CB		GANGSTERNAME_9
 28588 = 9B33 58 CB		GANGSTERNAME_10
 28588 = 9B35 68 CB		GANGSTERNAME_11
 28588 = 9B37 78 CB		GANGSTERNAME_12
 28588 = 9B39 88 CB		GANGSTERNAME_13
 28588 = 9B3B 98 CB		GANGSTERNAME_14
 28588 = 9B3D A8 CB		GANGSTERNAME_15
 28588 = 9B3F B8 CB		GANGSTERNAME_16
 28588 = 9B41 C8 CB		GANGSTERNAME_17
 28588 = 9B43 D8 CB		GANGSTERNAME_18
 28588 = 9B45 E8 CB		GANGSTERNAME_19
 28588 = 9B47 F8 CB		GANGSTERNAME_20
 28588 = 9B49 08 CC		GANGSTERNAME_21
 28588 = 9B4B 18 CC		GANGSTERNAME_22
 28588 = 9B4D 28 CC		GANGSTERNAME_23
 28588 = 9B4F 38 CC		GANGSTERNAME_24
 28588 = 9B51 48 CC		GANGSTERNAME_25
 28588 = 9B53 58 CC		GANGSTERNAME_26
 28588 = 9B55 68 CC		GANGSTERNAME_27
 28588 = 9B57 78 CC		GANGSTERNAME_28
 28588 = 9B59 88 CC		GANGSTERNAME_29
 28588 = 9B5B 98 CC		GANGSTERNAME_30
 28588 = 9B5D A8 CC		GANGSTERNAME_31
 28588 = 9B5F B8 CC		GANGSTERNAME_32
 28588 = 9B61 C8 CC		GANGSTERSTR
 28588 = 9B63 E8 CC		GANGSTERINT
 28588 = 9B65 08 CD		GANGSTERBRUT
 28588 = 9B67 28 CD		GANGSTERHEALTH
 28588 = 9B69 48 CD		GANGSTERWEAPON
 28588 = 9B6B 68 CD		GANGSTERSEX
 28588 = 9B6D 8C CD		PLRENT
 28588 = 9B6F 91 CD		PLGANGSTERS
 28588 = 9B71 B1 CD		PLNGANGSTERS
 28588 = 9B73 70 CE		BUF_GANGSTERTEXT1
 28588 = 9B75 98 CE		BUF_GANGSTERTEXT2
 28588 = 9B77 C0 CE		BUF_GANGSTERTEXT3
 28588 = 9B79 E8 CE		BUF_GANGSTERTEXT4
 28588 = 9B7B 10 CF		BUF_GANGSTERTEXT5
 28588 = 9B7D 38 CF		BUF_GANGSTERANREDE
 28588 = 9B7F 4D CF		BUF_GANGSTERNAME
 28588 = 9B81 15 A4		GANGSTERNAMES
 28588 = 9B83 00 E7		CARPRICES
 28588 = 9B85 0C E7		CARCARGO
 28588 = 9B87 12 E7		CARRANGE
 28588 = 9B89 18 E7		WEAPONPRICES
 28588 = 9B8B 2A E7		WEAPONREACH
 28588 = 9B8D 33 E7		WEAPONPRECISION
 28588 = 9B8F 3C E7		WEAPONEFFECT
 28588 = 9B91 45 E7		WEAPONSOUND
 28588 = 9B93 4E E7		FNTNAME
 28588 = 9B95 5E E7		WANTED_M_FNAME
 28588 = 9B97 6E E7		WANTED_F_FNAME
 28588 = 9B99 7E E7		FIGHT_MAP_FNAME
 28588 = 9B9B 8E E7		GANGSTERFILENAME
 28588 = 9B9D 9E E7		LOCABANKFNAME
 28588 = 9B9F AE E7		LOCAFORGFNAME
 28588 = 9BA1 BE E7		LOCAMONYFNAME
 28588 = 9BA3 CE E7		LOCALOANFNAME
 28588 = 9BA5 DE E7		LOCAPOLIFNAME
 28588 = 9BA7 EE E7		LOCACARSFNAME
 28588 = 9BA9 FE E7		LOCAPUBBFNAME
 28588 = 9BAB 0E E8		LOCAPUBCFNAME
 28588 = 9BAD 1E E8		LOCASTORFNAME
 28588 = 9BAF 2E E8		LOCAHIDEFNAME
 28588 = 9BB1 3E E8		LOCAGAMBFNAME
 28588 = 9BB3 4E E8		LOCASUBWFNAME
 28588 = 9BB5 5E E8		LOCAARMSFNAME
 28588 = 9BB7 6E E8		LOCAMAINFNAME
 28588 = 9BB9 7E E8		LOCAJOBBFNAME
 28588 = 9BBB 8E E8		LOCAMAJOFNAME
 28588 = 9BBD 9E E8		LOCACOURFNAME
 28588 = 9BBF AE E8		LOCACAUGFNAME
 28588 = 9BC1 BE E8		LOCAROADFNAME
 28588 = 9BC3 CE E8		LOCAUPDTFNAME
 28588 = 9BC5 DE E8		LOCASETUFNAME
 28588 = 9BC7 EE E8		LOCACENTFNAME
 28588 = 9BC9 FE E8		LOCACREDFNAME
 28588 = 9BCB 0E E9		RANK_1
 28588 = 9BCD 1E E9		RANK_2
 28588 = 9BCF 2E E9		RANK_3
 28588 = 9BD1 3E E9		RANK_4
 28588 = 9BD3 4E E9		RANK_5
 28588 = 9BD5 5E E9		RANK_6
 28588 = 9BD7 6E E9		RANK_7
 28588 = 9BD9 7E E9		RANK_8
 28588 = 9BDB 8E E9		RANK_9
 28588 = 9BDD 9E E9		RANK_10
 28588 = 9BDF AE E9		RANK_11
 28588 = 9BE1 BE E9		WEAPONNAME_1
 28588 = 9BE3 CE E9		WEAPONNAME_2
 28588 = 9BE5 DE E9		WEAPONNAME_3
 28588 = 9BE7 EE E9		WEAPONNAME_4
 28588 = 9BE9 FE E9		WEAPONNAME_5
 28588 = 9BEB 0E EA		WEAPONNAME_6
 28588 = 9BED 1E EA		WEAPONNAME_7
 28588 = 9BEF 2E EA		WEAPONNAME_8
 28588 = 9BF1 3E EA		WEAPONNAME_9
 28588 = 9BF3 4E EA		CARNAMES_1
 28588 = 9BF5 5E EA		CARNAMES_2
 28588 = 9BF7 6E EA		CARNAMES_3
 28588 = 9BF9 7E EA		CARNAMES_4
 28588 = 9BFB 8E EA		CARNAMES_5
 28588 = 9BFD 9E EA		CARNAMES_6
 28588 = 9BFF B6 EA		FPPOSSTART
 28588 = 9C01 FA EA		FIGHT_STRING_1
 28588 = 9C03 0A EB		FIGHT_STRING_2
 28588 = 9C05 1A EB		FIGHT_STRING_3
 28588 = 9C07 2A EB		FIGHT_STRING_4
 28588 = 9C09 3A EB		FIGHT_STRING_5
 28588 = 9C0B 4A EB		FIGHT_STRING_6
 28588 = 9C0D 5A EB		WAITKEY_STRING
 28588 = 9C0F 82 EB		MAP_STRING_WEAPON
 28588 = 9C11 92 EB		MAP_STRING_GANGSTER
 28588 = 9C13 A2 EB		MAP_STRING_RENT
 28588 = 9C15 B2 EB		MAP_STRING_BRIBE
 28588 = 9C17 C2 EB		MAP_STRING_CAR
 28588 = 9C19 D2 EB		MAP_STRING_STEPS
 28588 = 9C1B E2 EB		MAP_STRING_CARGO
 28588 = 9C1D F2 EB		MAP_STRING_MONEY
 28588 = 9C1F 02 EC		MAP_STRING_CREDIT
 28588 = 9C21 12 EC		FIGHT_POLICE_STRING_1
 28588 = 9C23 22 EC		FIGHT_POLICE_STRING_2
 28588 = 9C25 32 EC		NOT_ENOUGH_MONEY_STRING
 28588 = 9C27 5A EC		YOUR_CHOICE_STRING
 28588 = 9C29 6A EC		POLICE_STRING_1
 28588 = 9C2B 93 EC		FIGHT_STRING_7
 28588 = 9C2D 55 A4		RANKNAMES
 28588 = 9C2F 6B A4		WEAPONNAMES
 28588 = 9C31 7D A4		CARNAMES
 28588 = 9C33 4D 0C		E7FNAME
 28588 = 9C35 59 0C		SAVEFNAME
 28588 = 9C37 CB A4		FINALFNAME
 28588 = 9C39 65 0C		HEALTH_CHAR
 28588 = 9C3B 68 0C		WEAPON_CHAR
 28588 = 9C3D 3E A7		CURRENTSUBLOCATIONNAME
 28588 = 9C3F 8E 0C		SAFECLMFNAME
 28588 				.endl							; MAIN
 28589
 28590 				; ------------------------------------------------------------
 28591 				; ------------------------------------------------------------
 28592
 28593 				.macro	UNITINITIALIZATION
 28594 				
 28595 					.ifdef MAIN.SYSTEM.@UnitInit
 28596 					jsr MAIN.SYSTEM.@UnitInit
 28597 					.fi
 28598 				
 28599 					.ifdef MAIN.ATARI.@UnitInit
 28600 					jsr MAIN.ATARI.@UnitInit
 28601 					.fi
 28602 				
 28603 					.ifdef MAIN.MATH.@UnitInit
 28604 					jsr MAIN.MATH.@UnitInit
 28605 					.fi
 28606 				
 28607 					.ifdef MAIN.PMG.@UnitInit
 28608 					jsr MAIN.PMG.@UnitInit
 28609 					.fi
 28610 				
 28611 					.ifdef MAIN.XBIOS.@UnitInit
 28612 					jsr MAIN.XBIOS.@UnitInit
 28613 					.fi
 28614 				
 28615 					.ifdef MAIN.CRT.@UnitInit
 28616 					jsr MAIN.CRT.@UnitInit
 28617 					.fi
 28618 				
 28619 					.ifdef MAIN.B_UTILS.@UnitInit
 28620 					jsr MAIN.B_UTILS.@UnitInit
 28621 					.fi
 28622 				
 28623 					.ifdef MAIN.MISC.@UnitInit
 28624 					jsr MAIN.MISC.@UnitInit
 28625 					.fi
 28626 				
 28627 					.ifdef MAIN.RMT.@UnitInit
 28628 					jsr MAIN.RMT.@UnitInit
 28629 					.fi
 28630 				
 28631 					.ifdef MAIN.DOS.@UnitInit
 28632 					jsr MAIN.DOS.@UnitInit
 28633 					.fi
 28634 				
 28635 					.ifdef MAIN.STRUTILS.@UnitInit
 28636 					jsr MAIN.STRUTILS.@UnitInit
 28637 					.fi
 28638 				
 28639 					.ifdef MAIN.SYSUTILS.@UnitInit
 28640 					jsr MAIN.SYSUTILS.@UnitInit
 28641 					.fi
 28642 				
 28643 					.ifdef MAIN.B_SYSTEM.@UnitInit
 28644 					jsr MAIN.B_SYSTEM.@UnitInit
 28645 					.fi
 28646 				
 28647 					.ifdef MAIN.B_CRT.@UnitInit
 28648 					jsr MAIN.B_CRT.@UnitInit
 28649 					.fi
 28650 				.endm
 28651
 28652 				; ------------------------------------------------------------
 28653
 28654 					ift .SIZEOF(MAIN.SYSTEM) > 0
 28655 					.print 'SYSTEM: ',MAIN.SYSTEM,'..',MAIN.SYSTEM+.SIZEOF(MAIN.SYSTEM)-1
 28655 				SYSTEM: $1337..$1473
 28656 					eif
 28657
 28658 					ift .SIZEOF(MAIN.ATARI) > 0
 28659 					.print 'ATARI: ',MAIN.ATARI,'..',MAIN.ATARI+.SIZEOF(MAIN.ATARI)-1
 28660 					eif
 28661
 28662 					ift .SIZEOF(MAIN.MATH) > 0
 28663 					.print 'MATH: ',MAIN.MATH,'..',MAIN.MATH+.SIZEOF(MAIN.MATH)-1
 28664 					eif
 28665
 28666 					ift .SIZEOF(MAIN.PMG) > 0
 28667 					.print 'PMG: ',MAIN.PMG,'..',MAIN.PMG+.SIZEOF(MAIN.PMG)-1
 28667 				PMG: $1474..$1477
 28668 					eif
 28669
 28670 					ift .SIZEOF(MAIN.XBIOS) > 0
 28671 					.print 'XBIOS: ',MAIN.XBIOS,'..',MAIN.XBIOS+.SIZEOF(MAIN.XBIOS)-1
 28671 				XBIOS: $1478..$14D8
 28672 					eif
 28673
 28674 					ift .SIZEOF(MAIN.CRT) > 0
 28675 					.print 'CRT: ',MAIN.CRT,'..',MAIN.CRT+.SIZEOF(MAIN.CRT)-1
 28676 					eif
 28677
 28678 					ift .SIZEOF(MAIN.B_UTILS) > 0
 28679 					.print 'B_UTILS: ',MAIN.B_UTILS,'..',MAIN.B_UTILS+.SIZEOF(MAIN.B_UTILS)-1
 28679 				B_UTILS: $14D9..$14DA
 28680 					eif
 28681
 28682 					ift .SIZEOF(MAIN.MISC) > 0
 28683 					.print 'MISC: ',MAIN.MISC,'..',MAIN.MISC+.SIZEOF(MAIN.MISC)-1
 28683 				MISC: $14DB..$1504
 28684 					eif
 28685
 28686 					ift .SIZEOF(MAIN.RMT) > 0
 28687 					.print 'RMT: ',MAIN.RMT,'..',MAIN.RMT+.SIZEOF(MAIN.RMT)-1
 28687 				RMT: $1505..$15C4
 28688 					eif
 28689
 28690 					ift .SIZEOF(MAIN.DOS) > 0
 28691 					.print 'DOS: ',MAIN.DOS,'..',MAIN.DOS+.SIZEOF(MAIN.DOS)-1
 28692 					eif
 28693
 28694 					ift .SIZEOF(MAIN.STRUTILS) > 0
 28695 					.print 'STRUTILS: ',MAIN.STRUTILS,'..',MAIN.STRUTILS+.SIZEOF(MAIN.STRUTILS)-1
 28696 					eif
 28697
 28698 					ift .SIZEOF(MAIN.SYSUTILS) > 0
 28699 					.print 'SYSUTILS: ',MAIN.SYSUTILS,'..',MAIN.SYSUTILS+.SIZEOF(MAIN.SYSUTILS)-1
 28699 				SYSUTILS: $15C5..$1638
 28700 					eif
 28701
 28702 					ift .SIZEOF(MAIN.B_SYSTEM) > 0
 28703 					.print 'B_SYSTEM: ',MAIN.B_SYSTEM,'..',MAIN.B_SYSTEM+.SIZEOF(MAIN.B_SYSTEM)-1
 28703 				B_SYSTEM: $1639..$16DE
 28704 					eif
 28705
 28706 					ift .SIZEOF(MAIN.B_CRT) > 0
 28707 					.print 'B_CRT: ',MAIN.B_CRT,'..',MAIN.B_CRT+.SIZEOF(MAIN.B_CRT)-1
 28707 				B_CRT: $16DF..$1ABC
 28708 					eif
 28709
 28710 				.nowarn	.print 'CODE: ',CODEORIGIN,'..',MAIN.@RESOURCE-1
 28710 				CODE: $0C00..$9A1C
 28711
 28712 					ift .SIZEOF(MAIN.@RESOURCE)>0
 28713 				.nowarn	.print 'RESOURCE: ',MAIN.@RESOURCE,'..',MAIN.@RESOURCE+.SIZEOF(MAIN.@RESOURCE)-1
 28714 					eif
 28715
 28716 9C41			@end
 28717
 28718 				.nowarn	.print 'VARS: ',MAIN.@RESOURCE+.SIZEOF(MAIN.@RESOURCE),'..',@end-1
 28718 				VARS: $9A1D..$9C40
 28719
 28720 				; ------------------------------------------------------------
 28721
 28722 = 9C41				?adr = *
 28723 					ift (?adr < ?old_adr) && (?old_adr - ?adr < $120)
 28724 = 9C56				?adr = ?old_adr
 28725 					eif
 28726
 28727 					org ?adr
 28728 = 9C56				?old_adr = *
 28729
 28730 9C56			DATAORIGIN
 28731 9C56-A488> 2D 0C 00 00 + .by  $2D $0C $00 $00 $00 $28 $00 $18  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28732 9C6E 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28733 9C86 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28734 9C9E 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28735 9CB6 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28736 9CCE 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28737 9CE6 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28738 9CFE 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28739 9D16 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28740 9D2E 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28741 9D46 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28742 9D5E 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28743 9D76 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $02 $08 $80 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28744 9D8E 01 0C 00 00 00 00 + .by  <[CODEORIGIN+$0001] >[CODEORIGIN+$0001] $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28745 9DA6 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28746 9DBE 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28747 9DD6 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28748 9DEE 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28749 9E06 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $1F $1C $1F $1E $1F $1E  $1F $1F $1E $1F $1E $1F $00 $00
 28750 9E1E 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28751 9E36 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28752 9E4E 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28753 9E66 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28754 9E7E 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28755 9E96 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28756 9EAE 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28757 9EC6 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28758 9EDE 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28759 9EF6 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28760 9F0E 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28761 9F26 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28762 9F3E 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28763 9F56 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28764 9F6E 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28765 9F86 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28766 9F9E 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28767 9FB6 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28768 9FCE 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28769 9FE6 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28770 9FFE 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28771 A016 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28772 A02E 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28773 A046 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28774 A05E 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28775 A076 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28776 A08E 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28777 A0A6 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28778 A0BE 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28779 A0D6 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28780 A0EE 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28781 A106 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28782 A11E 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28783 A136 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28784 A14E 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28785 A166 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28786 A17E 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28787 A196 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28788 A1AE 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28789 A1C6 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28790 A1DE 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28791 A1F6 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28792 A20E 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28793 A226 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28794 A23E 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28795 A256 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28796 A26E 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28797 A286 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28798 A29E 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28799 A2B6 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28800 A2CE 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28801 A2E6 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28802 A2FE 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28803 A316 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28804 A32E 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28805 A346 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28806 A35E 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28807 A376 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28808 A38E 00 00 00 00 00 00 + .by  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00  $00 $00 $00 $00 $00 $00 $00 $00
 28809 A3A6 00 00 00 00 85 E5 + .by  $00 $00 $00 $00 $85 $E5 $95 $E5  $A5 $E5 $B5 $E5 $C5 $E5 $D5 $E5  $E5 $E5 $F5 $E5 $05 $E6 $15 $E6
 28810 A3BE 25 E6 35 E6 35 E6 + .by  $25 $E6 $35 $E6 $35 $E6 $35 $E6  $35 $E6 $35 $E6 $35 $E6 $35 $E6  $45 $E6 $55 $E6 $65 $E6 $75 $E6
 28811 A3D6 85 E6 95 E6 A5 E6 + .by  $85 $E6 $95 $E6 $A5 $E6 $B5 $E6  $C5 $E6 $D5 $E6 $D5 $E6 $D5 $E6  $D5 $E6 $D5 $E6 $D5 $E6 $D5 $E6
 28812 A3EE 00 00 00 C8 C0 F0 + .by  $00 $00 $00 $C8 $C0 $F0 $C0 $18  $C1 $40 $C1 $68 $C1 $90 $C1 $B8  $C1 $E0 $C1 $08 $C2 $30 $C2 $28
 28813 A406 C0 50 C0 78 C0 A0 + .by  $C0 $50 $C0 $78 $C0 $A0 $C0 $44  $CA $54 $CA $64 $CA $74 $CA $C8  $CA $D8 $CA $E8 $CA $F8 $CA $08
 28814 A41E CB 18 CB 28 CB 38 + .by  $CB $18 $CB $28 $CB $38 $CB $48  $CB $58 $CB $68 $CB $78 $CB $88  $CB $98 $CB $A8 $CB $B8 $CB $C8
 28815 A436 CB D8 CB E8 CB F8 + .by  $CB $D8 $CB $E8 $CB $F8 $CB $08  $CC $18 $CC $28 $CC $38 $CC $48  $CC $58 $CC $68 $CC $78 $CC $88
 28816 A44E CC 98 CC A8 CC B8 + .by  $CC $98 $CC $A8 $CC $B8 $CC $0E  $E9 $1E $E9 $2E $E9 $3E $E9 $4E  $E9 $5E $E9 $6E $E9 $7E $E9 $8E
 28817 A466 E9 9E E9 AE E9 BE + .by  $E9 $9E $E9 $AE $E9 $BE $E9 $CE  $E9 $DE $E9 $EE $E9 $FE $E9 $0E  $EA $1E $EA $2E $EA $3E $EA $4E
 28818 A47E EA 5E EA 6E EA 7E + .by  $EA $5E $EA $6E $EA $7E $EA $8E  $EA $9E $EA
 28819
 28820 = 0833			VARINITSIZE	= *-DATAORIGIN
 28821 = 0CD3			VARDATASIZE	= 3283
 28822
 28823 = A929			PROGRAMSTACK	= DATAORIGIN+VARDATASIZE
 28824
 28825 					.print 'DATA: ',DATAORIGIN,'..',PROGRAMSTACK
 28825 				DATA: $9C56..$A929
 28826
 28827 					ert DATAORIGIN<@end,'DATA memory overlap'
 28828
 28829 02E0-02E1> AA 12			run START
 28830
 28831 				; ------------------------------------------------------------
 28832
 28833 				.macro	STATICDATA
 28834 				.by  $40 $41 $42 $43 $44 $45 $46 $47  $48 $49 $4A $4B $4C $4D $4E $4F  $50 $51 $52 $53 $54 $55 $56 $57
 28835 				.by  $58 $59 $5A $61 $62 $63 $64 $65  $66 $67 $68 $69 $6A $6B $6C $6D  $6E $6F $70 $71 $72 $73 $74 $75
 28836 				.by  $76 $77 $78 $79 $7A $30 $31 $32  $33 $34 $35 $36 $37 $38 $39 $2B  $2F $00 $04 $54 $52 $55 $45 $05
 28837 				.by  $46 $41 $4C $53 $45 $0B $45 $37  $30 $30 $50 $41 $47 $45 $41 $50  $4C $0B $53 $41 $56 $45 $47 $41
 28838 				.by  $4D $45 $44 $41 $54 $02 $25 $1A  $02 $22 $1A $02 $00 $00 $04 $00  $00 $00 $00 $02 $04 $01 $03 $00
 28839 				.by  $0D $00 $02 $33 $1A $03 $00 $29  $1A $03 $00 $22 $1A $02 $0C $00  $02 $04 $00 $02 $09 $00 $0B $53
 28840 				.by  $41 $46 $45 $43 $42 $4D $50 $41  $50 $4C $02 $00 $08 $02 $04 $09  $02 $04 $0E $02 $09 $1F $04 $04
 28841 				.by  $09 $1F $00 $03 $0E $0E $0E $03  $08 $10 $0D $02 $01 $01 $03 $00  $00 $00 $03 $00 $2D $09 $03 $09
 28842 				.by  $1F $00 $0B $46 $49 $4E $41 $47  $50 $49 $43 $41 $50 $4C $0B $46  $4D $55 $53 $42 $38 $30 $30 $41
 28843 				.by  $50 $4C $0B $50 $4C $41 $59 $42  $30 $52 $5A $41 $50 $4C $6C $6A  $3B $FF $FF $6B $2B $2A $6F $FF
 28844 				.by  $70 $75 $9B $69 $2D $3D $76 $FF  $63 $FF $FF $62 $78 $7A $34 $FF  $33 $36 $1B $35 $32 $31 $2C $20
 28845 				.by  $2E $6E $FF $6D $2F $81 $72 $FF  $65 $79 $7F $74 $77 $71 $39 $FF  $30 $37 $7E $38 $3E $FF $66 $68
 28846 				.by  $64 $FF $82 $67 $73 $61 $4C $4A  $3A $FF $FF $4B $5C $5E $4F $FF  $50 $55 $FF $49 $5F $7C $56 $FF
 28847 				.by  $43 $FF $FF $42 $58 $5A $24 $FF  $23 $26 $FF $25 $22 $21 $5B $3B  $5D $4E $FF $4D $3F $FF $52 $FF
 28848 				.by  $45 $59 $FF $54 $57 $51 $28 $FF  $29 $27 $FF $40 $FF $FF $46 $48  $44 $FF $FF $47 $53 $41 $FF $FF
 28849 				.by  $FF $FF $FF $FF $FF $FF $FF $FF  $FF $FF $FF $FF $FF $FF $FF $FF  $FF $FF $FF $FF $FF $FF $FF $FF
 28850 				.by  $FF $FF $FF $FF $FF $FF $FF $FF  $FF $FF $FF $FF $FF $FF $FF $FF  $FF $FF $FF $FF $FF $FF $FF $FF
 28851 				.by  $FF $FF $FF $FF $FF $FF $FF $FF  $FF $FF $FF $FF $FF $FF $FF $FF  $FF $FF $FF $FF $FF $FF $FF $FF
 28852 				.by  $FF $FF $FF $FF $FF $FF $FF $FF  $FF $FF $FF $FF $FF $FF $FF $FF  $FF $FF $FF $FF $FF $FF $FF $FF
 28853 				.by  $FF $FF $FF $FF $FF $FF $FF $FF  $FF $FF $FF $FF $FF $FF $FF $FF  $FF $FF $FF $FF $FF $FF $FF $FF
 28854 				.by  $FF $FF $FF $FF $FF $FF
 28855 				.endm
 28856
 28857 					end
